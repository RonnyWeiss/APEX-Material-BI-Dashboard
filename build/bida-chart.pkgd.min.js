!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-hierarchy"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom"));else if("function"==typeof define&&define.amd)define(["d3-axis","d3-brush","d3-drag","d3-dsv","d3-ease","d3-hierarchy","d3-interpolate","d3-scale","d3-selection","d3-shape","d3-time-format","d3-transition","d3-zoom"],e);else{var i,n="object"==typeof exports?e(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-hierarchy"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom")):e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3);for(i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(e,a,r,s,o,l,c,h,d,u,g,f,p){return function(){"use strict";var i=[,,function(t){t.exports=d},function(t){t.exports=a},function(t){t.exports=g},function(t){t.exports=s},function(t){t.exports=h},function(t){t.exports=r},function(t){t.exports=f},function(t){t.exports=u},function(t){t.exports=e},function(t){t.exports=o},function(t){t.exports=c},function(t){t.exports=l},function(t){t.exports=p}],n={};function Zn(t){var e=n[t];if(void 0!==e)return e.exports;e=n[t]={exports:{}};return i[t](e,e.exports,Zn),e.exports}Zn.d=function(t,e){for(var i in e)Zn.o(e,i)&&!Zn.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},Zn.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},Zn.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var qn={};return function(){Zn.r(qn),Zn.d(qn,{bb:function(){return Un},default:function(){return Un}});var e={};Zn.r(e),Zn.d(e,{area:function(){return dn},areaLineRange:function(){return un},areaSpline:function(){return gn},areaSplineRange:function(){return fn},areaStep:function(){return pn},bar:function(){return An},bubble:function(){return Sn},candlestick:function(){return kn},donut:function(){return _n},gauge:function(){return mn},line:function(){return xn},pie:function(){return yn},polar:function(){return Tn},radar:function(){return wn},scatter:function(){return Cn},spline:function(){return vn},step:function(){return bn},treemap:function(){return Rn}});var i={};function I(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}Zn.r(i),Zn.d(i,{selection:function(){return Vn},subchart:function(){return Yn},zoom:function(){return Hn}});var o=Zn(4),D=Zn(2),n=void 0,y=function(){return I(this,n),"object"==typeof globalThis&&null!==globalThis&&globalThis.Object===Object&&globalThis||"object"==typeof global&&null!==global&&global.Object===Object&&global||"object"==typeof self&&null!==self&&self.Object===Object&&self||Function("return this")()}.bind(void 0)(),t="function"==typeof y.requestAnimationFrame,a="function"==typeof y.requestIdleCallback,r=t?y.requestAnimationFrame:function(t){return I(this,n),setTimeout(t,1)}.bind(void 0),s=t?y.cancelAnimationFrame:function(t){return I(this,n),clearTimeout(t)}.bind(void 0),l=a?y.requestIdleCallback:r,p=(a&&y.cancelIdleCallback,null==y?void 0:y.document),k={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",POLAR:"polar",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step",TREEMAP:"treemap"},c={AREA:"initArea",AREA_LINE_RANGE:"initArea",AREA_SPLINE:"initArea",AREA_SPLINE_RANGE:"initArea",AREA_STEP:"initArea",BAR:"initBar",BUBBLE:"initCircle",CANDLESTICK:"initCandlestick",DONUT:"initArc",GAUGE:"initArc",LINE:"initLine",PIE:"initArc",POLAR:"initPolar",RADAR:"initCircle",SCATTER:"initCircle",SPLINE:"initLine",STEP:"initLine",TREEMAP:"initTreemap"},C={Area:[k.AREA,k.AREA_SPLINE,k.AREA_SPLINE_RANGE,k.AREA_LINE_RANGE,k.AREA_STEP],AreaRange:[k.AREA_SPLINE_RANGE,k.AREA_LINE_RANGE],Arc:[k.PIE,k.DONUT,k.GAUGE,k.POLAR,k.RADAR],Line:[k.LINE,k.SPLINE,k.AREA,k.AREA_SPLINE,k.AREA_SPLINE_RANGE,k.AREA_LINE_RANGE,k.STEP,k.AREA_STEP],Step:[k.STEP,k.AREA_STEP],Spline:[k.SPLINE,k.AREA_SPLINE,k.AREA_SPLINE_RANGE]};function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t){t=function(t,e){if("object"!==h(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);if("object"!==h(e=i.call(t,e||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===h(t)?t:String(t)}function u(t,e,i){return(e=d(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var g=Zn(3),f=void 0;function x(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function v(e){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?x(Object(i),!0).forEach(function(t){u(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))});return e}var P=function(t){return I(this,f),t||0===t}.bind(void 0),R=function(t){return I(this,f),"function"==typeof t}.bind(void 0),b=function(t){return I(this,f),"string"==typeof t}.bind(void 0),z=function(t){return I(this,f),"number"==typeof t}.bind(void 0),M=function(t){return I(this,f),void 0===t}.bind(void 0),$=function(t){return I(this,f),void 0!==t}.bind(void 0),_=function(t){return I(this,f),"boolean"==typeof t}.bind(void 0),m=function(t){return I(this,f),10*Math.ceil(t/10)}.bind(void 0),T=function(t){return I(this,f),Math.ceil(t)+.5}.bind(void 0),E=function(t){return I(this,f),t[1]-t[0]}.bind(void 0),w=function(t){return I(this,f),"object"==typeof t}.bind(void 0),A=function(t){return I(this,f),M(t)||null===t||b(t)&&0===t.length||w(t)&&!(t instanceof Date)&&0===Object.keys(t).length||z(t)&&isNaN(t)}.bind(void 0),L=function(t){return I(this,f),!A(t)}.bind(void 0),X=function(t){return I(this,f),Array.isArray(t)}.bind(void 0),O=function(t){return I(this,f),t&&!(null!=t&&t.nodeType)&&w(t)&&!X(t)}.bind(void 0);function S(t,e,i){return $(t[e])?t[e]:i}function F(t,e){for(var i=R(t),n=arguments.length,a=Array(2<n?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];return i&&t.call.apply(t,[e].concat(a)),i}function B(t,n){function e(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];--a||n.apply.apply(n,[this].concat(e))}var i=this,a=0;"duration"in t?t.each(function(){return I(this,i),++a}.bind(this)).on("end",e):(++a,t.call(e))}function N(t){return b(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function G(i,t,n,e){var a,r,s=this;void 0===n&&(n=[-1,1]),void 0===e&&(e=!1),i&&b(t)&&(-1===t.indexOf("\n")?i.text(t):(a=[i.text(),t].map(function(t){return I(this,s),t.replace(/[\s\n]/g,"")}.bind(this)))[0]!==a[1]&&(t=t.split("\n"),r=e?t.length-1:1,i.html(""),t.forEach(function(t,e){I(this,s),i.append("tspan").attr("x",0).attr("dy",(0===e?n[0]*r:n[1])+"em").text(t)}.bind(this))))}function j(t){var e=t.getBBox(),i=e.x,n=e.y,t=e.width,e=e.height;return[{x:i,y:n+e},{x:i,y:n},{x:i+t,y:n},{x:i+t,y:n+e}]}function V(t,e){var i=t&&(null==(i=t.touches||t.sourceEvent&&t.sourceEvent.touches)?void 0:i[0]),e=(0,D.pointer)(i||t,e),n=this;return e.map(function(t){return I(this,n),isNaN(t)?0:t}.bind(this))}function Y(t){var e,i=t.event,t=t.$el,t=t.subchart.main||t.main;return i&&"brush"===i.type?e=i.selection:t&&(e=t.select(".bb-brush").node())&&(e=(0,g.brushSelection)(e)),e}function H(t){return!("rect"in t)||"rect"in t&&t.hasAttribute("width")&&t.rect.width!==+t.getAttribute("width")?t.rect=t.getBoundingClientRect():t.rect}function W(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=0),void 0===i&&(i=1e4);var n=y.crypto||y.msCrypto,e=n?e+n.getRandomValues(new Uint32Array(1))[0]%(i-e+1):Math.floor(Math.random()*(i-e)+e);return t?e+"":e}function U(t){t=Y(t);return!t||t[0]===t[1]}function Z(e,t){var i,n=this;for(i in void 0===e&&(e={}),X(t)&&t.forEach(function(t){return I(this,n),Z(e,t)}.bind(this)),t)/^\d+$/.test(i)||i in e||(e[i]=t[i]);return e}var q=function(t){return I(this,f),t.charAt(0).toUpperCase()+t.slice(1)}.bind(void 0);var K=function(t){return I(this,f),[].slice.call(t)}.bind(void 0);function J(t){t=t?t.transform:null,t=t&&t.baseVal;return t&&t.numberOfItems?t.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function Q(t){var n=this,e=t[0]instanceof Date,t=(e?t.map(Number):t).filter(function(t,e,i){return I(this,n),i.indexOf(t)===e}.bind(this));return e?t.map(function(t){return I(this,n),new Date(t)}.bind(this)):t}function tt(t){var i=this;return t&&t.length?t.reduce(function(t,e){return I(this,i),t.concat(e)}.bind(this)):[]}function et(i){for(var n=this,t=arguments.length,e=Array(1<t?t-1:0),a=1;a<t;a++)e[a-1]=arguments[a];if(!e.length||1===e.length&&!e[0])return i;var r=e.shift();return O(i)&&O(r)&&Object.keys(r).forEach(function(t){I(this,n);var e=r[t];O(e)?(i[t]||(i[t]={}),i[t]=et(i[t],e)):i[t]=X(e)?e.concat():e}.bind(this)),et.apply(void 0,[i].concat(e))}function it(t,e){var i,n=this;return void 0===e&&(e=!0),t[0]instanceof Date?i=(e?function(t,e){return I(this,n),t-e}:function(t,e){return I(this,n),e-t}).bind(this):e&&!t.every(isNaN)?i=function(t,e){return I(this,n),t-e}.bind(this):e||(i=function(t,e){return I(this,n),(e<t?-1:t<e&&1)||t===e&&0}.bind(this)),t.concat().sort(i)}function nt(t,e){var i=this,e=e.filter(function(t){return I(this,i),L(t)}.bind(this));return e.length?z(e[0])?e=Math[t].apply(Math,e):e[0]instanceof Date&&(e=it(e,"min"===t)[0]):e=void 0,e}var at=function(t,e,i){void 0===i&&(i=1),I(this,f);for(var n=[],a=0|Math.max(0,Math.ceil((e-t)/i)),r=t;r<a;r++)n.push(t+r*i);return n}.bind(void 0),rt={mouse:function(){var a=this;I(this,f);var r=function(){return I(this,a),{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}}.bind(this);try{return new MouseEvent("t"),function(t,e,i){void 0===i&&(i=r()),I(this,a),t.dispatchEvent(new MouseEvent(e,i))}.bind(this)}catch(t){return function(t,e,i){void 0===i&&(i=r()),I(this,a);var n=p.createEvent("MouseEvent");n.initMouseEvent(e,i.bubbles,i.cancelable,y,0,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}.bind(this)}}.bind(void 0)(),touch:function(t,e,i){I(this,f);i=new Touch(et({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},i));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[i],targetTouches:[],changedTouches:[i]}))}.bind(void 0)};function st(t,e){var i,n=t;for(i in e)n=n.replace(new RegExp("{="+i+"}","g"),e[i]);return n}function ot(t){var e,i;return t instanceof Date?i=t:b(t)?(e=this.config,i=null!=(e=this.format.dataTime(e.data_xFormat)(t))?e:new Date(t)):z(t)&&!isNaN(t)&&(i=new Date(+t)),i&&!isNaN(+i)||console&&console.error&&console.error("Failed to parse x '"+t+"' to Date object"),i}function lt(){return!1===(null==p?void 0:p.hidden)||"visible"===(null==p?void 0:p.visibilityState)}function ct(t){var e=t,t=e.config,i="";if(A(t.data_type||t.data_types)&&!e[c.LINE])i="line";else for(var n in c){var a=k[n];if(e.hasType(a)&&!e[c[n]]){i=a;break}}i&&function(t,e){var i,n="[billboard.js]";null!=(i=y.console)&&i.error&&(console.error("❌ "+n+" "+t,"background:red;color:white;display:block;font-size:15px",e),console.info("%cℹ️","font-size:15px","https://github.com/naver/billboard.js/wiki/CHANGELOG-v2#modularization-by-its-functionality"));throw Error(n+" "+t.replace(/\%c([a-z-]+)/i,"'$1' ")+" "+e)}("Please, make sure if %c"+function(t,e){var i=this;return t.split(e=void 0===e?"-":e).map(function(t,e){return I(this,i),e?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}.bind(this)).join("")}(i),"module has been imported and specified correctly.")}function ht(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function dt(e){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?ht(Object(i),!0).forEach(function(t){u(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ht(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))});return e}var ut={button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_"},gt={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title",needle:"bb-needle"},ft={area:"bb-area",areas:"bb-areas"},pt={axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label"},xt={bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars"},vt={candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"},bt={chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"},_t={colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"},mt={dragarea:"bb-dragarea",INCLUDED:"_included_"},yt={chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"},Tt={legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"},wt={chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"},At={eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"},St={focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"},kt={grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"},Ct="bb-level",Rt="bb-levels",Et={chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"},Lt={region:"bb-region",regions:"bb-regions"},Ot={selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"},Pt={shape:"bb-shape",shapes:"bb-shapes"},It={brush:"bb-brush",subchart:"bb-subchart"},Dt={chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",TextOverlapping:"text-overlapping"},zt={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"},Mt={treemap:"bb-treemap",chartTreemap:"bb-chart-treemap",chartTreemaps:"bb-chart-treemaps"},$t={buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"},Xt=dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt(dt({},ut),gt),ft),pt),xt),vt),bt),_t),mt),yt),Tt),wt),At),St),kt),Et),Lt),Ot),Pt),It),Dt),zt),Mt),$t),Ft={element:function(){return{chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null,zoomResetBtn:null}},state:function(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,hasTreemap:!1,cssRule:{},current:{width:0,height:0,dataMax:0,maxTickWidths:{x:{size:0,ticks:[],clipPath:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},types:[],needle:void 0},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",orgConfig:{},hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}},Bt=function(){function t(){var e=this;Object.keys(Ft).forEach(function(t){I(this,e),this[t]=new Ft[t]}.bind(this))}return t.prototype.getStore=function(t){return this[t]},t}(),Nt={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding:!0,padding_mode:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,resize_timer:!0,onclick:void 0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:250,plugins:[],render:{},regions:[]},Gt={boost_useCssRule:!1,boost_useWorker:!1},jt=void 0,Vt={data_x:void 0,data_idConverter:function(t){return I(this,jt),t}.bind(void 0),data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_groupsZeroAs:"positive",data_color:void 0,data_colors:{},data_labels:{},data_labels_backgroundColors:void 0,data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:function(){I(this,jt)}.bind(void 0),data_onover:function(){I(this,jt)}.bind(void 0),data_onout:function(){I(this,jt)}.bind(void 0),data_onshown:void 0,data_onhidden:void 0,data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},Yt={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},Ht={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}},Wt={legend_contents_bindto:void 0,legend_contents_template:"<span style='color:#fff;padding:5px;background-color:{=COLOR}'>{=TITLE}</span>",legend_equally:!1,legend_hide:!1,legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_interaction:!0,legend_item_dblclick:!1,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_item_tile_width:10,legend_item_tile_height:10,legend_item_tile_r:5,legend_item_tile_type:"rectangle",legend_padding:0,legend_position:"bottom",legend_show:!0,legend_usePoint:!1},Ut={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},Zt=void 0,qt={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){I(this,Zt)}.bind(void 0),tooltip_onhide:function(){I(this,Zt)}.bind(void 0),tooltip_onshown:function(){I(this,Zt)}.bind(void 0),tooltip_onhidden:function(){I(this,Zt)}.bind(void 0),tooltip_order:null};function Kt(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function Jt(e){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?Kt(Object(i),!0).forEach(function(t){u(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Kt(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))});return e}var Qt=function(){function t(){return function(){for(var n=this,a=function(t){if(I(this,n),O(t)&&t.constructor){var e,i=new t.constructor;for(e in t)i[e]=a(t[e]);return i}return t}.bind(this),t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.map(function(t){return I(this,n),a(t)}.bind(this)).reduce(function(t,e){return I(this,n),v(v({},t),e)}.bind(this))}(Nt,Gt,Vt,Yt,Ht,Wt,Ut,qt,t.data)}return t.setOptions=function(t){var i=this;this.data=t.reduce(function(t,e){return I(this,i),Jt(Jt({},t),e)}.bind(this),this.data)},t}();Qt.data={};var te="$baseLength",ee="__colorPattern__",ie="$dataMinMax",ne="$dataTotalSum",ae="$totalPerIndex",re="legendItemTextBox",se="$radarPoints",oe="setOverOut",le="callOverOutForTouch",ce="textRect",he=function(){function t(){this.cache={}}var e=t.prototype;return e.add=function(t,e,i){return this.cache[t]=(i=void 0===i?!1:i)?this.cloneTarget(e):e,this.cache[t]},e.remove=function(t){var e=this;K(t).forEach(function(t){return I(this,e),delete this.cache[t]}.bind(this))},e.get=function(t,e){if(e=void 0===e?!1:e){for(var i,n=[],a=0;i=t[a];a++)i in this.cache&&n.push(this.cloneTarget(this.cache[i]));return n}e=this.cache[t];return P(e)?e:null},e.reset=function(t){for(var e in this.cache)(t||/^\$/.test(e))&&(this.cache[e]=null)},e.cloneTarget=function(t){var e=this;return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return I(this,e),{x:t.x,value:t.value,id:t.id}}.bind(this))}},t}(),de=y.setTimeout,ue=y.clearTimeout;function ge(){function t(t,e){var i=this;!function t(e,i){var n=this;!1===i()?r(function(){return I(this,n),t(e,i)}.bind(this)):e()}(function(){I(this,i),null!=e&&e()}.bind(this),function(){for(var t,e=0,i=0;t=n[i];i++)if(!0===t||null!=t.empty&&t.empty())e++;else{if(!1===lt()){e=n.length;break}try{t.transition()}catch(t){e++}}return e===n.length})}var n=[];return t.add=function(t){X(t)?n=n.concat(t):n.push(t)},t}var fe={};function pe(t,e,n,i){var a,r,s;return void 0===t&&(t=!0),y.Worker&&t?(s=i,(t=(i=(t=e).toString()).replace(/(function|[\s\W\n])/g,"").substring(0,15))in fe||(fe[t]=new y.Blob([(null!=(s=null==s?void 0:s.map(String).join(";"))?s:"")+"\n\n\t\t\tself.onmessage=function({data}) {\n\t\t\t\tconst result = ("+i+").apply(null, data);\n\t\t\t\tself.postMessage(result);\n\t\t\t};"],{type:"text/javascript"})),a=y.URL.createObjectURL(fe[t]),r=new y.Worker(a),function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];r.postMessage(e),r.onmessage=function(t){return y.URL.revokeObjectURL(a),n(t.data)},r.onerror=function(t){console.error(t)}}):function(){var t=e.apply(void 0,arguments);n(t)}}var xe=Zn(5);function ve(t){var a=[];return t.forEach(function(t,i){var n=t[0];t.forEach(function(t,e){if(0<e){if(void 0===a[e-1]&&(a[e-1]={}),void 0===t)throw new Error("Source data is missing a component at ("+i+", "+e+")!");a[e-1][n]=t}})}),a}function be(t){var a=t[0],e=[];return t.forEach(function(t,i){var n;0<i&&(n={},t.forEach(function(t,e){if(void 0===t)throw new Error("Source data is missing a component at ("+i+", "+e+")!");n[a[e]]=t}),e.push(n))}),e}function _e(i,t){var n,a=[],t=Array.isArray(i)?(n=t.x?t.value.concat(t.x):t.value,a.push(n),i.forEach(function(e){var t=n.map(function(t){t=function(t,e){if(void 0!==t[e])return t[e];var e=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),i=t;return e.some(function(t){return!(i=i&&t in i?i[t]:void 0)}),i}(e,t);return t=void 0===t?null:t});a.push(t)}),be(a)):(Object.keys(i).forEach(function(t){var e=i[t].concat();null!=e.unshift&&e.unshift(t),a.push(e)}),ve(a));return t}function me(t,e){var i,n=this,a=t.rows(e);return 1===a.length?(i=[{}],a[0].forEach(function(t){I(this,n),i[0][t]=null}.bind(this))):i=t.parse(e),i}function ye(t){return me({rows:xe.csvParseRows,parse:xe.csvParse},t)}function Te(t){return me({rows:xe.tsvParseRows,parse:xe.tsvParse},t)}function we(t,e){t=t||(null==e?void 0:e.data_keys);return null!=t&&t.x&&(e.data_x=t.x),t}var Ae={convertData:function(i,t){var n=this,e=this.config,a=e.boost_useWorker,r=i;if(i.bindto&&(r={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(t){I(this,n);var e="data_"+t;e in i&&(r[t]=i[e])}.bind(this))),r.url&&t)!function(e,i,n,a,r){void 0===i&&(i="csv");var s=new XMLHttpRequest,o={csv:ye,tsv:Te,json:_e};s.open("GET",e),n&&Object.keys(n).forEach(function(t){s.setRequestHeader(t,n[t])}),s.onreadystatechange=function(){if(4===s.readyState){if(200!==s.status)throw new Error(e+": Something went wrong loading!");var t=s.responseText;t&&r.call(this,o[i]("json"===i?JSON.parse(t):t,a))}},s.send()}(r.url,r.mimeType,r.headers,we(r.keys,e),t);else if(r.json)pe(a,_e,t,[ve,be])(r.json,we(r.keys,e));else if(r.rows)pe(a,be,t)(r.rows);else if(r.columns)pe(a,ve,t)(r.columns);else if(i.bindto)throw Error("url or json or rows or columns is required.")},convertDataToTargets:function(t,a){var g=this,f=this,e=f.axis,p=f.config,x=f.state,i=p.data_type,n=!1,r=!1,v=!1;e&&(n=e.isCategorized(),r=e.isTimeSeries(),v=e.isCustomX());var s,o=Object.keys(t[0]||{}),e=o.length?o.filter(f.isNotX,f):[],l=o.length?o.filter(f.isX,f):[];e.forEach(function(i){var n=this;I(this,g);var e=this.getXKey(i);v||r?0<=l.indexOf(e)?s=(a&&f.data.xs[i]||[]).concat(t.map(function(t){return I(this,n),t[e]}.bind(this)).filter(P).map(function(t,e){return I(this,n),f.generateTargetX(t,i,e)}.bind(this))):p.data_x?s=this.getOtherTargetXs():L(p.data_xs)&&(s=f.getXValuesOfXKey(e,f.data.targets)):s=t.map(function(t,e){return I(this,n),e}.bind(this)),s&&(this.data.xs[i]=s)}.bind(this)),e.forEach(function(t){if(I(this,g),!this.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}.bind(this));o=e.map(function(a,r){var s=this;I(this,g);var o=p.data_idConverter.bind(f.api)(a),l=f.getXKey(a),c=v&&n,h=c&&t.map(function(t){return I(this,s),t.x}.bind(this)).every(function(t){return I(this,s),-1<p.axis_x_categories.indexOf(t)}.bind(this)),d=t.__append__,u=null===l&&d?f.api.data.values(a).length:0;return{id:o,id_org:a,values:t.map(function(t,e){I(this,s);var i,n=t[l],t=null===(t=t[a])||isNaN(t)||O(t)?X(t)||O(t)?t:null:+t;return!c&&!x.hasRadar||0!==r||M(n)?i=f.generateTargetX(n,a,u+e):(h||0!==r||0!==e||d||(p.axis_x_categories=[]),-1===(i=p.axis_x_categories.indexOf(n))&&(i=p.axis_x_categories.length,p.axis_x_categories.push(n))),{x:i=M(t)||f.data.xs[a].length<=e?void 0:i,value:t,id:o,index:-1}}.bind(this)).filter(function(t){return I(this,s),$(t.x)}.bind(this))}}.bind(this));return o.forEach(function(t){var i=this;I(this,g),p.data_xSort&&(t.values=t.values.sort(function(t,e){return I(this,i),(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)}.bind(this))),t.values.forEach(function(t,e){return I(this,i),t.index=e}.bind(this)),null!=(t=f.data.xs[t.id])&&t.sort(function(t,e){return I(this,i),t-e}.bind(this))}.bind(this)),x.hasNegativeValue=f.hasNegativeValueInTargets(o),x.hasPositiveValue=f.hasPositiveValueInTargets(o),i&&f.isValidChartType(i)&&(e=f.mapToIds(o).filter(function(t){return I(this,g),!(t in p.data_types&&f.isValidChartType(p.data_types[t]))}.bind(this)),f.setTargetType(e,i)),o.forEach(function(t){return I(this,g),f.cache.add(t.id_org,t,!0)}.bind(this)),o}},Se={isX:function(t){var e=this.config,i=e.data_x&&t===e.data_x,t=L(e.data_xs)&&function(e,i){var n=this,a=!1;return Object.keys(e).forEach(function(t){return I(this,n),e[t]===i&&(a=!0)}.bind(this)),a}(e.data_xs,t);return i||t},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){var t=this.config;return!(!t.data_stack_normalize||!t.data_groups.length)},isGrouped:function(e){var i=this,t=this.config.data_groups;return e?t.some(function(t){return I(this,i),0<=t.indexOf(e)&&1<t.length}.bind(this)):0<t.length},getXKey:function(t){var e=this.config;return e.data_x||(L(e.data_xs)?e.data_xs[t]:null)},getXValuesOfXKey:function(e,t){var i,n=this,a=this;return(t&&L(t)?a.mapToIds(t):[]).forEach(function(t){I(this,n),a.getXKey(t)===e&&(i=a.data.xs[t])}.bind(this)),i},getIndexByX:function(t,e){return e?e.indexOf(b(t)?t:+t):(this.filterByX(this.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){return t in this.data.xs&&this.data.xs[t]&&P(this.data.xs[t][e])?this.data.xs[t][e]:e},getOtherTargetXs:function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(e){var i=this,n=this.config;Object.keys(e).forEach(function(t){I(this,i),n.data_xs[t]=e[t]}.bind(this))},isMultipleX:function(){return L(this.config.data_xs)||this.hasType("bubble")||this.hasType("scatter")},addName:function(t){var e=this.config;return t&&(e=e.data_names[t.id],t.name=void 0!==e?e:t.id),t},getAllValuesOnIndex:function(e,t){var i=this;void 0===t&&(t=!1);var n=this,a=n.filterTargetsToShow(n.data.targets).map(function(t){return I(this,i),n.addName(n.getValueOnIndex(t.values,e))}.bind(this));return a=t?a.filter(function(t){return I(this,i),t&&"value"in t&&P(t.value)}.bind(this)):a},getValueOnIndex:function(t,e){var i=this,t=t.filter(function(t){return I(this,i),t.index===e}.bind(this));return t.length?t[0]:null},updateTargetX:function(t,a){var e=this,r=this;t.forEach(function(i){var n=this;I(this,e),i.values.forEach(function(t,e){I(this,n),t.x=r.generateTargetX(a[e],i.id,e)}.bind(this)),r.data.xs[i.id]=a}.bind(this))},updateTargetXs:function(t,e){var i=this,n=this;t.forEach(function(t){I(this,i),e[t.id]&&n.updateTargetX([t],e[t.id])}.bind(this))},generateTargetX:function(t,e,i){var n=this.axis,a=(null==n||!n.isCategorized())&&t||i;return null!=n&&n.isTimeSeries()?a=ot.bind(this)(t||this.getXValue(e,i)):null==n||!n.isCustomX()||null!=n&&n.isCategorized()||(a=P(t)?+t:this.getXValue(e,i)),a},updateXs:function(t){var e=this;t.length&&(this.axis.xs=t.map(function(t){return I(this,e),t.x}.bind(this)))},getPrevX:function(t){t=this.axis.xs[t-1];return $(t)?t:null},getNextX:function(t){t=this.axis.xs[t+1];return $(t)?t:null},getBaseValue:function(t){var e=this,i=e.state.hasAxis,n=t.value;return n&&i&&(e.isAreaRangeType(t)?n=e.getRangedData(t,"mid"):e.isBubbleZType(t)&&(n=e.getBubbleZData(n,"y"))),n},getMinMaxValue:function(t){var i,n,a=this,r=this.getBaseValue.bind(this);return(t||this.data.targets.map(function(t){return I(this,a),t.values}.bind(this))).forEach(function(t,e){I(this,a);t=t.map(r).filter(z);i=Math.min.apply(Math,[e?i:1/0].concat(t)),n=Math.max.apply(Math,[e?n:-1/0].concat(t))}.bind(this)),{min:i,max:n}},getMinMaxData:function(){var t,i,n,a,r=this,s=this,e=ie,o=s.cache.get(e);return o||(t=s.data.targets.map(function(t){return I(this,r),t.values}.bind(this)),i=s.getMinMaxValue(t),n=[],a=[],t.forEach(function(t){I(this,r);var e=s.getFilteredDataByValue(t,i.min),t=s.getFilteredDataByValue(t,i.max);e.length&&(n=n.concat(e)),t.length&&(a=a.concat(t))}.bind(this)),s.cache.add(e,o={min:n,max:a})),o},getTotalPerIndex:function(){var e=this,n=this.cache.get(ae);return!this.config.data_groups.length&&!this.isStackNormalized()||n||(n=[],this.data.targets.forEach(function(t){var i=this;I(this,e),t.values.forEach(function(t,e){I(this,i),n[e]||(n[e]=0),n[e]+=z(t.value)?t.value:0}.bind(this))}.bind(this))),n},getTotalDataSum:function(t){var e,i=this,n=ne,a=this.cache.get(n);return z(a)||(a=(e=tt(this.data.targets.map(function(t){return I(this,i),t.values}.bind(this))).map(function(t){return I(this,i),t.value}.bind(this))).length?e.reduce(function(t,e){return I(this,i),t+e}.bind(this)):0,this.cache.add(n,a)),t&&(a-=this.getHiddenTotalDataSum()),a},getHiddenTotalDataSum:function(){var i=this,t=this.api,e=this.state.hiddenTargetIds,n=0;return n=e.length?t.data.values.bind(t)(e).reduce(function(t,e){return I(this,i),t+e}.bind(this)):n},getFilteredDataByValue:function(t,e){var i=this;return t.filter(function(t){return I(this,i),this.getBaseValue(t)===e}.bind(this))},getMaxDataCount:function(){var e=this;return Math.max.apply(Math,this.data.targets.map(function(t){return I(this,e),t.values.length}.bind(this)))},getMaxDataCountTarget:function(){var n=this,t=this.filterTargetsToShow()||[],e=t.length,a=this.config.axis_x_inverted;return 1<e?t=it(Q(t=t.map(function(t){return I(this,n),t.values}.bind(this)).reduce(function(t,e){return I(this,n),t.concat(e)}.bind(this)).map(function(t){return I(this,n),t.x}.bind(this)))).map(function(t,e,i){return I(this,n),{x:t,index:a?i.length-e-1:e}}.bind(this)):e&&(t=t[0].values.concat()),t},mapToIds:function(t){var e=this;return t.map(function(t){return I(this,e),t.id}.bind(this))},mapToTargetIds:function(t){return t?X(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function(t,e){for(var i,n=this.mapToIds(t),a=0;i=n[a];a++)if(i===e)return!0;return!1},isTargetToShow:function(t){return this.state.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.state.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this,i=this;return(t||i.data.targets).filter(function(t){return I(this,e),i.isTargetToShow(t.id)}.bind(this))},mapTargetsToUniqueXs:function(t){var i=this,e=this.axis,n=[];return null!=t&&t.length&&(n=Q(tt(t.map(function(t){var e=this;return I(this,i),t.values.map(function(t){return I(this,e),+t.x}.bind(this))}.bind(this)))),n=null!=e&&e.isTimeSeries()?n.map(function(t){return I(this,i),new Date(+t)}.bind(this)):n.map(Number)),it(n)},addTargetIds:function(e,t){var i=this,n=this.state;(X(t)?t:[t]).forEach(function(t){I(this,i),n[e].indexOf(t)<0&&n[e].push(t)}.bind(this))},removeTargetIds:function(e,t){var i=this,n=this.state;(X(t)?t:[t]).forEach(function(t){I(this,i);t=n[e].indexOf(t);0<=t&&n[e].splice(t,1)}.bind(this))},addHiddenTargetIds:function(t){this.addTargetIds("hiddenTargetIds",t)},removeHiddenTargetIds:function(t){this.removeTargetIds("hiddenTargetIds",t)},addHiddenLegendIds:function(t){this.addTargetIds("hiddenLegendIds",t)},removeHiddenLegendIds:function(t){this.removeTargetIds("hiddenLegendIds",t)},getValuesAsIdKeyed:function(t){var e=this,a=this,r=a.state.hasAxis,s={},o=a.isMultipleX(),l=o?a.mapTargetsToUniqueXs(t).map(function(t){return I(this,e),b(t)?t:+t}.bind(this)):null;return t.forEach(function(t){var i=this;I(this,e);var n=[];t.values.filter(function(t){t=t.value;return I(this,i),P(t)||null===t}.bind(this)).forEach(function(t){I(this,i);var e=t.value;null!==e&&a.isCandlestickType(t)&&(e=X(e)?e.slice(0,4):[e.open,e.high,e.low,e.close]),X(e)?n.push.apply(n,e):O(e)&&"high"in e?n.push.apply(n,Object.values(e)):a.isBubbleZType(t)?n.push(r&&a.getBubbleZData(e,"y")):o?n[a.getIndexByX(t.x,l)]=e:n.push(e)}.bind(this)),s[t.id]=n}.bind(this)),s},checkValueInTargets:function(t,e){for(var i=Object.keys(t),n=0;n<i.length;n++)for(var a=t[i[n]].values,r=0;r<a.length;r++)if(e(a[r].value))return!0;return!1},hasMultiTargets:function(){return 1<this.filterTargetsToShow().length},hasNegativeValueInTargets:function(t){var e=this;return this.checkValueInTargets(t,function(t){return I(this,e),t<0}.bind(this))},hasPositiveValueInTargets:function(t){var e=this;return this.checkValueInTargets(t,function(t){return I(this,e),0<t}.bind(this))},orderTargets:function(t){var e=[].concat(t),t=this.getSortCompareFn();return t&&e.sort(t),e},getSortCompareFn:function(i){var n=this;void 0===i&&(i=!1);var a,t,e=this.config.data_order,r=/asc/i.test(e),s=/desc/i.test(e);return r||s?(a=function(t,e){return I(this,n),t+Math.abs(e.value)}.bind(this),t=function(t,e){I(this,n);t="values"in t?t.values.reduce(a,0):t.value,e="values"in e?e.values.reduce(a,0):e.value;return i?r?t-e:e-t:r?e-t:t-e}.bind(this)):R(e)&&(t=e.bind(this.api)),t||null},filterByX:function(t,e){var i=this;return tt(t.map(function(t){return I(this,i),t.values}.bind(this))).filter(function(t){return I(this,i),t.x-e==0}.bind(this))},filterRemoveNull:function(t){var e=this;return t.filter(function(t){return I(this,e),P(this.getBaseValue(t))}.bind(this))},filterByXDomain:function(t,i){var n=this;return t.map(function(t){var e=this;return I(this,n),{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return I(this,e),i[0]<=t.x&&t.x<=i[1]}.bind(this))}}.bind(this))},hasDataLabel:function(){var t=this.config.data_labels;return _(t)&&t||w(t)&&L(t)},getDataIndexFromEvent:function(t){var e=this.config,i=this.state,n=i.inputType,a=i.eventReceiver,i=a.coords,a=a.rect,e=e.axis_rotated,t="touch"===n&&t.changedTouches?t.changedTouches[0]:t;return function t(e,i,n,a,r){if(a<n)return-1;var s=Math.floor((n+a)/2),o=e[s],l=o.x,o=o.w,o=void 0===o?0:o;return r&&(l=e[s].y,o=e[s].h),l<=i&&i<=l+o?s:i<l?t(e,i,n,s-1,r):t(e,i,s+1,a,r)}(i,e?t.clientY-a.top:t.clientX-a.left,0,i.length-1,e)},getDataLabelLength:function(t,e,i){var n=this,a=this,r=[0,0];return a.$el.chart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return I(this,n),a.dataLabelFormat(t.id)(t)}.bind(this)).each(function(t,e){r[e]=1.3*this.getBoundingClientRect()[i]}).remove(),r},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){for(var i=t[e].x,n=[],a=e-1;0<=a&&i===t[a].x;a--)n.push(t[a]);for(a=e;a<t.length&&i===t[a].x;a++)n.push(t[a]);return n},findClosestFromTargets:function(t,e){var i=this,n=this,t=t.map(function(t){return I(this,i),n.findClosest(t.values,e)}.bind(this));return n.findClosest(t,e)},findClosest:function(t,i){var n,a=this,r=this,s=r.$el.main,t=t.filter(function(t){return I(this,a),t&&P(t.value)}.bind(this));return t.filter(function(t){return I(this,a),r.isBarType(t.id)||r.isCandlestickType(t.id)}.bind(this)).forEach(function(t){I(this,a);var e=r.isBarType(t.id)?"."+xt.chartBar+"."+ut.target+r.getTargetSelectorSuffix(t.id)+" ."+xt.bar+"-"+t.index:"."+vt.chartCandlestick+"."+ut.target+r.getTargetSelectorSuffix(t.id)+" ."+vt.candlestick+"-"+t.index+" path";!n&&r.isWithinBar(s.select(e).node())&&(n=t)}.bind(this)),t.filter(function(t){return I(this,a),!r.isBarType(t.id)&&!r.isCandlestickType(t.id)}.bind(this)).forEach(function(t){I(this,a);var e=r.dist(t,i);e<r.getPointSensitivity(t)&&(n=t)}.bind(this)),n},dist:function(t,e){var i=this.config.axis_rotated,n=this.scale,a=this.circleY(t,t.index),t=(n.zoom||n.x)(t.x);return Math.sqrt(Math.pow(t-e[+i],2)+Math.pow(a-e[+!i],2))},convertValuesToStep:function(t){var e,i,n,a=this.axis,r=this.config.line_step_type,s=!!a&&a.isCategorized(),o=X(t)?t.concat():[t];return s||/step\-(after|before)/.test(r)?(o.length&&(e=o[0],i=o[o.length-1],n=e.id,a=e.x,o.unshift({x:--a,value:e.value,id:n}),s&&"step-after"===r&&o.unshift({x:--a,value:e.value,id:n}),a=i.x,o.push({x:++a,value:i.value,id:n}),s&&"step-before"===r&&o.push({x:++a,value:i.value,id:n})),o):t},convertValuesToRange:function(t){var n=this,t=X(t)?t.concat():[t],a=[];return t.forEach(function(t){I(this,n);var e=t.x,i=t.id;a.push({x:e,id:i,value:t.value[0]}),a.push({x:e,id:i,value:t.value[2]})}.bind(this)),a},updateDataAttributes:function(t,e){var i=this,n=this.config["data_"+t];return M(e)||(Object.keys(e).forEach(function(t){I(this,i),n[t]=e[t]}.bind(this)),this.redraw({withLegend:!0})),n},getRangedData:function(t,e,i){void 0===e&&(e=""),void 0===i&&(i="areaRange");t=null==t?void 0:t.value;if(X(t)){i={areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]}[i].indexOf(e);return 0<=i&&t?t[i]:void 0}return t&&t[e]},setRatioForGroupedData:function(t){var e,i=this,n=this;n.config.data_groups.length&&t.some(function(t){return I(this,i),n.isGrouped(t.id)}.bind(this))&&(e=function(t){return I(this,i),n.getRatio("index",t,!0)}.bind(this),t.forEach(function(t){I(this,i),"values"in t?t.values.forEach(e):e(t)}.bind(this)))},getRatio:function(t,e,i){var a=this;void 0===i&&(i=!1);var n,r,s=this,o=s.config,l=s.state,c=s.api,h=0;return e&&c.data.shown().length&&(h=e.ratio||e.value,"arc"===t?h=s.pie.padAngle()()?e.value/s.getTotalDataSum(!0):(r=o.gauge_fullCircle?s.getArcLength():-2*s.getGaugeStartAngle(),r=s.hasType("gauge")?r:2*Math.PI,(e.endAngle-e.startAngle)/r):"index"===t?(r=c.data.values.bind(c),c=this.getTotalPerIndex(),!l.hiddenTargetIds.length||(n=r(l.hiddenTargetIds,!1)).length&&(n=n.reduce(function(t,i){var n=this;return I(this,a),t.map(function(t,e){return I(this,n),(z(t)?t:0)+i[e]}.bind(this))}.bind(this)),c=c.map(function(t,e){return I(this,a),t-n[e]}.bind(this))),r=c[e.index],e.ratio=z(e.value)&&c&&r?e.value/r:0,h=e.ratio):"radar"===t?h=parseFloat(Math.max(e.value,0)+"")/l.current.dataMax*o.radar_size_ratio:"bar"===t?h=0===(o=s.getYScaleById.bind(s)(e.id).domain().reduce(function(t,e){return I(this,a),e-t}.bind(this)))?0:Math.abs(e.value)/o:"treemap"===t&&(h/=s.getTotalDataSum(!0))),i&&h?100*h:h},updateDataIndexByX:function(t){var a=this,r=t.reduce(function(t,e,i){return I(this,a),t[+e.x]=i,t}.bind(this),{});this.data.targets.forEach(function(t){var n=this;I(this,a),t.values.forEach(function(t,e){I(this,n);var i=r[+t.x];t.index=i=void 0===i?e:i}.bind(this))}.bind(this))},isBubbleZType:function(t){return this.isBubbleType(t)&&(O(t.value)&&("z"in t.value||"y"in t.value)||X(t.value)&&2<=t.value.length)},isBarRangeType:function(t){var e=this,i=t.value;return this.isBarType(t)&&X(i)&&2<=i.length&&i.every(function(t){return I(this,e),z(t)}.bind(this))},getDataById:function(t){var e=this.cache.get(t)||this.api.data(t);return null!=(t=null==e?void 0:e[0])?t:e}};function ke(t,e){var i=this.api;(e=void 0===e?!1:e)&&this.api.flush(!0),null!=t&&t.call(i)}var Ce={load:function(t,i){var n=this,a=this,e=a.data,r=i.append,s=t;s&&(i.filter&&(s=s.filter(i.filter)),(i.type||i.types)&&s.forEach(function(t){I(this,n);var e=(null==(e=i.types)?void 0:e[t.id])||i.type;a.setTargetType(t.id,e)}.bind(this)),e.targets.forEach(function(t){I(this,n);for(var e=0;e<s.length;e++)if(t.id===s[e].id){t.values=r?t.values.concat(s[e].values):s[e].values,s.splice(e,1);break}}.bind(this)),e.targets=e.targets.concat(s)),a.updateTargets(e.targets),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.updateTypesElements(),ke.call(a,i.done,i.resizeAfter)},loadFromArgs:function(e){var i=this,n=this;n.config&&(n.cache.reset(),n.convertData(e,function(t){I(this,i);t=e.data||t;e.append&&(t.__append__=!0),t&&n.load(n.convertDataToTargets(t),e)}.bind(this)))},unload:function(t,e){var n=this,a=this,r=a.state,s=a.$el,i=a.$T,e=e,t=t;a.cache.reset(),e=e||function(){I(this,n)}.bind(this),(t=t.filter(function(t){return I(this,n),a.hasTarget(a.data.targets,t)}.bind(this)))&&0!==t.length?(i(s.svg.selectAll(t.map(function(t){return I(this,n),a.selectorTarget(t)}.bind(this)))).style("opacity","0").remove().call(B,e),t.forEach(function(e){var i=this;I(this,n),r.withoutFadeIn[e]=!1,s.legend&&s.legend.selectAll("."+Tt.legendItem+a.getTargetSelectorSuffix(e)).remove(),a.data.targets=a.data.targets.filter(function(t){return I(this,i),t.id!==e}.bind(this))}.bind(this)),r.hasTreemap&&a.updateTargetsForTreemap(a.data.targets),a.updateTypesElements()):e()}},Re=Zn(7),Ee={selectRectForSingle:function(n,a,r){var s=this,o=this,t=o.config,e=o.$el,i=e.main,e=e.circle,l=t.data_selection_enabled,c=t.data_selection_grouped,h=t.data_selection_isselectable,d=t.tooltip_grouped,t=o.getAllValuesOnIndex(r);d&&(o.showTooltip(t,n),null!=o.showGridFocus&&o.showGridFocus(t),!l||c)||(e||i.selectAll("."+ut.EXPANDED+":not(."+Pt.shape+"-"+r+")").classed(ut.EXPANDED,!1),(i=i.selectAll("."+Pt.shape+"-"+r).classed(ut.EXPANDED,!0).style("cursor",h?"pointer":null).filter(function(t){return o.isWithinShape(this,t)})).empty()&&!d&&(null!=o.hideGridFocus&&o.hideGridFocus(),o.hideTooltip(),c||o.setExpand(r)),i.call(function(t){var e=this;I(this,s);var i=t.data();l&&(c||null!=h&&h.bind(o.api)(i))&&a.style("cursor","pointer"),d||(o.showTooltip(i,n),null!=o.showGridFocus&&o.showGridFocus(i),null!=o.unexpandCircles&&o.unexpandCircles(),t.each(function(t){return I(this,e),o.setExpand(r,t.id)}.bind(this)))}.bind(this)))},setExpand:function(t,e,i){var n=this.config;this.$el.circle&&n.point_focus_expand_enabled&&this.expandCircles(t,e,i),this.expandBarTypeShapes(!0,t,e,i)},expandBarTypeShapes:function(e,i,n,a){var r=this;void 0===e&&(e=!0);var s=this;["bar","candlestick"].filter(function(t){return I(this,r),s.$el[t]}.bind(this)).forEach(function(t){I(this,r),a&&s.$el[t].classed(ut.EXPANDED,!1),s.getShapeByIndex(t,i,n).classed(ut.EXPANDED,e)}.bind(this))},setOverOut:function(t,e){var i=this,n=this,a=n.config,r=n.state,s=r.hasRadar,o=r.hasTreemap,l=n.$el.main,r=O(e);if(r||-1!==e){var c=a[t?"data_onover":"data_onout"].bind(n.api);if(a.color_onover&&n.setOverColor(t,e,r),r)c(e,l.select("."+(o?Mt.treemap:gt.arc)+n.getTargetSelectorSuffix(e.id)).node());else if(a.tooltip_grouped)t&&(a.point_focus_only&&s?n.showCircleFocus(n.getAllValuesOnIndex(e,!0)):n.setExpand(e,null,!0)),n.isMultipleX()||l.selectAll("."+Pt.shape+"-"+e).each(function(t){c(t,this)});else{var h=n.cache.get(oe)||[],l=l.selectAll("."+Pt.shape+"-"+e).filter(function(t){return n.isWithinShape(this,t)}),e=l.filter(function(){var e=this;return h.every(function(t){return I(this,e),t!==this}.bind(this))});if(!t||l.empty()||h.length===e.size()&&e.nodes().every(function(t,e){return I(this,i),t!==h[e]}.bind(this)))for(;h.length;){var d=h.pop();a.data_onout.bind(n.api)((0,D.select)(d).datum(),d)}e.each(function(){t&&(c((0,D.select)(this).datum(),this),h.push(this))}),n.cache.add(oe,h)}}},callOverOutForTouch:function(t){var e=this.cache.get(le);(O(t)&&e?t.id!==e.id:t!==e)&&((e||z(e))&&this.setOverOut(!1,e),(t||z(t))&&this.setOverOut(!0,t),this.cache.add(le,t))},getDraggableSelection:function(){var e=this,i=this,t=i.config,n=i.state;return t.interaction_enabled&&t.data_selection_draggable&&i.drag?(0,Re.drag)().on("drag",function(t){n.event=t,i.drag(V(t,this))}).on("start",function(t){n.event=t,i.dragstart(V(t,this))}).on("end",function(t){I(this,e),n.event=t,i.dragend()}.bind(this)):function(){I(this,e)}.bind(this)},dispatchEvent:function(t,i,e){var n=this,a=this.config,r=this.state,s=r.eventReceiver,o=r.hasAxis,l=r.hasRadar,c=r.hasTreemap,h=this.$el,d=h.eventRect,u=h.arcs,g=h.radar,f=h.treemap,h=null==(r=c&&s.rect||l&&g.axes.select("."+pt.axis+"-"+i+" text")||d||(null==u?void 0:u.selectAll("."+ut.target+" path").filter(function(t,e){return I(this,n),e===i}.bind(this))))?void 0:r.node();h&&(g=this.isMultipleX(),u=(d=h.getBoundingClientRect()).width,r=d.left,d=d.top,!o||l||g||(u=(s=s.coords[i]).w,r+=s.x,d+=s.y),u=r+(e?e[0]:0)+(g||a.axis_rotated?0:u/2),e=d+(e?e[1]:0),rt[/^(mouse|click)/.test(t)?"mouse":"touch"](c?f.node():h,t,{screenX:u,screenY:e,clientX:u,clientY:e}))},setDragStatus:function(t){this.state.dragging=t},unbindZoomEvent:function(){var t=this.$el,e=t.eventRect,t=t.zoomResetBtn;null!=e&&e.on(".zoom wheel.zoom .drag",null),null!=t&&t.on("click",null).style("display","none")},unbindAllEvents:function(){var e=this,t=this.$el,i=t.arcs,n=t.eventRect,a=t.legend,r=t.region,s=t.svg,o=t.treemap,t=this.brush;[s,n,null==r?void 0:r.list,null==t?void 0:t.getSelection(),null==i?void 0:i.selectAll("path"),null==a?void 0:a.selectAll("g"),o].forEach(function(t){return I(this,e),null==t?void 0:t.on("wheel click mouseover mousemove mouseout touchstart touchmove touchend touchstart.eventRect touchmove.eventRect touchend.eventRect .brush .drag .zoom wheel.zoom dblclick.zoom",null)}.bind(this)),null!=this.unbindZoomEvent&&this.unbindZoomEvent()}},Le={generateClass:function(t,e){return" "+t+" "+(t+this.getTargetSelectorSuffix(e))},getClass:function(e,i){var n=this,a=/s$/.test(e),r=/^(area|arc|line|treemap)s?$/.test(e),s=a?"id":"index";return function(t){I(this,n);t=t.data||t;return((i?this.generateClass(Xt[a?"shapes":"shape"],t[s]):"")+this.generateClass(Xt[e],t[r?"id":s])).trim()}.bind(this)},getChartClass:function(e){var i=this;return function(t){return I(this,i),Xt["chart"+e]+this.classTarget((t.data||t).id)}.bind(this)},generateExtraLineClass:function(){var i=this.config.line_classes||[],n=[];return function(t){var e,t=t.id||(null==(e=t.data)?void 0:e.id)||t;return n.indexOf(t)<0&&n.push(t),i[n.indexOf(t)%i.length]}},classRegion:function(t,e){return this.generateClass(Xt.region,e)+" "+("class"in t?t.class:"")},classTarget:function(t){var e=this.config.data_classes[t],i="";return e&&(i=" "+Xt.target+"-"+e),this.generateClass(Xt.target,t)+i},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" "+(0<=this.state.focusedTargetIds.indexOf(t.id)?Xt.focused:"")},classDefocused:function(t){return" "+(0<=this.state.defocusedTargetIds.indexOf(t.id)?Xt.defocused:"")},getTargetSelectorSuffix:function(t){return(t||0===t?"-"+t:"").replace(/([\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\])/g,"-")},selectorTarget:function(t,e,i){void 0===e&&(e=""),void 0===i&&(i="");t=this.getTargetSelectorSuffix(t);return e+"."+(Xt.target+t)+" "+i+", "+e+"."+(Xt.circles+t)+" "+i},selectorTargets:function(t,e){var i=this,t=t||[];return t.length?t.map(function(t){return I(this,i),this.selectorTarget(t,e)}.bind(this)):null},selectorLegend:function(t){return"."+(Xt.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return null!=t&&t.length?t.map(function(t){return I(this,e),this.selectorLegend(t)}.bind(this)):null}},Oe=Zn(6),Pe=function(t,e,i){I(this,void 0);t=(0,D.select)(t.cloneNode(!0));return t.attr("id",i).insert("rect",":first-child").attr("width",t.attr("width")).attr("height",t.attr("height")).style("fill",e),{id:i,node:t.node()}}.bind(void 0);var Ie=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],De={generateColor:function(){var n,a=this,r=this,t=r.$el,s=r.config,o=s.data_colors,l=s.data_color,c=[],h=L(s.color_pattern)?s.color_pattern:(0,Oe.scaleOrdinal)(function(t){var e,i=this,n=ee,a=p.body,r=a[n];return r||(e=t.classed(_t.colorPattern,!0).style("background-image"),t.classed(_t.colorPattern,!1),-1<e.indexOf(";")&&(r=e.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(function(t){return I(this,i),t.trim().replace(/[\"'\s]/g,"")}.bind(this)).filter(Boolean),a[n]=r)),r}(t.chart)||Ie).range(),d=h;return R(s.color_tiles)&&(n=s.color_tiles.bind(r.api)(),h=(t=h.map(function(t,e){I(this,a);var i=t.replace(/[#\(\)\s,]/g,""),i=r.state.datetimeId+"-pattern-"+i+"-"+e;return Pe(n[e%n.length],t,i)}.bind(this))).map(function(t){return I(this,a),"url(#"+t.id+")"}.bind(this)),r.patterns=t),function(t){var e,i=t.id||(null==(n=t.data)?void 0:n.id)||t,n=r.isTypeOf(i,["line","spline","step"])||!s.data_types[i];return R(o[i])?e=o[i].bind(r.api)(t):o[i]?e=o[i]:(c.indexOf(i)<0&&c.push(i),e=n?d[c.indexOf(i)%d.length]:h[c.indexOf(i)%h.length],o[i]=e),R(l)?l.bind(r.api)(e,t):e}},generateLevelColor:function(){var t=this.config,r=t.color_pattern,t=t.color_threshold,s="value"===t.unit,o=t.max||100,l=t.values&&t.values.length?t.values:[];return L(t)?function(t){for(var e=s?t:100*t/o,i=r[r.length-1],n=0,a=l.length;n<a;n++)if(e<=l[n]){i=r[n];break}return i}:null},generateDataLabelBackgroundColorFilter:function(i){var n=this,a=this,r=a.$el,t=a.config,s=a.state,o=i||t.data_labels_backgroundColors;o&&(t=[],b(o)?t.push(""):O(o)&&(t=Object.keys(o)),t.forEach(function(t){I(this,n);var e=s.datetimeId+"-labels-bg"+a.getTargetSelectorSuffix(t)+(i?a.getTargetSelectorSuffix(i):"");r.defs.append("filter").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("id",e).html('<feFlood flood-color="'+(""===t?o:o[t])+'" /><feComposite in="SourceGraphic"/>')}.bind(this)))},getGradienColortUrl:function(t){return"url(#"+this.state.datetimeId+"-gradient"+this.getTargetSelectorSuffix(t)+")"},updateLinearGradient:function(){var c=this,h=this,d=h.config,t=h.data.targets,u=h.state.datetimeId,g=h.$el.defs;t.forEach(function(i){var n=this;I(this,c);var a,t,e,r,s=u+"-gradient"+h.getTargetSelectorSuffix(i.id),o=h.isAreaType(i)?"area":h.isBarType(i)&&"bar",l=d.axis_rotated;o&&g.select("#"+s).empty()&&(a=h.color(i),o=void 0===(t=(e=d[o+"_linearGradient"]).x)?l?[1,0]:[0,0]:t,t=void 0===(t=e.y)?l?[0,0]:[0,1]:t,e=void 0===(e=e.stops)?[[0,a,1],[1,a,0]]:e,r=g.append("linearGradient").attr("id",s).attr("x1",o[0]).attr("x2",o[1]).attr("y1",t[0]).attr("y2",t[1]),e.forEach(function(t){I(this,n);var e=R(t[1])?t[1].bind(h.api)(i.id):t[1];r.append("stop").attr("offset",t[0]).attr("stop-color",e||a).attr("stop-opacity",t[2])}.bind(this)))}.bind(this))},setOverColor:function(t,e){var i=this,n=this,a=n.config,r=n.$el.main,s=a.color_onover,t=t?s:n.color;O(t)?t=function(t){t=t.id;return I(this,i),t in s?s[t]:n.color(t)}.bind(this):b(t)?t=function(){return I(this,i),s}.bind(this):R(s)&&(t=t.bind(n.api)),r.selectAll(O(e)?"."+gt.arc+n.getTargetSelectorSuffix(e.id):"."+Pt.shape+"-"+e).style("fill",t)}},ze={getYDomainMinMax:function(t,e){var o,i=this,n=this,l=n.axis,a=n.config,c="min"===e,a=a.data_groups,h=n.mapToIds(t),d=n.getValuesAsIdKeyed(t);return 0<a.length&&(o=n["has"+(c?"Negative":"Positive")+"ValueInTargets"](t),a.forEach(function(t){var a=this;I(this,i);var r,s,t=t.filter(function(t){return I(this,a),0<=h.indexOf(t)}.bind(this));t.length&&(r=t[0],s=l.getId(r),o&&d[r]&&(d[r]=d[r].map(function(t){return I(this,a),(c?t<0:0<t)?t:0}.bind(this))),t.filter(function(t,e){return I(this,a),0<e}.bind(this)).forEach(function(t){var i,n=this;I(this,a),d[t]&&(i=l.getId(t),d[t].forEach(function(t,e){I(this,n);t=+t;i!==s||o&&(c?0<t:t<0)||(d[r][e]+=t)}.bind(this)))}.bind(this)))}.bind(this))),nt(e,Object.keys(d).map(function(t){return I(this,i),nt(e,d[t])}.bind(this)))},isHiddenTargetWithYDomain:function(e){var i=this,n=this;return n.state.hiddenTargetIds.some(function(t){return I(this,i),n.axis.getId(t)===e}.bind(this))},getYDomain:function(t,e,i){var n=this,a=this,r=a.axis,s=a.config,o=a.scale,l="axis_"+e;if(a.isStackNormalized())return[0,100];var c=(null==o?void 0:o[e])&&"log"===o[e].type,h=t.filter(function(t){return I(this,n),r.getId(t.id)===e}.bind(this)),d=i?a.filterByXDomain(h,i):h;if(0===d.length)return a.isHiddenTargetWithYDomain(e)?o[e].domain():"y2"===e?o.y.domain():a.getYDomain(t,"y2",i);var u=s[l+"_min"],g=s[l+"_max"],f=s[l+"_center"],p=s[l+"_inverted"],x=a.hasDataLabel()&&s.axis_rotated,v=a.hasDataLabel()&&!s.axis_rotated,b=a.getYDomainMinMax(d,"min"),_=a.getYDomainMinMax(d,"max"),h=[k.BAR,k.BUBBLE,k.SCATTER].concat(C.Line).some(function(t){I(this,n);var e=-1<t.indexOf("area")?"area":t;return a.hasType(t,d,!0)&&s[e+"_zerobased"]}.bind(this));b=P(u)?u:!P(g)||b<=g?b:g-10,_=P(g)?g:!P(u)||u<=_?_:u+10,(b=isNaN(b)?0:b)===(_=isNaN(_)?b:_)&&(b<0?_=0:b=0);t=0<=b&&0<=_,i=b<=0&&_<=0;(h=P(u)&&t||P(g)&&i?!1:h)&&(t&&(b=0),i&&(_=0));var m,y,T,w=Math.abs(_-b),A={top:.1*w,bottom:.1*w};$(f)&&(_=f+(g=Math.max(Math.abs(b),Math.abs(_))),b=f-g),x?(m=E(o.y.range()),y=a.getDataLabelLength(b,_,"width").map(function(t){return I(this,n),t/m}.bind(this)),["bottom","top"].forEach(function(t,e){I(this,n),A[t]+=w*(y[e]/(1-y[0]-y[1]))}.bind(this))):v&&(T=a.getDataLabelLength(b,_,"height"),["bottom","top"].forEach(function(t,e){I(this,n),A[t]+=a.convertPixelToScale("y",T[e],w)}.bind(this)));var A=a.getResettedPadding(A),S=s[l+"_padding"];L(S)&&["bottom","top"].forEach(function(t){I(this,n),A[t]=r.getPadding(S,t,A[t],w)}.bind(this)),h&&(t&&(A.bottom=b),i&&(A.top=-_));_=c?[b,_].map(function(t){return I(this,n),t<0?0:t}.bind(this)):[b-A.bottom,_+A.top];return p?_.reverse():_},getXDomainMinMax:function(t,i){var e,n=this,a=this.config["axis_x_"+i],r=nt(i,t.map(function(t){var e=this;return I(this,n),nt(i,t.values.map(function(t){return I(this,e),t.x}.bind(this)))}.bind(this))),t=O(a)?a.value:a,t=$(t)&&null!=(e=this.axis)&&e.isTimeSeries()?ot.bind(this)(t):t;return O(a)&&a.fit&&("min"===i&&t<r||"max"===i&&r<t)&&(t=void 0),$(t)?t:r},getXDomainPadding:function(t,e){var i=this,n=i.axis,a=i.config.axis_x_padding,r=n.isTimeSeries()&&e,s=E(t);t=n.isCategorized()||r?0:i.hasType("bar")?1<(l=i.getMaxDataCount())?s/(l-1)/2:.5:i.getResettedPadding(.01*s);var o,l=z(a)?{left:a,right:a}:a,i=l.left,i=void 0===i?t:i,l=l.right,l=void 0===l?t:l;return"px"===a.unit?(o=Math.abs(s+.2*s),i=n.getPadding(a,"left",t,o),l=n.getPadding(a,"right",t,o)):(o=s+i+l,r&&o&&(i=i/o/(e=s/e/o),l=l/o/e)),{left:i,right:l}},getXDomain:function(t){var e=this,i=e.axis,n=e.config,a=e.scale.x,r=n.axis_x_inverted,s=[e.getXDomainMinMax(t,"min"),e.getXDomainMinMax(t,"max")],o=s[0],n=void 0===o?0:o,t=s[1],o=void 0===t?0:t;return"log"!==a.type&&(t=i.isCategorized(),a=i.isTimeSeries(),i=e.getXDomainPadding(s),(e=s[0])-(s=s[1])!=0||t||(s=a?(e=new Date(.5*e.getTime()),new Date(1.5*s.getTime())):(e=0===e?1:.5*e,0===s?-1:1.5*s)),!e&&0!==e||(n=a?new Date(e.getTime()-i.left):e-i.left),!s&&0!==s||(o=a?new Date(s.getTime()+i.right):s+i.right)),r?[o,n]:[n,o]},updateXDomain:function(t,e,i,n,a){var r=this,s=r.config,o=r.org,l=r.scale,c=l.x,h=l.subX,l=s.zoom_enabled;return i&&(c.domain(a||it(r.getXDomain(t),!s.axis_x_inverted)),o.xDomain=c.domain(),l&&r.zoom.updateScaleExtent(),h.domain(c.domain()),null!=(s=r.brush)&&s.scale(h)),e&&(h=a||!r.brush||U(r)?o.xDomain:Y(r).map(h.invert),c.domain(h),l&&r.zoom.updateScaleExtent()),n&&c.domain(r.trimXDomain(c.orgDomain())),c.domain()},trimXDomain:function(t){var e=this.config.axis_x_inverted,i=this.getZoomDomain(),n=i[0],i=i[1];return(e?t[0]>=n:t[0]<=n)&&(t[0]=n,t[1]=+t[1]+(n-t[0])),(e?t[1]<=i:t[1]>=i)&&(t[0]=+t[0]-(t[1]-i),t[1]=i),t},getZoomDomain:function(){var t=this.config,e=this.org.xDomain,i=e[0],e=e[1];return[i=$(t.zoom_x_min)?nt("min",[i,t.zoom_x_min]):i,e=$(t.zoom_x_max)?nt("max",[e,t.zoom_x_max]):e]},convertPixelToScale:function(t,e,i){var n=this.config,a=this.state,n=n.axis_rotated,n="x"===t?n?"height":"width":n?"width":"height";return i*(e/a[n])}};function Me(t,e,i){var n=t.config,e="axis_"+e+"_tick_format";return(n[e]||t.defaultValueFormat).call(t.api,i)}var $e={yFormat:function(t){return Me(this,"y",t)},y2Format:function(t){return Me(this,"y2",t)},getDefaultValueFormat:function(){var n=this,a=n.defaultArcValueFormat,r=n.yFormat,s=n.y2Format,o=n.hasArcType(null,["gauge","polar","radar"]);return function(t,e,i){return(o?a:n.axis&&"y2"===n.axis.getId(i)?s:r).call(n,t,e)}},defaultValueFormat:function(t){return P(t)?+t:""},defaultArcValueFormat:function(t,e){return(100*e).toFixed(1)+"%"},defaultPolarValueFormat:function(t){return""+t},dataLabelFormat:function(t){var e=this,i=this.config.data_labels,n=function(t){return I(this,e),P(t)?+t:""}.bind(this),a=n;return R(i.format)?a=i.format:w(i.format)&&(a=i.format[t]?!0===i.format[t]?n:i.format[t]:function(){return I(this,e),""}.bind(this)),a.bind(this.api)}};function Xe(t){t=this.getDataById(t);return this.levelColor?this.levelColor(t.values[0].value):this.color(t)}var Fe={initLegend:function(){var t=this,e=t.config,i=t.$el;t.legendItemTextBox={},t.state.legendHasRendered=!1,e.legend_show?(e.legend_contents_bindto||(i.legend=t.$el.svg.append("g").classed(Tt.legend,!0).attr("transform",t.getTranslate("legend"))),t.updateLegend()):t.state.hiddenLegendIds=t.mapToIds(t.data.targets)},updateLegend:function(t,e,i){var n=this,a=n.config,r=n.state,s=n.scale,o=n.$el,e=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};e.withTransition=S(e,"withTransition",!0),e.withTransitionForTransform=S(e,"withTransitionForTransform",!0),a.legend_contents_bindto&&a.legend_contents_template?n.updateLegendTemplate():r.hasTreemap||n.updateLegendElement(t||n.mapToIds(n.data.targets),e,i),null!=(o=o.legend)&&o.selectAll("."+Tt.legendItem).classed(Tt.legendItemHidden,function(t){t=!n.isTargetToShow(t);return t&&(this.style.opacity=null),t}),n.updateScales(!1,!s.zoom),n.updateSvgSize(),n.transformAll(e.withTransitionForTransform,i),r.legendHasRendered=!0},updateLegendTemplate:function(){var i,n,a=this,r=this,t=r.config,e=r.$el,s=(0,D.select)(t.legend_contents_bindto),o=t.legend_contents_template;s.empty()||(t=r.mapToIds(r.data.targets),i=[],n="",t.forEach(function(t){I(this,a);var e=R(o)?o.bind(r.api)(t,r.color(t),r.api.data(t)[0].values):st(o,{COLOR:r.color(t),TITLE:t});e&&(i.push(t),n+=e)}.bind(this)),t=s.html(n).selectAll(function(){return this.childNodes}).data(i),r.setLegendItem(t),e.legend=s)},updateSizeForLegend:function(t){var e=this,i=e.config,n=e.state,a=n.isLegendTop,r=n.isLegendLeft,s=n.isLegendRight,o=n.isLegendInset,l=n.current,n=t.width,t=t.height,i={top:a?e.getCurrentPaddingTop()+i.legend_inset_y+5.5:l.height-t-e.getCurrentPaddingBottom()-i.legend_inset_y,left:r?e.getCurrentPaddingLeft()+i.legend_inset_x+.5:l.width-n-e.getCurrentPaddingRight()-i.legend_inset_x+.5};e.state.margin3={top:s?0:o?i.top:l.height-t,right:NaN,bottom:0,left:s?l.width-n:o?i.left:0}},transformLegend:function(t){var e=this.$el.legend;(0,this.$T)(e,t).attr("transform",this.getTranslate("legend"))},updateLegendStep:function(t){this.state.legendStep=t},updateLegendItemWidth:function(t){this.state.legendItemWidth=t},updateLegendItemHeight:function(t){this.state.legendItemHeight=t},updateLegendItemColor:function(t,e){var i=this.$el.legend;i&&i.select("."+Tt.legendItem+"-"+t+" line").style("stroke",e)},getLegendWidth:function(){var t=this.state,e=t.current.width,i=t.isLegendRight,n=t.isLegendInset,a=t.legendItemWidth,t=t.legendStep;return this.config.legend_show?i||n?a*(t+1):e:0},getLegendHeight:function(){var t=this.state,e=t.current,i=t.isLegendRight,n=t.legendItemHeight,a=t.legendStep,t="fit"===(null==(t=this.config.padding)?void 0:t.mode);return this.config.legend_show?i?e.height:(t?10:Math.max(20,n))*(a+1):0},opacityForUnfocusedLegend:function(t){return t.classed(Tt.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var i=this,n=this,a=n.$el.legend,r=n.$T,s=n.mapToTargetIds(t);a&&r(a.selectAll("."+Tt.legendItem).filter(function(t){return I(this,i),0<=s.indexOf(t)}.bind(this)).classed(St.legendItemFocused,e)).style("opacity",function(){return e?null:n.opacityForUnfocusedLegend.call(n,(0,D.select)(this))})},revertLegend:function(){var t=this.$el.legend,e=this.$T;t&&e(t.selectAll("."+Tt.legendItem).classed(St.legendItemFocused,!1)).style("opacity",null)},showLegend:function(t){var e=this,i=e.config,n=e.$el,a=e.$T;i.legend_show||(i.legend_show=!0,n.legend?n.legend.style("visibility",null):e.initLegend(),e.state.legendHasRendered||e.updateLegend()),e.removeHiddenLegendIds(t),a(n.legend.selectAll(e.selectorLegends(t)).style("visibility",null)).style("opacity",null)},hideLegend:function(t){var e=this.config,i=this.$el.legend;e.legend_show&&A(t)&&(e.legend_show=!1,i.style("visibility","hidden")),this.addHiddenLegendIds(t),i.selectAll(this.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(t,e){var i,n=this.cache,a=this.state,r=re;return t&&((i=!a.redrawing&&n.get(r)||{})[t]||(i[t]=this.getTextRect(e,Tt.legendItem),n.add(r,i)),i=i[t]),i},setLegendItem:function(t){var i=this,a=this,n=a.$el,r=a.api,s=a.config,o=a.state,l="touch"===o.inputType,c=a.hasType("gauge"),e=s.boost_useCssRule,h=s.legend_item_interaction;t.attr("class",function(t){var e=(0,D.select)(this);return(!e.empty()&&e.attr("class")||"")+a.generateClass(Tt.legendItem,t)}).style("visibility",function(t){return I(this,i),a.isLegendToShow(t)?null:"hidden"}.bind(this)),s.interaction_enabled&&(e&&[["."+Tt.legendItem,"cursor:pointer"],["."+Tt.legendItem+" text","pointer-events:none"],["."+Tt.legendItemPoint+" text","pointer-events:none"],["."+Tt.legendItemTile,"pointer-events:none"],["."+Tt.legendItemEvent,"fill-opacity:0"]].forEach(function(t){I(this,i);var e=t[0],t=t[1];a.setCssRule(!1,e,[t])(n.legend)}.bind(this)),t.on(h.dblclick?"dblclick":"click",h||R(s.legend_item_onclick)?function(t,e){var i,n;F(s.legend_item_onclick,r,e)||(i=t.altKey,n=t.target,"dblclick"===t.type||i?o.hiddenTargetIds.length&&-1===n.parentNode.getAttribute("class").indexOf(Tt.legendItemHidden)?r.show():(r.hide(),r.show(e)):(r.toggle(e),(0,D.select)(this).classed(St.legendItemFocused,!1))),l&&a.hideTooltip()}:null),l||t.on("mouseout",h||R(s.legend_item_onout)?function(t,e){F(s.legend_item_onout,r,e)||((0,D.select)(this).classed(St.legendItemFocused,!1),c&&a.undoMarkOverlapped(a,"."+yt.gaugeValue),a.api.revert())}:null).on("mouseover",h||R(s.legend_item_onover)?function(t,e){F(s.legend_item_onover,r,e)||((0,D.select)(this).classed(St.legendItemFocused,!0),c&&a.markOverlapped(e,a,"."+yt.gaugeValue),!o.transiting&&a.isTargetToShow(e)&&r.focus(e))}:null),!t.empty()&&t.on("click mouseout mouseover")&&t.style("cursor",a.getStylePropValue("pointer")))},updateLegendElement:function(t,e){var i,n=this,a=this,r=a.config,s=a.state,o=a.$el.legend,l=a.$T,c="circle"!==r.legend_item_tile_type,h=r.legend_item_tile_r,d={width:c?r.legend_item_tile_width:2*h,height:c?r.legend_item_tile_height:2*h},u={padding:{top:4,right:10},max:{width:0,height:0},posMin:10,step:0,tileWidth:d.width+5,totalLength:0},g={offsets:{},widths:{},heights:{},margins:[0],steps:{}},c=t.filter(function(t){return I(this,n),!$(r.data_names[t])||null!==r.data_names[t]}.bind(this)),h=e.withTransition,f=a.getUpdateLegendPositions(c,u,g);s.isLegendInset&&(u.step=r.legend_inset_step||c.length,a.updateLegendStep(u.step));var p=s.isLegendRight?(i=function(t){return I(this,n),u.max.width*g.steps[t]}.bind(this),function(t){return I(this,n),g.margins[g.steps[t]]+g.offsets[t]}.bind(this)):s.isLegendInset?(i=function(t){return I(this,n),u.max.width*g.steps[t]+10}.bind(this),function(t){return I(this,n),g.margins[g.steps[t]]+g.offsets[t]}.bind(this)):(i=function(t){return I(this,n),g.margins[g.steps[t]]+g.offsets[t]}.bind(this),function(t){return I(this,n),u.max.height*g.steps[t]}.bind(this)),t={xText:function(t,e){return I(this,n),i(t,e)+4+d.width}.bind(this),xRect:function(t,e){return I(this,n),i(t,e)}.bind(this),x1Tile:function(t,e){return I(this,n),i(t,e)-2}.bind(this),x2Tile:function(t,e){return I(this,n),i(t,e)-2+d.width}.bind(this),yText:function(t,e){return I(this,n),p(t,e)+9}.bind(this),yRect:function(t,e){return I(this,n),p(t,e)-5}.bind(this),yTile:function(t,e){return I(this,n),p(t,e)+4}.bind(this)};a.generateLegendItem(c,d,f,t),e=o.select("."+Tt.legendBackground+" rect"),s.isLegendInset&&0<u.max.width&&0===e.size()&&(e=o.insert("g","."+Tt.legendItem).attr("class",Tt.legendBackground).append("rect")),l(o.selectAll("text").data(c).text(function(t){return I(this,n),$(r.data_names[t])?r.data_names[t]:t}.bind(this)).each(function(t,e){f(this,t,e)}),h).attr("x",t.xText).attr("y",t.yText),l(o.selectAll("rect."+Tt.legendItemEvent).data(c),h).attr("width",function(t){return I(this,n),g.widths[t]}.bind(this)).attr("height",function(t){return I(this,n),g.heights[t]}.bind(this)).attr("x",t.xRect).attr("y",t.yRect),a.updateLegendItemPos(c,h,t),e&&l(e,h).attr("height",a.getLegendHeight()-12).attr("width",u.max.width*(u.step+1)+10),a.updateLegendItemWidth(u.max.width),a.updateLegendItemHeight(u.max.height),a.updateLegendStep(u.step)},getUpdateLegendPositions:function(c,h,d){var u=this,g=u.config,f=u.state,p=f.isLegendRight||f.isLegendInset;return function(t,e,i){function n(t,e){e||(a=(l-h.totalLength-o)/2)<h.posMin&&(a=(l-o)/2,h.totalLength=0,h.step++),d.steps[t]=h.step,d.margins[h.step]=f.isLegendInset?10:a,d.offsets[t]=h.totalLength,h.totalLength+=o}var a,r=this,s=i===c.length-1,t=u.getLegendItemTextBox(e,t),s=t.width+h.tileWidth+(s&&!p?0:h.padding.right)+g.legend_padding,t=t.height+h.padding.top,o=p?t:s,l=p?u.getLegendHeight():u.getLegendWidth();if(0===i&&(h.totalLength=0,h.step=0,h.max.width=0,h.max.height=0),g.legend_show&&!u.isLegendToShow(e))return d.widths[e]=0,d.heights[e]=0,d.steps[e]=0,void(d.offsets[e]=0);d.widths[e]=s,d.heights[e]=t,(!h.max.width||s>=h.max.width)&&(h.max.width=s),(!h.max.height||t>=h.max.height)&&(h.max.height=t);t=p?h.max.height:h.max.width;g.legend_equally?(Object.keys(d.widths).forEach(function(t){return I(this,r),d.widths[t]=h.max.width}.bind(this)),Object.keys(d.heights).forEach(function(t){return I(this,r),d.heights[t]=h.max.height}.bind(this)),(a=(l-t*c.length)/2)<h.posMin?(h.totalLength=0,h.step=0,c.forEach(function(t){return I(this,r),n(t)}.bind(this))):n(e,!0)):n(e)}},generateLegendItem:function(t,e,i,n){var a,r=this,s=this,o=s.config,l=s.state,c=s.$el.legend,h=o.legend_usePoint,d=o.legend_item_tile_r,u=o.legend_item_tile_type,g="circle"!==u,f=l.isLegendRight||l.isLegendInset,t=c.selectAll("."+Tt.legendItem).data(t).enter().append("g");s.setLegendItem(t),t.append("text").text(function(t){return I(this,r),$(o.data_names[t])?o.data_names[t]:t}.bind(this)).each(function(t,e){i(this,t,e)}).style("pointer-events",s.getStylePropValue("none")).attr("x",f?n.xText:-200).attr("y",f?-200:n.yText),t.append("rect").attr("class",Tt.legendItemEvent).style("fill-opacity",s.getStylePropValue("0")).attr("x",f?n.xRect:-200).attr("y",f?-200:n.yRect),h?(a=[],t.append(function(t){I(this,r);var e=L(o.point_pattern)?o.point_pattern:[o.point_type];-1===a.indexOf(t)&&a.push(t);e=e[a.indexOf(t)%e.length];return"rectangle"===e&&(e="rect"),p.createElementNS(D.namespaces.svg,"hasValidPointType"in s&&s.hasValidPointType(e)?e:"use")}.bind(this)).attr("class",Tt.legendItemPoint).style("fill",Xe.bind(s)).style("pointer-events",s.getStylePropValue("none")).attr("href",function(t,e,i){I(this,r);e=i[e].nodeName.toLowerCase(),t=s.getTargetSelectorSuffix(t);return"use"===e?"#"+l.datetimeId+"-point"+t:void 0}.bind(this))):t.append(g?"line":u).attr("class",Tt.legendItemTile).style("stroke",Xe.bind(s)).style("pointer-events",s.getStylePropValue("none")).call(function(t){I(this,r),"circle"===u?t.attr("r",d).style("fill",Xe.bind(s)).attr("cx",f?n.x2Tile:-200).attr("cy",f?-200:n.yTile):g&&t.attr("stroke-width",e.height).attr("x1",f?n.x1Tile:-200).attr("y1",f?-200:n.yTile).attr("x2",f?n.x2Tile:-200).attr("y2",f?-200:n.yTile)}.bind(this))},updateLegendItemPos:function(t,e,d){var n=this,u=this.config,i=this.$el.legend,a=this.$T,r=u.legend_usePoint,s=u.legend_item_tile_type;r?a(i.selectAll("."+Tt.legendItemPoint).data(t),e).each(function(){var t,e=this,i=this.nodeName.toLowerCase(),n=u.point_r,a="x",r="y",s=2,o=2.5,l=null,c=null,h=null;"circle"===i?(a="cx",r="cy",l=n+(t=.2*n),s=2*n,o=-t):"rect"===i&&(h=c=2.5*n,o=3),(0,D.select)(this).attr(a,function(t){return I(this,e),d.x1Tile(t)+s}.bind(this)).attr(r,function(t){return I(this,e),d.yTile(t)-o}.bind(this)).attr("r",l).attr("width",c).attr("height",h)}):a(i.selectAll("."+Tt.legendItemTile).data(t),e).style("stroke",Xe.bind(this)).call(function(t){var i=this;I(this,n),"circle"===s?t.attr("cx",function(t){I(this,i);var e=d.x2Tile(t);return e-(e-d.x1Tile(t))/2}.bind(this)).attr("cy",d.yTile):"circle"!==s&&t.attr("x1",d.x1Tile).attr("y1",d.yTile).attr("x2",d.x2Tile).attr("y2",d.yTile)}.bind(this))}},Be=Zn(8),Ne={redraw:function(t){var e,i=this;void 0===t&&(t={});var n=this,a=n.config,r=n.state,s=n.$el,o=s.main,l=s.treemap;r.redrawing=!0;var c=n.filterTargetsToShow(n.data.targets),h=t.flow,d=t.initializing,u=n.getWithOption(t),g=u.Transition?a.transition_duration:0,f=u.TransitionForExit?g:0,p=u.TransitionForAxis?g:0,p=null==(e=n.axis)?void 0:e.generateTransitions(p);n.updateSizes(d),u.Legend&&a.legend_show?(t.withTransition=!!g,l||n.updateLegend(n.mapToIds(n.data.targets),t,p)):u.Dimension&&n.updateDimension(!0),l||n.hasArcType()&&!r.hasRadar||n.updateCircleY&&(n.circleY=n.updateCircleY()),a.data_empty_label_text&&o.select("text."+Dt.text+"."+ut.empty).attr("x",r.width/2).attr("y",r.height/2).text(a.data_empty_label_text).style("display",c.length?"none":null),r.hasAxis?(n.axis.redrawAxis(c,u,p,h,d),n.hasGrid()&&n.updateGrid(),a.regions.length&&n.updateRegion(),["bar","candlestick","line","area"].forEach(function(t){I(this,i);var e=q(t);(/^(line|area)$/.test(t)&&n.hasTypeOf(e)||n.hasType(t))&&n["update"+e](u.TransitionForExit)}.bind(this)),s.text&&o.selectAll("."+Ot.selectedCircles).filter(n.isBarType.bind(n)).selectAll("circle").remove(),a.interaction_enabled&&!h&&u.EventRect&&(n.redrawEventRect(),null!=n.bindZoomEvent&&n.bindZoomEvent())):(s.arcs&&n.redrawArc(g,f,u.Transform),s.radar&&n.redrawRadar(),s.polar&&n.redrawPolar(),l&&n.updateTreemap(f)),r.resizing||l||!n.hasPointType()&&!r.hasRadar||n.updateCircle(),n.hasDataLabel()&&!n.hasArcType(null,["radar"])&&n.updateText(),null!=n.redrawTitle&&n.redrawTitle(),d&&n.updateTypesElements(),n.generateRedrawList(c,h,g,u.Subchart),n.callPluginHook("$redraw",t,g)},generateRedrawList:function(t,e,i,n){var a=this,r=this,s=r.config,o=r.state,l=r.getDrawShape();o.hasAxis&&s.subchart_show&&r.redrawSubchart(n,i,l);var c,h=e&&r.generateFlow({targets:t,flow:e,duration:e.duration,shape:l,xv:r.xv.bind(r)}),t=(i||h)&&lt(),d=r.getRedrawList(l,e,h,t),e=function(){I(this,a),h&&h(),o.redrawing=!1,F(s.onrendered,r.api)}.bind(this);e&&(t&&d.length?(c=ge(),(0,Be.transition)().duration(i).each(function(){var i=this;I(this,a),d.reduce(function(t,e){return I(this,i),t.concat(e)}.bind(this),[]).forEach(function(t){return I(this,i),c.add(t)}.bind(this))}.bind(this)).call(c,e)):o.transiting||e()),r.mapToIds(r.data.targets).forEach(function(t){I(this,a),o.withoutFadeIn[t]=!0}.bind(this))},getRedrawList:function(n,t,e,a){var r=this,s=this,i=s.config,o=s.state,l=o.hasAxis,c=o.hasRadar,h=o.hasTreemap,d=s.$el.grid,u=n.pos,g=u.cx,f=u.cy,o=u.xForText,u=u.yForText,p=[];return l&&((i.grid_x_lines.length||i.grid_y_lines.length)&&p.push(s.redrawGrid(a)),i.regions.length&&p.push(s.redrawRegion(a)),Object.keys(n.type).forEach(function(t){I(this,r);var e=q(t),i=n.type[t];(/^(area|line)$/.test(t)&&s.hasTypeOf(e)||s.hasType(t))&&p.push(s["redraw"+e](i,a))}.bind(this)),!t&&d.main&&p.push(s.updateGridFocus())),s.hasArcType()&&!c||L(i.data_labels)&&!1!==i.data_labels&&p.push(s.redrawText(o,u,t,a)),!s.hasPointType()&&!c||i.point_focus_only||s.redrawCircle&&p.push(s.redrawCircle(g,f,a,e)),h&&p.push(s.redrawTreemap(a)),p},updateAndRedraw:function(t){var e,i=this,n=i.config,a=i.state;(t=void 0===t?{}:t).withTransition=S(t,"withTransition",!0),t.withTransform=S(t,"withTransform",!1),t.withLegend=S(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=S(t,"withTransitionForTransform",t.withTransition),t.withLegend&&n.legend_show||(a.hasAxis&&(e=i.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0)),i.updateScales(),i.updateSvgSize(),i.transformAll(t.withTransitionForTransform,e)),i.redraw(t,e)}};function Ge(t,e,i){void 0===e&&(e=0),void 0===i&&(i=1);var n={linear:Oe.scaleLinear,log:Oe.scaleSymlog,_log:Oe.scaleLog,time:Oe.scaleTime,utc:Oe.scaleUtc}[t=void 0===t?"linear":t]();return n.type=t,/_?log/.test(t)&&n.clamp(!0),n.range([e,i])}var je={getXScale:function(t,e,i,n){e=this.scale.zoom||Ge(this.axis.getAxisType("x"),t,e);return this.getCustomizedXScale(i?e.domain(i):e,n)},getYScale:function(t,e,i,n){i=Ge(this.axis.getAxisType(t),e,i);return n&&i.domain(n),i},getYScaleById:function(t,e){var i;void 0===e&&(e=!1);t="y2"===(null==(i=this.axis)?void 0:i.getId(t));return this.scale[e?t?"subY2":"subY":t?"y2":"y"]},getCustomizedXScale:function(i,t){function e(t,e){return t=i(t)+s(),e?t:Math.ceil(t)}var n,a=this,r=this,s=t||function(){return I(this,a),r.axis.x.tickOffset()}.bind(this),o=r.config.axis_x_inverted;for(n in i)e[n]=i[n];return e.orgDomain=function(){return I(this,a),i.domain()}.bind(this),e.orgScale=function(){return I(this,a),i}.bind(this),r.axis.isCategorized()&&(e.domain=function(t){return arguments.length?(i.domain(t),e):(t=this.orgDomain(),o?[t[0]+1,t[1]]:[t[0],t[1]+1])}),e},updateScales:function(t,e){var i=this;void 0===e&&(e=!0);var n,a=this,r=a.axis,s=a.config,o=a.format,l=a.org,c=a.scale,h=a.state,d=h.current,u=h.width,g=h.height,f=h.width2,p=h.height2,x=h.hasAxis,v=h.hasTreemap;x?(h=s.axis_rotated,x=a.getResettedPadding(1),p={x:h?x:0,y:h?0:g,subX:h?1:0,subY:h?0:p},f={x:h?g:u,y:h?u:x,subX:h?g:u,subY:h?f:1},n=e&&(null==(n=c.x)?void 0:n.orgDomain()),l=e&&l.xDomain,c.x=a.getXScale(p.x,f.x,n,function(){return I(this,i),r.x.tickOffset()}.bind(this)),c.subX=a.getXScale(p.x,f.x,l,function(t){return I(this,i),t%1?0:(null!=(t=r.subX)?t:r.x).tickOffset()}.bind(this)),o.xAxisTick=r.getXAxisTickFormat(),o.subXAxisTick=r.getXAxisTickFormat(!0),r.setAxis("x",c.x,s.axis_x_tick_outer,t),s.subchart_show&&r.setAxis("subX",c.subX,s.axis_x_tick_outer,t),c.y=a.getYScale("y",p.y,f.y,c.y?c.y.domain():s.axis_y_default),c.subY=a.getYScale("y",p.subY,f.subY,c.subY?c.subY.domain():s.axis_y_default),r.setAxis("y",c.y,s.axis_y_tick_outer,t),s.axis_y2_show&&(c.y2=a.getYScale("y2",p.y,f.y,c.y2?c.y2.domain():s.axis_y2_default),c.subY2=a.getYScale("y2",p.subY,f.subY,c.subY2?c.subY2.domain():s.axis_y2_default),r.setAxis("y2",c.y2,s.axis_y2_tick_outer,t))):v?(v=a.getCurrentPadding(),c.x=(0,Oe.scaleLinear)().rangeRound([v.left,d.width-v.right]),c.y=(0,Oe.scaleLinear)().rangeRound([v.top,d.height-v.bottom])):null!=a.updateArc&&a.updateArc()},xx:function(t){var e=this.config,i=this.scale,n=i.x,i=i.zoom,n=e.zoom_enabled&&i?i:n;return t?n(P(t.x)?t.x:t):null},xv:function(t){var e=this,i=e.axis,n=e.config,a=e.scale,r=a.x,a=a.zoom,r=n.zoom_enabled&&a?a:r,t=e.getBaseValue(t);return i.isTimeSeries()?t=ot.call(e,t):i.isCategorized()&&b(t)&&(t=n.axis_x_categories.indexOf(t)),Math.ceil(r(t))},yv:function(t){var e=this.scale,i=e.y,e=e.y2,i=t.axis&&"y2"===t.axis?e:i;return Math.ceil(i(this.getBaseValue(t)))},subxx:function(t){return t?this.scale.subX(t.x):null}},Ve=Zn(9),Ye={getDrawShape:function(){var t,e,n=this,a=this,i=a.config.axis_rotated,r=a.state,s=r.hasRadar,r=r.hasTreemap,o={type:{},indices:{},pos:{}};return r||["bar","candlestick","line","area"].forEach(function(t){I(this,n);var e,i=q(/^(bubble|scatter)$/.test(t)?"line":t);(a.hasType(t)||a.hasTypeOf(i)||"line"===t&&(a.hasType("bubble")||a.hasType("scatter")))&&(e=a.getShapeIndices(a["is"+i+"Type"]),i=a["generateDraw"+i],o.indices[t]=e,o.type[t]=i?i.bind(a)(e,!1):void 0)}.bind(this)),a.hasArcType()&&!s&&!r||(r||(t=s?a.radarCircleX:i?a.circleY:a.circleX,e=s?a.radarCircleY:i?a.circleX:a.circleY),o.pos={xForText:a.generateXYForText(o.indices,!0),yForText:a.generateXYForText(o.indices,!1),cx:(t||function(){}).bind(a),cy:(e||function(){}).bind(a)}),o},getShapeIndices:function(t){var o=this,l=this.config,c=l.data_xs,e=L(c),h={},d=e?{}:0;return e&&Q(Object.keys(c).map(function(t){return I(this,o),c[t]}.bind(this))).forEach(function(t){I(this,o),d[t]=0,h[t]={}}.bind(this)),this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){I(this,o);for(var e,i=(t.id in c?c[t.id]:""),n=i?h[i]:h,a=0;e=l.data_groups[a];a++)if(!(e.indexOf(t.id)<0))for(var r,s=0;r=e[s];s++)if(r in n){n[t.id]=n[r];break}M(n[t.id])&&(n[t.id]=i?d[i]++:d++,n.__max__=(i?d[i]:d)-1)}.bind(this)),h},getIndices:function(t,e){var i=this,n=this.config,a=n.data_xs,r=n.bar_indices_removeNull,n=e.id,e=e.index;if(this.isBarType(n)&&r){var s={};return this.getAllValuesOnIndex(e,!0).forEach(function(t,e){I(this,i),s[t.id]=e,s.__max__=e}.bind(this)),s}return L(a)?t[a[n]]:t},getIndicesMax:function(e){var i=this;return L(this.config.data_xs)?Object.keys(e).map(function(t){return I(this,i),e[t].__max__||0}.bind(this)).reduce(function(t,e){return I(this,i),t+e}.bind(this)):e.__max__},getShapeX:function(r,s,t){var o=this,l=this,e=l.config,i=l.scale,c=t?i.subX:i.zoom||i.x,h=e.bar_overlap,d=e.bar_padding,u=function(t,e){return I(this,o),t+e}.bind(this),g=w(r)&&(r._$total.length?r._$total.reduce(u)/2:0);return function(t){I(this,o);var e=l.getIndices(s,t,"getShapeX"),i=t.id in e?e[t.id]:0,n=(e.__max__||0)+1,a=0;return L(t.x)&&(e=c(t.x,!0),a=g?(t=r[t.id]||r._$width,h?e-t/2:e-t+r._$total.slice(0,i+1).reduce(u)-g):e-(z(r)?r:r._$width)*(n/2-(h?1:i))),r&&a&&1<n&&d&&(i&&(a+=d*i),2<n?a-=(n-1)*d/2:2===n&&(a-=d/2)),a}.bind(this)},getShapeY:function(i){var n=this,a=this,r=a.isStackNormalized();return function(t){I(this,n);var e=t.value;return z(t)?e=t:r?e=a.getRatio("index",t,!0):a.isBubbleZType(t)?e=a.getBubbleZData(t.value,"y"):a.isBarRangeType(t)&&(e=e[1]),a.getYScaleById(t.id,i)(e)}.bind(this)},getShapeYMin:function(t){var e=this.axis.getId(t),i=this.scale[e].domain()[0],e=this.config["axis_"+e+"_inverted"];return!this.isGrouped(t)&&!e&&0<i?i:0},getShapeOffsetData:function(t){var r=this,s=this,e=s.orderTargets(s.filterTargetsToShow(s.data.targets.filter(t,s))),o=s.isStackNormalized(),t=e.map(function(t){var n=this;I(this,r);var e=t.values,a={},i=(e=s.isStepType(t)?s.convertValuesToStep(e):e).reduce(function(t,e){I(this,n);var i=+e.x;return t[i]=e,a[i]=o?s.getRatio("index",e,!0):e.value,t}.bind(this),{});return{id:t.id,rowValues:e,rowValueMapByXValue:i,values:a}}.bind(this));return{indexMapByTargetId:e.reduce(function(t,e,i){e=e.id;return I(this,r),t[e]=i,t}.bind(this),{}),shapeOffsetTargets:t}},getShapeOffset:function(t,n,u){var g=this,f=this,t=f.getShapeOffsetData(t),p=t.shapeOffsetTargets,x=t.indexMapByTargetId,v=f.config.data_groupsZeroAs;return function(t,a){var r=this;I(this,g);var s=t.id,o=t.value,e=t.x,i=f.getIndices(n,t),l=f.getYScaleById(s,u);if(f.isBarRangeType(t))return l(o[0]);var c=+e,h=l("zero"===v?0:f.getShapeYMin(s)),d=h;return p.filter(function(t){return I(this,r),t.id!==s&&i[t.id]===i[s]}.bind(this)).forEach(function(t){I(this,r);var e=t.id,i=t.rowValueMapByXValue,n=t.rowValues,t=t.values;x[e]<x[s]&&(t=t[c],0<=(null==(n=!(n=n[a])||+n.x!=c?i[c]:n)?void 0:n.value)*o&&z(t)&&(0!==o||("positive"===v&&0<t||"negative"===v&&t<0))&&(d+=l(t)-h))}.bind(this)),d}.bind(this)},getBarW:function(t,e,n){var a=this,i=this,r=i.config,s=i.org,o=i.scale,l=i.getMaxDataCount(),c="bar"===t&&r.data_groups.length,h=t+"_width",d=o.zoom&&!i.axis.isCategorized()?s.xDomain.map(function(t){return I(this,a),o.zoom(t)}.bind(this)).reduce(function(t,e){return I(this,a),Math.abs(t)+e}.bind(this))/l:e.tickInterval(l),u=function(t){I(this,a);var e=t?r[h][t]:r[h],i=t?e.ratio:r[h+"_ratio"],t=t?e.max:r[h+"_max"],i=z(e)?e:n?d*i/n:0;return t&&t<i?t:i}.bind(this),g=u();return!c&&w(r[h])&&(g={_$width:g,_$total:[]},i.filterTargetsToShow(i.data.targets).forEach(function(t){I(this,a),r[h][t.id]&&(g[t.id]=u(t.id),g._$total.push(g[t.id]||g._$width))}.bind(this))),g},getShapeByIndex:function(t,e,i){var n=this,a=this.$el,r=P(e)?"-"+e:"",s=a[t];return s=s&&!s.empty()?s.filter(function(t){return I(this,n),!i||t.id===i}.bind(this)).filter(function(t){return I(this,n),!P(e)||t.index===e}.bind(this)):(i?a.main.selectAll("."+Xt[t+"s"]+this.getTargetSelectorSuffix(i)):a.main).selectAll("."+Xt[t]+r)},isWithinShape:function(t,e){var i,n=this,a=(0,D.select)(t);return n.isTargetToShow(e.id)?null!=n.hasValidPointType&&n.hasValidPointType(t.nodeName)?i=n.isStepType(e)?n.isWithinStep(t,n.getYScaleById(e.id)(e.value)):n.isWithinCircle(t,n.isBubbleType(e)?1.5*n.pointSelectR(e):0):"path"===t.nodeName&&(i=!a.classed(Xt.bar)||n.isWithinBar(t)):i=!1,i},getInterpolate:function(t){t=this.getInterpolateType(t);return{basis:Ve.curveBasis,"basis-closed":Ve.curveBasisClosed,"basis-open":Ve.curveBasisOpen,bundle:Ve.curveBundle,cardinal:Ve.curveCardinal,"cardinal-closed":Ve.curveCardinalClosed,"cardinal-open":Ve.curveCardinalOpen,"catmull-rom":Ve.curveCatmullRom,"catmull-rom-closed":Ve.curveCatmullRomClosed,"catmull-rom-open":Ve.curveCatmullRomOpen,"monotone-x":Ve.curveMonotoneX,"monotone-y":Ve.curveMonotoneY,natural:Ve.curveNatural,"linear-closed":Ve.curveLinearClosed,linear:Ve.curveLinear,step:Ve.curveStep,"step-after":Ve.curveStepAfter,"step-before":Ve.curveStepBefore}[t]},getInterpolateType:function(t){var e=this.config,i=e.spline_interpolation_type,i=this.isInterpolationType(i)?i:"cardinal";return this.isSplineType(t)?i:this.isStepType(t)?e.line_step_type:"linear"},isWithinBar:function(t){var e=V(this.state.event,t),i=j(t),n=i[0],a=i[1],r=Math.min(n.x,a.x),i=Math.min(n.y,a.y),n=this.config.bar_sensitivity,a=t.getBBox(),t=a.width,a=a.height;return r-n<e[0]&&e[0]<r+t+n&&i-n<e[1]&&e[1]<i+a+n}},He={setContainerSize:function(){var t=this.state;t.current.width=this.getCurrentWidth(),t.current.height=this.getCurrentHeight()},getCurrentWidth:function(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function(){var t=this.config,e=t.size_height||this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getCurrentPaddingTop:function(){var t=this,e=t.config,i=t.state.hasAxis,n=t.$el,a=i?e.axis_y2_axes.length:0,i=P(e.padding_top)?e.padding_top:0;return n.title&&n.title.node()&&(i+=t.getTitlePadding()),a&&e.axis_rotated&&(i+=t.getHorizontalAxisHeight("y2")*a),i},getCurrentPaddingBottom:function(){var t=this.config,e=this.state.hasAxis,i=t.axis_rotated?"y":"x",e=e?t["axis_"+i+"_axes"].length:0;return(P(t.padding_bottom)?t.padding_bottom:0)+(e?this.getHorizontalAxisHeight(i)*e:0)},getCurrentPaddingLeft:function(t){var e=this.config,i=this.state.hasAxis,n=e.axis_rotated,a="fit"===(null==(o=e.padding)?void 0:o.mode),r=n?"x":"y",s=i?e["axis_"+r+"_axes"].length:0,o=i?this.getAxisWidthByAxisId(r,t):0;a||(o=m(o));t=e["axis_"+r+"_inner"]||!e["axis_"+r+"_show"]?0:o;return P(e.padding_left)?t=e.padding_left+(a&&n?o:0):i&&n&&(t=e.axis_x_show?a?o:Math.max(o,40):1),i&&(a||e["axis_"+r+"_inner"])&&e["axis_"+r+"_label"].text&&(t+=this.axis.getAxisLabelPosition("y").isOuter?20:0),t+o*s},getCurrentPaddingRight:function(t){void 0===t&&(t=!1);var e=this,i=e.config,n=e.state.hasAxis,a=i.axis_rotated,r="fit"===(null==(h=i.padding)?void 0:h.mode),s=r?2:10,o=e.state.isLegendRight?e.getLegendWidth()+20:0,l=n?i.axis_y2_axes.length:0,c=null!=(d=e.axis)&&d.getAxisLabelPosition("y2").isOuter?20:0,h=t?e.axis.getXAxisTickTextY2Overflow(s):0,d=n&&!i.axis_y2_inner?e.getAxisWidthByAxisId("y2"):1;r||(d=m(d));t=a?0:Math.max(d+o,h);return P(i.padding_right)?t=i.padding_right+(r&&(a||!i.axis_y2_show?s:t))+(n&&!r?1:0):e.axis&&a?t=s+o:!e.axis||i.axis_y2_show&&!i.axis_y2_inner||(t=Math.max((r&&!i.axis_y2_show?2:1)+o+c,h)),n&&!a&&r&&i.axis_y2_show&&!i.axis_y2_inner&&i.axis_y2_label.text&&(t+=c),t+d*l},getParentRectValue:function(t){for(var e="offset"+q(t),i=this.$el.chart.node(),n=0;n<30&&i&&"BODY"!==i.tagName;){try{n=i.getBoundingClientRect()[t]}catch(t){e in i&&(n=i[e])}i=i.parentNode}var a=p.body[e];return n=a<n?a:n},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.$el.chart.style("height"),e=0;return e=t?/px$/.test(t)?parseInt(t,10):this.getParentRectValue("height"):e},getSvgLeft:function(t){var e=this.config,i=this.$el,n=e.axis_rotated||!e.axis_rotated&&!e.axis_y_inner,e=e.axis_rotated?pt.axisX:pt.axisY,e=i.main.select("."+e).node(),n=e&&n?e.getBoundingClientRect():{right:0},e=i.chart.node().getBoundingClientRect(),i=this.hasArcType(),t=n.right-e.left-(i?0:this.getCurrentPaddingLeft(t));return 0<t?t:0},updateDimension:function(t){var e,i=this,n=i.config,a=i.state.hasAxis,r=i.$el;a&&!t&&i.axis.x&&n.axis_rotated&&null!=(e=i.axis.subX)&&e.create(r.axis.subX),i.updateScales(t),i.updateSvgSize(),i.transformAll(!1)},updateSvgSize:function(){var t=this,e=t.state,i=e.clip,n=e.current,a=e.hasAxis,r=e.width,s=e.height,e=t.$el.svg;e.attr("width",n.width).attr("height",n.height),a&&(n={width:0,height:0},(a=e.select("."+It.brush+" .overlay")).size()&&(n.width=+a.attr("width"),n.height=+a.attr("height")),e.selectAll(["#"+i.id,"#"+i.idGrid]).select("rect").attr("width",r).attr("height",s),e.select("#"+i.idXAxis).select("rect").call(t.setXAxisClipPath.bind(t)),e.select("#"+i.idYAxis).select("rect").call(t.setYAxisClipPath.bind(t)),i.idSubchart&&e.select("#"+i.idSubchart).select("rect").attr("width",r).attr("height",n.height))},getCurrentPadding:function(){return{top:this.getCurrentPaddingTop(),bottom:this.getCurrentPaddingBottom(),left:this.getCurrentPaddingLeft(),right:this.getCurrentPaddingRight()}},getResettedPadding:function(e){var i=this,n=this.config,t=z(e),a=t?0:{};return!1===n.padding?t||Object.keys(e).forEach(function(t){I(this,i),a[t]=A(n.data_labels)||!1===n.data_labels||"top"!==t?0:e[t]}.bind(this)):a=e,a},updateSizes:function(t){var e=this,i=e.config,n=e.state,a=e.$el.legend,r=i.axis_rotated,s=e.hasArcType()||n.hasTreemap,o="fit"===(null==(u=i.padding)?void 0:u.mode);t||e.setContainerSize();var l={width:a?e.getLegendWidth():0,height:a?e.getLegendHeight():0};!s&&i.axis_x_show&&i.axis_x_tick_autorotate&&e.updateXAxisTickClip();var c=n.isLegendRight||n.isLegendInset?0:l.height,h=r||s?0:e.getHorizontalAxisHeight("x"),d=i.subchart_axis_x_show&&i.subchart_axis_x_tick_text_show?h:30,u=i.subchart_show&&!s?i.subchart_size_height+d:0,t=e.hasType("gauge")&&i.arc_needle_show&&!i.gauge_fullCircle&&!i.gauge_label_show?10:0,a=e.getCurrentPadding();n.margin=!s&&r?{top:e.getHorizontalAxisHeight("y2")+a.top,right:s?0:e.getCurrentPaddingRight(!0),bottom:e.getHorizontalAxisHeight("y")+c+a.bottom,left:u+(s?0:a.left)}:{top:(o?0:4)+a.top,right:s?0:e.getCurrentPaddingRight(!0),bottom:t+h+u+c+a.bottom,left:s?0:a.left},n.margin=e.getResettedPadding(n.margin),n.margin2=r?{top:n.margin.top,right:NaN,bottom:20+c,left:e.state.rotatedPadding.left}:{top:n.current.height-u-c,right:NaN,bottom:d+c,left:n.margin.left},n.margin3={top:0,right:NaN,bottom:0,left:0},null!=e.updateSizeForLegend&&e.updateSizeForLegend(l),n.width=n.current.width-n.margin.left-n.margin.right,n.height=n.current.height-n.margin.top-n.margin.bottom,n.width<0&&(n.width=0),n.height<0&&(n.height=0),n.width2=r?n.margin.left-n.rotatedPadding.left-n.rotatedPadding.right:n.width,n.height2=r?n.height:n.current.height-n.margin2.top-n.margin2.bottom,n.width2<0&&(n.width2=0),n.height2<0&&(n.height2=0),e.hasArcType()&&(c=e.hasType("gauge"),r=i.legend_show&&n.isLegendRight,n.arcWidth=n.width-(r?l.width+10:0),n.arcHeight=n.height-(r&&!c?0:10),c&&!i.gauge_fullCircle&&(n.arcHeight+=n.height-e.getPaddingBottomForGauge()),null!=e.updateRadius&&e.updateRadius()),n.isLegendRight&&s&&(n.margin3.left=n.arcWidth/2+1.1*n.radiusExpanded)}},We={setCssRule:function(a,r,s,o){var e=this,l=this,t=l.config,i=l.state,c=i.cssRule,h=i.style;return(t.boost_useCssRule?function(t){var n=this;I(this,e),t.each(function(t){var e=this;I(this,n);var i=o&&(null==o?void 0:o.call(l,t)),t=(a?"."+(Pt.shapes+l.getTargetSelectorSuffix(t.id)):"")+r;r in c&&h.sheet.deleteRule(c[t]),l.state.cssRule[t]=function(t,e,i){var n=this,a=t.rootSelctor,t=t.sheet,i=a+" "+function(t){return I(this,n),t.replace(/\s?(bb-)/g,".$1").replace(/\.+/g,".")}.bind(this)(e)+" {"+i.join(";")+"}";return t[t.insertRule?"insertRule":"addRule"](i,t.cssRules.length)}(h,t,s.filter(Boolean).map(function(t){return I(this,e),b(i)&&-1===t.indexOf(":")?t+": "+i:t||""}.bind(this)))}.bind(this))}:function(){I(this,e)}).bind(this)},getStylePropValue:function(t){return this.config.boost_useCssRule?null:R(t)?t.bind(this):t}};function Ue(t,e){var i=this.config.data_labels_position,n=t.id,a=t.index,t=t.value;return null!=(e=R(i)?i.bind(this.api)(e,t,n,a,this.$el.text):(n in i?i[n]:i)[e])?e:0}var Ze={opacityForText:function(t){return(!this.isBarType(t)||this.meetsLabelThreshold(Math.abs(this.getRatio("bar",t)),"bar"))&&this.hasDataLabel?null:"0"},initText:function(){var t=this.$el;t.main.select("."+ut.chart).append("g").attr("class",Dt.chartTexts).style("pointer-events",t.treemap?"none":null)},updateTargetsForText:function(t){var e=this,i=this,n=i.getChartClass("Text"),a=i.getClass("texts","id"),r=i.classFocus.bind(i);i.$el.main.select("."+Dt.chartTexts).selectAll("."+Dt.chartText).data(t).attr("class",function(t){return I(this,e),(""+n(t)+r(t)).trim()}.bind(this)).enter().append("g").style("opacity","0").attr("class",n).call(i.setCssRule(!0," ."+Dt.text,["fill","pointer-events:none"],i.updateTextColor)).append("g").attr("class",a)},updateText:function(){var n=this,s=this,t=s.$el,e=s.$T,a=s.config,r=s.axis,i=s.getClass("text","index"),o=a.data_labels.centered,l=t.main.selectAll("."+Dt.texts).selectAll("."+Dt.text).data(s.labelishData.bind(s));e(l.exit()).style("fill-opacity","0").remove(),t.text=l.enter().append("text").merge(l).attr("class",i).attr("text-anchor",function(t){I(this,n);var e=a["axis_"+(null==r?void 0:r.getId(t.id))+"_inverted"]?0<t.value:t.value<0;if(s.isCandlestickType(t))var i=s.getCandlestickData(t),e=!(null!=i&&i._isUp);else if(s.isTreemapType(t))return o?"middle":"start";return a.axis_rotated?e?"end":"start":"middle"}.bind(this)).style("fill",s.getStylePropValue(s.updateTextColor)).style("fill-opacity","0").each(function(t,e,i){var n,a=(0,D.select)(this),r=t.value;s.isBubbleZType(t)?r=s.getBubbleZData(r,"z"):!s.isCandlestickType(t)||(n=s.getCandlestickData(t))&&(r=n.close),r=s.isTreemapType(t)?s.treemapDataLabelFormat(t)(a):s.dataLabelFormat(t.id)(r,t.id,e,i),z(r)?this.textContent=r:G(a,r)})},updateTextColor:function(t){var e,i=this,n=i.config,a=n.data_labels_colors,r=i.isArcType(t)&&!i.isRadarType(t)||i.isTreemapType(t)?null:i.color(t);return b(a)?e=a:O(a)?e=a[(t.data||t).id]:R(a)&&(e=a.bind(i.api)(r,t)),i.isCandlestickType(t)&&!R(a)&&(null!=(i=i.getCandlestickData(t))&&i._isUp||(n=n.candlestick_color_down,e=O(n)?n[t.id]:n)),e||r},updateTextBacgroundColor:function(t){var e=this.$el,i=this.config.data_labels_backgroundColors,n="";return(b(i)||O(i))&&(t=b(i)?"":this.getTargetSelectorSuffix(("id"in t?t:t.data).id),(t=e.defs.select(["filter[id*='labels-bg","']"].join(t))).size()&&(n="url(#"+t.attr("id")+")")),n||null},redrawText:function(a,r,t,s){var e,i,o=this,l=o.$T,c=o.axis,h=o.config,d=o.state.hasTreemap,u=W(!0),g=h.axis_rotated,f=h.data_labels.rotate,p=(i="middle",0<(e=f)&&e<=170?i="end":190<e&&e<=360&&(i="start"),i),x=f?"rotate("+f+")":"";return o.$el.text.style("fill",o.getStylePropValue(o.updateTextColor)).attr("filter",o.updateTextBacgroundColor.bind(o)).style("fill-opacity",t?0:o.opacityForText.bind(o)).each(function(t,e){var i=l(d&&this.childElementCount?this.parentNode:this,!(!s||!this.getAttribute("x")),u),n=h["axis_"+(null==c?void 0:c.getId(t.id))+"_inverted"],e={x:a.bind(this)(t,e),y:r.bind(this)(t,e)};f&&(e=function(t,e,i,n,a){var r=t.value,s=this.isCandlestickType(t),t=z(r)&&r<0||s&&!(null!=(o=this.getCandlestickData(t))&&o._isUp),o=e.x,e=e.y;return n?"start"===i?(o+=t?0:8,e+=4):"middle"===i?(o+=8,e-=8):"end"===i&&(t&&(o-=8),e+=4):("start"===i?(o+=4,t&&(e+=16)):"middle"===i?e-=8:"end"===i&&(o-=4,t&&(e+=16)),a&&(e+=t?-17:s?13:7)),{x:o,y:e}}.bind(o)(t,e,p,g,n),i.attr("text-anchor",p)),this.childElementCount||f?i.attr("transform","translate("+e.x+" "+e.y+") "+x):i.attr("x",e.x).attr("y",e.y)}),!0},getTextRect:function(t,e){var i=this,n=t.node?t.node():t,a=(n=!/text/i.test(n.tagName)?n.querySelector("text"):n).textContent,t=ce+"-"+a.replace(/\W/g,"_"),r=this.cache.get(t);return r||(this.$el.svg.append("text").style("visibility","hidden").style("font",(0,D.select)(n).style("font")).classed(e,!0).text(a).call(function(t){I(this,i),r=H(t.node())}.bind(this)).remove(),this.cache.add(t,r)),r},generateXYForText:function(e,t){var i=this,n=this,a=n.state,r=a.hasRadar,s=a.hasTreemap,a=Object.keys(e),o={},l=t?n.getXForText:n.getYForText;return r&&a.push("radar"),s&&a.push("treemap"),a.forEach(function(t){I(this,i),o[t]=n["generateGet"+q(t)+"Points"](e[t],!1)}.bind(this)),function(t,e){var i=(n.isAreaType(t)?"area":n.isBarType(t)&&"bar")||n.isCandlestickType(t)&&"candlestick"||n.isRadarType(t)&&"radar"||n.isTreemapType(t)&&"treemap"||"line";return l.call(n,o[i](t,e),t,this)}},getCenteredTextPos:function(t,e,i,n){var a=this.config,r=a.axis_rotated,s=this.isBarType(t),o=this.isTreemapType(t);if(a.data_labels.centered&&(s||o)){i=H(i);if(s){t=0<=t.value;if(r){var l=(t?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+i.width/2;return t?-l-3:2+l}l=(t?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+i.height/2;return t?l:-l-2}if(o)return"x"===n?(e[1][0]-e[0][0])/2:(e[1][1]-e[0][1])/2+i.height/2}return 0},getXForText:function(t,e,i){var n,a,r=this,s=r.config,o=r.state,l=s.axis_rotated,c=r.isTreemapType(e),h=t[0][0];return r.isCandlestickType(e)?l?h=null!=(n=r.getCandlestickData(e))&&n._isUp?t[2][2]+4:t[2][1]-4:h+=(t[1][0]-h)/2:c?h+=s.data_labels.centered?0:5:l?(n=s["axis_"+r.axis.getId(e.id)+"_inverted"],s=r.isBarType(e)?4:6,a=e.value,h=t[2][1],n?h-=s*(0<a?1:-1):h+=s*(a<0?-1:1)):h=r.hasType("bar")?(t[2][0]+t[0][0])/2:h,null===e.value&&(h>o.width?(a=H(i).width,h=o.width-a):h<0&&(h=4)),(l||c)&&(h+=r.getCenteredTextPos(e,t,i,"x")),h+Ue.call(this,e,"x")},getYForText:function(t,e,i){var n,a=this,r=a.axis,s=a.config,o=a.state,l=s.axis_rotated,c=s["axis_"+(null==r?void 0:r.getId(e.id))+"_inverted"],h=a.isBarType(e),d=a.isTreemapType(e),u=s.point_r,g=H(i),f=e.value,r=3;return a.isCandlestickType(e)?(f=a.getCandlestickData(e),l?(n=t[0][0],n+=(t[1][0]-n)/2+r):(n=f&&f._isUp?t[2][2]-r:t[2][1]+4*r,c&&(n+=15*(f._isUp?1:-1)))):d?n=t[0][1]+(s.data_labels.centered?0:g.height+5):l?n=(t[0][0]+t[2][0]+.6*g.height)/2:(n=t[2][1],z(u)&&5<u&&(a.isLineType(e)||a.isScatterType(e))&&(r+=s.point_r/2.3),f<0||0===f&&!o.hasPositiveValue&&o.hasNegativeValue?n+=c?h?-3:-5:g.height+(h?-r:r):(f=2*-r,h?f=-r:a.isBubbleType(e)&&(f=r),n+=f=c?h?10:15:f)),null!==e.value||l||(n<(g=g.height)?n=g:n>o.height&&(n=o.height-4)),l&&!d||(n+=a.getCenteredTextPos(e,t,i,"y")),n+Ue.call(this,e,"y")},markOverlapped:function(e,t,i){var n=this,t=t.$el.arcs.selectAll(i),i=t.filter(function(t){return I(this,n),t.data.id!==e}.bind(this)),a=t.filter(function(t){return I(this,n),t.data.id===e}.bind(this)),r=J(a.node()),s=function(t,e){return I(this,n),Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}.bind(this);a.node()&&i.each(function(){var t=J(this),e=(0,D.select)(this),i=s(r.e,r.f)>s(t.e,t.f)?a:e,i=Math.ceil(Math.abs(r.e-t.e))<Math.ceil(i.node().getComputedTextLength()),t=Math.ceil(Math.abs(r.f-t.f))<parseInt(a.style("font-size"),10);e.classed(Dt.TextOverlapping,i&&t)})},undoMarkOverlapped:function(t,e){t.$el.arcs.selectAll(e).each(function(){(0,D.selectAll)([this,this.previousSibling]).classed(Dt.TextOverlapping,!1)})},meetsLabelThreshold:function(t,e){return(this.config[e+"_label_threshold"]||0)<=(t=void 0===t?0:t)}};function qe(t,e){void 0===t&&(t="left");var i=z(e),i=-1<t.indexOf("center")?i?e/2:"middle":-1<t.indexOf("right")?i?e:"end":i?0:"start";return i}var Ke={initTitle:function(){var t=this.config,e=this.$el;t.title_text&&(e.title=e.svg.append("g"),G(e.title.append("text").style("text-anchor",qe(t.title_position)).attr("class",Dt.title),t.title_text,[.3,1.5]))},redrawTitle:function(){var t,e=this,i=e.config,n=e.state.current,a=e.$el.title;a&&(t=e.yForTitle.call(e),/g/i.test(a.node().tagName)?a.attr("transform","translate("+qe(i.title_position,n.width)+", "+t+")"):a.attr("x",e.xForTitle.call(e)).attr("y",t))},xForTitle:function(){var t,e=this.config,i=this.state.current,n=e.title_position||"left",a=this.getTextRect(this.$el.title,Dt.title).width;return/(right|center)/.test(n)?(t=i.width-a,0<=n.indexOf("right")?t=i.width-a-e.title_padding.right:0<=n.indexOf("center")&&(t=(i.width-a)/2)):t=e.title_padding.left||0,t},yForTitle:function(){return(this.config.title_padding.top||0)+this.getTextRect(this.$el.title,Dt.title).height},getTitlePadding:function(){return this.yForTitle()+(this.config.title_padding.bottom||0)}},t={initTooltip:function(){var t=this.config,e=this.$el;e.tooltip=(0,D.select)(t.tooltip_contents.bindto),e.tooltip.empty()&&(e.tooltip=e.chart.append("div").attr("class",zt.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),this.bindTooltipResizePos()},initShowTooltip:function(){var i=this,n=this,a=n.config,t=n.$el,e=n.state,r=e.hasAxis,e=e.hasRadar;if(a.tooltip_init_show){var s=!(r&&e);if(null!=(e=n.axis)&&e.isTimeSeries()&&b(a.tooltip_init_x)){var o,l,c=n.data.targets[0];for(a.tooltip_init_x=ot.call(n,a.tooltip_init_x),o=0;(l=c.values[o])&&l.x-a.tooltip_init_x!=0;o++);a.tooltip_init_x=o}e=n.data.targets.map(function(t){I(this,i);var e=s?0:a.tooltip_init_x;return n.addName(t.values[e])}.bind(this));s&&(e=[e[a.tooltip_init_x]]),t.tooltip.html(n.getTooltipHTML(e,null==(e=n.axis)?void 0:e.getXAxisTickFormat(),n.getDefaultValueFormat(),n.color)),a.tooltip_contents.bindto||t.tooltip.style("top",a.tooltip_init_position.top).style("left",a.tooltip_init_position.left).style("display",null)}},getTooltipHTML:function(){var t=this.api,e=this.config;return R(e.tooltip_contents)?e.tooltip_contents.bind(t).apply(void 0,arguments):this.getTooltipContent.apply(this,arguments)},getTooltipContent:function(h,t,e,i){var a,r=this,d=this,n=d.api,s=d.config,u=d.state,g=d.$el,o=["title","name","value"].map(function(t){I(this,r);t=s["tooltip_format_"+t];return R(t)?t.bind(n):t}.bind(this)),f=o[0],p=o[1],x=o[2],f=f||t,p=p||function(t){return I(this,r),t}.bind(this),x=x||(u.hasTreemap||d.isStackNormalized()?function(t,e){return I(this,r),(100*e).toFixed(2)+"%"}.bind(this):e),l=s.tooltip_order,v=function(t){return I(this,r),d.axis&&d.isBubbleZType(t)?d.getBubbleZData(t.value,"z"):d.getBaseValue(t)}.bind(this),b=(d.levelColor?function(t){return I(this,r),d.levelColor(t.value)}:function(t){return I(this,r),i(t)}).bind(this),_=s.tooltip_contents,m=_.template,y=d.mapToTargetIds();null===l&&s.data_groups.length?(a=d.orderTargets(d.data.targets).map(function(t){return I(this,r),t.id}.bind(this)).reverse(),h.sort(function(t,e){I(this,r);var i=t?t.value:null,n=e?e.value:null;return 0<i&&0<n&&(i=t.id?a.indexOf(t.id):null,n=e.id?a.indexOf(e.id):null),i-n}.bind(this))):/^(asc|desc)$/.test(l)?h.sort(function(t,e){I(this,r);t=t?v(t):null,e=e?v(e):null;return"asc"===l?t-e:e-t}.bind(this)):R(l)&&h.sort(l.bind(n));for(var T,w,A,S,k=d.getTooltipContentTemplate(m),c=h.length,C=0;C<c;C++)(function(){var t,e,i,n,a,r=this;if(!(w=h[C])||!v(w)&&0!==v(w))return;if(M(T)&&(t=(u.hasAxis||u.hasRadar)&&N(f?f(w.x):w.x),T=st(k[0],{CLASS_TOOLTIP:zt.tooltip,TITLE:P(t)?m?t:'<tr><th colspan="2">'+t+"</th></tr>":""})),!w.ratio&&g.arcs&&(A=["arc",d.$el.arcs.select("path."+gt.arc+"-"+w.id).data()[0]],w.ratio=d.getRatio.apply(d,A)),A=[w.ratio,w.id,w.index,h],S=N(x.apply(void 0,[v(w)].concat(A))),d.isAreaRangeType(w)?(i=(e=["high","low"].map(function(t){return I(this,r),N(x.apply(void 0,[d.getRangedData(w,t)].concat(A)))}.bind(this)))[0],n=e[1],S="<b>Mid:</b> "+S+" <b>High:</b> "+i+" <b>Low:</b> "+n):d.isCandlestickType(w)?(t=(a=["open","high","low","close","volume"].map(function(t){return I(this,r),N(x.apply(void 0,[d.getRangedData(w,t,"candlestick")].concat(A)))}.bind(this)))[0],e=a[1],i=a[2],n=a[3],a=a[4],S="<b>Open:</b> "+t+" <b>High:</b> "+e+" <b>Low:</b> "+i+" <b>Close:</b> "+n+(a?" <b>Volume:</b> "+a:"")):d.isBarRangeType(w)&&(o=(l=w.value)[0],l=l[1],S=x(o)+" ~ "+x(l)),void 0!==S){if(null===w.name)return;var s,o=N(p.apply(void 0,[w.name].concat(A))),l=b(w),c={CLASS_TOOLTIP_NAME:zt.tooltipName+d.getTargetSelectorSuffix(w.id),COLOR:m||!d.patterns?l:'<svg><rect style="fill:'+l+'" width="10" height="10"></rect></svg>',NAME:o,VALUE:S};m&&O(_.text)&&(s=y.indexOf(w.id),Object.keys(_.text).forEach(function(t){I(this,r),c[t]=_.text[t][s]}.bind(this))),T+=st(k[1],c)}})();return T+"</table>"},getTooltipContentTemplate:function(t){return(t||'<table class="{=CLASS_TOOLTIP}"><tbody>\n\t\t\t\t{=TITLE}\n\t\t\t\t{{<tr class="{=CLASS_TOOLTIP_NAME}">\n\t\t\t\t\t<td class="name">'+(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>')+'{=NAME}</td>\n\t\t\t\t\t<td class="value">{=VALUE}</td>\n\t\t\t\t</tr>}}\n\t\t\t</tbody></table>').replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},setTooltipPosition:function(t,e){var i,n=this,a=this,r=a.config,s=a.scale,o=a.state,l=a.$el,c=l.eventRect,h=l.tooltip,l=r.tooltip_contents.bindto,d=h.datum();!l&&d&&(e={x:(l=V(o.event,null!=e?e:c.node()))[0],y:l[1]},s.x&&d&&"x"in d&&(e.xAxis=s.x(d.x)),s=void 0===(l=d.width)?0:l,l=void 0===(l=d.height)?0:l,i=null!=(c=null==(r=r.tooltip_position)?void 0:r.bind(a.api)(null!=t?t:JSON.parse(d.current),s,l,null==c?void 0:c.node(),e))?c:a.getTooltipPosition.bind(a)(s,l,e),["top","left"].forEach(function(t){I(this,n);var e=i[t];h.style(t,e+"px"),"left"!==t||d.xPosInPercent||(d.xPosInPercent=e/o.current.width*100)}.bind(this)))},getTooltipPosition:function(t,e,i){var n=this,a=this,r=a.config,s=a.scale,o=a.state,l=o.width,c=o.height,h=o.current,d=o.isLegendRight,u=o.inputType,g=a.hasType("gauge")&&!r.gauge_fullCircle,f=o.hasTreemap,p=r.axis_rotated,x=a.getSvgLeft(!0),v=x+h.width-a.getCurrentPaddingRight(),b=a.getCurrentPaddingLeft(!0),o=i.x,r=i.y;a.hasArcType()?"touch"===u||a.hasType("radar")||(r+=g?c:c/2,o+=(l-(d?a.getLegendWidth():0))/2):f||(p?(r=i.xAxis+20,o+=x,v-=x):(r-=5,o=x+b+20+(s.zoom?o:i.xAxis))),v<o+t+15&&(o-=p?t-b:t+(f?0:b)),r+e>h.height&&(r-=g?3*e:e+(f?0:30));var _={top:r,left:o};return Object.keys(_).forEach(function(t){I(this,n),_[t]<0&&(_[t]=0)}.bind(this)),_},showTooltip:function(t,e){var i,n,a,r,s=this,o=this,l=o.config,c=o.$el.tooltip,h=t.filter(function(t){return I(this,s),t&&P(o.getBaseValue(t))}.bind(this));c&&0!==h.length&&l.tooltip_show&&(i=c.datum(),n=JSON.stringify(t),i&&i.current===n||(a=(r=t.concat().sort()[0]).index,r=r.x,F(l.tooltip_onshow,o.api,t),c.html(o.getTooltipHTML(t,o.axis?o.axis.getXAxisTickFormat():o.categoryName.bind(o),o.getDefaultValueFormat(),o.color)).style("display",null).style("visibility",null).datum(i={index:a,x:r,current:n,width:c.property("offsetWidth"),height:c.property("offsetHeight")}),F(l.tooltip_onshown,o.api,t),o._handleLinkedCharts(!0,a)),o.setTooltipPosition(h,e))},bindTooltipResizePos:function(){var n=this,t=this.resizeFunction,a=this.state,r=this.$el.tooltip;t.add(function(){var t,e,i;I(this,n),"block"===r.style("display")&&(t=a.current,i=(e=r.datum()).width,e=e.xPosInPercent,e=t.width/100*e,(i=t.width-(e+i))<0&&(e+=i),r.style("left",e+"px"))}.bind(this))},hideTooltip:function(t){var e=this.api,i=this.config,n=this.$el.tooltip;!n||"none"===n.style("display")||i.tooltip_doNotHide&&!t||(t=JSON.parse(n.datum().current),F(i.tooltip_onhide,e,t),n.style("display","none").style("visibility","hidden").datum(null),F(i.tooltip_onhidden,e,t))},_handleLinkedCharts:function(r,s){var o,l=this,e=this,t=e.charts,i=e.config,n=e.state.event;null!=n&&n.isTrusted&&i.tooltip_linked&&1<t.length&&(o=i.tooltip_linked_name,t.filter(function(t){return I(this,l),t!==e.api}.bind(this)).forEach(function(t){I(this,l);var e=t.internal,i=e.config,n=e.$el,a=i.tooltip_linked,e=i.tooltip_linked_name,i=p.body.contains(n.chart.node());if(a&&o===e&&i){n=n.tooltip.data()[0],n=s!==(null==n?void 0:n.index);try{t.tooltip[r&&n?"show":"hide"]({index:s})}catch(t){}}}.bind(this)))}},a={getTranslate:function(t,e){var i,n,a=this.config,r=this.state,s=a.axis_rotated,a=0;return(e=void 0===e?0:e)&&/^(x|y2?)$/.test(t)&&(a=this.getAxisSize(t)*e),"main"===t?(i=T(r.margin.left),n=T(r.margin.top)):"context"===t?(i=T(r.margin2.left),n=T(r.margin2.top)):"legend"===t?(i=r.margin3.left,n=r.margin3.top):"x"===t?(i=s?-a:0,n=s?0:r.height+a):"y"===t?(i=s?0:-a,n=s?r.height+a:0):"y2"===t?(i=s?0:r.width+a,n=s&&a?1-a:0):"subX"===t?(i=0,n=s?0:r.height2):"arc"===t||"polar"===t?(i=r.arcWidth/2,n=r.arcHeight/2):"radar"===t&&(t=this.getRadarSize()[0],i=r.width/2-t,n=T(r.margin.top)),"translate("+i+", "+n+")"},transformMain:function(t,e){var i=this,n=i.$el.main,a=i.$T,r=null!=e&&e.axisX?e.axisX:a(n.select("."+pt.axisX),t),s=null!=e&&e.axisY?e.axisY:a(n.select("."+pt.axisY),t),e=null!=e&&e.axisY2?e.axisY2:a(n.select("."+pt.axisY2),t);a(n,t).attr("transform",i.getTranslate("main")),r.attr("transform",i.getTranslate("x")),s.attr("transform",i.getTranslate("y")),e.attr("transform",i.getTranslate("y2")),n.select("."+gt.chartArcs).attr("transform",i.getTranslate("arc"))},transformAll:function(t,e){var i=this,n=i.config,a=i.state,r=a.hasAxis,s=a.hasTreemap,a=i.$el;s||i.transformMain(t,e),r&&n.subchart_show&&i.transformContext(t,e),a.legend&&i.transformLegend(t)}},s={isValidChartType:function(t){return!!(t&&-1<Object.values(k).indexOf(t))},setTargetType:function(t,e){var i=this,n=this.config,a=this.state.withoutFadeIn;this.mapToTargetIds(t).forEach(function(t){I(this,i),a[t]=e===n.data_types[t],n.data_types[t]=e}.bind(this)),t||(n.data_type=e)},updateTypesElements:function(){var n=this,a=this,r=a.state.current;Object.keys(k).forEach(function(t){I(this,n);var e=k[t],i=a.hasType(e,null,!0),t=r.types.indexOf(e);-1===t&&i?r.types.push(e):-1<t&&!i&&r.types.splice(t,1)}.bind(this)),a.setChartElements()},hasType:function(e,t,i){var n=this,a=this.config,r=this.state.current,s=a.data_types,t=t||this.data.targets,o=!1;return!(i=void 0===i?!1:i)&&-1<(null==(r=r.types)?void 0:r.indexOf(e))?o=!0:null!=t&&t.length?t.forEach(function(t){I(this,n);t=s[t.id];t!==e&&(t||"line"!==e)||(o=!0)}.bind(this)):Object.keys(s).length?Object.keys(s).forEach(function(t){I(this,n),s[t]===e&&(o=!0)}.bind(this)):o=a.data_type===e,o},hasTypeOf:function(t,e,i){var n=this;return void 0===i&&(i=[]),t in C&&!C[t].filter(function(t){return I(this,n),-1===i.indexOf(t)}.bind(this)).every(function(t){return I(this,n),!this.hasType(t,e)}.bind(this))},isTypeOf:function(t,e){t=b(t)?t:t.id,t=this.config.data_types[t]||this.config.data_type;return X(e)?0<=e.indexOf(t):t===e},hasPointType:function(){return this.hasTypeOf("Line")||this.hasType("bubble")||this.hasType("scatter")},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},hasMultiArcGauge:function(){return this.hasType("gauge")&&"multi"===this.config.gauge_type},isLineType:function(t){t=b(t)?t:t.id;return!this.config.data_types[t]||this.isTypeOf(t,C.Line)},isStepType:function(t){return this.isTypeOf(t,C.Step)},isSplineType:function(t){return this.isTypeOf(t,C.Spline)},isAreaType:function(t){return this.isTypeOf(t,C.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,C.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isCandlestickType:function(t){return this.isTypeOf(t,"candlestick")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isTreemapType:function(t){return this.isTypeOf(t,"treemap")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isPolarType:function(t){return this.isTypeOf(t,"polar")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isPolarType(t)||this.isRadarType(t)},isCirclePoint:function(t){var e=this.config,i=e.point_pattern;return"circle"===(null==t?void 0:t.tagName)||"circle"===e.point_type&&(!i||X(i)&&0===i.length)},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},labelishData:function(t){var e=this;return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isCandlestickType(t)||this.isRadarType(t)||this.isTreemapType(t)?t.values.filter(function(t){return I(this,e),z(t.value)||!!t.value}.bind(this)):[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return 0<=["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)}},Je=function(){function t(t){this.api=void 0,this.config=void 0,this.cache=void 0,this.$el=void 0,this.state=void 0,this.charts=void 0,this.data={xs:{},targets:[]},this.axis=void 0,this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null},this.org={xScale:null,xDomain:null},this.color=void 0,this.patterns=void 0,this.levelColor=void 0,this.point=void 0,this.brush=void 0,this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null};var e=this;e.api=t,e.config=new Qt,e.cache=new he;t=new Bt;e.$el=t.getStore("element"),e.state=t.getStore("state"),e.$T=e.$T.bind(e)}var e=t.prototype;return e.$T=function(t,e,i){var n=this.config,a=this.state,r=n.transition_duration,n=n.subchart_show,t=t;return t&&("tagName"in t&&(t=(0,D.select)(t)),t=(!1!==e&&r||e)&&(!a.zooming||a.dragging)&&!a.resizing&&a.rendered&&!n?t.transition(i).duration(r):t),t},e.beforeInit=function(){this.callPluginHook("$beforeInit"),F(this.config.onbeforeinit,this.api)},e.afterInit=function(){this.callPluginHook("$afterInit"),F(this.config.onafterinit,this.api)},e.init=function(){var t=this,e=t.config,i=t.state,n=t.$el,a=e.boost_useCssRule;ct(t),i.hasRadar=!i.hasAxis&&t.hasType("radar"),i.hasTreemap=!i.hasAxis&&t.hasType("treemap"),i.hasAxis=!t.hasArcType()&&!i.hasTreemap,i.datetimeId="bb-"+ +new Date*W(),a&&((r=p.createElement("style")).type="text/css",p.head.appendChild(r),i.style={rootSelctor:"."+i.datetimeId,sheet:r.sheet},n.style=r);var r={element:e.bindto,classname:"bb"};O(e.bindto)&&(r.element=e.bindto.element||"#chart",r.classname=e.bindto.classname||r.classname),n.chart=R(r.element.node)?e.bindto.element:(0,D.select)(r.element||[]),n.chart.empty()&&(n.chart=(0,D.select)(p.body.appendChild(p.createElement("div")))),n.chart.html("").classed(r.classname,!0).classed(i.datetimeId,a).style("position","relative"),t.initParams(),t.initToRender()},e.initToRender=function(t){var i=this,n=this,e=n.config,a=n.state,r=n.$el.chart,s=function(){return I(this,i),"none"===r.style("display")||"hidden"===r.style("visibility")}.bind(this),o=e.render.lazy||s(),l=y.MutationObserver;o&&l&&!1!==e.render.observe&&!t&&new l(function(t,e){I(this,i),s()||(e.disconnect(),a.rendered||n.initToRender(!0))}.bind(this)).observe(r.node(),{attributes:!0,attributeFilter:["class","style"]}),o&&!t||n.convertData(e,function(t){I(this,i),n.initWithData(t),n.afterInit()}.bind(this))},e.initParams=function(){var n,a=this,r=this,t=r.config,s=r.format,e=r.state,i=t.axis_rotated;r.color=r.generateColor(),r.levelColor=r.generateLevelColor(),!1===t.padding&&(t.axis_x_show=!1,t.axis_y_show=!1,t.axis_y2_show=!1,t.subchart_show=!1),r.hasPointType()&&(r.point=r.generatePoint()),e.hasAxis&&(r.initClip(),s.extraLineClasses=r.generateExtraLineClass(),s.dataTime=t.data_xLocaltime?o.timeParse:o.utcParse,s.axisTime=t.axis_x_localtime?o.timeFormat:o.utcFormat,n=r.config.zoom_enabled&&"drag"===r.config.zoom_type,s.defaultAxisTime=function(t){I(this,a);var e=r.scale,i=e.x,e=e.zoom,e=n?e:e&&i.orgDomain().toString()!==e.domain().toString(),e=(t.getMilliseconds()?".%L":t.getSeconds()&&".:%S")||t.getMinutes()&&"%I:%M"||t.getHours()&&"%I %p"||1!==t.getDate()&&"%b %d"||e&&1===t.getDate()&&"%b'%y"||t.getMonth()&&"%-m/%-d"||"%Y";return s.axisTime(e)(t)}.bind(this)),e.isLegendRight="right"===t.legend_position,e.isLegendInset="inset"===t.legend_position,e.isLegendTop="top-left"===t.legend_inset_anchor||"top-right"===t.legend_inset_anchor,e.isLegendLeft="top-left"===t.legend_inset_anchor||"bottom-left"===t.legend_inset_anchor,e.rotatedPadding.top=r.getResettedPadding(e.rotatedPadding.top),e.rotatedPadding.right=i&&!t.axis_x_show?0:30,e.inputType=function(t,e){var i=this,n=y.DocumentTouch,a=y.matchMedia,r=y.navigator,s=!1;return e&&(s=r&&"maxTouchPoints"in r?0<r.maxTouchPoints:!!("ontouchmove"in y||n&&p instanceof n)||(!(null==a||!a("(pointer:coarse)").matches)||(r=r.userAgent,/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(r)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(r)))),(t&&["any-hover:hover","any-pointer:fine"].some(function(t){return I(this,i),null==a?void 0:a("("+t+")").matches}.bind(this))?"mouse":s&&"touch")||"mouse"}(t.interaction_inputType_mouse,t.interaction_inputType_touch)},e.initWithData=function(t){var e,i,n,a,r,s=this,o=this,l=o.config,c=o.scale,h=o.state,d=o.$el,u=o.org,g=h.hasAxis,f=h.hasTreemap,p=l.interaction_enabled,x=o.hasType("polar");g&&(o.axis=o.getAxisInstance(),l.zoom_enabled&&o.initZoom()),o.data.xs={},o.data.targets=o.convertDataToTargets(t),l.data_filter&&(o.data.targets=o.data.targets.filter(l.data_filter.bind(o.api))),l.data_hide&&o.addHiddenTargetIds(!0===l.data_hide?o.mapToIds(o.data.targets):l.data_hide),l.legend_hide&&o.addHiddenLegendIds(!0===l.legend_hide?o.mapToIds(o.data.targets):l.legend_hide),o.updateSizes(),o.updateScales(!0),g&&(e=c.x,n=c.y,r=c.y2,i=c.subX,t=c.subY,a=c.subY2,e&&(e.domain(it(o.getXDomain(o.data.targets),!l.axis_x_inverted)),i.domain(e.domain()),u.xDomain=e.domain()),n&&(n.domain(o.getYDomain(o.data.targets,"y")),t.domain(n.domain())),r&&(r.domain(o.getYDomain(o.data.targets,"y2")),a&&a.domain(r.domain()))),d.svg=d.chart.append("svg").style("overflow","hidden").style("display","block"),p&&h.inputType&&(n="touch"===h.inputType,a=l.onclick,r=l.onover,v=l.onout,d.svg.on("click",(null==a?void 0:a.bind(o.api))||null).on(n?"touchstart":"mouseenter",(null==r?void 0:r.bind(o.api))||null).on(n?"touchend":"mouseleave",(null==v?void 0:v.bind(o.api))||null)),l.svg_classname&&d.svg.attr("class",l.svg_classname);var v=R(l.color_tiles)&&o.patterns;(g||v||x||f||l.data_labels_backgroundColors)&&(d.defs=d.svg.append("defs"),g&&["id","idXAxis","idYAxis","idGrid"].forEach(function(t){I(this,s),o.appendClip(d.defs,h.clip[t])}.bind(this)),o.generateDataLabelBackgroundColorFilter(),v&&o.patterns.forEach(function(t){var e=this;return I(this,s),d.defs.append(function(){return I(this,e),t.node}.bind(this))}.bind(this))),o.updateSvgSize(),o.bindResize();var b,v=d.svg.append("g").classed(ut.main,!0).attr("transform",f?null:o.getTranslate("main"));d.main=v,l.subchart_show&&o.initSubchart(),l.tooltip_show&&o.initTooltip(),l.title_text&&o.initTitle(),!f&&l.legend_show&&o.initLegend(),l.data_empty_label_text&&v.append("text").attr("class",Dt.text+" "+ut.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),g&&(l.regions.length&&o.initRegion(),l.clipPath||o.axis.init()),v.append("g").classed(ut.chart,!0).attr("clip-path",g?h.clip.path:null),o.callPluginHook("$init"),o.initChartElements(),g&&(p&&null!=o.initEventRect&&o.initEventRect(),o.initGrid(),l.clipPath&&null!=(b=o.axis)&&b.init()),o.updateTargets(o.data.targets),o.updateDimension(),F(l.oninit,o.api),o.setBackground(),o.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),(l.data_onmin||l.data_onmax)&&(b=o.getMinMaxData(),F(l.data_onmin,o.api,b.min),F(l.data_onmax,o.api,b.max)),l.tooltip_show&&o.initShowTooltip(),h.rendered=!0},e.initChartElements=function(){var i=this,n=this,t=n.state,e=t.hasAxis,a=t.hasRadar,t=t.hasTreemap,r=[];e?(e=["bar","bubble","candlestick","line"],n.config.bar_front&&e.push(e.shift()),e.forEach(function(t){I(this,i);var e=q(t);("line"===t&&n.hasTypeOf(e)||n.hasType(t))&&r.push(e)}.bind(this))):t?r.push("Treemap"):(t=n.hasType("polar"),a||r.push("Arc","Pie"),n.hasType("gauge")?r.push("Gauge"):a?r.push("Radar"):t&&r.push("Polar")),r.forEach(function(t){I(this,i),n["init"+t]()}.bind(this)),L(n.config.data_labels)&&!n.hasArcType(null,["radar"])&&n.initText()},e.setChartElements=function(){var t=this.$el,e=t.chart,i=t.svg,n=t.defs,a=t.main,r=t.tooltip,s=t.legend,o=t.title,l=t.grid,c=t.needle,h=t.arcs,d=t.circle,u=t.bar,g=t.candlestick,f=t.line,p=t.area,t=t.text;this.api.$={chart:e,svg:i,defs:n,main:a,tooltip:r,legend:s,title:o,grid:l,arc:h,circles:d,bar:{bars:u},candlestick:g,line:{lines:f,areas:p},needle:c,text:{texts:t}}},e.setBackground=function(){var t=this.config.background,e=this.state,i=this.$el.svg;L(t)&&(i=i.select("g").insert(t.imgUrl?"image":"rect",":first-child"),t.imgUrl?i.attr("href",t.imgUrl):t.color&&i.style("fill",t.color).attr("clip-path",e.clip.path),i.attr("class",t.class||null).attr("width","100%").attr("height","100%"))},e.updateTargets=function(e){var i=this,n=this,t=n.state,a=t.hasAxis,r=t.hasRadar,t=t.hasTreemap,s=function(t){return I(this,i),n["updateTargetsFor"+t](e.filter(n["is"+t+"Type"].bind(n)))}.bind(this);n.updateTargetsForText(e),a?(["bar","candlestick","line"].forEach(function(t){I(this,i);var e=q(t);("line"===t&&n.hasTypeOf(e)||n.hasType(t))&&s(e)}.bind(this)),n.updateTargetsForSubchart&&n.updateTargetsForSubchart(e)):n.hasArcType(e)?(a="Arc",r?a="Radar":n.hasType("polar")&&(a="Polar"),s(a)):t&&s("Treemap");t=n.hasType("bubble")||n.hasType("scatter");t&&null!=n.updateTargetForCircle&&n.updateTargetForCircle(),n.filterTargetsToShowAtInit(t)},e.filterTargetsToShowAtInit=function(t){var e=this,i=this,n=i.$el.svg,a=i.$T,r="."+ut.target;(t=void 0===t?!1:t)&&(r+=", ."+bt.chartCircles+" > ."+bt.circles),a(n.selectAll(r).filter(function(t){return I(this,e),i.isTargetToShow(t.id)}.bind(this))).style("opacity",null)},e.getWithOption=function(i){var n=this,a={Dimension:!0,EventRect:!0,Legend:!1,Subchart:!0,Transform:!1,Transition:!0,TrimXDomain:!0,UpdateXAxis:"UpdateXDomain",UpdateXDomain:!1,UpdateOrgXDomain:!1,TransitionForExit:"Transition",TransitionForAxis:"Transition",Y:!0};return Object.keys(a).forEach(function(t){I(this,n);var e=a[t];b(e)&&(e=a[e]),a[t]=S(i,"with"+t,e)}.bind(this)),a},e.initialOpacity=function(t){var e=this.state.withoutFadeIn;return null!==this.getBaseValue(t)&&e[t.id]?null:"0"},e.bindResize=function(){var e=this,t=this,i=t.config,n=t.state,a=function(e){var i,n=this,a=[],r=function(){var t=this;r.clear(),!1===e?l(function(){var e=this;I(this,t),a.forEach(function(t){return I(this,e),t()}.bind(this))}.bind(this),{timeout:200}):i=de(function(){var e=this;I(this,t),a.forEach(function(t){return I(this,e),t()}.bind(this))}.bind(this),z(e)?e:200)};return r.clear=function(){I(this,n),i&&(ue(i),i=null)}.bind(this),r.add=function(t){return I(this,n),a.push(t)}.bind(this),r.remove=function(t){return I(this,n),a.splice(a.indexOf(t),1)}.bind(this),r}(i.resize_timer),r=[];r.push(function(){return I(this,e),F(i.onresize,t.api)}.bind(this)),i.resize_auto&&r.push(function(){I(this,e),n.resizing=!0,i.legend_show&&(t.updateSizes(),t.updateLegend()),t.api.flush(!1)}.bind(this)),r.push(function(){I(this,e),F(i.onresized,t.api),n.resizing=!1}.bind(this)),r.forEach(function(t){return I(this,e),a.add(t)}.bind(this)),t.resizeFunction=a,y.addEventListener("resize",t.resizeFunction=a)},e.callPluginHook=function(e){for(var i=this,t=arguments.length,n=Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.config.plugins.forEach(function(t){I(this,i),"$beforeInit"===e&&(t.$$=this).api.plugins.push(t),t[e].apply(t,n)}.bind(this))},t}();Z(Je.prototype,[Ae,Se,Ce,{categoryName:function(t){var e=this.config.axis_x_categories;return t<(null==e?void 0:e.length)?e[t]:t}},Le,De,ze,Ee,$e,Fe,Ne,je,Ye,He,We,Ze,Ke,t,a,s]);De={resize:function(t){var e=this.internal,i=e.config,n=e.state;n.rendered&&(i.size_width=t?t.width:null,i.size_height=t?t.height:null,n.resizing=!0,this.flush(!1),e.resizeFunction())},flush:function(t){var e,i=this.internal,n=i.state,a=i.$el.zoomResetBtn;n.rendered?(n.resizing?null!=(e=i.brush)&&e.updateResize():null!=(e=i.axis)&&e.setOrient(),null!=a&&a.style("display","none"),i.scale.zoom=null,t?i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):i.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!n.resizing&&i.brush&&(i.brush.getSelection().call(i.brush.move),i.unselectRect())):i.initToRender(!0)},destroy:function(){var i=this,n=this.internal,t=n.$el,e=t.chart,a=t.style,t=t.svg;if(L(n))for(var r in n.callPluginHook("$willDestroy"),n.charts.splice(n.charts.indexOf(this),1),n.unbindAllEvents(),t.select("*").interrupt(),n.resizeFunction.clear(),y.removeEventListener("resize",n.resizeFunction),e.classed("bb",!1).style("position",null).selectChildren().remove(),a&&a.parentNode.removeChild(a),Object.keys(this).forEach(function(t){var e=this;I(this,i),"internal"===t&&Object.keys(n).forEach(function(t){I(this,e),n[t]=null}.bind(this)),this[t]=null,delete this[t]}.bind(this)),this)this[r]=function(){I(this,i)}.bind(this);return null},config:function(t,e,i){var n,a=this.internal,r=a.config,s=a.state,a=null==t?void 0:t.replace(/\./g,"_");return t&&a in r?$(e)?(n=r[a]=e,i&&this.flush()):n=r[a]:0!==arguments.length&&!A(t)||(n=s.orgConfig),n}},ze=function(t){var n=this,e=this.internal.data.targets;if(M(t))return e;var a=X(t)?t:[t];return e.filter(function(e){var i=this;return I(this,n),a.some(function(t){return I(this,i),t===e.id}.bind(this))}.bind(this))};Z(ze,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t,i){var n=this;void 0===i&&(i=!0);var a=null;return t&&(t=this.data(t),X(t)&&(a=[],t.forEach(function(t){var e=this;I(this,n);t=t.values.map(function(t){return I(this,e),t.value}.bind(this));i?a=a.concat(t):a.push(t)}.bind(this)))),a},names:function(t){return this.internal.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});var Ee={data:ze},Qe=function(t){var i=this;return I(this,void 0),null==y.btoa?void 0:y.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return I(this,i),String.fromCharCode(+("0x"+e))}.bind(this)))}.bind(void 0);function ti(t,e,i){var n=this,a=e||i,r=a.width,s=a.height,o=new XMLSerializer,l=t.cloneNode(!0),a=function(t){var n=this,a=[];return t.forEach(function(e){I(this,n);try{e.cssRules&&e.cssRules.length&&(a=a.concat(K(e.cssRules)))}catch(t){var i;null!=(i=y.console)&&i.warn("Error while reading rules from "+e.href+": "+t.toString())}}.bind(this)),a}(K(p.styleSheets)).filter(function(t){return I(this,n),t.cssText}.bind(this)).map(function(t){return I(this,n),t.cssText}.bind(this));l.setAttribute("xmlns",D.namespaces.xhtml),l.style.margin="0",l.style.padding="0",e.preserveFontStyle&&l.querySelectorAll("text").forEach(function(t){I(this,n),t.innerHTML=""}.bind(this));t=o.serializeToString(l),l=p.createElement("style");l.appendChild(p.createTextNode(a.join("\n")));l=o.serializeToString(l),t=('<svg xmlns="'+D.namespaces.svg+'" width="'+r+'" height="'+s+'" \n\t\tviewBox="0 0 '+i.width+" "+i.height+'" \n\t\tpreserveAspectRatio="'+(!1===(null==e?void 0:e.preserveAspectRatio)?"none":"xMinYMid meet")+'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t'+l+"\n\t\t\t\t"+t.replace(/(url\()[^#]+/g,"$1")+"\n\t\t\t</foreignObject></svg>").replace("/\n/g","%0A");return"data:image/svg+xml;base64,"+Qe(t)}function ei(t){var i=this,e=t.getBoundingClientRect(),_=e.left,m=e.top,n=function(t){return I(this,i),t.textContent||t.childElementCount}.bind(this),a=[];return K(t.querySelectorAll("text")).filter(n).forEach(function(t){var b=this;I(this,i);var e=function(t){I(this,b);var e,i,n,a,r,s,o,l,c,h,d,u=y.getComputedStyle(t),g=u.fill,f=u.fontFamily,p=u.fontSize,x=u.textAnchor,v=u.transform,e=(e=t,n=(i={left:_,top:m}).top,a=i.left,r=(h=e.getBBox()).x,s=h.y,o=(d=e.getScreenCTM()).a,l=d.b,c=d.c,u=d.d,i=d.e,h=d.f,e=(d=e.getBoundingClientRect()).width,d=d.height,{x:o*r+c*s+i-a,y:l*r+u*s+h-n+(d-Math.round(d/4)),width:e,height:d});return(d={})[t.textContent]={x:e.x,y:e.y,width:e.width,height:e.height,fill:g,fontFamily:f,fontSize:p,textAnchor:x,transform:v},d}.bind(this);if(1<t.childElementCount)return K(t.querySelectorAll("tspan")).filter(n).forEach(function(t){I(this,b),a.push(e(t))}.bind(this)),[];a.push(e(t))}.bind(this)),a}function ii(t,e,i){var n=this,a=this.internal,r=a.mapToTargetIds(e),s=a.state.hiddenTargetIds.map(function(t){return I(this,n),-1<r.indexOf(t)&&t}.bind(this)).filter(Boolean);a.state.toggling=!0,a[(t?"remove":"add")+"HiddenTargetIds"](r);var o=a.$el.svg.selectAll(a.selectorTargets(r)),l=t?null:"0";t&&s.length&&(o.style("display",null),F(a.config.data_onshown,this,s)),a.$T(o).style("opacity",l,"important").call(B,function(){I(this,n),t||0!==s.length||(o.style("display","none"),F(a.config.data_onhidden,this,r)),o.style("opacity",l)}.bind(this)),i.withLegend&&a[(t?"show":"hide")+"Legend"](r),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.state.toggling=!1}var ni=function t(e){this.plugins=[],this.internal=void 0;var i=new Je(this);this.internal=i,function r(s,o,l){var c=this;Object.keys(s).forEach(function(t){I(this,c);var e=R(s[t]),i=o!==l,n=L(s[t]),a=n&&0<Object.keys(s[t]).length;o[t]=e&&(!i&&a||i)?s[t].bind(l):n&&!e?{}:s[t],a&&r(s[t],o[t],l)}.bind(this))}(t.prototype,this,this),function(e){var i,n,a,r=this,s=this.config,o=function(){I(this,r);var t=n.shift();return t&&i&&w(i)&&t in i?(i=i[t],o()):t?void 0:i}.bind(this);Object.keys(s).forEach(function(t){I(this,r),i=e,n=t.split("_"),a=o(),$(a)&&(s[t]=a)}.bind(this)),this.api&&(this.state.orgConfig=e)}.call(i,e),i.beforeInit(),i.init()};function ai(t,i,e){var n=this,a=t.config,r=function(t,e){I(this,n);e=z(e)?e:!1===e?void 0:null;null!==e&&(a["axis_"+t+"_"+i]=e)}.bind(this);$(e)&&(w(e)?Object.keys(e).forEach(function(t){I(this,n),r(t,e[t])}.bind(this)):!z(e)&&!1!==e||["y","y2"].forEach(function(t){I(this,n),r(t,e)}.bind(this)),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function ri(t,e){t=t.config;return{x:t["axis_x_"+e],y:t["axis_y_"+e],y2:t["axis_y2_"+e]}}Z(ni.prototype,[De,{color:function(t){return this.internal.color(t)}},Ee,{export:function(t,i){var n,a=this,e=this.internal,r=e.state,s=e.$el,e=s.chart,s=s.svg,r=r.current,o=r.width,l=r.height,c=et({width:o,height:l,preserveAspectRatio:!0,preserveFontStyle:!1,mimeType:"image/png"},t),e=ti(e.node(),c,{width:o,height:l}),h=c.preserveFontStyle?ei(s.node()):[];return i&&R(i)&&((n=new Image).crossOrigin="Anonymous",n.onload=function(){I(this,a);var t=p.createElement("canvas"),e=t.getContext("2d");t.width=c.width||o,t.height=c.height||l,e.drawImage(n,0,0),h.length&&(function(u,t){var e=this;t.forEach(function(h){var d=this;I(this,e),Object.keys(h).forEach(function(t){var e=this;I(this,d);var i=h[t],n=i.x,a=i.y,r=i.width,s=i.height,o=i.fill,l=i.fontFamily,c=i.fontSize,i=i.transform;u.save(),u.font=c+" "+l,u.fillStyle=o,"none"===i?u.fillText(t,n,a):((i=i.replace(/(matrix|\(|\))/g,"").split(",")).splice(4).every(function(t){return I(this,e),0==+t}.bind(this))?(i.push(n+r-r/4),i.push(a-s+s/3)):(i.push(n),i.push(a)),u.transform.apply(u,i),u.fillText(t,0,0)),u.restore()}.bind(this))}.bind(this))}(e,h),h.length=0),i.bind(this)(t.toDataURL(c.mimeType))}.bind(this),n.src=e),e}},{focus:function(t){var e=this,i=this.internal,n=i.state,a=i.mapToTargetIds(t),r=i.$el.svg.selectAll(i.selectorTargets(a.filter(i.isTargetToShow,i)));this.revert(),this.defocus(),r.classed(St.focused,!0).classed(St.defocused,!1),i.hasArcType()&&!n.hasRadar&&(i.expandArc(a),i.hasType("gauge")&&i.markOverlapped(t,i,"."+yt.gaugeValue)),i.toggleFocusLegend(a,!0),n.focusedTargetIds=a,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(t){return I(this,e),a.indexOf(t)<0}.bind(this))},defocus:function(t){var e=this,i=this.internal,n=i.state,a=i.mapToTargetIds(t);i.$el.svg.selectAll(i.selectorTargets(a.filter(i.isTargetToShow,i))).classed(St.focused,!1).classed(St.defocused,!0),i.hasArcType(null,["polar"])&&(i.unexpandArc(a),i.hasType("gauge")&&i.undoMarkOverlapped(i,"."+yt.gaugeValue)),i.toggleFocusLegend(a,!1),n.focusedTargetIds=n.focusedTargetIds.filter(function(t){return I(this,e),a.indexOf(t)<0}.bind(this)),n.defocusedTargetIds=a},revert:function(t){var e=this.internal,i=e.config,n=e.state,a=e.$el,t=e.mapToTargetIds(t);a.svg.selectAll(e.selectorTargets(t)).classed(St.focused,!1).classed(St.defocused,!1),e.hasArcType(null,["polar"])&&e.unexpandArc(t),i.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),a.legend.selectAll(e.selectorLegends(t)).filter(function(){return(0,D.select)(this).classed(St.legendItemFocused)}).classed(St.legendItemFocused,!1)),n.focusedTargetIds=[],n.defocusedTargetIds=[]}},{legend:{show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}}},{load:function(e){var i=this,n=this.internal,a=n.config;e.xs&&n.addXs(e.xs),"names"in e&&this.data.names(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){I(this,i),a.data_classes[t]=e.classes[t]}.bind(this)),"categories"in e&&n.axis.isCategorized()&&(a.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){I(this,i),a.data_axes[t]=e.axes[t]}.bind(this)),"colors"in e&&Object.keys(e.colors).forEach(function(t){I(this,i),a.data_colors[t]=e.colors[t]}.bind(this)),"unload"in e&&!1!==e.unload?n.unload(n.mapToTargetIds(!0===e.unload?null:e.unload),function(){var t=this;I(this,i),l(function(){return I(this,t),n.loadFromArgs(e)}.bind(this))}.bind(this)):(n.api.tooltip.hide(),n.loadFromArgs(e))},unload:function(t){var e=this,i=this.internal,n=t||{};X(n)?n={ids:n}:b(n)&&(n={ids:[n]});var a=i.mapToTargetIds(n.ids);i.unload(a,function(){I(this,e),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.cache.remove(a),ke.call(i,n.done,n.resizeAfter)}.bind(this))}},{show:function(t,e){ii.call(this,!0,t,e=void 0===e?{}:e)},hide:function(t,e){ii.call(this,!1,t,e=void 0===e?{}:e)},toggle:function(t,e){var i=this;void 0===e&&(e={});var n=this.internal,a={show:[],hide:[]};n.mapToTargetIds(t).forEach(function(t){return I(this,i),a[n.isTargetToShow(t)?"hide":"show"].push(t)}.bind(this)),a.show.length&&this.show(a.show,e),a.hide.length&&setTimeout(function(){return I(this,i),this.hide(a.hide,e)}.bind(this),0)}},{tooltip:{show:function(t){var e,i,n,a=this,r=this.internal,s=r.$el,o=r.config,l=r.state,c=l.eventReceiver,h=l.hasTreemap,d=l.inputType;t.mouse&&(i=t.mouse),t.data?(n=t.data,l=r.getYScaleById(n.id)(n.value),h&&n.id?c.rect=s.main.select(""+r.selectorTarget(n.id,void 0,"rect")):r.isMultipleX()?i=[r.xx(n),l]:(o.tooltip_grouped||(i=[0,l]),e=P(n.index)?n.index:r.getIndexByX(n.x))):$(t.x)?e=r.getIndexByX(t.x):$(t.index)&&(e=t.index),("mouse"===d?["mouseover","mousemove"]:["touchstart"]).forEach(function(t){I(this,a),r.dispatchEvent(t,e,i)}.bind(this))},hide:function(){var e,i=this,n=this.internal,t=n.state.inputType,a=n.$el.tooltip,a=null==a?void 0:a.datum();a&&(e=JSON.parse(a.current)[0].index,("mouse"===t?["mouseout"]:["touchend"]).forEach(function(t){I(this,i),n.dispatchEvent(t,e)}.bind(this))),"touch"===t&&n.callOverOutForTouch(),n.hideTooltip(!0),null!=n.hideGridFocus&&n.hideGridFocus(),null!=n.unexpandCircles&&n.unexpandCircles(),null!=n.expandBarTypeShapes&&n.expandBarTypeShapes(!1)}}}]);$e={axis:{labels:function(e){var i,n=this,a=this.internal;return e&&(Object.keys(e).forEach(function(t){I(this,n),a.axis.setLabelText(t,e[t])}.bind(this)),a.axis.updateLabels()),["x","y","y2"].forEach(function(t){I(this,n);var e=a.axis.getLabelText(t);e&&((i=i||{})[t]=e)}.bind(this)),i},min:function(t){var e=this.internal;return P(t)||!1===t?ai(e,"min",t):ri(e,"min")},max:function(t){var e=this.internal;return P(t)||!1===t?ai(e,"max",t):ri(e,"max")},range:function(t){var e=this.axis;if(!arguments.length)return{max:e.max(),min:e.min()};var i=t.min,t=t.max;$(t)&&e.max(t),$(i)&&e.min(i)}}};function si(t,e){var i=this.internal,n=i.config,a=n.transition_duration&&lt(),e="grid_"+e+"_lines";return t&&(n[e]=t,i.updateGrid(),i.redrawGrid(a)),n[e]}function oi(t,e){return si.bind(this)(this.internal.config["grid_"+e+"_lines"].concat(t||[]),e)}function li(t,e){this.internal.removeGridLines(t,e)}Fe=function(t){return si.bind(this)(t,"x")};Z(Fe,{add:function(t){return oi.bind(this)(t,"x")},remove:function(t){return li.bind(this)(t,!0)}});Ne=function(t){return si.bind(this)(t,"y")};Z(Ne,{add:function(t){return oi.bind(this)(t,"y")},remove:function(t){return li.bind(this)(t,!1)}});je={xgrids:Fe,ygrids:Ne},Ye={groups:function(t){var e=this.internal,i=e.config;return M(t)||(i.data_groups=t,e.redraw()),i.data_groups}};function ci(t,e){var i=this.internal,n=i.config,a=n.transition_duration&&lt();return t?(n.regions=(e=void 0===e?!1:e)?n.regions.concat(t):t,i.updateRegion(),i.redrawRegion(a),e?n.regions:t):n.regions}He=function(t){return ci.bind(this)(t)};Z(He,{add:function(t){return ci.bind(this)(t,!0)},remove:function(t){var n=this,e=this.internal,i=e.config,a=e.$T,t=t||{},r=S(t,"classes",[Lt.region]),e=e.$el.main.select("."+Lt.regions).selectAll(r.map(function(t){return I(this,n),"."+t}.bind(this)));return a(e).style("opacity","0").remove(),e=i.regions,Object.keys(t).length?(e=e.filter(function(t){var e=this;I(this,n);var i=!1;return!t.class||(t.class.split(" ").forEach(function(t){I(this,e),0<=r.indexOf(t)&&(i=!0)}.bind(this)),!i)}.bind(this)),i.regions=e):i.regions=[],e}});var We={regions:He},Ze={x:function(t){var e=this.internal,i=e.axis,n=e.data,i=i.isCustomX()&&i.isCategorized();return X(t)&&(i?this.categories(t):(e.updateTargetX(n.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),i?this.categories():n.xs},xs:function(t){var e=this.internal;return O(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}},Ke={flow:function(u){var g,e=this,f=this.internal;(u.json||u.rows||u.columns)&&f.convertData(u,function(t){I(this,e),g=t,function(){var t,e,i,a,n,r,s,o,l,c=this,h=0,d=0;!f.state.redrawing&&g&&lt()&&(a=[],n=f.getMaxDataCount(),r=f.convertDataToTargets(g,!0),s=f.axis.isTimeSeries(),f.data.targets.forEach(function(t){I(this,c);for(var e=!1,i=0;i<r.length;i++)if(t.id===r[i].id){e=!0,t.values[t.values.length-1]&&(d=t.values[t.values.length-1].index+1),h=r[i].values.length;for(var n=0;n<h;n++)r[i].values[n].index=d+n,s||(r[i].values[n].x=d+n);t.values=t.values.concat(r[i].values),r.splice(i,1);break}e||a.push(t.id)}.bind(this)),f.data.targets.forEach(function(t){I(this,c);for(var e=0;e<a.length;e++)if(t.id===a[e]){d=t.values[t.values.length-1].index+1;for(var i=0;i<h;i++)t.values.push({id:t.id,index:d+i,x:s?f.getOtherTargetX(d+i):d+i,value:null})}}.bind(this)),f.data.targets.length&&r.forEach(function(t){var e=this;I(this,c);for(var i=[],n=f.data.targets[0].values[0].index;n<d;n++)i.push({id:t.id,index:n,x:s?f.getOtherTargetX(n):n,value:null});t.values.forEach(function(t){I(this,e),t.index+=d,s||(t.x+=d)}.bind(this)),t.values=i.concat(t.values)}.bind(this)),f.data.targets=f.data.targets.concat(r),o=f.data.targets[0],l=o.values[0],$(u.to)?(h=0,i=s?ot.call(f,u.to):u.to,o.values.forEach(function(t){I(this,c),t.x<i&&h++}.bind(this))):$(u.length)&&(h=u.length),n?1===n&&s&&(e=(o.values[o.values.length-1].x-l.x)/2,t=[new Date(+l.x-e),new Date(+l.x+e)]):(e=s?1<o.values.length?o.values[o.values.length-1].x-l.x:l.x-f.getXDomain(f.data.targets)[0]:1,t=[l.x-e,l.x]),t&&f.updateXDomain(null,!0,!0,!1,t),f.updateTargets(f.data.targets),f.redraw({flow:{index:l.index,length:h,duration:P(u.duration)?u.duration:f.config.transition_duration,done:u.done,orgDataCount:n},withLegend:!0,withTransition:1<n,withTrimXDomain:!1,withUpdateXAxis:!0}))}()}.bind(this))}},hi=Zn(10),di=function(){function t(t){this.owner=void 0,this.config=void 0,this.scale=void 0;var e=Ge(),i=t.config,n=t.params;this.owner=t,this.config=i,this.scale=e,!i.noTransition&&n.config.transition_duration||(i.withoutTransition=!0),i.range=this.scaleExtent((n.orgXScale||e).range())}t.getSizeFor1Char=function(t){var a=this,r={w:5.5,h:11.5};return t.empty()||t.select("text").text("0").call(function(t){I(this,a);try{var e=t.node().getBBox(),i=e.width,n=e.height;i&&n&&(r.w=i,r.h=n)}catch(t){}finally{t.text("")}}.bind(this)),this.getSizeFor1Char=function(){return I(this,a),r}.bind(this),r};var e=t.prototype;return e.getTickTransformSetter=function(t){var n=this,e=this.config,a=("x"===t?function(t){return I(this,n),"translate("+(t+e.tickOffset)+",0)"}:function(t){return I(this,n),"translate(0,"+t+")"}).bind(this);return function(t,e){var i=this;I(this,n),t.attr("transform",function(t){return I(this,i),P(t)?a(Math.ceil(e(t))):null}.bind(this))}.bind(this)},e.scaleExtent=function(t){var e=t[0],t=t[t.length-1];return e<t?[e,t]:[t,e]},e.generateTicks=function(t,e){var i=this,n=this.owner.params.tickStepSize,a=t.domain(),r=a[0],s=a[1],o=[];if(e&&n)for(var l=Math.round(r);l<=s;)o.push(l),l+=n;else if(t.ticks){e=this.config.tickArguments;if("log"!==t.type||e)o=t.ticks.apply(t,this.config.tickArguments||[]);else{for(var c=Ge("_log").domain([0<r?r:1,s]).range(t.range()),o=c.ticks(),h=s.toFixed().length;15<o.length;h--)o=c.ticks(h);o.splice(0,1,r),o.splice(o.length-1,1,s)}o=o.map(function(t){return I(this,i),b(t)&&z(t)&&!isNaN(t)&&Math.round(10*t)/10||t}.bind(this))}else{for(var d=Math.ceil(r);d<s;d++)o.push(d);0<o.length&&0<o[0]&&o.unshift(o[0]-(o[1]-o[0]))}return o},e.copyScale=function(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t.type=this.scale.type,t},e.textFormatted=function(t){var e=this.config.tickFormat,t=/\d+\.\d+0{5,}\d$/.test(t)?+(t+"").replace(/0+\d$/,""):t,t=e?e(t):t;return $(t)?t:""},e.transitionise=function(t){var e=this.config,i=t;if(e.withoutTransition)i=t.interrupt();else if(e.transition||!this.owner.params.noTransition)try{i=t.transition(e.transition)}catch(t){}return i},t}(),ui=function(){function t(t){void 0===t&&(t={}),this.helper=void 0,this.config=void 0,this.params=void 0,this.g=void 0,this.generatedTicks=void 0;var e={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};e.tickLength=Math.max(e.innerTickSize,0)+e.tickPadding,this.config=e,this.params=t,this.helper=new di(this)}var e=t.prototype;return e.create=function(t){var g=this,f=g.config,p=g.helper,x=g.params,v=p.scale,b=f.orient,_=this.splitTickText.bind(g),m=/^(left|right)$/.test(b),y=/^(top|bottom)$/.test(b),T=p.getTickTransformSetter(y?"x":"y"),w=T===p.axisX?"y":"x",A=/^(top|left)$/.test(b)?-1:1,S=x.tickTextRotate;this.config.range=v.rangeExtent?v.rangeExtent():p.scaleExtent((x.orgXScale||v).range());var k,C=f.innerTickSize,R=f.tickLength,E=f.range,e=x.id,L=e&&/^(x|y|y2)$/.test(e)?x.config["axis_"+e+"_tick_text_position"]:{x:0,y:0},i="subX"===e?"subchart_axis_x":"axis_"+e,e=x.config[i+"_show"],O=!!e&&x.config[i+"_tick_show"],P=!!e&&x.config[i+"_tick_text_show"];t.each(function(){var n=this,t=(0,D.select)(this),e=this.__chart__||v,a=p.copyScale();k=t,this.__chart__=a,f.tickOffset=x.isCategory?Math.ceil((a(1)-a(0))/2):0;var r,i,s,o,l,c,h,d,u=t.selectAll(".domain").data([0]);u.enter().append("path").attr("class","domain").merge(u).attr("d",function(){I(this,n);var t=f.outerTickSize*A;return y?"M"+E[0]+","+t+"V0H"+E[1]+"V"+t:"M"+t+","+E[0]+"H0V"+E[1]+"H"+t}.bind(this)),(O||P)&&(r=f.tickValues||p.generateTicks(a,m),g.generatedTicks=r,i=(o=t.selectAll(".tick").data(r,a)).enter().insert("g",".domain").attr("class","tick"),s=o.exit().remove(),o=i.merge(o),O&&i.append("line"),P&&i.append("text"),l=di.getSizeFor1Char(o),c=[],(u=o.select("text").selectAll("tspan").data(function(t,e){var i=this;I(this,n);t=x.tickMultiline?_(t,a,r,m,l.w):X(p.textFormatted(t))?p.textFormatted(t).concat():[p.textFormatted(t)];return c[e]=t.length,t.map(function(t){return I(this,i),{index:e,splitted:t}}.bind(this))}.bind(this))).exit().remove(),(u=u.enter().append("tspan").merge(u).text(function(t){return I(this,n),t.splitted}.bind(this))).attr("x",y?0:R*A).attr("dx",function(){I(this,n);var t=0;return(t=/(top|bottom)/.test(b)&&S?8*Math.sin(Math.PI*(S/180))*("top"===b?-1:1):t)+(L.x||0)}.bind(this)()).attr("dy",function(t,e){I(this,n);var i=0;return"top"!==b&&(i=l.h,0===e&&(i=m?-((c[t.index]-1)*(l.h/2)-3):0===L.y?".71em":0)),z(i)&&L.y?i+L.y:i||".71em"}.bind(this)),t=o.select("line"),u=o.select("text"),i.select("line").attr(w+"2",C*A),i.select("text").attr(w,R*A),g.setTickLineTextPosition(t,u),x.tickTitle&&((t=u.select("title")).empty()?u.append("title"):t).text(function(t){return I(this,n),x.tickTitle[t]}.bind(this)),a.bandwidth?(d=(h=a).bandwidth()/2,a=e=function(t){return I(this,n),h(t)+d}.bind(this)):e.bandwidth?e=a:T(s,a),o=x.owner.state.flowing?p.transitionise(o):x.owner.$T(o),T(i,e),T(o.style("opacity",null),a))}),this.g=k},e.getGeneratedTicks=function(t){var i,n=this,e=(null==(a=this.generatedTicks)?void 0:a.length)-1,a=this.generatedTicks;return t<e&&(i=Math.round(e/t+.1),a=this.generatedTicks.map(function(t,e){return I(this,n),e%i==0?t:null}.bind(this)).filter(function(t){return I(this,n),null!==t}.bind(this)).splice(0,t)),a},e.getTickXY=function(){var t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e},e.getTickSize=function(t){var e=this.helper.scale,i=this.config,n=i.innerTickSize,a=i.range,i=e(t)+(i.tickCentered?0:i.tickOffset);return a[0]<i&&i<a[1]?n:0},e.setTickLineTextPosition=function(t,e){var i=this,n=this.getTickXY(),a=this.config,r=a.innerTickSize,s=a.orient,o=a.tickLength,l=a.tickOffset,c=this.params.tickTextRotate,h=function(t){I(this,i);var e=["start","end"];return"top"===s&&e.reverse(),t?e[0<t?0:1]:"middle"}.bind(this),d=function(t){return I(this,i),t?"rotate("+t+")":null}.bind(this),u=function(t){return I(this,i),t?11.5-2.5*(t/("bottom"===s?15:23))*(0<t?1:-1):o}.bind(this);switch(s){case"bottom":t.attr("x1",n.x).attr("x2",n.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",u(c)).style("text-anchor",h(c)).attr("transform",d(c));break;case"top":t.attr("x2",0).attr("y2",-r),e.attr("x",0).attr("y",2*-u(c)).style("text-anchor",h(c)).attr("transform",d(c));break;case"left":t.attr("x2",-r).attr("y1",n.y).attr("y2",n.y),e.attr("x",-o).attr("y",l).style("text-anchor","end");break;case"right":t.attr("x2",r).attr("y2",0),e.attr("x",o).attr("y",0).style("text-anchor","start")}},e.splitTickText=function(t,e,i,n,s){var a=this.params,r=this.helper.textFormatted(t),t=b(r)&&-1<r.indexOf("\n")?r.split("\n"):[];if(t.length)return t;if(X(r))return r;var o=a.tickWidth;return(!o||o<=0)&&(o=n?95:a.isCategory?Math.ceil(a.isInverted?e(i[0])-e(i[1]):e(i[1])-e(i[0]))-12:110),function t(e,i){for(var n,a,r=1;r<i.length;r++)if(" "===i.charAt(r)&&(n=r),a=i.substr(0,r+1),a=s*a.length,o<a)return t(e.concat(i.substr(0,n||r)),i.slice(n?n+1:r));return e.concat(i)}(t,r+"")},e.scale=function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale},e.orient=function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",this):this.config.orient},e.tickFormat=function(t){var e=this.config;return arguments.length?(e.tickFormat=t,this):e.tickFormat},e.tickCentered=function(t){var e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered},e.tickOffset=function(){return this.config.tickOffset},e.tickInterval=function(t){var e,n=this,i=this.config,a=i.outerTickSize,r=i.tickOffset,i=i.tickValues;return(e=this.params.isCategory?2*r:(e=(this.g.select("path.domain").node().getTotalLength()-2*a)/(t||this.g.selectAll("line").size()),i=i?i.map(function(t,e,i){I(this,n);e+=1;return e<i.length?this.helper.scale(i[e])-this.helper.scale(t):null}.bind(this)).filter(Boolean):[],Math.min.apply(Math,i.concat([e]))))===1/0?0:e},e.ticks=function(){for(var t=this.config,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.length?(t.tickArguments=K(i),this):t.tickArguments},e.tickCulling=function(t){var e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling},e.tickValues=function(t){var e=this,i=this.config;if(R(t))i.tickValues=function(){return I(this,e),t(this.helper.scale.domain())}.bind(this);else{if(!arguments.length)return i.tickValues;i.tickValues=t}return this},e.setTransition=function(t){return this.config.transition=t,this},t}(),t={getAxisInstance:function(){return this.axis||new gi(this)}},gi=function(){function t(t){this.owner=void 0,this.x=void 0,this.subX=void 0,this.y=void 0,this.y2=void 0,this.axesList={},this.tick={x:null,y:null,y2:null},this.xs=[],this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"},this.owner=t,this.setOrient()}var e=t.prototype;return e.getAxisClassName=function(t){return pt.axis+" "+pt["axis"+q(t)]},e.isHorizontal=function(t,e){t=t.config.axis_rotated;return e?t:!t},e.isCategorized=function(){var t=this.owner,e=t.config,t=t.state;return 0<=e.axis_x_type.indexOf("category")||t.hasRadar},e.isCustomX=function(){var t=this.owner.config;return!this.isTimeSeries()&&(t.data_x||L(t.data_xs))},e.isTimeSeries=function(t){return"timeseries"===this.owner.config["axis_"+(t=void 0===t?"x":t)+"_type"]},e.isLog=function(t){return"log"===this.owner.config["axis_"+(t=void 0===t?"x":t)+"_type"]},e.isTimeSeriesY=function(){return this.isTimeSeries("y")},e.getAxisType=function(t){var e="linear";return this.isTimeSeries(t=void 0===t?"x":t)?e=this.owner.config.axis_x_localtime?"time":"utc":this.isLog(t)&&(e="log"),e},e.init=function(){var a=this,r=this.owner,s=r.config,t=r.$el,o=t.main,l=t.axis,c=r.state.clip,h=s.axis_rotated,t=["x","y"];s.axis_y2_show&&t.push("y2"),t.forEach(function(e){var i=this;I(this,a);var t=this.getAxisClassName(e),n=pt["axis"+e.toUpperCase()+"Label"];l[e]=o.append("g").attr("class",t).attr("clip-path",function(){I(this,i);var t=null;return"x"===e?t=c.pathXAxis:"y"===e&&(t=c.pathYAxis),t}.bind(this)).attr("transform",r.getTranslate(e)).style("visibility",s["axis_"+e+"_show"]?null:"hidden"),l[e].append("text").attr("class",n).attr("transform",["rotate(-90)",null]["x"===e?+!h:+h]).style("text-anchor",function(){return I(this,i),this.textAnchorForAxisLabel(e)}.bind(this)),this.generateAxes(e)}.bind(this))},e.setOrient=function(){var t=this.owner.config,e=t.axis_rotated,i=t.axis_y_inner,t=t.axis_y2_inner;this.orient={x:e?"left":"bottom",y:e?i?"top":"bottom":i?"right":"left",y2:e?t?"bottom":"top":t?"left":"right",subX:e?"left":"bottom"}},e.generateAxes=function(a){var r,s=this,o=this.owner,t=o.config,l=[],e=t["axis_"+a+"_axes"],t=t.axis_rotated;"x"===a?r=t?hi.axisLeft:hi.axisBottom:"y"===a?r=t?hi.axisBottom:hi.axisLeft:"y2"===a&&(r=t?hi.axisTop:hi.axisRight),e.length&&e.forEach(function(t){var e=this;I(this,s);var i=t.tick||{},n=o.scale[a].copy();t.domain&&n.domain(t.domain),l.push(r(n).ticks(i.count).tickFormat(R(i.format)?i.format.bind(o.api):function(t){return I(this,e),t}.bind(this)).tickValues(i.values).tickSizeOuter(!1===i.outer?0:6))}.bind(this)),this.axesList[a]=l},e.updateAxes=function(){var t=this,d=this.owner,u=d.config,g=d.$el.main,f=d.$T;Object.keys(this.axesList).forEach(function(s){var o=this;I(this,t);var l=u["axis_"+s+"_axes"],c=d.scale[s].copy(),h=c.range();this.axesList[s].forEach(function(t,e){var i=this;I(this,o);var n=t.scale().range();h.every(function(t,e){return I(this,i),t===n[e]}.bind(this))||t.scale().range(h);var a=this.getAxisClassName(s)+"-"+(e+1),r=g.select("."+a.replace(/\s/,"."));r.empty()?r=g.append("g").attr("class",a).style("visibility",u["axis_"+s+"_show"]?null:"hidden").call(t):(l[e].domain&&c.domain(l[e].domain),f(r).call(t.scale(c))),r.attr("transform",d.getTranslate(s,e+1))}.bind(this))}.bind(this))},e.setAxis=function(t,e,i,n){var a=this.owner;"subX"!==t&&(this.tick[t]=this.getTickValues(t)),this[t]=this.getAxis(t,e,i,!("x"!==t||!(a.scale.zoom||a.config.subchart_show||a.state.resizing))||n)},e.getAxis=function(t,e,i,n,a){var r,s=this,o=this.owner,l=o.config,c=/^(x|subX)$/.test(t),h=c?"x":t,d=c&&this.isCategorized(),u=this.orient[t],a=a?0:o.getAxisTickRotate(h);c?r="subX"===t?o.format.subXAxisTick:o.format.xAxisTick:(g=l["axis_"+t+"_tick_format"],R(g)&&(r=g.bind(o.api)));var g=this.tick[h],a=et({outerTick:i,noTransition:n,config:l,id:t,tickTextRotate:a,owner:o},c&&{isCategory:d,isInverted:l.axis_x_inverted,tickMultiline:l.axis_x_tick_multiline,tickWidth:l.axis_x_tick_width,tickTitle:d&&l.axis_x_tick_tooltip&&o.api.categories(),orgXScale:o.scale.x});c||(a.tickStepSize=l["axis_"+h+"_tick_stepSize"]);var f,u=new ui(a).scale(c&&o.scale.zoom||e).orient(u);c&&this.isTimeSeries()&&g&&!R(g)?(f=ot.bind(o),g=g.map(function(t){return I(this,s),f(t)}.bind(this))):!c&&this.isTimeSeriesY()&&(u.ticks(l.axis_y_tick_time_value),g=null),g&&u.tickValues(g),u.tickFormat(r||!c&&o.isStackNormalized()&&function(t){return I(this,s),t+"%"}.bind(this)),d&&(u.tickCentered(l.axis_x_tick_centered),A(l.axis_x_tick_culling)&&(l.axis_x_tick_culling=!1));h=l["axis_"+h+"_tick_count"];return h&&u.ticks(h),u},e.updateXAxisTickValues=function(t,e){var i,n=this.owner,a=n.config,r=a.axis_x_tick_fit,a=a.axis_x_tick_count;return(r||a&&r)&&(i=n.mapTargetsToUniqueXs(t),this.isCategorized()&&a>i.length&&(a=i.length),i=this.generateTickValues(i,a,this.isTimeSeries())),e?e.tickValues(i):this.x&&(this.x.tickValues(i),null!=(e=this.subX)&&e.tickValues(i)),i},e.getId=function(t){var e=this.owner,i=e.config,e=e.scale,t=i.data_axes[t];return t=!t||!e[t]?"y":t},e.getXAxisTickFormat=function(t){var e,i=this,n=this.owner,a=n.config,r=n.format,s=t&&a.subchart_axis_x_tick_format||a.axis_x_tick_format,a=this.isTimeSeries(),o=this.isCategorized();return s?R(s)?e=s.bind(n.api):a&&(e=function(t){return I(this,i),t?r.axisTime(s)(t):""}.bind(this)):e=a?r.defaultAxisTime:o?n.categoryName:function(t){return I(this,i),t<0?t.toFixed(0):t}.bind(this),R(e)?function(t){return I(this,i),e.apply(n,o?[t,n.categoryName(t)]:[t])}.bind(this):e},e.getTickValues=function(t){var e=this.owner,i=e.config["axis_"+t+"_tick_values"],t=e[t+"Axis"];return(R(i)?i.call(e.api):i)||(t?t.tickValues():void 0)},e.getLabelOptionByAxisId=function(t){return this.owner.config["axis_"+t+"_label"]},e.getLabelText=function(t){t=this.getLabelOptionByAxisId(t);return b(t)?t:t?t.text:null},e.setLabelText=function(t,e){var i=this.owner.config,n=this.getLabelOptionByAxisId(t);b(n)?i["axis_"+t+"_label"]=e:n&&(n.text=e)},e.getLabelPosition=function(t,e){var i=this,n=this.owner.config.axis_rotated,t=this.getLabelOptionByAxisId(t),a=w(t)&&t.position?t.position:e[+!n],n=function(t){return I(this,i),!!~a.indexOf(t)}.bind(this);return{isInner:n("inner"),isOuter:n("outer"),isLeft:n("left"),isCenter:n("center"),isRight:n("right"),isTop:n("top"),isMiddle:n("middle"),isBottom:n("bottom")}},e.getAxisLabelPosition=function(t){return this.getLabelPosition(t,"x"===t?["inner-top","inner-right"]:["inner-right","inner-top"])},e.getLabelPositionById=function(t){return this.getAxisLabelPosition(t)},e.xForAxisLabel=function(t){var e=this.owner,i=e.state,n=i.width,a=i.height,r=this.getAxisLabelPosition(t),i=r.isMiddle?-a/2:0;return this.isHorizontal(e,"x"!==t)?i=r.isLeft?0:r.isCenter?n/2:n:r.isBottom&&(i=-a),i},e.dxForAxisLabel=function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isBottom?"0.5em":"0";return this.isHorizontal(e,"x"!==t)?n=i.isLeft?"0.5em":i.isRight?"-0.5em":"0":i.isTop&&(n="-0.5em"),n},e.textAnchorForAxisLabel=function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isMiddle?"middle":"end";return this.isHorizontal(e,"x"!==t)?n=i.isLeft?"start":i.isCenter?"middle":"end":i.isBottom&&(n="start"),n},e.dyForAxisLabel=function(t){var e,i=this.owner,n=i.config,a=n.axis_rotated,r=this.getAxisLabelPosition(t).isInner,s=n["axis_"+t+"_tick_rotate"]?i.getHorizontalAxisHeight(t):0,o=this.getMaxTickWidth(t);return e="x"===t?(i=n.axis_x_height,a?r?"1.2em":-25-o:r?"-0.5em":i?i-10:s?s-10:"3em"):(e={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[t],a?r?e[0]:s?s*("y2"===t?-1:1)-e[1]:e[2]:r?e[3]:(e[4]+(n["axis_"+t+"_inner"]?0:o+e[4]))*("y"===t?-1:1))},e.getMaxTickWidth=function(t,e){var i=this,n=this.owner,a=n.config,r=n.state.current,s=n.$el,o=s.svg,l=s.chart,c=r.maxTickWidths[t],h=0;if(e||!a["axis_"+t+"_show"]||0<c.size&&0===n.filterTargetsToShow().length)return c.size;if(o){var d=/^y2?$/.test(t),s=n.filterTargetsToShow(n.data.targets),r=n.scale[t].copy().domain(n["get"+(d?"Y":"X")+"Domain"](s,t)),e=r.domain(),o=e[0]===e[1]&&e.every(function(t){return I(this,i),0<t}.bind(this)),n=X(c.domain)&&c.domain[0]===c.domain[1]&&c.domain.every(function(t){return I(this,i),0<t}.bind(this));if(o||n)return c.size;c.domain=e,d||c.ticks.splice(0);n=this.getAxis(t,r,!1,!1,!0),r=a["axis_"+t+"_tick_count"];!a["axis_"+t+"_tick_values"]&&r&&n.tickValues(this.generateTickValues(e,r,d?this.isTimeSeriesY():this.isTimeSeries())),d||this.updateXAxisTickValues(s,n);l=l.append("svg").style("visibility","hidden").style("position","fixed").style("top","0").style("left","0");n.create(l),l.selectAll("text").each(function(t,e){var i=this.getBoundingClientRect().width;h=Math.max(h,i),d||(c.ticks[e]=i)}),l.remove()}return 0<h&&(c.size=h),c.size},e.getXAxisTickTextY2Overflow=function(t){var e=this.owner,i=e.axis,n=e.config,a=e.state,r=e.getAxisTickRotate("x");if((i.isCategorized()||i.isTimeSeries())&&n.axis_x_tick_fit&&!n.axis_x_tick_culling&&!n.axis_x_tick_multiline&&0<r&&r<90){e=a.current.width-e.getCurrentPaddingLeft(),r=this.getXAxisTickMaxOverflow(r,e-t),t=Math.max(0,r)+t;return Math.min(t,e/2)}return 0},e.getXAxisTickMaxOverflow=function(t,e){for(var i=this.owner,n=i.axis,a=i.config,r=i.state,s=n.isTimeSeries(),o=r.current.maxTickWidths.x.ticks,l=o.length,n=r.axis.x.padding,c=n.left,h=n.right,d=0,u=l-(s&&a.axis_x_tick_fit?.5:0),g=0;g<l;g++){var f=g+1,p=Math.cos(Math.PI*t/180)*o[g],x=f-(s?1:.5)+c;x<=0||(x=(e-p)/x,d=Math.max(d,p-x/2-((u-f)*x+h*x)))}r=i.filterTargetsToShow(i.data.targets),n=0;return!s&&a.axis_x_tick_count<=r.length&&r[0].values.length&&(i=Ge(i.axis.getAxisType("x"),0,e-d).domain([-1*c,i.getXDomainMax(i.data.targets)+1+h]),n=Math.ceil((i(1)-i(0))/2)),d+n},e.updateLabels=function(n){var a=this,t=this.owner,e=t.$el.main,r=t.$T,s={x:e.select("."+pt.axisX+" ."+pt.axisXLabel),y:e.select("."+pt.axisY+" ."+pt.axisYLabel),y2:e.select("."+pt.axisY2+" ."+pt.axisY2Label)};Object.keys(s).filter(function(t){return I(this,a),!s[t].empty()}.bind(this)).forEach(function(t){var e=this;I(this,a);var i=s[t];r(i,n).attr("x",function(){return I(this,e),this.xForAxisLabel(t)}.bind(this)).attr("dx",function(){return I(this,e),this.dxForAxisLabel(t)}.bind(this)).attr("dy",function(){return I(this,e),this.dyForAxisLabel(t)}.bind(this)).text(function(){return I(this,e),this.getLabelText(t)}.bind(this))}.bind(this))},e.getPadding=function(t,e,i,n){t=z(t)?t:t[e];return P(t)?this.owner.convertPixelToScale(/(bottom|top)/.test(e)?"y":"x",t,n):i},e.generateTickValues=function(t,e,i){var n=this,a=t;if(e){e=R(e)?e():e;if(1===e)a=[t[0]];else if(2===e)a=[t[0],t[t.length-1]];else if(2<e){for(var r,s=this.isCategorized(),o=e-2,l=t[0],c=t[t.length-1],a=[l],h=0;h<o;h++)r=+l+(c-l)/(1+o)*(h+1),a.push(i?new Date(r):s?Math.round(r):r);a.push(c)}}return a=!i?a.sort(function(t,e){return I(this,n),t-e}.bind(this)):a},e.generateTransitions=function(e){var i=this,t=this.owner,n=t.$el.axis,a=t.$T,t=["x","y","y2","subX"].map(function(t){return I(this,i),a(n[t],e)}.bind(this));return{axisX:t[0],axisY:t[1],axisY2:t[2],axisSubX:t[3]}},e.redraw=function(n,t,a){var r=this,e=this.owner,s=e.config,o=e.$el,l=t?"0":null;["x","y","y2","subX"].forEach(function(t){I(this,r);var e=this[t],i=o.axis[t];e&&i&&(a||s.transition_duration||(e.config.withoutTransition=!0),i.style("opacity",l),e.create(n["axis"+q(t)]))}.bind(this)),this.updateAxes()},e.redrawAxis=function(r,t,e,i,n){var s,o=this,l=this.owner,c=l.config,h=l.scale,a=l.$el,d=!!h.zoom;!d&&this.isCategorized()&&0===r.length&&h.x.domain([0,a.axis.x.selectAll(".tick").size()]),h.x&&r.length?(d||l.updateXDomain(r,t.UpdateXDomain,t.UpdateOrgXDomain,t.TrimXDomain),c.axis_x_tick_values||this.updateXAxisTickValues(r)):this.x&&(this.x.tickValues([]),null!=(d=this.subX)&&d.tickValues([])),c.zoom_rescale&&!i&&(s=h.x.orgDomain()),["y","y2"].forEach(function(t){var e=this;I(this,o);var i,n="axis_"+t+"_",a=h[t];a&&(i=c[n+"tick_values"],n=c[n+"tick_count"],a.domain(l.getYDomain(r,t,s)),!i&&n&&(t=l.axis[t],a=a.domain(),t.tickValues(this.generateTickValues(a,a.every(function(t){return I(this,e),0===t}.bind(this))?1:n,this.isTimeSeriesY()))))}.bind(this)),this.redraw(e,l.hasArcType(),n),this.updateLabels(t.Transition),(t.UpdateXDomain||t.UpdateXAxis||t.Y)&&r.length&&this.setCulling(),t.Y&&(null!=(t=h.subY)&&t.domain(l.getYDomain(r,"y")),null!=(t=h.subY2)&&t.domain(l.getYDomain(r,"y2")))},e.setCulling=function(){var h=this,t=this.owner,d=t.config,e=t.state,u=e.clip,g=e.current,f=t.$el;["subX","x","y","y2"].forEach(function(t){I(this,h);var e=f.axis[t],i="axis_"+("subX"===t?"x":t)+"_tick_culling",n=d[i];if(e&&n){var a,e=e.selectAll(".tick"),r=it(e.data()),s=r.length,o=d[i+"_max"],l=d[i+"_lines"];if(s){for(var c=1;c<s;c++)if(s/c<o){a=c;break}e.each(function(t){var e=l?this.querySelector("text"):this;e&&(e.style.display=r.indexOf(t)%a?"none":null)})}else e.style("display",null);"x"===t&&(t=g.maxTickWidths.x.clipPath?u.pathXAxisTickTexts:null,f.svg.selectAll("."+pt.axisX+" .tick text").attr("clip-path",t))}}.bind(this))},t}(),a={initEventRect:function(){this.$el.main.select("."+ut.chart).append("g").attr("class",At.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t,i=this,e=this,n=e.config,a=e.state,r=e.$el,s=e.isMultipleX(),o=n.axis_x_inverted;r.eventRect?e.updateEventRect(r.eventRect,!0):e.data.targets.length&&(t=e.$el.main.select("."+At.eventRects).style("cursor",n.zoom_enabled&&"drag"!==n.zoom_type?n.axis_rotated?"ns-resize":"ew-resize":null).classed(At.eventRectsMultiple,s).classed(At.eventRectsSingle,!s).selectAll("."+At.eventRect).data([0]).enter().append("rect"),e.updateEventRect(t),s?e.generateEventRectsForMultipleXs(t):e.generateEventRectsForSingleX(t),t.call(e.getDraggableSelection()),r.eventRect=t,"touch"!==e.state.inputType||r.svg.on("touchstart.eventRect")||e.hasArcType()||e.bindTouchOnEventRect(s),a.rendered&&e.updateEventRect(r.eventRect,!0)),s||(s=e.getMaxDataCountTarget(),n.data_xSort&&!o||s.sort(function(t,e){return I(this,i),o?e.x-t.x:t.x-e.x}.bind(this)),e.updateDataIndexByX(s),e.updateXs(s),null!=e.updatePointClass&&e.updatePointClass(!0),a.eventReceiver.data=s),e.updateEventRectData()},bindTouchOnEventRect:function(i){var n,a=this,r=this,s=r.config,o=r.state,t=r.$el,l=t.eventRect,e=t.svg,c=function(t){var e;I(this,a),i?r.selectRectForMultipleXs(t):(e=r.getDataIndexFromEvent(o.event),r.callOverOutForTouch(e),-1===e?r.unselectRect():r.selectRectForSingle(t,l,e))}.bind(this),h=function(){I(this,a),r.unselectRect(),r.callOverOutForTouch()}.bind(this),t=s.interaction_inputType_touch.preventDefault,d=_(t)&&t||!1,u=!isNaN(t)&&t||null,g=function(t){I(this,a);var e=t.type,i=t.changedTouches[0]["client"+(s.axis_rotated?"Y":"X")];"touchstart"===e?d?t.preventDefault():null!==u&&(n=i):"touchmove"===e&&(d||!0===n||null!==u&&Math.abs(n-i)>=u)&&(n=!0,t.preventDefault())}.bind(this);l.on("touchstart",function(t){I(this,a),o.event=t,r.updateEventRect()}.bind(this)).on("touchstart.eventRect touchmove.eventRect",function(t){I(this,a),o.event=t,!l.empty()&&l.classed(At.eventRect)?o.dragging||o.flowing||r.hasArcType()||1<t.touches.length||(g(t),c(l.node())):h()}.bind(this),!0).on("touchend.eventRect",function(t){I(this,a),o.event=t,!l.empty()&&l.classed(At.eventRect)&&(r.hasArcType()||!r.toggleShape||o.cancelClick)&&o.cancelClick&&(o.cancelClick=!1)}.bind(this),!0),e.on("touchstart",function(t){I(this,a);t=(o.event=t).target;t&&t!==l.node()&&h()}.bind(this))},updateEventRect:function(t,e){var i=this;void 0===e&&(e=!1);var n=this.state,a=this.$el,r=n.eventReceiver,s=n.width,o=n.height,l=n.rendered,n=n.resizing,c=t||a.eventRect,a=function(){I(this,i),r&&(r.rect=c.node().getBoundingClientRect())}.bind(this);l&&!n&&!e||(c.attr("x",0).attr("y",0).attr("width",s).attr("height",o),l&&!e||c.classed(At.eventRect,!0)),a()},updateEventRectData:function(){var i,n,a,r,e,s=this,o=this,t=o.config,l=o.scale,c=o.state,h=l.zoom||l.x,d=t.axis_rotated,u=o.isMultipleX()?(n=i=0,a=c.width,c.height):(t=o.axis.isCategorized()?(e=o.getEventRectWidth(),function(t){return I(this,s),h(t.x)-e/2}.bind(this)):(r=function(t){t=t.index;return I(this,s),{prev:o.getPrevX(t),next:o.getNextX(t)}}.bind(this),e=function(t){var i=this;I(this,s);var n=r(t),a=h.domain(),t=null===n.prev&&null===n.next?d?c.height:c.width:null===n.prev?(h(n.next)+h(t.x))/2:null===n.next?h(a[1])-(h(n.prev)+h(t.x))/2:(Object.keys(n).forEach(function(t,e){I(this,i),n[t]=null!=(t=n[t])?t:a[e]}.bind(this)),Math.max(0,(h(n.next)-h(n.prev))/2));return t}.bind(this),function(t){I(this,s);var e=r(t),e=null===e.prev&&null===e.next?0:null===e.prev?h(h.domain()[0]):(h(t.x)+h(e.prev))/2;return e}.bind(this)),i=d?0:t,n=d?t:0,a=d?c.width:e,d?e:c.height),g=c.eventReceiver,f=function(t,e){return I(this,s),R(t)?t(e):t}.bind(this);g.coords.splice(g.data.length),g.data.forEach(function(t,e){I(this,s),g.coords[e]={x:f(i,t),y:f(n,t),w:f(a,t),h:f(u,t)}}.bind(this))},selectRectForMultipleXs:function(t){var e,i,n=this,a=this,r=a.config,s=a.state,o=a.filterTargetsToShow(a.data.targets);s.dragging||a.hasArcType(o)||(i=V(s.event,t),e=a.findClosestFromTargets(o,i),!s.mouseover||e&&e.id===s.mouseover.id||(r.data_onout.call(a.api,s.mouseover),s.mouseover=void 0),e?(o=(a.isBubbleType(e)||a.isScatterType(e)||!r.tooltip_grouped?[e]:a.filterByX(o,e.x)).map(function(t){return I(this,n),a.addName(t)}.bind(this)),a.showTooltip(o,t),a.setExpand(e.index,e.id,!0),a.showGridFocus(o),i=a.dist(e,i),(a.isBarType(e.id)||i<a.getPointSensitivity(e))&&(a.$el.svg.select("."+At.eventRect).style("cursor","pointer"),s.mouseover||(r.data_onover.call(a.api,e),s.mouseover=e))):a.unselectRect())},unselectRect:function(){var t=this.config,e=this.$el,i=e.circle,e=e.tooltip;this.$el.svg.select("."+At.eventRect).style("cursor",null),this.hideGridFocus(),e&&(this.hideTooltip(),this._handleLinkedCharts(!1)),i&&!t.point_focus_only&&this.unexpandCircles(),this.expandBarTypeShapes(!1)},generateEventRectsForSingleX:function(t){var r,e=this,s=this,o=s.config,l=s.state,c=l.eventReceiver,h=t.style("cursor",o.data_selection_enabled&&o.data_selection_grouped?"pointer":null).on("click",function(t){l.event=t;var e=c.currentIdx,e=c.data[-1===e?s.getDataIndexFromEvent(t):e];s.clickHandlerForSingleX.bind(this)(e,s)});return"mouse"===l.inputType&&(r=function(t){I(this,e);t=t?s.getDataIndexFromEvent(t):c.currentIdx;return-1<t?c.data[t]:null}.bind(this),h.on("mouseover",function(t){I(this,e),l.event=t,s.updateEventRect()}.bind(this)).on("mousemove",function(t){var e,i,n,a=r(t);l.event=t,a&&(e=a.index,i=o.line_step_type,o.line_step_tooltipMatch&&s.hasType("step")&&/^step\-(before|after)$/.test(i)&&(n=s.scale.zoom||s.scale.x,a=s.axis.xs[e],n=n.invert(V(t,this)[0]),"step-after"===i&&n<a?--e:"step-before"===i&&a<n&&(e+=1)),n=o.tooltip_grouped&&e===c.currentIdx,l.dragging||l.flowing||s.hasArcType()||n?n&&s.setTooltipPosition():(e!==c.currentIdx&&(s.setOverOut(!1,c.currentIdx),c.currentIdx=e),-1===e?s.unselectRect():s.selectRectForSingle(this,h,e),s.setOverOut(-1!==e,e)))}).on("mouseout",function(t){I(this,e),l.event=t,o&&!s.hasArcType()&&-1!==c.currentIdx&&(s.unselectRect(),s.setOverOut(!1,c.currentIdx),c.currentIdx=-1)}.bind(this))),h},clickHandlerForSingleX:function(t,e){var i,n=e,a=n.config,r=n.state,e=n.$el.main;!t||n.hasArcType()||r.cancelClick?r.cancelClick&&(r.cancelClick=!1):(i=t.index,e.selectAll("."+Pt.shape+"-"+i).each(function(t){(a.data_selection_grouped||n.isWithinShape(this,t))&&(null!=n.toggleShape&&n.toggleShape(this,t,i),a.data_onclick.bind(n.api)(t,this))}))},generateEventRectsForMultipleXs:function(t){var e=this,i=this,n=i.state;t.on("click",function(t){n.event=t,i.clickHandlerForMultipleXS.bind(this)(i)}),"mouse"===n.inputType&&t.on("mouseover mousemove",function(t){n.event=t,i.selectRectForMultipleXs(this)}).on("mouseout",function(t){I(this,e),n.event=t,i.config&&!i.hasArcType()&&i.unselectRect()}.bind(this))},clickHandlerForMultipleXS:function(t){var e,i=t,n=i.config,a=i.state,t=i.filterTargetsToShow(i.data.targets);i.hasArcType(t)||(a=V(a.event,this),(e=i.findClosestFromTargets(t,a))&&(i.isBarType(e.id)||i.dist(e,a)<n.point_sensitivity)&&i.$el.main.selectAll("."+Pt.shapes+i.getTargetSelectorSuffix(e.id)).selectAll("."+Pt.shape+"-"+e.index).each(function(){(n.data_selection_grouped||i.isWithinShape(this,e))&&(null!=i.toggleShape&&i.toggleShape(this,e,e.index),n.data_onclick.bind(i.api)(e,this))}))}},fi=Zn(11),s={generateFlow:function(t){var i=this,r=i.data,s=i.state,o=i.$el;return function(){var n=this,e=t.flow.length;s.flowing=!0,r.targets.forEach(function(t){I(this,n),t.values.splice(0,e)}.bind(this)),i.updateXGrid&&i.updateXGrid(!0);var a={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(function(t){I(this,n);var e=t.split("."),i=o[e[0]];null!=(i=i&&1<e.length?i[e[1]]:i)&&i.size()&&(a[t]=i)}.bind(this)),i.hideGridFocus(),i.setFlowList(a,t)}},setFlowList:function(i,t){var n,a=this,r=this,e=t.flow,s=t.targets,o=e.duration,l=void 0===o?t.duration:o,c=e.index,o=e.length,e=e.orgDataCount,h=r.getFlowTransform(s,e,c,o),o=ge();o.add(Object.keys(i).map(function(t){var e=this;return I(this,a),n=i[t].transition().ease(fi.easeLinear).duration(l),n="axis.x"===t?n.call(function(t){I(this,e),r.axis.x.setTransition(t).create(t)}.bind(this)):("region.list"===t?n.filter(r.isRegionOnX):n).attr("transform",h)}.bind(this))),n.call(o,function(){I(this,a),r.cleanUpFlow(i,t)}.bind(this))},cleanUpFlow:function(r,t){var s=this,o=this,l=o.config,c=o.state,n=o.$el.svg,h=l.axis_rotated,e=t.flow,d=t.shape,u=t.xv,t=d.pos,g=t.cx,f=t.cy,p=t.xForText,x=t.yForText,t=e,e=t.done,e=void 0===e?function(){I(this,s)}.bind(this):e,a=t.length;a&&(["circle","text","shape","eventRect"].forEach(function(t){I(this,s);for(var e=[],i=0;i<a;i++)e.push("."+Xt[t]+"-"+i);n.selectAll("."+Xt[t+"s"]).selectAll(e).remove()}.bind(this)),n.select("."+Xt.xgrid).remove()),Object.keys(r).forEach(function(t){var e=this;I(this,s);var i,n,a=r[t];"axis.x"!==t&&a.attr("transform",null),"grid.x"===t?a.attr(c.xgridAttr):"gridLines.x"===t?a.attr("x1",h?0:u).attr("x2",h?c.width:u):"gridLines.x"===t?(a.select("line").attr("x1",h?0:u).attr("x2",h?c.width:u),a.select("text").attr("x",h?c.width:0).attr("y",u)):/^(area|bar|line)$/.test(t)?a.attr("d",d.type[t]):"text"===t?a.attr("x",p).attr("y",x).style("fill-opacity",o.opacityForText.bind(o)):"circle"===t?o.isCirclePoint()?a.attr("cx",g).attr("cy",f):(i=function(t){return I(this,e),g(t)-l.point_r}.bind(this),n=function(t){return I(this,e),f(t)-l.point_r}.bind(this),a.attr("x",i).attr("y",n).attr("cx",g).attr("cy",f)):"region.list"===t&&a.select("rect").filter(o.isRegionOnX).attr("x",o.regionX.bind(o)).attr("width",o.regionWidth.bind(o))}.bind(this)),l.interaction_enabled&&o.redrawEventRect(),e.call(o.api),c.flowing=!1},getFlowTransform:function(t,e,i,n){var a=this.data,r=this.scale.x,s=a.targets[0].values,a=this.getValueOnIndex(s,i),i=this.getValueOnIndex(s,i+n),n=r.domain(),t=this.updateXDomain(t,!0,!0);return"translate("+(e?1===e||(null==a?void 0:a.x)===(null==i?void 0:i.x)||this.axis.isTimeSeries()?r(n[0])-r(t[0]):r((null==a?void 0:a.x)||0)-r(i.x):1!==s.length?r(n[0])-r(t[0]):this.axis.isTimeSeries()?(a=this.getValueOnIndex(s,0),i=this.getValueOnIndex(s,s.length-1),r(a.x)-r(i.x)):E(t)/2)+",0) scale("+E(n)/E(t)+",1)"}},ze={initClip:function(){var t=this.state,e=t.clip,t=t.datetimeId;e.id=t+"-clip",e.idXAxis=e.id+"-xaxis",e.idYAxis=e.id+"-yaxis",e.idGrid=e.id+"-grid",e.path=this.getClipPath(e.id),e.pathXAxis=this.getClipPath(e.idXAxis),e.pathYAxis=this.getClipPath(e.idYAxis),e.pathGrid=this.getClipPath(e.idGrid)},getClipPath:function(t){var e=this.config;return!e.clipPath&&/-clip$/.test(t)||!e.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!e.axis_y_clipPath&&/-clip-yaxis$/.test(t)?null:"url("+(!!y.navigator&&0<=y.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":p.URL.split("#")[0])+"#"+t+")"},appendClip:function(t,e){e&&t.append("clipPath").attr("id",e).append("rect")},setXAxisClipPath:function(t){var e=this.config,i=this.state,n=i.margin,a=i.width,r=i.height,s=e.axis_rotated,o=Math.max(30,n.left)-(s?0:20),i=s?-(1+o):-(o-1),e=-Math.max(15,n.top),o=s?n.left+20:a+10+o,n=(s?n.top+r+10:n.bottom)+20;t.attr("x",i).attr("y",e).attr("width",o).attr("height",n)},setYAxisClipPath:function(t){var e=this.config,i=this.state,n=i.margin,a=i.width,r=i.height,s=e.axis_rotated,o=Math.max(30,n.left)-(s?20:0),l=e.axis_y_inner,c=l&&!s?e.axis_y_label.text?-20:-1:s?-(1+o):-(o-1),i=-(s?20:n.top),l=(s?a+15+o:n.left+20)+(l?20:0),r=(s?n.bottom+("fit"===(null==(e=e.padding)?void 0:e.mode)?10:0):n.top+r)+10;t.attr("x",c).attr("y",i).attr("width",l).attr("height",r)},updateXAxisTickClip:function(){var t=this,e=t.config,i=t.state,n=i.clip,a=i.xAxisHeight,r=t.$el.defs,s=t.getHorizontalAxisHeight("x");r&&!n.idXAxisTickTexts&&(i=n.id+"-xaxisticktexts",t.appendClip(r,i),n.pathXAxisTickTexts=t.getClipPath(n.idXAxisTickTexts),n.idXAxisTickTexts=i),!e.axis_x_tick_multiline&&t.getAxisTickRotate("x")&&s!==a&&(t.setXAxisTickClipWidth(),t.setXAxisTickTextClipPathWidth()),t.state.xAxisHeight=s},setXAxisTickClipWidth:function(){var t=this.config,e=this.state.current.maxTickWidths,i=this.getAxisTickRotate("x");!t.axis_x_tick_multiline&&i?(i=Math.sin(Math.PI/180*Math.abs(i)),e.x.clipPath=(this.getHorizontalAxisHeight("x")-20)/i):e.x.clipPath=null},setXAxisTickTextClipPathWidth:function(){var t=this.state,e=t.clip,i=t.current,t=this.$el.svg;t&&t.select("#"+e.idXAxisTickTexts+" rect").attr("width",i.maxTickWidths.x.clipPath).attr("height",30)}},pi=function(t){return I(this,void 0),P(t.position)||"end"}.bind(void 0),xi=function(t){return I(this,void 0),"start"===t.position?4:"middle"===t.position?0:-4}.bind(void 0);function vi(i,n,a){var r=this;return function(t){I(this,r);var e=i?0:n;return"start"===t.position?e=i?-a:0:"middle"===t.position&&(e=(i?-a:n)/2),e}.bind(this)}function bi(t,e){"grid"===e&&t.each(function(){var e=this,i=(0,D.select)(this);["x1","x2","y1","y2"].forEach(function(t){return I(this,e),i.attr(t,Math.ceil(+i.attr(t)))}.bind(this))})}De={hasGrid:function(){var e=this,i=this.config;return["x","y"].some(function(t){return I(this,e),i["grid_"+t+"_show"]||i["grid_"+t+"_lines"].length}.bind(this))},initGrid:function(){this.hasGrid()&&this.initGridLines(),this.initFocusGrid()},initGridLines:function(){var t=this.config,e=this.state.clip,i=this.$el;(t.grid_x_lines.length||t.grid_y_lines.length)&&(i.gridLines.main=i.main.insert("g","."+ut.chart+(t.grid_lines_front?" + *":"")).attr("clip-path",e.pathGrid).attr("class",kt.grid+" "+kt.gridLines),i.gridLines.main.append("g").attr("class",kt.xgridLines),i.gridLines.main.append("g").attr("class",kt.ygridLines),i.gridLines.x=(0,D.selectAll)([]))},updateXGrid:function(t){var e=this,i=this.config,n=this.scale,a=this.state,r=this.$el,s=r.main,o=r.grid,l=i.axis_rotated,r=this.generateGridData(i.grid_x_type,n.x),c=this.axis.isCategorized()?this.axis.x.tickOffset():0,i=function(t){return I(this,e),(n.zoom||n.x)(t)+c*(l?-1:1)}.bind(this);a.xgridAttr=l?{x1:0,x2:a.width,y1:i,y2:i}:{x1:i,x2:i,y1:0,y2:a.height},o.x=s.select("."+kt.xgrids).selectAll("."+kt.xgrid).data(r),o.x.exit().remove(),o.x=o.x.enter().append("line").attr("class",kt.xgrid).merge(o.x),t||o.x.each(function(){var i=this,n=(0,D.select)(this);Object.keys(a.xgridAttr).forEach(function(t){var e=this;I(this,i),n.attr(t,a.xgridAttr[t]).style("opacity",function(){return I(this,e),n.attr(l?"y1":"x1")===(l?a.height:0)?"0":null}.bind(this))}.bind(this))})},updateYGrid:function(){var e=this,t=this.axis,i=this.config,n=this.scale,a=this.state,r=this.$el,s=r.grid,o=r.main,l=i.axis_rotated,r=function(t){return I(this,e),Math.ceil(n.y(t))}.bind(this),i=t.y.getGeneratedTicks(i.grid_y_ticks)||this.scale.y.ticks(i.grid_y_ticks);s.y=o.select("."+kt.ygrids).selectAll("."+kt.ygrid).data(i),s.y.exit().remove(),s.y=s.y.enter().append("line").attr("class",kt.ygrid).merge(s.y),s.y.attr("x1",l?r:0).attr("x2",l?r:a.width).attr("y1",l?0:r).attr("y2",l?a.height:r),bi(s.y,"grid")},updateGrid:function(){var t=this.$el,e=t.grid;t.gridLines.main||this.initGridLines(),e.main.style("visibility",this.hasArcType()?"hidden":null),this.hideGridFocus(),this.updateXGridLines(),this.updateYGridLines()},updateXGridLines:function(){var e=this,t=this.config,i=this.$el,n=i.gridLines,a=i.main,r=this.$T,i=t.axis_rotated;t.grid_x_show&&this.updateXGrid();a=a.select("."+kt.xgridLines).selectAll("."+kt.xgridLine).data(t.grid_x_lines);r(a.exit()).style("opacity","0").remove();t=a.enter().append("g");t.append("line").style("opacity","0"),t.append("text").attr("transform",i?null:"rotate(-90)").attr("dy",-5).style("opacity","0"),r((a=t.merge(a)).attr("class",function(t){return I(this,e),(kt.xgridLine+" "+(t.class||"")).trim()}.bind(this)).select("text").attr("text-anchor",pi).attr("dx",xi)).text(function(t){return I(this,e),t.text}.bind(this)).style("opacity",null),n.x=a},updateYGridLines:function(){var e=this,t=this.config,i=this.state,n=i.width,a=i.height,r=this.$el,s=this.$T,o=t.axis_rotated;t.grid_y_show&&this.updateYGrid(),s((i=r.main.select("."+kt.ygridLines).selectAll("."+kt.ygridLine).data(t.grid_y_lines)).exit()).style("opacity","0").remove();t=i.enter().append("g");t.append("line").style("opacity","0"),t.append("text").attr("transform",o?"rotate(-90)":"").style("opacity","0");i=t.merge(i),t=this.yv.bind(this);s(i.attr("class",function(t){return I(this,e),(kt.ygridLine+" "+(t.class||"")).trim()}.bind(this)).select("line")).attr("x1",o?t:0).attr("x2",o?t:n).attr("y1",o?0:t).attr("y2",o?a:t).style("opacity",null),s(i.select("text").attr("text-anchor",pi).attr("dx",xi)).attr("dy",-5).attr("x",vi(o,n,a)).attr("y",t).text(function(t){return I(this,e),t.text}.bind(this)).style("opacity",null),r.gridLines.y=i},redrawGrid:function(t){var e=this,i=this.config.axis_rotated,n=this.state,a=n.width,r=n.height,s=this.$el.gridLines,o=this.$T,l=this.xv.bind(this),n=s.x.select("line"),s=s.x.select("text"),n=o(n,t).attr("x1",i?0:l).attr("x2",i?a:l).attr("y1",i?l:0).attr("y2",i?l:r),s=o(s,t).attr("x",vi(!i,a,r)).attr("y",l).text(function(t){return I(this,e),t.text}.bind(this));return[n.style("opacity",null),s.style("opacity",null)]},initFocusGrid:function(){var t=this.config,e=this.state.clip,i=this.$el,n=t.grid_front,n="."+(n&&i.gridLines.main?kt.gridLines:ut.chart)+(n?" + *":""),e=i.main.insert("g",n).attr("clip-path",e.pathGrid).attr("class",kt.grid);i.grid.main=e,t.grid_x_show&&e.append("g").attr("class",kt.xgrids),t.grid_y_show&&e.append("g").attr("class",kt.ygrids),t.interaction_enabled&&t.grid_focus_show&&(e.append("g").attr("class",St.xgridFocus).append("line").attr("class",St.xgridFocus),t.grid_focus_y&&!t.tooltip_grouped&&e.append("g").attr("class",St.ygridFocus).append("line").attr("class",St.ygridFocus))},showGridFocus:function(t){var r,s,e=this,o=this,i=o.config,n=o.state,l=n.width,c=n.height,h=i.axis_rotated,a=o.$el.main.selectAll("line."+St.xgridFocus+", line."+St.ygridFocus),n=(t||[a.datum()]).filter(function(t){return I(this,e),t&&P(o.getBaseValue(t))}.bind(this));!i.tooltip_show||0===n.length||o.hasType("bubble")||o.hasArcType()||(r=i.grid_focus_edge&&!i.tooltip_grouped,s=o.xx.bind(o),a.style("visibility",null).data(n.concat(n)).each(function(t){var i,n=this,a=(0,D.select)(this),e={x:s(t),y:o.getYScaleById(t.id)(t.value)};i=a.classed(St.xgridFocus)?h?[null,e.x,r?e.y:l,e.x]:[e.x,r?e.y:null,e.x,c]:(t="y2"===o.axis.getId(t.id),h?[e.y,r&&!t?e.x:null,e.y,r&&t?e.x:c]:[r&&t?e.x:null,e.y,r&&!t?e.x:l,e.y]),["x1","y1","x2","y2"].forEach(function(t,e){return I(this,n),a.attr(t,i[e])}.bind(this))}),bi(a,"grid"),null!=o.showCircleFocus&&o.showCircleFocus(t))},hideGridFocus:function(){var t=this.state,e=t.inputType,i=t.resizing,t=this.$el.main;"mouse"!==e&&i||(t.selectAll("line."+St.xgridFocus+", line."+St.ygridFocus).style("visibility","hidden"),null!=this.hideCircleFocus&&this.hideCircleFocus())},updateGridFocus:function(){var t=this.state,e=t.inputType,i=t.width,n=t.height,a=t.resizing,t=this.$el.grid.main.select("line."+St.xgridFocus);return"touch"===e?t.empty()?a&&null!=this.showCircleFocus&&this.showCircleFocus():this.showGridFocus():(a=this.config.axis_rotated,t.attr("x1",a?0:-10).attr("x2",a?i:-10).attr("y1",a?-10:0).attr("y2",a?-10:n)),!0},generateGridData:function(t,e){var i=this,n=this.$el.main.select("."+pt.axisX).selectAll(".tick").size(),a=[];if("year"===t)for(var r=this.getXDomain().map(function(t){return I(this,i),t.getFullYear()}.bind(this)),t=r[0],s=r[1],o=t;o<=s;o++)a.push(new Date(o+"-01-01 00:00:00"));else(a=e.ticks(10)).length>n&&(a=a.filter(function(t){return I(this,i),(t+"").indexOf(".")<0}.bind(this)));return a},getGridFilterToRemove:function(t){var a=this;return(t?function(e){var i=this;I(this,a);var n=!1;return(X(t)?t.concat():[t]).forEach(function(t){I(this,i),("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(n=!0)}.bind(this)),n}:function(){return I(this,a),!0}).bind(this)},removeGridLines:function(t,e){var i=this,n=this.config,a=this.$T,r=this.getGridFilterToRemove(t),s=function(t){return I(this,i),!r(t)}.bind(this),t=e?kt.xgridLine:kt.ygridLine;a(this.$el.main.select("."+(e?kt.xgridLines:kt.ygridLines)).selectAll("."+t).filter(r)).style("opacity","0").remove();e="grid_"+(e?"x":"y")+"_lines";n[e]=n[e].filter(s)}},Ee={initRegion:function(){var t=this.$el;t.region.main=t.main.insert("g",":first-child").attr("clip-path",this.state.clip.path).attr("class",Lt.regions)},updateRegion:function(){var t=this.config,e=this.$el.region,i=this.$T;e.main||this.initRegion(),e.main.style("visibility",this.hasArcType()?"hidden":null);t=e.main.selectAll("."+Lt.region).data(t.regions);i(t.exit()).style("opacity","0").remove();i=t.enter().append("g");i.append("rect").style("fill-opacity","0"),e.list=i.merge(t).attr("class",this.classRegion.bind(this))},redrawRegion:function(t){var e=this,i=this,n=i.$el.region;return[(0,i.$T)(n.list.select("rect"),t).attr("x",i.regionX.bind(i)).attr("y",i.regionY.bind(i)).attr("width",i.regionWidth.bind(i)).attr("height",i.regionHeight.bind(i)).style("fill-opacity",function(t){return I(this,e),P(t.opacity)?t.opacity:null}.bind(this)).on("end",function(){(0,D.select)(this.parentNode).selectAll("rect:not([x])").remove()})]},getRegionXY:function(t,e){var i=this.config,n=this.scale,a=i.axis_rotated,r="x"===t,i="start",t=0;return"y"===e.axis||"y2"===e.axis?(r||(i="end"),(r?a:!a)&&i in e&&(t=(0,n[e.axis])(e[i]))):(r?!a:a)&&i in e&&(t=(n.zoom||n.x)(this.axis.isTimeSeries()?ot.call(this,e[i]):e[i])),t},regionX:function(t){return this.getRegionXY("x",t)},regionY:function(t){return this.getRegionXY("y",t)},getRegionSize:function(t,e){var i=this.config,n=this.scale,a=this.state,r=i.axis_rotated,s="width"===t,o=this[s?"regionX":"regionY"](e),i="end",t=a[t];return"y"===e.axis||"y2"===e.axis?(s||(i="start"),(s?r:!r)&&i in e&&(t=(0,n[e.axis])(e[i]))):(s?!r:r)&&i in e&&(t=(n.zoom||n.x)(this.axis.isTimeSeries()?ot.call(this,e[i]):e[i])),t<o?0:t-o},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},isRegionOnX:function(t){return!t.axis||"x"===t.axis}},Fe={getAxisSize:function(t){var e=this.config.axis_rotated;return e&&"x"===t||!e&&/y2?/.test(t)?this.getAxisWidthByAxisId(t,!0):this.getHorizontalAxisHeight(t)},getAxisWidthByAxisId:function(t,e){if(this.axis){var i=null==(i=this.axis)?void 0:i.getLabelPositionById(t),t=this.axis.getMaxTickWidth(t,e),e=0===t?.5:0;return t+("fit"===(null==(t=this.config.padding)?void 0:t.mode)?i.isInner?10+e:10:i.isInner?20+e:40)}return 40},getHorizontalAxisHeight:function(t){var e,i=this.config,n=this.state,a=n.current,r=n.rotatedPadding,s=n.isLegendRight,o=n.isLegendInset,l=i.axis_rotated,c="fit"===(null==(e=i.padding)?void 0:e.mode),h=i["axis_"+t+"_inner"],n=i["axis_"+t+"_label"].text,n="fit"===(null==(e=i.padding)?void 0:e.mode)?h&&!n?"y"===t?1:0:20:30;if("x"===t&&!i.axis_x_show)return 8;if("x"===t&&i.axis_x_height)return i.axis_x_height;if("y"===t&&!i.axis_y_show)return!i.legend_show||s||o?1:10;if("y2"===t&&!i.axis_y2_show)return c?0:r.top;r=this.getAxisTickRotate(t);return("x"===t&&!l||/y2?/.test(t)&&l)&&r&&(n=30+this.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(r))/180),!i.axis_x_tick_multiline&&a.height&&n>a.height/2&&(n=a.height/2)),n+(this.axis.getLabelPositionById(t).isInner?0:10)+("y2"!==t||l?0:-10)},getEventRectWidth:function(){var t=this.config,e=this.axis,t=t.axis_x_inverted,e=e.x.tickInterval();return Math.max(0,t?Math.abs(e):e)},getAxisTickRotate:function(t){var e,i,n=this.axis,a=this.config,r=this.state,s=this.$el,o=a["axis_"+t+"_tick_rotate"];return"x"===t&&(e=n.isCategorized()||n.isTimeSeries(),a.axis_x_tick_fit&&e&&(i=a.axis_x_tick_count,t=r.current.maxTickWidths.x.ticks.length,n=0,i?n=t<i?t:i:t&&(n=t),n!==r.axis.x.tickCount&&(t=this.data.targets,r.axis.x.padding=this.getXDomainPadding([this.getXDomainMinMax(t,"min"),this.getXDomainMinMax(t,"max")],n)),r.axis.x.tickCount=n),s.svg&&a.axis_x_tick_fit&&!a.axis_x_tick_multiline&&!a.axis_x_tick_culling&&a.axis_x_tick_autorotate&&e&&(o=this.needToRotateXAxisTickTexts()?a.axis_x_tick_rotate:0)),o},needToRotateXAxisTickTexts:function(){var t=this.state,e=t.axis,t=t.current.width-this.getCurrentPaddingLeft(!1)-this.getCurrentPaddingRight(),e=e.x.tickCount+e.x.padding.left+e.x.padding.right;return(e?t/e:0)<this.axis.getMaxTickWidth("x")}},Ne={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_culling_lines:!0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},He={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_culling_lines:!0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]};function _i(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function mi(e){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?_i(Object(i),!0).forEach(function(t){u(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_i(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))});return e}var He=mi(mi(mi({axis_rotated:!1},{axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_culling_lines:!0,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_inverted:!1,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]}),Ne),He),yi=[$e,{category:function(t,e){var i=this.internal,n=i.config;return 1<arguments.length&&(n.axis_x_categories[t]=e,i.redraw()),n.axis_x_categories[t]},categories:function(t){var e=this.internal,i=e.config;return arguments.length&&(i.axis_x_categories=t,e.redraw()),i.axis_x_categories}},Ke,je,Ye,We,Ze],Ti=[t,ze,a,s,De,Ee,Fe],wi=[{data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},He,{grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:void 0,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0}],Ai=Zn(12);function Si(n){void 0===n&&(n=0);var r=this,s=r.config,a=r.state,o=r.hasMultiArcGauge(),l=a.gaugeArcWidth/r.filterTargetsToShow(r.data.targets).length,c=n?Math.min(a.radiusExpanded*n-a.radius,.8*l-100*(1-n)):0;return{inner:function(t){var e=r.getRadius(t).innerRadius;return o?a.radius-l*(t.index+1):z(e)?e:0},outer:function(t){var e,i=r.getRadius(t).outerRadius;return o?e=a.radius-l*t.index+c:r.hasType("polar")&&!n?e=r.getPolarOuterRadius(t,i):(e=i,n&&(t=a.radiusExpanded,a.radius!==i&&(t-=Math.abs(a.radius-i)),e=t*n)),e},corner:function(t,e){var i=s.arc_cornerRadius_ratio,n=void 0===i?0:i,a=s.arc_cornerRadius,i=void 0===a?0:a,a=t.data.id,t=t.value;return n?n*e:z(i)?i:i.call(r.api,a,t,e)}}}function ki(i){return function(t){var e=(0,Ai.interpolate)(this._current,t);return this._current=t,function(t){t=e(t);return i(t)}}}var Ci={initPie:function(){var e=this,t=this.config,i=t.data_type,n=t[i+"_padding"],a=t[i+"_startingAngle"]||0,i=(n?.01*n:t[i+"_padAngle"])||0;this.pie=(0,Ve.pie)().startAngle(a).endAngle(a+2*Math.PI).padAngle(i).value(function(t){var i=this;return I(this,e),t.values.reduce(function(t,e){return I(this,i),t+e.value}.bind(this),0)}.bind(this)).sort(this.getSortCompareFn.bind(this)(!0))},updateRadius:function(){var t=this.config,e=this.state,i=t[t.data_type+"_padding"],n=t.gauge_width||t.donut_width,a=this.filterTargetsToShow(this.data.targets).length*t.gauge_arcs_minWidth;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2*(this.hasMultiArcGauge()&&t.gauge_label_show?.85:1),e.radius=.95*e.radiusExpanded,e.innerRadiusRatio=n?(e.radius-n)/e.radius:.6,e.gaugeArcWidth=n||(a<=e.radius-e.innerRadius?e.radius-e.innerRadius:a<=e.radius?a:e.radius);i=t.pie_innerRadius||(i?i*(e.innerRadiusRatio+.1):0);e.outerRadius=t.pie_outerRadius,e.innerRadius=this.hasType("donut")||this.hasType("gauge")?e.radius*e.innerRadiusRatio:i},getRadius:function(t){var e=null==t?void 0:t.data,i=this.state,t=i.innerRadius,i=i.outerRadius;return!z(t)&&e&&(t=t[e.id]||0),O(i)&&e&&e.id in i?i=i[e.id]:z(i)||(i=this.state.radius),{innerRadius:t,outerRadius:i}},updateArc:function(){this.updateRadius(),this.svgArc=this.getSvgArc(),this.svgArcExpanded=this.getSvgArcExpanded()},getArcLength:function(){var t=3.6*this.config.gauge_arcLength,e=t/360*2;return t<-360?e=-2:360<t&&(e=2),e*Math.PI},getGaugeStartAngle:function(){var t=this.config,e=t.gauge_fullCircle,i=-1*Math.PI/2,n=Math.PI/2,t=t.gauge_startingAngle;return!e&&t<=i?t=i:!e&&n<=t?t=n:(t>Math.PI||t<-1*Math.PI)&&(t=Math.PI),t},updateAngle:function(t){var n=this,e=this,i=e.config,a=e.state,r=e.pie,s=t,o=!1;if(!i)return null;var l,c=e.getGaugeStartAngle(),h=i.gauge_fullCircle?e.getArcLength():-2*c;return s.data&&e.isGaugeType(s.data)&&!e.hasMultiArcGauge()&&(l=i.gauge_min,t=i.gauge_max,a=e.getTotalDataSum(a.rendered),r=r.startAngle(c).endAngle(h*((a-l)/(t-l))+c)),r(e.filterTargetsToShow()).forEach(function(t,e){var i;I(this,n),o||t.data.id!==(null==(i=s.data)?void 0:i.id)||(o=!0,(s=t).index=e)}.bind(this)),isNaN(s.startAngle)&&(s.startAngle=0),isNaN(s.endAngle)&&(s.endAngle=s.startAngle),s.data&&e.hasMultiArcGauge()&&(r=i.gauge_min,e=i.gauge_max,i=s.value<r?0:s.value<e?s.value-r:e-r,s.startAngle=c,s.endAngle=c+h/(e-r)*i),o?s:null},getSvgArc:function(){var a=this,t=Si.call(a),e=t.inner,r=t.outer,s=t.corner,o=(0,Ve.arc)().innerRadius(e).outerRadius(r),e=function(t,e){var i,n="M 0 0";return!t.value&&!t.data||(i=e?t:null!=(i=a.updateAngle(t))?i:null)&&(n=o.cornerRadius(s(i,r(i)))(i)),n};return e.centroid=o.centroid,e},getSvgArcExpanded:function(t){var n=this,a=this,e=Si.call(a,t=void 0===t?1:t),t=e.inner,r=e.outer,s=e.corner,o=(0,Ve.arc)().innerRadius(t).outerRadius(r);return function(t){I(this,n);var e=a.updateAngle(t),i=r(e),t=0;return e&&(t=s(e,i)),e?o.cornerRadius(t)(e):"M 0 0"}.bind(this)},getArc:function(t,e,i){return i||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},transformForArcLabel:function(t){var e,i,n,a=this,r=this,s=r.config,o=r.state.radiusExpanded,l=r.updateAngle(t),c="";return l&&(r.hasMultiArcGauge()?(e=Math.sin(l.endAngle-Math.PI/2),c="translate("+(n=Math.cos(l.endAngle-Math.PI/2)*(o+25))+","+(i=e*(o+15-Math.abs(10*e))+3)+")"):(!r.hasType("gauge")||1<r.data.targets.length)&&(e=r.getRadius(t).outerRadius,r.hasType("polar")&&(e=r.getPolarOuterRadius(t,e)),n=(l=this.svgArc.centroid(l).map(function(t){return I(this,a),isNaN(t)?0:t}.bind(this)))[0],i=l[1],l=Math.sqrt(n*n+i*i),c="translate("+n*(n=(n=null==(n=["donut","pie","polar"].filter(r.hasType.bind(r)).map(function(t){return I(this,a),s[t+"_label_ratio"]}.bind(this)))?void 0:n[0])?R(n)?n.bind(r.api)(t,e,l):n:e&&(l?(.375<36/e?1.175-36/e:.8)*e/l:0))+","+i*n+")")),c},convertToArcData:function(t){return this.addName({id:("data"in t?t.data:t).id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},textForArcLabel:function(t){var r=this,s=r.hasType("gauge");r.shouldShowArcLabel()&&t.style("fill",r.updateTextColor.bind(r)).attr("filter",r.updateTextBacgroundColor.bind(r)).each(function(t){var e,i=(0,D.select)(this),n=r.updateAngle(t),a=r.getRatio("arc",n);r.meetsLabelThreshold(a,null==(e=["donut","gauge","pie","polar"].filter(r.hasType.bind(r)))?void 0:e[0])?(n=(n||t).value,G(i,(r.getArcLabelFormat()||r.defaultArcValueFormat)(n,a,t.data.id).toString(),[-1,1],s)):i.text("")})},expandArc:function(t){var e,i,n=this,a=this,r=a.state.transiting,s=a.$el;r?e=setInterval(function(){I(this,n),r||(clearInterval(e),0<s.legend.selectAll("."+St.legendItemFocused).size()&&a.expandArc(t))}.bind(this),10):(i=a.mapToTargetIds(t),s.svg.selectAll(a.selectorTargets(i,"."+gt.chartArc)).each(function(t){var e;a.shouldExpand(t.data.id)&&(e=a.getExpandConfig(t.data.id,"duration"),t=a.getSvgArcExpanded(a.getExpandConfig(t.data.id,"rate")),(0,D.select)(this).selectAll("path").transition().duration(e).attrTween("d",ki(a.svgArcExpanded.bind(a))).transition().duration(2*e).attrTween("d",ki(t.bind(a))))}))},unexpandArc:function(t){var e=this,i=this,n=i.state.transiting,a=i.$el.svg;n||(t=i.mapToTargetIds(t),a.selectAll(i.selectorTargets(t,"."+gt.chartArc)).selectAll("path").transition().duration(function(t){return I(this,e),i.getExpandConfig(t.data.id,"duration")}.bind(this)).attrTween("d",ki(i.svgArc.bind(i))),a.selectAll(""+gt.arc).style("opacity",null))},getExpandConfig:function(t,e){var i,n=this.config;return this.isDonutType(t)?i="donut":this.isGaugeType(t)?i="gauge":this.isPieType(t)&&(i="pie"),i?n[i+"_expand_"+e]:{duration:50,rate:.98}[e]},shouldExpand:function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},shouldShowArcLabel:function(){var e=this,i=this,n=i.config;return["donut","gauge","pie","polar"].some(function(t){return I(this,e),i.hasType(t)&&n[t+"_label_show"]}.bind(this))},getArcLabelFormat:function(){var e=this,i=this.config,n=function(t){return I(this,e),t}.bind(this);return["donut","gauge","pie","polar"].filter(this.hasType.bind(this)).forEach(function(t){I(this,e),n=i[t+"_label_format"]}.bind(this)),R(n)?n.bind(this.api):n},updateTargetsForArc:function(t){var e=this,i=this,n=i.$el,a=i.hasType("gauge"),r=i.getChartClass("Arc"),s=i.getClass("arcs",!0),o=i.classFocus.bind(i),l=n.main.select("."+gt.chartArcs),c=l.selectAll("."+gt.chartArc).data(i.pie(t)).attr("class",function(t){return I(this,e),r(t)+o(t.data)}.bind(this)),t=c.enter().append("g").attr("class",r).call(this.setCssRule(!1,"."+gt.chartArcs+" text",["pointer-events:none","text-anchor:middle"]));t.append("g").attr("class",s).merge(c),t.append("text").attr("dy",a&&!i.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor",i.getStylePropValue("middle")).style("pointer-events",i.getStylePropValue("none")),n.text=l.selectAll("."+ut.target+" text")},initArc:function(){var t=this.$el;t.arcs=t.main.select("."+ut.chart).append("g").attr("class",gt.chartArcs).attr("transform",this.getTranslate("arc")),this.setArcTitle()},setArcTitle:function(t){var e,i=t||this.getArcTitle(),n=this.hasType("gauge");i&&((t=this.$el.arcs.select("."+(e=n?yt.chartArcsGaugeTitle:gt.chartArcsTitle))).empty()&&(t=this.$el.arcs.append("text").attr("class",e).style("text-anchor","middle")),n&&t.attr("dy","-0.3em"),G(t,i,n?void 0:[-.6,1.35],!0))},getArcTitle:function(){var t=this.hasType("donut")?"donut":this.hasType("gauge")&&"gauge";return t?this.config[t+"_title"]:""},getArcTitleWithNeedleValue:function(){var t=this.config,e=this.state,i=this.getArcTitle();if(i&&this.config.arc_needle_show&&/{=[A-Z_]+}/.test(i)){e=e.current.needle;return z(e)||(e=t.arc_needle_value),st(i,{NEEDLE_VALUE:z(e)?e:0})}return!1},redrawArc:function(t,e,i){var n=this,a=this,r=a.config,s=a.state,o=a.$el.main,l=r.interaction_enabled,c=l&&r.data_selection_isselectable,o=o.selectAll("."+gt.arcs).selectAll("."+gt.arc).data(a.arcData.bind(a));o.exit().transition().duration(e).style("opacity","0").remove(),o=o.enter().append("path").attr("class",a.getClass("arc",!0)).style("fill",function(t){return I(this,n),a.color(t.data)}.bind(this)).style("cursor",function(t){return I(this,n),null!=c&&null!=c.bind&&c.bind(a.api)(t)?"pointer":null}.bind(this)).style("opacity","0").each(function(t){a.isGaugeType(t.data)&&(t.startAngle=r.gauge_startingAngle,t.endAngle=r.gauge_startingAngle),this._current=t}).merge(o),a.hasType("gauge")&&(a.updateGaugeMax(),a.hasMultiArcGauge()&&a.redrawMultiArcGauge()),o.attr("transform",function(t){return I(this,n),!a.isGaugeType(t.data)&&i?"scale(0)":""}.bind(this)).style("opacity",function(t){return t===this._current?"0":null}).each(function(){I(this,n),s.transiting=!0}.bind(this)).transition().duration(t).attrTween("d",function(e){var t=this,i=a.updateAngle(e);if(!i)return function(){return I(this,t),"M 0 0"}.bind(this);isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var n=(0,Ai.interpolate)(this._current,i);return this._current=n(0),function(t){t=n(t);return t.data=e.data,a.getArc(t,!0)}}).attr("transform",i?"scale(1)":"").style("fill",function(t){var e;return I(this,n),a.levelColor?(e=a.levelColor(t.data.values[0].value),r.data_colors[t.data.id]=e):e=a.color(t.data),e}.bind(this)).style("opacity",null).call(B,function(){var t,e;a.levelColor&&(e=(t=(0,D.select)(this)).datum(),a.updateLegendItemColor(e.data.id,t.style("fill"))),s.transiting=!1,F(r.onrendered,a.api)}),l&&a.bindArcEvent(o),a.hasType("polar")&&a.redrawPolar(),a.hasType("gauge")&&a.redrawBackgroundArcs(),r.arc_needle_show&&a.redrawNeedle(),a.redrawArcText(t)},redrawNeedle:function(){var n=this,a=this,r=a.$el,s=a.config,t=a.state,e=t.hiddenTargetIds,i=(t.radius-1)/100*s.arc_needle_length,o=e.length!==a.data.targets.length,l=a.$el.arcs.select("."+gt.needle),c=s.arc_needle_path,h=s.arc_needle_bottom_width/2,d=s.arc_needle_top_width/2,u=s.arc_needle_top_rx,g=s.arc_needle_top_ry,f=s.arc_needle_bottom_len,p=s.arc_needle_bottom_rx,t=s.arc_needle_bottom_ry,e=a.getNeedleAngle(),x=function(){I(this,n);var t=a.getArcTitleWithNeedleValue();t&&a.setArcTitle(t)}.bind(this);x(),l.empty()&&(l=r.arcs.append("path").classed(gt.needle,!0),r.needle=l,r.needle.updateHelper=function(t,e){var i=this;void 0===e&&(e=!1),I(this,n),"none"!==r.needle.style("display")&&a.$T(r.needle).style("transform","rotate("+a.getNeedleAngle(t)+"deg)").call(B,function(){I(this,i),e&&(s.arc_needle_value=t),x()}.bind(this))}.bind(this)),o?(f=R(c)?c.call(a,i):"M-"+h+" "+f+" A"+p+" "+t+" 0 0 0 "+h+" "+f+" L"+d+" -"+i+" A"+u+" "+g+" 0 0 0 -"+d+" -"+i+" L-"+h+" "+f+" Z",a.$T(l).attr("d",f).style("fill",s.arc_needle_color).style("display",null).style("transform","rotate("+e+"deg)")):l.style("display","none")},getNeedleAngle:function(t){var e=this.config,i=this.state,n=this.getArcLength(),a=this.hasType("gauge"),r=this.getTotalDataSum(!0),s=$(t)?t:e.arc_needle_value,o=e[e.data_type+"_startingAngle"]||0,t=0;return z(s)||(s=a&&1===this.data.targets.length?r:0),i.current.needle=s,t=a?(o=this.getGaugeStartAngle(),(e.gauge_fullCircle?n:-2*o)*((s-(a=e.gauge_min))/(e.gauge_max-a))):n*(s/r),(o+t)*(180/Math.PI)},redrawBackgroundArcs:function(){var e,i=this,n=this,a=n.config,r=n.state,t=n.hasMultiArcGauge(),s=a.gauge_fullCircle,o=0===n.filterTargetsToShow(n.data.targets).length&&!!a.data_empty_label_text,l=n.getGaugeStartAngle(),c=s?l+n.getArcLength():-1*l,s=n.$el.arcs.select((t?"g":"")+"."+gt.chartArcsBackground);t?(e=0,(s=s.selectAll("path."+gt.chartArcsBackground).data(n.data.targets)).enter().append("path").attr("class",function(t,e){return I(this,i),gt.chartArcsBackground+" "+gt.chartArcsBackground+"-"+e}.bind(this)).merge(s).style("fill",a.gauge_background||null).attr("d",function(t){t=t.id;if(I(this,i),o||0<=r.hiddenTargetIds.indexOf(t))return"M 0 0";t={data:[{value:a.gauge_max}],startAngle:l,endAngle:c,index:e++};return n.getArc(t,!0,!0)}.bind(this)),s.exit().remove()):s.attr("d",o?"M 0 0":function(){I(this,i);var t={data:[{value:a.gauge_max}],startAngle:l,endAngle:c};return n.getArc(t,!0,!0)}.bind(this))},bindArcEvent:function(t){var i,n=this,a=this,r=a.config,s=a.state,e="touch"===s.inputType,o="mouse"===s.inputType;function l(t,e,i){a.expandArc(i),a.api.focus(i),a.toggleFocusLegend(i,!0),a.showTooltip([e],t)}function c(t){t=(null==t?void 0:t.id)||void 0;a.unexpandArc(t),a.api.revert(),a.revertLegend(),a.hideTooltip()}t.on("click",function(t,e,i){e=a.updateAngle(e);e&&(e=a.convertToArcData(e),null!=a.toggleShape&&a.toggleShape(this,e,i),r.data_onclick.bind(a.api)(e,this))}),o&&t.on("mouseover",function(t,e){s.transiting||(s.event=t,l(this,e=(e=a.updateAngle(e))?a.convertToArcData(e):null,(null==e?void 0:e.id)||void 0),a.setOverOut(!0,e))}).on("mouseout",function(t,e){I(this,n),s.transiting||(s.event=t,e=(e=a.updateAngle(e))?a.convertToArcData(e):null,c(),a.setOverOut(!1,e))}.bind(this)).on("mousemove",function(t,e){e=a.updateAngle(e),e=e?a.convertToArcData(e):null;s.event=t,a.showTooltip([e],this)}),e&&a.hasArcType()&&!a.radars&&(i=function(t){I(this,n);t=t.changedTouches[0];return(0,D.select)(p.elementFromPoint(t.clientX,t.clientY))}.bind(this),a.$el.svg.on("touchstart touchmove",function(t){var e;s.transiting||(s.event=t,t=(null==(e=(t=null!=(e=i(t).datum())&&e.data&&e.data.id?a.updateAngle(e):null)?a.convertToArcData(t):null)?void 0:e.id)||void 0,a.callOverOutForTouch(e),M(t)?c():l(this,e,t))}))},redrawArcText:function(t){var e,i=this,n=this,a=n.config,r=n.state,s=n.$el,o=s.main,l=s.arcs,s=n.hasType("gauge"),c=n.hasMultiArcGauge();s&&1===n.data.targets.length&&a.gauge_title||(e=o.selectAll("."+gt.chartArc).select("text").style("opacity","0").attr("class",function(t){return I(this,i),n.isGaugeType(t.data)?yt.gaugeValue:null}.bind(this)).call(n.textForArcLabel.bind(n)).attr("transform",n.transformForArcLabel.bind(n)).style("font-size",function(t){return I(this,i),n.isGaugeType(t.data)&&1===n.data.targets.length&&!c?Math.round(r.radius/5)+"px":null}.bind(this)).transition().duration(t).style("opacity",function(t){return I(this,i),n.isTargetToShow(t.data.id)&&n.isArcType(t.data)?null:"0"}.bind(this)),c&&e.attr("dy","-.1em")),o.select("."+gt.chartArcsTitle).style("opacity",n.hasType("donut")||s?null:"0"),s&&((s=a.gauge_fullCircle)&&null!=e&&e.attr("dy",""+(c?0:Math.round(r.radius/14))),a.gauge_label_show&&(l.select("."+yt.chartArcsGaugeUnit).attr("dy",(s?1.5:.75)+"em").text(a.gauge_units),l.select("."+yt.chartArcsGaugeMin).attr("dx",-1*(r.innerRadius+(r.radius-r.innerRadius)/(s?1:2))+"px").attr("dy","1.2em").text(n.textForGaugeMinMax(a.gauge_min,!1)),s||l.select("."+yt.chartArcsGaugeMax).attr("dx",r.innerRadius+(r.radius-r.innerRadius)/2+"px").attr("dy","1.2em").text(n.textForGaugeMinMax(a.gauge_max,!0))))}},Ri={initArea:function(t){var e=this.config;t.insert("g","."+(e.area_front?bt.circles:wt.lines)).attr("class",this.getClass("areas",!0))},updateAreaColor:function(t){return this.config.area_linearGradient?this.getGradienColortUrl(t.id):this.color(t)},updateArea:function(t,e){var i=this,n=i.config,a=i.state,r=i.$el,s=i.$T,r=(e=void 0===e?!1:e)?r.subchart:r;n.area_linearGradient&&i.updateLinearGradient();n=r.main.selectAll("."+ft.areas).selectAll("."+ft.area).data(i.lineData.bind(i));s(n.exit(),t).style("opacity","0").remove(),r.area=n.enter().append("path").attr("class",i.getClass("area",!0)).style("fill",i.updateAreaColor.bind(i)).style("opacity",function(){return a.orgAreaOpacity=(0,D.select)(this).style("opacity"),"0"}).merge(n),n.style("opacity",a.orgAreaOpacity),i.setRatioForGroupedData(r.area.data())},redrawArea:function(t,e,i){var n=this,a=this,i=((i=void 0===i?!1:i)?this.$el.subchart:this.$el).area,r=a.state.orgAreaOpacity;return[a.$T(i,e,W()).attr("d",t).style("fill",a.updateAreaColor.bind(a)).style("opacity",function(t){return I(this,n),(a.isAreaRangeType(t)?r/1.75:r)+""}.bind(this))]},generateDrawArea:function(t,i){var s=this,o=this,l=o.config,c=l.line_connectNull,h=l.axis_rotated,n=o.generateGetAreaPoints(t,i),a=o.getYScaleById.bind(o),d=function(t){return I(this,s),(i?o.subxx:o.xx).call(o,t)}.bind(this),u=function(t,e){return I(this,s),o.isGrouped(t.id)?n(t,e)[0][1]:a(t.id,i)(o.isAreaRangeType(t)?o.getRangedData(t,"high"):o.getShapeYMin(t.id))}.bind(this),g=function(t,e){return I(this,s),o.isGrouped(t.id)?n(t,e)[1][1]:a(t.id,i)(o.isAreaRangeType(t)?o.getRangedData(t,"low"):t.value)}.bind(this);return function(t){var e=this;I(this,s);var i,n=c?o.filterRemoveNull(t.values):t.values,a=0,r=0,r=o.isAreaType(t)?(i=(0,Ve.area)(),i=h?i.y(d).x0(u).x1(g):i.x(d).y0(l.area_above?0:l.area_below?o.state.height:u).y1(g),c||(i=i.defined(function(t){return I(this,e),null!==o.getBaseValue(t)}.bind(this))),o.isStepType(t)&&(n=o.convertValuesToStep(n)),i.curve(o.getCurve(t))(n)):(n[0]&&(a=o.scale.x(n[0].x),r=o.getYScaleById(t.id)(n[0].value)),h?"M "+r+" "+a:"M "+a+" "+r);return r||"M 0 0"}.bind(this)},generateGetAreaPoints:function(t,r){var s=this,o=s.config,l=s.getShapeX(0,t,r),c=s.getShapeY(!!r),h=s.getShapeOffset(s.isAreaType,t,r),d=s.getYScaleById.bind(s);return function(t,e){var i=d.call(s,t.id,r)(s.getShapeYMin(t.id)),n=h(t,e)||i,a=l(t),e=t.value,t=c(t);return[[a,n],[a,(t=o.axis_rotated&&(0<e&&t<i||e<0&&i<t)?i:t)-(i-n)],[a,t-(i-n)],[a,n]]}}},Ei={initBar:function(){var t=this.$el,e=this.config,i=this.state.clip;t.bar=t.main.select("."+ut.chart),t.bar=e.bar_front?t.bar.append("g"):t.bar.insert("g",":first-child"),t.bar.attr("class",xt.chartBars).call(this.setCssRule(!1,"."+xt.chartBars,["pointer-events:none"])),!1===e.clipPath&&(e.bar_radius||e.bar_radius_ratio)&&t.bar.attr("clip-path",i.pathXAxis.replace(/#[^)]*/,"#"+i.id))},updateTargetsForBar:function(t){var i=this,n=this,e=n.config,a=n.$el,r=n.getChartClass("Bar"),s=n.getClass("bars",!0),o=n.classFocus.bind(n),l=e.interaction_enabled&&e.data_selection_isselectable;a.bar||n.initBar(),a.main.select("."+xt.chartBars).selectAll("."+xt.chartBar).data(t.filter(function(t){var e=this;return I(this,i),t.values.some(function(t){return I(this,e),z(t.value)||n.isBarRangeType(t)}.bind(this))}.bind(this))).attr("class",function(t){return I(this,i),r(t)+o(t)}.bind(this)).enter().append("g").attr("class",r).style("opacity","0").style("pointer-events",n.getStylePropValue("none")).append("g").attr("class",s).style("cursor",function(t){return I(this,i),null!=l&&null!=l.bind&&l.bind(n.api)(t)?"pointer":null}.bind(this)).call(n.setCssRule(!0," ."+xt.bar,["fill"],n.color))},updateBar:function(t,e){var i=this,n=i.config,a=i.$el,r=i.$T,s=(e=void 0===e?!1:e)?a.subchart:a,e=i.getClass("bar",!0),a=i.initialOpacity.bind(i);n.bar_linearGradient&&i.updateLinearGradient();n=s.main.selectAll("."+xt.bars).selectAll("."+xt.bar).data(i.labelishData.bind(i));r(n.exit(),t).style("opacity","0").remove(),s.bar=n.enter().append("path").attr("class",e).style("fill",i.updateBarColor.bind(i)).merge(n).style("opacity",a),i.setRatioForGroupedData(s.bar.data())},updateBarColor:function(t){var e=this.getStylePropValue(this.color);return this.config.bar_linearGradient?this.getGradienColortUrl(t.id):e?e(t):null},redrawBar:function(e,t,i){var n=this,a=this,i=((i=void 0===i?!1:i)?a.$el.subchart:a.$el).bar;return[a.$T(i,t,W()).attr("d",function(t){return I(this,n),(z(t.value)||a.isBarRangeType(t))&&e(t)}.bind(this)).style("fill",a.updateBarColor.bind(a)).style("opacity",null)]},generateDrawBar:function(t,e){var c=this,h=this,d=h.config,u=h.generateGetBarPoints(t,e),g=d.axis_rotated,i=d.bar_radius,n=d.bar_radius_ratio,f=z(i)&&0<i?function(){return I(this,c),i}.bind(this):z(n)?function(t){return I(this,c),t*n}.bind(this):null;return function(t,e){I(this,c);var i=u(t,e),n=+g,a=+!n,r=t.value<0,s=d["axis_"+h.axis.getId(t.id)+"_inverted"],o=!s&&r||s&&!r,l=["",""],e=0,s=h.isGrouped(t.id),r=!(!f||!s)&&h.isStackingRadiusData(t);f&&(t=i[2][t=g?a:n]-i[0][t],t="a"+(e=!s||r?f(t):0)+","+e+" "+(o?"1 0 0":"0 0 1")+" ",l[+!g]=t+e+","+e,l[+g]=t+[-e,e][g?"sort":"reverse"](),o&&l.reverse());l=g?"H"+(i[1][n]+(o?e:-e))+" "+l[0]+"V"+(i[2][a]-e)+" "+l[1]+"H"+i[3][n]:"V"+(i[1][a]+(o?-e:e))+" "+l[0]+"H"+(i[2][n]-e)+" "+l[1]+"V"+i[3][a];return"M"+i[0][n]+","+i[0][a]+l+"z"}.bind(this)},isStackingRadiusData:function(t){var i=this,e=this.$el,n=this.config,a=this.data,r=this.state,s=t.id,o=t.index,l=t.value;if(-1<r.hiddenTargetIds.indexOf(s)){e=e.bar.filter(function(t){return I(this,i),t.id===s&&t.value===l}.bind(this));return!e.empty()&&/a\d+/i.test(e.attr("d"))}var c=n.data_groups.find(function(t){return I(this,i),-1<t.indexOf(s)}.bind(this)),a=this.orderTargets(this.filterTargetsToShow(a.targets.filter(this.isBarType,this))).filter(function(t){return I(this,i),-1<c.indexOf(t.id)}.bind(this)).map(function(t){var e=this;return I(this,i),t.values.filter(function(t){return I(this,e),t.index===o&&(z(l)&&0<l?0<t.value:t.value<0)}.bind(this))[0]}.bind(this)).filter(Boolean).map(function(t){return I(this,i),t.id}.bind(this));return 0!==l&&a.indexOf(s)===a.length-1},generateGetBarPoints:function(t,l){var c=this,h=this,d=h.config,e=l?h.axis.subX:h.axis.x,i=h.getIndicesMax(t)+1,u=h.getBarW("bar",e,i),g=h.getShapeX(u,t,!!l),f=h.getShapeY(!!l),p=h.getShapeOffset(h.isBarType,t,!!l),x=h.getYScaleById.bind(h);return function(t,e){I(this,c);var i=t.id,n=x.call(h,i,l)(h.getShapeYMin(i)),a=p(t,e)||n,r=z(u)?u:u[t.id]||u._$width,s=d["axis_"+h.axis.getId(i)+"_inverted"],o=t.value,e=g(t),i=f(t);d.axis_rotated&&!s&&(0<o&&i<n||o<0&&n<i)&&(i=n),h.isBarRangeType(t)||(i-=n-a);r=e+r;return[[e,a],[e,i],[r,i],[r,a]]}.bind(this)}};function Li(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}var Oi={initCandlestick:function(){var t=this.$el;t.candlestick=t.main.select("."+ut.chart).append("g").attr("class",vt.chartCandlesticks)},updateTargetsForCandlestick:function(t){var e=this,i=this.$el,n=this.getChartClass("Candlestick"),a=this.classFocus.bind(this);i.candlestick||this.initCandlestick(),this.$el.main.select("."+vt.chartCandlesticks).selectAll("."+vt.chartCandlestick).data(t).attr("class",function(t){return I(this,e),n(t)+a(t)}.bind(this)).enter().append("g").attr("class",n).style("pointer-events","none")},updateCandlestick:function(t,e){var i=this,n=this.$el,a=this.$T,r=(e=void 0===e?!1:e)?n.subchart:n,s=this.getClass("candlestick",!0),e=this.initialOpacity.bind(this),n=r.main.selectAll("."+vt.chartCandlestick).selectAll("."+vt.candlestick).data(this.labelishData.bind(this));a(n.exit(),t).style("opacity","0").remove();s=n.enter().filter(function(t){return I(this,i),t.value}.bind(this)).append("g").attr("class",s);s.append("line"),s.append("path"),r.candlestick||(r.candlestick={}),r.candlestick=n.merge(s).style("opacity",e)},generateDrawCandlestick:function(t,e){var c=this,h=this,i=h.config,d=h.generateGetCandlestickPoints(t,e),u=i.axis_rotated,g=i.candlestick_color_down;return function(t,e,i){var n=this;I(this,c);var a=d(t,e),e=h.getCandlestickData(t),r=null==e?void 0:e._isUp,t=+u;i.classed&&i.classed(vt[r?"valueUp":"valueDown"],!0);e=u?"H"+a[1][1]+" V"+a[1][0]+" H"+a[0][1]:"V"+a[1][1]+" H"+a[1][0]+" V"+a[0][1];i.select("path").attr("d","M"+a[0][t]+","+a[0][+!t]+e+"z").style("fill",function(t){return I(this,n),(r?h.color(t):O(g)?g[t.id]:g)||h.color(t)}.bind(this));var s,o=i.select("line"),l=u?{x1:a[2][1],x2:a[2][2],y1:a[2][0],y2:a[2][0]}:{x1:a[2][0],x2:a[2][0],y1:a[2][1],y2:a[2][2]};for(s in l)o.attr(s,l[s])}.bind(this)},generateGetCandlestickPoints:function(t,l){var c=this,h=this,d=h.config,e=(l=void 0===l?!1:l)?h.axis.subX:h.axis.x,i=h.getIndicesMax(t)+1,u=h.getBarW("candlestick",e,i),g=h.getShapeX(u,t,!!l),f=h.getShapeY(!!l),p=h.getShapeOffset(h.isBarType,t,!!l),x=h.getYScaleById.bind(h);return function(t,e){I(this,c);var i,n=x.call(h,t.id,l)(h.getShapeYMin(t.id)),a=p(t,e)||n,r=z(u)?u:u[t.id]||u._$width,s=h.getCandlestickData(t),o=s?((i={start:g(t),end:0}).end=i.start+r,e={start:f(s.open),end:f(s.close)},o={x:i.start+r/2,high:f(s.high),low:f(s.low)},d.axis_rotated&&(0<t.value&&e.start<n||t.value<0&&n<e.start)&&(e.start=n),e.start-=n-a,[[i.start,e.start],[i.end,e.end],[o.x,o.low,o.high]]):[[0,0],[0,0],[0,0,0]];return o}.bind(this)},redrawCandlestick:function(n,a,t){var e=this.$el,r=this.$T,e=((t=void 0===t?!1:t)?e.subchart:e).candlestick,s=W(!0);return[e.each(function(t,e){var i=r((0,D.select)(this),a,s);n(t,e,i)}).style("opacity",null)]},getCandlestickData:function(t){var e,i=t.value;return X(i)?!(e={open:i[0],high:i[1],low:i[2],close:i[3]})!==(t=void 0!==(t=i[4])&&t)&&(e.volume=t):O(i)&&(e=function(e){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?Li(Object(i),!0).forEach(function(t){u(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Li(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))});return e}({},i)),e&&(e._isUp=e.close>=e.open),e||null}},Pi={initGauge:function(){var t,e=this,i=this.config,n=this.$el.arcs,a=function(t){I(this,e),n.append("text").attr("class",t).style("text-anchor","middle").style("pointer-events","none")}.bind(this);this.hasType("gauge")&&(t=this.hasMultiArcGauge(),n.append(t?"g":"path").attr("class",gt.chartArcsBackground).style("fill",!t&&i.gauge_background||null),i.gauge_units&&a(yt.chartArcsGaugeUnit),i.gauge_label_show&&(a(yt.chartArcsGaugeMin),i.gauge_fullCircle||a(yt.chartArcsGaugeMax)))},updateGaugeMax:function(){var t=this.config,e=this.state,e=this.hasMultiArcGauge()?this.getMinMaxData().max[0].value:this.getTotalDataSum(e.rendered);e+t.gauge_min*(0<t.gauge_min?-1:1)>t.gauge_max&&(t.gauge_max=e-t.gauge_min)},redrawMultiArcGauge:function(){var e=this,l=this,t=l.config,c=l.state,i=l.$el,h=l.state.hiddenTargetIds,i=i.main.selectAll("."+gt.arcs).selectAll("."+gt.arcLabelLine).data(l.arcData.bind(l));i.enter().append("rect").attr("class",function(t){return I(this,e),gt.arcLabelLine+" "+ut.target+" "+ut.target+"-"+t.data.id}.bind(this)).merge(i).style("fill",function(t){return I(this,e),l.levelColor?l.levelColor(t.data.values[0].value):l.color(t.data)}.bind(this)).style("display",t.gauge_label_show?null:"none").each(function(t){var e,i,n,a=0,r=0,s=0,o="";h.indexOf(t.data.id)<0&&(n=l.updateAngle(t),e=c.gaugeArcWidth/l.filterTargetsToShow(l.data.targets).length*(n.index+1),n=(i=n.endAngle-Math.PI/2)-(0==(t=c.radius-e)?0:1/t),a=c.radiusExpanded-c.radius+e,r=Math.cos(n)*t,s=Math.sin(n)*t,o="rotate("+180*i/Math.PI+", "+r+", "+s+")"),(0,D.select)(this).attr("x",r).attr("y",s).attr("width",a).attr("height",2).attr("transform",o).style("stroke-dasharray","0, "+(a+2)+", 0")})},textForGaugeMinMax:function(t,e){var i=this.config.gauge_label_extents;return R(i)?i.bind(this.api)(t,e):t},getGaugeLabelHeight:function(){var t=this.config;return this.config.gauge_label_show&&!t.gauge_fullCircle?20:0},getPaddingBottomForGauge:function(){return this.getGaugeLabelHeight()*(this.config.gauge_label_show?2:2.5)}},Ii={initBubble:function(){var t=this.config;this.hasType("bubble")&&(t.point_show=!0,t.point_type="circle")},getBaseLength:function(){var t=this.state,e=t.width,i=t.height,n=te,t=this.cache.get(n);return t||this.cache.add(n,t=nt("min",[e,i])),t},getBubbleR:function(t){var e=this,i=this,n=i.config.bubble_maxR;R(n)?n=n.bind(i.api)(t):z(n)||(n=i.getBaseLength()/(2*i.getMaxDataCount())+12);var a=nt("max",i.getMinMaxData().max.map(function(t){return I(this,e),i.isBubbleZType(t)?i.getBubbleZData(t.value,"y"):O(t.value)?t.value.mid:t.value}.bind(this))),n=n*n*Math.PI,a=(i.isBubbleZType(t)?i.getBubbleZData(t.value,"z"):t.value)*(n/a);return Math.sqrt(a/Math.PI)},getBubbleZData:function(t,e){return O(t)?t[e]:t["y"===e?0:1]}},Di={initLine:function(){var t=this.$el;t.line=t.main.select("."+ut.chart).append("g").attr("class",wt.chartLines).call(this.setCssRule(!1,"."+wt.chartLines,["pointer-events:none"]))},updateTargetsForLine:function(t){var e=this,i=this,n=i.$el,a=n.area,r=n.line,s=n.main,o=i.getChartClass("Line"),n=i.getClass("lines",!0),l=i.classFocus.bind(i);r||i.initLine();r=t.filter(function(t){return I(this,e),!(i.isScatterType(t)||i.isBubbleType(t))}.bind(this)),t=s.select("."+wt.chartLines).selectAll("."+wt.chartLine).data(r).attr("class",function(t){return I(this,e),o(t)+l(t)}.bind(this)),s=t.enter().append("g").attr("class",o).style("opacity","0").style("pointer-events",i.getStylePropValue("none"));s.append("g").attr("class",n),i.hasTypeOf("Area")&&(t=(!a&&s.empty()?t:s).filter(i.isAreaType.bind(i)),i.initArea(t)),i.updateTargetForCircle(r,s)},updateLine:function(t,e){var i=this,n=this,a=n.format.extraLineClasses,r=n.$el,s=n.$T,e=(e=void 0===e?!1:e)?r.subchart:r,r=e.main.selectAll("."+wt.lines).selectAll("."+wt.line).data(n.lineData.bind(n));s(r.exit(),t).style("opacity","0").remove(),e.line=r.enter().append("path").attr("class",function(t){return I(this,i),n.getClass("line",!0)(t)+" "+(a(t)||"")}.bind(this)).style("stroke",n.color).merge(r).style("opacity",n.initialOpacity.bind(n)).style("shape-rendering",function(t){return I(this,i),n.isStepType(t)?"crispEdges":""}.bind(this)).attr("transform",null)},redrawLine:function(t,e,i){var n=this.$el;return[(0,this.$T)(((i=void 0===i?!1:i)?n.subchart:n).line,e,W()).attr("d",t).style("stroke",this.color).style("opacity",null)]},getCurve:function(e){var i=this,n=this;return n.config.axis_rotated&&n.isStepType(e)?function(t){I(this,i);t=n.getInterpolate(e)(t);return t.orgPoint=t.point,t.pointRotated=function(t,e){1===this._point&&(this._point=2);var i=this._y*(1-this._t)+e*this._t;this._context.lineTo(this._x,i),this._context.lineTo(t,i),this._x=t,this._y=e},t.point=function(t,e){0===this._point?this.orgPoint(t,e):this.pointRotated(t,e)},t}.bind(this):n.getInterpolate(e)},generateDrawLine:function(t,s){var o=this,l=this,c=l.config,h=l.scale,d=c.line_connectNull,u=c.axis_rotated,i=l.generateGetLinePoints(t,s),g=l.getYScaleById.bind(l),e=function(t){return I(this,o),(s?l.subxx:l.xx).call(l,t)}.bind(this),t=function(t,e){return I(this,o),l.isGrouped(t.id)?i(t,e)[0][1]:g(t.id,s)(l.getBaseValue(t))}.bind(this),f=(0,Ve.line)(),f=u?f.x(t).y(e):f.x(e).y(t);d||(f=f.defined(function(t){return I(this,o),null!==l.getBaseValue(t)}.bind(this)));var p=s?h.subX:h.x;return function(t){I(this,o);var e,i=g(t.id,s),n=d?l.filterRemoveNull(t.values):t.values,a=0,r=0;return(l.isLineType(t)?(e=c.data_regions[t.id])?l.lineWithRegions(n,h.zoom||p,i,e):(l.isStepType(t)&&(n=l.convertValuesToStep(n)),f.curve(l.getCurve(t))(n)):(n[0]&&(a=p(n[0].x),r=i(n[0].value)),u?"M "+r+" "+a:"M "+a+" "+r))||"M 0 0"}.bind(this)},lineWithRegions:function(t,r,s,e){var o=this,i=this,l=i.config.axis_rotated,n=i.axis.isTimeSeries(),a=[];if($(e))for(var c,h=function(t,e){return I(this,o),M(t)?e:n?ot.call(i,t):t}.bind(this),d=0;c=e[d];d++){var u=h(c.start,t[0].x),g=h(c.end,t[t.length-1].x),f=c.style||{dasharray:"2 2"};a[d]={start:u,end:g,style:f}}for(var p,x=(l?function(t){return I(this,o),s(t.value)}:function(t){return I(this,o),r(t.x)}).bind(this),v=(l?function(t){return I(this,o),r(t.x)}:function(t){return I(this,o),s(t.value)}).bind(this),b=function(t){return I(this,o),"M"+t[0][0]+","+t[0][1]+"L"+t[1][0]+","+t[1][1]}.bind(this),_=(n?function(t,e,i,n){I(this,o);var a=t.x.getTime(),e=e.x-t.x,t=new Date(a+e*i),n=new Date(a+e*(i+n)),i=l?[[s(C(i)),r(t)],[s(C(i+S)),r(n)]]:[[r(t),s(C(i))],[r(n),s(C(i+S))]];return b(i)}:function(t,e,i,n){I(this,o);n=l?[[s(C(i),!0),r(k(i))],[s(C(i+n),!0),r(k(i+n))]]:[[r(k(i),!0),s(C(i))],[r(k(i+n),!0),s(C(i+n))]];return b(n)}).bind(this),m={x:i.axis.getAxisType("x"),y:i.axis.getAxisType("y")},y="",T=0;p=t[T];T++){var w=t[T-1],A=w&&P(w.value),f=i.isWithinRegions(p.x,a);if(P(p.value))if(!M(a)&&f&&A){if(A){try{f=f.dasharray.split(" ")}catch(t){f="2 2".split(" ")}for(var S,k=Ge(m.x,w.x,p.x),C=Ge(m.y,w.value,p.value),R=r(p.x)-r(w.x),E=s(p.value)-s(w.value),E=Math.sqrt(Math.pow(R,2)+Math.pow(E,2)),L=(S=f[0]/E)*f[1],O=S;O<=1;O+=L)y+=_(w,p,O,S),1<=O+L&&(y+=_(w,p,1,0))}}else y+=(T&&A?"L":"M")+x(p)+","+v(p)}return y},isWithinRegions:function(t,e){for(var i,n=0;i=e[n];n++)if(i.start<t&&t<=i.end)return i.style;return!1},isWithinStep:function(t,e){return Math.abs(e-V(this.state.event,t)[1])<30},shouldDrawPointsForLine:function(t){var e=this.config.line_point;return!0===e||X(e)&&-1!==e.indexOf(t.id)}},zi=function(){return I(this,void 0),W()}.bind(void 0),Mi={hasValidPointType:function(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasValidPointDrawMethods:function(t){t=t||this.config.point_type;return w(t)&&R(t.create)&&R(t.update)},initialOpacityForCircle:function(t){var e=this.config,i=this.state.withoutFadeIn,e=e.point_opacity;return e=M(e)?null!==this.getBaseValue(t)&&i[t.id]?this.opacityForCircle(t):"0":e},opacityForCircle:function(t){var e=this.config,i=e.point_opacity;return M(i)&&(i=e.point_show&&!e.point_focus_only?null:"0",i=P(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":i:"0"),i},initCircle:function(){var t=this.$el.main;this.point=this.generatePoint(),(this.hasType("bubble")||this.hasType("scatter"))&&t.select("."+bt.chartCircles).empty()&&t.select("."+ut.chart).append("g").attr("class",bt.chartCircles)},updateTargetForCircle:function(t,e){var n=this,a=this,i=a.config,r=a.data,s=a.$el,o=i.interaction_enabled&&i.data_selection_enabled,l=o&&i.data_selection_isselectable,c=a.getClass("circles",!0);i.point_show&&(s.circle||a.initCircle(),e=e,(t=t)||(t=r.targets.filter(function(t){return I(this,n),this.isScatterType(t)||this.isBubbleType(t)}.bind(this)),(r=s.main.select("."+bt.chartCircles).style("pointer-events","none").selectAll("."+bt.circles).data(t)).exit().remove(),e=r.enter()),o&&e.append("g").attr("class",function(t){return I(this,n),a.generateClass(Ot.selectedCircles,t.id)}.bind(this)),e.append("g").attr("class",c).call(function(t){I(this,n),a.setCssRule(!0,"."+bt.circles,["cursor:pointer"],l)(t),a.setCssRule(!0," ."+bt.circle,["fill","stroke"],a.color)(t)}.bind(this)).style("opacity",function(){return-1<(0,D.select)(this.parentNode).attr("class").indexOf(bt.chartCircles)?"0":null}),o&&t.forEach(function(e){var i=this;I(this,n),s.main.selectAll("."+Ot.selectedCircles+a.getTargetSelectorSuffix(e.id)).selectAll(""+Ot.selectedCircle).each(function(t){I(this,i),t.value=e.values[t.index].value}.bind(this))}.bind(this)))},updateCircle:function(t){var e=this,i=this,n=i.config,a=i.state,r=i.$el,s=n.point_focus_only,r=(t=void 0===t?!1:t)?r.subchart:r;n.point_show&&!a.toggling&&((a=r.main.selectAll("."+bt.circles).selectAll("."+bt.circle).data(function(t){return I(this,e),i.isLineType(t)&&i.shouldDrawPointsForLine(t)||i.isBubbleType(t)||i.isRadarType(t)||i.isScatterType(t)?s?[t.values[0]]:t.values:[]}.bind(this))).exit().remove(),a.enter().filter(Boolean).append(i.point("create",this,i.pointR.bind(i),i.getStylePropValue(i.color))),r.circle=r.main.selectAll("."+bt.circles+" ."+bt.circle).style("stroke",i.getStylePropValue(i.color)).style("opacity",i.initialOpacityForCircle.bind(i)))},redrawCircle:function(t,e,i,n,a){var r=this,s=r.state.rendered,o=r.$el,l=r.$T,a=(a=void 0===a?!1:a)?o.subchart:o,o=a.main.selectAll("."+Ot.selectedCircle);if(!r.config.point_show)return[];var c=r.point("update",r,t,e,r.getStylePropValue(r.color),i,n,o),n=r.isCirclePoint()?"c":"",h=W(),d=r.opacityForCircle.bind(r),u=[];return a.circle.each(function(t){t=c.bind(this)(t),t=l(t,i||!s,h).style("opacity",d);u.push(t)}),[u,l(o,i).attr(n+"x",t).attr(n+"y",e)]},showCircleFocus:function(n){var r,s=this,t=s.config,e=s.state,i=e.hasRadar,a=e.resizing,o=e.toggling,l=e.transiting,e=s.$el.circle;!1===l&&t.point_focus_only&&e&&(t=(i?s.radarCircleX:s.circleX).bind(s),i=(i?s.radarCircleY:s.circleY).bind(s),o=o||M(n),r=s.point("update",s,t,i,s.getStylePropValue(s.color),!a&&o),(e=n?e.filter(function(e){var i=this,t=null==n.filter?void 0:n.filter(function(t){return I(this,i),t.id===e.id}.bind(this));return!!t.length&&(0,D.select)(this).datum(t[0])}):e).attr("class",this.updatePointClass.bind(this)).style("opacity",null).each(function(t){var e=t.id,i=t.index,n=t.value,a="hidden";P(n)&&(r.bind(this)(t),s.expandCircles(i,e),a=""),this.style.visibility=a}))},hideCircleFocus:function(){var t=this.config,e=this.$el.circle;t.point_focus_only&&e&&(this.unexpandCircles(),e.style("visibility","hidden"))},circleX:function(t){return this.xx(t)},updateCircleY:function(n){var a=this;void 0===n&&(n=!1);var r=this,s=r.generateGetLinePoints(r.getShapeIndices(r.isLineType),n);return function(t,e){I(this,a);var i=t.id;return r.isGrouped(i)?s(t,e)[0][1]:r.getYScaleById(i,n)(r.getBaseValue(t))}.bind(this)},expandCircles:function(t,e,i){var n=this.pointExpandedR.bind(this);i&&this.unexpandCircles();var e=this.getShapeByIndex("circle",t,e).classed(ut.EXPANDED,!0),a=n(e)/this.config.point_r,r=1-a;this.isCirclePoint()?e.attr("r",n):e.each(function(){var t,e,i=(0,D.select)(this);"circle"===this.tagName?i.attr("r",n):(t=(e=this.getBBox()).width,e=e.height,t=r*(+i.attr("x")+t/2),e=r*(+i.attr("y")+e/2),i.attr("transform","translate("+t+" "+e+") scale("+a+")"))})},unexpandCircles:function(t){var e=this.pointR.bind(this),t=this.getShapeByIndex("circle",t).filter(function(){return(0,D.select)(this).classed(ut.EXPANDED)}).classed(ut.EXPANDED,!1);t.attr("r",e),this.isCirclePoint()||(e=e(t)/this.config.point_r,t.attr("transform",1!=e?"scale("+e+")":null))},pointR:function(t){var e=this.config.point_r,i=e;return this.isBubbleType(t)?i=this.getBubbleR(t):R(e)&&(i=e.bind(this.api)(t)),t.r=i},pointExpandedR:function(t){var e=this.config,i=this.isBubbleType(t)?1.15:1.75;return e.point_focus_expand_enabled?e.point_focus_expand_r||this.pointR(t)*i:this.pointR(t)},pointSelectR:function(t){var e=this.config.point_select_r;return R(e)?e(t):e||4*this.pointR(t)},isWithinCircle:function(t,e){var i=V(this.state.event,t),n=(0,D.select)(t),a=this.isCirclePoint(t)?"c":"",r=+n.attr(a+"x"),a=+n.attr(a+"y");return r||a||1!==t.nodeType||(r=(t=H(t)).x,a=t.y),Math.sqrt(Math.pow(r-i[0],2)+Math.pow(a-i[1],2))<(e||this.config.point_sensitivity)},getPointSensitivity:function(t){var e=this.config.point_sensitivity;return R(e)?e=e.call(this.api,t):"radius"===e&&(e=t.r),e},insertPointInfoDefs:function(t,e){var i,r=this,n=function(t,e){I(this,r);for(var i,n=t.attributes,a=0;i=n[a];a++)i=i.name,e.setAttribute(i,t.getAttribute(i))}.bind(this),a=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement,t=p.createElementNS(D.namespaces.svg,a.nodeName.toLowerCase());t.id=e,t.style.fill="inherit",t.style.stroke="inherit",n(a,t),null!=(e=a.childNodes)&&e.length&&(i=(0,D.select)(t),"innerHTML"in t?i.html(a.innerHTML):K(a.childNodes).forEach(function(t){I(this,r),n(t,i.append(t.tagName).node())}.bind(this))),this.$el.defs.node().appendChild(t)},pointFromDefs:function(t){return this.$el.defs.select("#"+t)},updatePointClass:function(t){var e=this,i=e.$el.circle,n=!1;return n=O(t)||i?!0===t?i.each(function(t){t=e.getClass("circle",!0)(t);-1<this.getAttribute("class").indexOf(ut.EXPANDED)&&(t+=" "+ut.EXPANDED),this.setAttribute("class",t)}):e.getClass("circle",!0)(t):n},generateGetLinePoints:function(t,r){var s=this,o=this,l=o.config,c=o.getShapeX(0,t,r),h=o.getShapeY(r),d=o.getShapeOffset(o.isLineType,t,r),u=o.getYScaleById.bind(o);return function(t,e){I(this,s);var i=u.call(o,t.id,r)(o.getShapeYMin(t.id)),n=d(t,e)||i,a=c(t),e=h(t),n=[a,(e=l.axis_rotated&&(0<t.value&&e<i||t.value<0&&i<e)?i:e)-(i-n)];return[n,n,n,n]}.bind(this)},generatePoint:function(){var s=this,t=s.config,o=s.state.datetimeId,l=[],c=L(t.point_pattern)?t.point_pattern:[t.point_type];return function(n,a){for(var t=arguments.length,r=Array(2<t?t-2:0),e=2;e<t;e++)r[e-2]=arguments[e];return function(t){var e=s.getTargetSelectorSuffix(t.id||(null==(i=t.data)?void 0:i.id)||t),i=(0,D.select)(this);l.indexOf(e)<0&&l.push(e);t=c[l.indexOf(e)%c.length];if(s.hasValidPointType(t))t=s[t];else if(!s.hasValidPointDrawMethods(t)){e=o+"-point"+e;if(s.pointFromDefs(e).size()<1&&s.insertPointInfoDefs(t,e),"create"===n)return s.custom.create.bind(a).apply(void 0,[i,e].concat(r));if("update"===n)return s.custom.update.bind(a).apply(void 0,[i].concat(r))}return t[n].bind(a).apply(void 0,[i].concat(r))}}},custom:{create:function(t,e,i){return t.append("use").attr("xlink:href","#"+e).attr("class",this.updatePointClass.bind(this)).style("fill",i).node()},update:function(t,e,i,n,a,r,s){var o=this,l=t.node().getBBox(),c=l.width,h=l.height,d=function(t){return I(this,o),P(t.value)?e(t)-c/2:0}.bind(this),l=function(t){return I(this,o),P(t.value)?i(t)-h/2:0}.bind(this),t=t;return a&&(r&&t.attr("x",d),t=this.$T(t,a,zi()),s&&this.$T(s,a,zi())),t.attr("x",d).attr("y",l).style("fill",n)}},circle:{create:function(t,e,i){return t.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",e).style("fill",i).node()},update:function(t,e,i,n,a,r,s){return this.hasType("bubble")&&t.attr("r",this.pointR.bind(this)),a&&(r&&t.attr("cx",e),t.attr("cx")&&(t=this.$T(t,a,zi())),s&&this.$T(t,a,zi())),t.attr("cx",e).attr("cy",i).style("fill",n)}},rectangle:{create:function(t,e,i){var n=this,a=function(t){return I(this,n),2*e(t)}.bind(this);return t.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",a).attr("height",a).style("fill",i).node()},update:function(t,e,i,n,a,r,s){var o=this,l=this.config.point_r,c=function(t){return I(this,o),e(t)-l}.bind(this),h=function(t){return I(this,o),i(t)-l}.bind(this),t=t;return a&&(r&&t.attr("x",c),t=this.$T(t,a,zi()),s&&this.$T(s,a,zi())),t.attr("x",c).attr("y",h).style("fill",n)}}};function $i(t){var e=t.config.polar_level_max,t=t.getMinMaxData().max[0].value;return t=e&&t<e?e:t}var Xi={initPolar:function(){var t=this.$el.arcs,e=this.config,i=e.polar_level_text_show,e=e.polar_level_text_backgroundColor;t.levels=t.append("g").attr("class",Rt),i&&e&&this.generateDataLabelBackgroundColorFilter(e)},getPolarOuterRadius:function(t,e){var i=$i(this);return(null!=(t=null==t?void 0:t.data.values[0].value)?t:0)/i*e},updateTargetsForPolar:function(t){this.updateTargetsForArc(t)},redrawPolar:function(){this.config.polar_level_show&&this.updatePolarLevel()},updatePolarLevel:function(){var i=this,t=this.config,e=this.state,n=this.$el.arcs.levels,a=t.polar_level_depth,r=$i(this),s=at(0,a),o=e.radius,l=s.map(function(t){return I(this,i),o*((t+1)/a)}.bind(this)),c=(t.polar_level_text_format||function(){}).bind(this.api),h=n.selectAll("."+Ct).data(s);h.exit().remove();n=h.enter().append("g").attr("class",function(t,e){return I(this,i),Ct+" "+Ct+"-"+e}.bind(this));n.append("circle"),n.merge(h).selectAll("circle").style("visibility",t.polar_level_show?null:"hidden").attr("cx",0).attr("cy",0).attr("r",function(t){return I(this,i),l[t]}.bind(this)),t.polar_level_text_show&&(t=t.polar_level_text_backgroundColor,e="#"+e.datetimeId+"-labels-bg"+this.getTargetSelectorSuffix(t),n.append("text").style("text-anchor","middle"),n.merge(h).selectAll("text").attr("dy",function(t){return I(this,i),5-l[t]}.bind(this)).attr("filter",t?"url("+e+")":null).text(function(t){return I(this,i),c(r/s.length*(t+1))}.bind(this)))}};var Fi=se,Bi={initRadar:function(){var t=this.config,e=this.state.current,i=this.$el;this.hasType("radar")&&(i.radar=i.main.select("."+ut.chart).append("g").attr("class",Et.chartRadars),i.radar.levels=i.radar.append("g").attr("class",Rt),i.radar.axes=i.radar.append("g").attr("class",pt.axis),i.radar.shapes=i.radar.append("g").attr("class",Pt.shapes),e.dataMax=t.radar_axis_max||this.getMinMaxData().max[0].value)},getRadarSize:function(){var t=this.config,e=this.state,i=e.arcWidth,e=e.arcHeight,t=t.axis_x_categories.length<4?-20:10,t=(Math.min(i,e)-t)/2;return[t,t]},updateTargetsForRadar:function(t){var e=this,i=this.config;A(i.axis_x_categories)&&(i.axis_x_categories=at(0,nt("max",t.map(function(t){return I(this,e),t.values.length}.bind(this))))),this.generateRadarPoints()},getRadarPosition:function(o,l,c,h){var d=this,u=this.config,t=this.getRadarSize(),g=t[0],f=t[1],p=u.axis_x_categories.length,x=u.radar_direction_clockwise,t=K(o).map(function(t){return I(this,d),e=x,i=t,n=p,a=l,r=$(c)?c:"x"===o?g:f,s=z(h)?h:u.radar_size_ratio,t=2*Math.PI,r*(1-s*("x"===i?Math.sin:Math.cos)((e&&0<a?n-a:a)*t/n));var e,i,n,a,r,s}.bind(this));return 1===t.length?t[0]:t},generateRadarPoints:function(){var e=this,n=this,t=n.data.targets,i=n.getRadarSize(),a=i[0],r=i[1],s=n.cache.get(Fi)||{},i=s._size;i&&(i.width===a||i.height===r)||(t.forEach(function(t){var i=this;I(this,e),s[t.id]=t.values.map(function(t,e){return I(this,i),n.getRadarPosition(["x","y"],e,void 0,n.getRatio("radar",t))}.bind(this))}.bind(this)),s._size={width:a,height:r},n.cache.add(Fi,s))},redrawRadar:function(){var t=this.$el,e=t.radar,i=t.main,t=this.getTranslate("radar");t&&(e.attr("transform",t),i.select("."+Dt.chartTexts).attr("transform",t),this.generateRadarPoints(),this.updateRadarLevel(),this.updateRadarAxes(),this.updateRadarShape())},generateGetRadarPoints:function(){var i=this,n=this.cache.get(Fi);return function(t,e){I(this,i);e=n[t.id][e];return[e,e,e,e]}.bind(this)},updateRadarLevel:function(){var n=this,a=this,t=a.config,e=a.state,i=a.$el.radar,r=a.getRadarSize(),s=r[0],o=r[1],l=t.radar_level_depth,c=t.axis_x_categories.length,h=t.radar_level_text_show,d=i.levels,u=at(0,l),g=t.radar_size_ratio*Math.min(s,o),f=u.map(function(t){return I(this,n),(t+1)/l*g}.bind(this)),p=(t.radar_level_text_format||function(){}).bind(a.api),x=u.map(function(t){var e=this;I(this,n);var i=f[t];return at(0,c).map(function(t){return I(this,e),a.getRadarPosition(["x","y"],t,i,1).join(",")}.bind(this)).join(" ")}.bind(this)),r=d.selectAll("."+Ct).data(u);r.exit().remove();i=r.enter().append("g").attr("class",function(t,e){return I(this,n),Ct+" "+Ct+"-"+e}.bind(this));i.append("polygon").style("visibility",t.radar_level_show?null:"hidden"),h&&(d.select("text").empty()&&d.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return I(this,n),p(0)}.bind(this)),i.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(t){return I(this,n),p(e.current.dataMax/u.length*(t+1))}.bind(this))),i.merge(r).attr("transform",function(t){return I(this,n),"translate("+(s-f[t])+", "+(o-f[t])+")"}.bind(this)).selectAll("polygon").attr("points",function(t){return I(this,n),x[t]}.bind(this)),h&&d.selectAll("text").attr("x",function(t){return I(this,n),M(t)?s:x[t].split(",")[0]}.bind(this)).attr("y",function(t){return I(this,n),M(t)?o:0}.bind(this))},updateRadarAxes:function(){var i=this,n=this,t=n.config,e=n.$el.radar,a=n.getRadarSize(),r=a[0],s=a[1],a=t.axis_x_categories,e=e.axes.selectAll("g").data(a);e.exit().remove();var o,l,a=e.enter().append("g").attr("class",function(t,e){return I(this,i),pt.axis+"-"+e}.bind(this));t.radar_axis_line_show&&a.append("line"),t.radar_axis_text_show&&a.append("text"),e=a.merge(e),t.radar_axis_line_show&&e.select("line").attr("x1",r).attr("y1",s).attr("x2",function(t,e){return I(this,i),n.getRadarPosition("x",e)}.bind(this)).attr("y2",function(t,e){return I(this,i),n.getRadarPosition("y",e)}.bind(this)),t.radar_axis_text_show&&(t=(a=t.radar_axis_text_position).x,o=void 0===t?0:t,a=a.y,l=void 0===a?0:a,e.select("text").style("text-anchor","middle").attr("dy",".5em").call(function(t){I(this,i),t.each(function(t){G((0,D.select)(this),t+"",[-.6,1.2])})}.bind(this)).datum(function(t,e){return I(this,i),{index:e}}.bind(this)).attr("transform",function(t){M(this.width)&&(this.width=this.getBoundingClientRect().width/2);var e=n.getRadarPosition("x",t.index,void 0,1),t=Math.round(n.getRadarPosition("y",t.index,void 0,1));return r<e?e+=this.width+o:Math.round(e)<r&&(e-=this.width+o),s<t?(t/2===s&&"tspan"===this.firstChild.tagName&&this.firstChild.setAttribute("dy","0em"),t+=l):t<s&&(t-=l),"translate("+e+" "+t+")"})),n.bindRadarEvent()},bindRadarEvent:function(){var i,n,a=this,r=this,t=r.config,s=r.state,e=r.$el,o=e.radar,l=e.svg,c=t.point_focus_only,e=s.inputType,h=s.transiting;t.interaction_enabled&&(i="mouse"===e,n=function(t){I(this,a);t=t.target;/tspan/i.test(t.tagName)&&(t=t.parentNode);t=(0,D.select)(t).datum();return t&&1===Object.keys(t).length?t.index:void 0}.bind(this),e=function(t){I(this,a),s.event=t;var e=n(t),t=M(e);(i||t)&&(r.hideTooltip(),c?r.hideCircleFocus():r.unexpandCircles(),i?r.setOverOut(!1,e):t&&r.callOverOutForTouch())}.bind(this),o.axes.selectAll("text").on(i?"mouseover ":"touchstart",function(t){I(this,a),h||(s.event=t,t=n(t),r.selectRectForSingle(l.node(),null,t),i?r.setOverOut(!0,t):r.callOverOutForTouch(t))}.bind(this)).on("mouseout",i?e:null),i||l.on("touchstart",e))},updateRadarShape:function(){var e=this,i=this,t=i.data.targets.filter(function(t){return I(this,e),i.isRadarType(t)}.bind(this)),n=i.cache.get(Fi),a=i.$el.radar.shapes.selectAll("polygon").data(t),r=a.enter().append("g").attr("class",i.getChartClass("Radar"));i.$T(a.exit()).remove(),r.append("polygon").merge(a).style("fill",i.color).style("stroke",i.color).attr("points",function(t){return I(this,e),n[t.id].join(" ")}.bind(this)),i.updateTargetForCircle(t,r)},radarCircleX:function(t){return this.cache.get(Fi)[t.id][t.index][0]},radarCircleY:function(t){return this.cache.get(Fi)[t.id][t.index][1]}},Ni=Zn(13);function Gi(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return ji(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ji(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ji(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}var Vi={initTreemap:function(){var n=this,a=this,t=a.$el,e=a.state,i=e.current,r=i.width,s=i.height,i=e.clip,e=e.datetimeId;i.id=e+"-clip",a.treemap=(0,Ni.treemap)().tile(a.getTreemapTile()),a.treemapFn=function(t){var e=this;I(this,n);var i=(0,Ni.hierarchy)(t).sum(function(t){return I(this,e),t.value}.bind(this)),t=a.getSortCompareFn(!0);return a.treemap(t?i.sort(t):i)}.bind(this),t.defs.append("clipPath").attr("id",i.id).append("rect").attr("width",r).attr("height",s),t.treemap=t.main.select("."+ut.chart).attr("clip-path","url(#"+i.id+")").append("g").classed(Mt.chartTreemaps,!0),a.bindTreemapEvent()},bindTreemapEvent:function(){var n=this,i=this,t=i.$el,e=i.config,a=i.state,r=function(t){I(this,n);var e,i=t.isTrusted?t.target:null==(i=a.eventReceiver.rect)?void 0:i.node();return/^rect$/i.test(i.tagName)&&(a.event=t,e=(0,D.select)(i).datum()),null==e?void 0:e.data}.bind(this);e.interaction_enabled&&(e="touch"===a.inputType,t.treemap.on(e?"touchstart":"mousemove",function(t){I(this,n);var e=r(t);e&&(i.showTooltip([e],t.currentTarget),"mouseover"===t.type&&i.setOverOut(!0,e))}.bind(this)).on(e?"touchend":"mouseout",function(t){I(this,n);t=r(t);i.hideTooltip(),i.setOverOut(!1,t)}.bind(this)))},getTreemapTile:function(){var t=this.config,e=this.state.current,o=e.width,l=e.height,c=null!=(t={binary:Ni.treemapBinary,dice:Ni.treemapDice,slice:Ni.treemapSlice,sliceDice:Ni.treemapSliceDice,squarify:Ni.treemapSquarify,resquarify:Ni.treemapResquarify}[null!=(t=t.treemap_tile)?t:"binary"])?t:Ni.treemapBinary,h=this;return function(t,e,i,n,a){I(this,h),c(t,0,0,o,l);for(var r=Gi(t.children);!(s=r()).done;){var s=s.value;s.x0=e+s.x0/o*(n-e),s.x1=e+s.x1/o*(n-e),s.y0=i+s.y0/l*(a-i),s.y1=i+s.y1/l*(a-i)}}.bind(this)},getTreemapData:function(t){return{name:"root",children:function(t){var i=this,n=this;return t.map(function(t){I(this,i);var e=t.id,t=t.values;return{name:e,id:e,value:t[0].value,ratio:n.getRatio("treemap",t[0])}}.bind(this))}.bind(this)(this.filterTargetsToShow(t.filter(this.isTreemapType,this)))}},updateTargetsForTreemap:function(t){var e=this.$el.treemap,t=this.treemapFn(this.getTreemapData(null!=t?t:this.data.targets));e.data(t)},updateTreemap:function(t){var e=this,i=this,n=i.$el,a=i.$T,r=n.treemap.datum(),s=i.getChartClass("Treemap"),r=n.treemap.selectAll("g").data(r.children);a(r.exit(),t).style("opacity","0").remove(),r.enter().append("g").append("rect"),n.treemap.selectAll("g").attr("class",s).select("rect").attr("fill",function(t){return I(this,e),i.color(t.data.name)}.bind(this))},generateGetTreemapPoints:function(){var e=this,t=this.$el,i=this.scale,n=i.x,a=i.y,r={};return t.treemap.selectAll("g").each(function(t){I(this,e),r[t.data.name]=[[n(t.x0),a(t.y0)],[n(t.x1),a(t.y1)]]}.bind(this)),function(t){return I(this,e),r[t.id]}.bind(this)},redrawTreemap:function(t){var e=this.$el,i=this.state.current,n=i.width,i=i.height;return e.defs.select("rect").attr("width",n).attr("height",i),[this.$T(e.treemap,t,W()).call(function(t,e){var i=this,n=this.scale,a=n.x,r=n.y,s=this.state.width;t.selectAll("g").attr("transform",function(t){return I(this,i),"translate("+(t===e?"0,0":a(t.x0)+","+r(t.y0))+")"}.bind(this)).select("rect").attr("width",function(t){return I(this,i),t===e?s:a(t.x1)-a(t.x0)}.bind(this)).attr("height",function(t){return I(this,i),t===e?0:r(t.y1)-r(t.y0)}.bind(this))}.bind(this),e.treemap.datum())]},treemapDataLabelFormat:function(t){var e=this,i=e.config,n=t.id,a=t.value,r=i.treemap_label_format,s=e.getRatio("treemap",t),o=(100*s).toFixed(2),l=i.treemap_label_show&&e.meetsLabelThreshold(s,"treemap")?null:"0";return function(t){return t.style("opacity",l),R(r)?r.bind(e.api)(a,s,n):n+"\n"+o+"%"}}},Yi={point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"},Hi={area_above:!1,area_below:!1,area_front:!0,area_linearGradient:!1,area_zerobased:!0},Wi={bar_front:!1,bar_indices_removeNull:!1,bar_label_threshold:0,bar_linearGradient:!1,bar_overlap:!1,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0},Ui={bubble_maxR:35,bubble_zerobased:!1},Zi={candlestick_width:void 0,candlestick_width_ratio:.6,candlestick_width_max:void 0,candlestick_color_down:"red"},qi={line_connectNull:!1,line_step_type:"step",line_step_tooltipMatch:!1,line_zerobased:!1,line_classes:void 0,line_point:!0},Ki={scatter_zerobased:!1},Ji={spline_interpolation_type:"cardinal"},Qi={arc_cornerRadius:0,arc_cornerRadius_ratio:0,arc_needle_show:!1,arc_needle_color:void 0,arc_needle_value:void 0,arc_needle_path:void 0,arc_needle_length:100,arc_needle_top_rx:0,arc_needle_top_ry:0,arc_needle_top_width:0,arc_needle_bottom_rx:1,arc_needle_bottom_ry:1,arc_needle_bottom_width:15,arc_needle_bottom_len:0},tn={donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_rate:.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0},en={gauge_background:"",gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_label_extents:void 0,gauge_label_threshold:0,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_arcLength:100,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50},nn={pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_rate:.98,pie_expand_duration:50,pie_innerRadius:0,pie_outerRadius:void 0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0},an={polar_label_show:!0,polar_label_format:void 0,polar_label_threshold:.05,polar_label_ratio:void 0,polar_level_depth:3,polar_level_max:void 0,polar_level_show:!0,polar_level_text_backgroundColor:"#fff",polar_level_text_format:function(t){return I(this,void 0),t%1==0?t:t.toFixed(2)}.bind(void 0),polar_level_text_show:!0,polar_padAngle:0,polar_padding:0,polar_startingAngle:0},rn={radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function(t){return I(this,void 0),t%1==0?t:t.toFixed(2)}.bind(void 0),radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1},sn={treemap_tile:"binary",treemap_label_format:void 0,treemap_label_threshold:.05,treemap_label_show:!0},on=void 0;function ln(t,e){Z(Je.prototype,Ti.concat(t)),Z(ni.prototype,yi),Qt.setOptions(wi.concat(e||[]))}function cn(t,e){ln([Mi,Di].concat(t||[])),Qt.setOptions([Yi,qi].concat(e||[]))}function hn(t,e){Z(Je.prototype,[Ci].concat(t||[])),Qt.setOptions(e)}var dn=function(){var t=this;return I(this,on),cn(Ri,[Hi]),(dn=function(){return I(this,t),k.AREA}.bind(this))()}.bind(void 0),un=function(){var t=this;return I(this,on),cn(Ri,[Hi]),(un=function(){return I(this,t),k.AREA_LINE_RANGE}.bind(this))()}.bind(void 0),gn=function(){var t=this;return I(this,on),cn(Ri,[Hi,Ji]),(gn=function(){return I(this,t),k.AREA_SPLINE}.bind(this))()}.bind(void 0),fn=function(){var t=this;return I(this,on),cn(Ri,[Hi,Ji]),(fn=function(){return I(this,t),k.AREA_SPLINE_RANGE}.bind(this))()}.bind(void 0),pn=function(){var t=this;return I(this,on),cn(Ri,[Hi]),(pn=function(){return I(this,t),k.AREA_STEP}.bind(this))()}.bind(void 0),xn=function(){var t=this;return I(this,on),cn(),(xn=function(){return I(this,t),k.LINE}.bind(this))()}.bind(void 0),vn=function(){var t=this;return I(this,on),cn(void 0,[Ji]),(vn=function(){return I(this,t),k.SPLINE}.bind(this))()}.bind(void 0),bn=function(){var t=this;return I(this,on),cn(),(bn=function(){return I(this,t),k.STEP}.bind(this))()}.bind(void 0),_n=function(){var t=this;return I(this,on),hn(void 0,[Qi,tn]),(_n=function(){return I(this,t),k.DONUT}.bind(this))()}.bind(void 0),mn=function(){var t=this;return I(this,on),hn([Pi],[Qi,en]),(mn=function(){return I(this,t),k.GAUGE}.bind(this))()}.bind(void 0),yn=function(){var t=this;return I(this,on),hn(void 0,[Qi,nn]),(yn=function(){return I(this,t),k.PIE}.bind(this))()}.bind(void 0),Tn=function(){var t=this;return I(this,on),hn([Xi],[Qi,an]),(Tn=function(){return I(this,t),k.POLAR}.bind(this))()}.bind(void 0),wn=function(){var t=this;return I(this,on),hn([Mi,Bi],[Yi,rn]),(wn=function(){return I(this,t),k.RADAR}.bind(this))()}.bind(void 0),An=function(){var t=this;return I(this,on),ln([Ei],Wi),(An=function(){return I(this,t),k.BAR}.bind(this))()}.bind(void 0),Sn=function(){var t=this;return I(this,on),ln([Mi,Ii],[Ui,Yi]),(Sn=function(){return I(this,t),k.BUBBLE}.bind(this))()}.bind(void 0),kn=function(){var t=this;return I(this,on),ln([Oi],[Zi]),(kn=function(){return I(this,t),k.CANDLESTICK}.bind(this))()}.bind(void 0),Cn=function(){var t=this;return I(this,on),ln([Mi],[Yi,Ki]),(Cn=function(){return I(this,t),k.SCATTER}.bind(this))()}.bind(void 0),Rn=function(){var t=this;return I(this,on),ln([Vi],[sn]),(Rn=function(){return I(this,t),k.TREEMAP}.bind(this))()}.bind(void 0);function En(o,l,c,h){void 0===o&&(o=!1);var d=this,t=d.config,e=d.$el.main,u=t.data_selection_grouped,g=t.data_selection_isselectable.bind(d.api);t.data_selection_enabled&&e.selectAll("."+Pt.shapes).selectAll("."+Pt.shape).each(function(t){var e=(0,D.select)(this),i=t.data||t,n=i.id,a=i.index,r=d.getToggle(this,t).bind(d),s=u||!l||0<=l.indexOf(n),i=!c||0<=c.indexOf(a),n=e.classed(Ot.SELECTED);e.classed(wt.line)||e.classed(ft.area)||(o?s&&i&&g(t)&&!n?r(!0,e.classed(Ot.SELECTED,!0),t,a):$(h)&&h&&n&&r(!1,e.classed(Ot.SELECTED,!1),t,a):s&&i&&g(t)&&n&&r(!1,e.classed(Ot.SELECTED,!1),t,a))})}var Ln={selected:function(t){var e=this,i=this.internal,n=[];return i.$el.main.selectAll("."+(Pt.shapes+i.getTargetSelectorSuffix(t))).selectAll("."+Pt.shape).filter(function(){return(0,D.select)(this).classed(Ot.SELECTED)}).each(function(t){return I(this,e),n.push(t)}.bind(this)),n},select:function(t,e,i){var n=this.internal;En.bind(n)(!0,t,e,i)},unselect:function(t,e){var i=this.internal;En.bind(i)(!1,t,e)}},On={subchart:{show:function(){var t=this.internal,e=t.$el.subchart,i=t.config,n=i.subchart_show;n||(t.unbindZoomEvent(),i.subchart_show=!n,e.main||t.initSubchart(),n=e.main.selectAll("."+ut.target),t.data.targets.length!==n.size()&&(t.updateSizes(),t.updateTargetsForSubchart(t.data.targets),n=null==(t=e.main)?void 0:t.selectAll("."+ut.target)),null!=n&&n.style("opacity",null),null!=(e=e.main)&&e.style("display",null),this.resize())},hide:function(){var t=this.internal,e=t.$el.subchart.main,t=t.config;t.subchart_show&&"none"!==(null==e?void 0:e.style("display"))&&(t.subchart_show=!1,e.style("display","none"),this.resize())},toggle:function(){var t=this.internal.config;this.subchart[t.subchart_show?"hide":"show"]()}}},Pn=Zn(14);se=function(t){var i=this,e=this.internal,n=e.$el,a=e.axis,r=e.config,s=e.org,o=e.scale,l=r.axis_rotated,c=r.axis_x_inverted,h=a.isCategorized(),t=t;return r.zoom_enabled&&t?function(n,a,t,r){var s=this;void 0===r&&(r=!1);var o=t[0],l=t[1];return n.every(function(t,e){var i=this;return I(this,s),(0===e?r?+t<=o:o<=+t:r?l<=+t:+t<=l)&&!n.every(function(t,e){return I(this,i),t===a[e]}.bind(this))}.bind(this))}(t=a.isTimeSeries()?t.map(function(t){return I(this,i),ot.bind(e)(t)}.bind(this)):t,e.getZoomDomain(!0),e.getZoomDomain(),c)&&(h&&(t=t.map(function(t,e){return I(this,i),+t+(0===e?0:1)}.bind(this))),e.api.tooltip.hide(),r.subchart_show?(r=o.zoom||o.x,e.brush.getSelection().call(e.brush.move,t.map(r))):(s=[-(h=h?o.x.orgScale():s.xScale||o.x)(t[0]),0],s=(h=Pn.zoomIdentity.scale(h.range()[1]/(h(t[1])-h(t[0])))).translate.apply(h,l?s.reverse():s),n.eventRect.call(e.zoom.transform,s)),e.setZoomResetButton()):t=o.zoom?o.zoom.domain():o.x.orgDomain(),t};Z(se,{enable:function(t){var e=this.internal,i=e.config;/^(drag|wheel)$/.test(t)&&(i.zoom_type=t),i.zoom_enabled=!!t,e.zoom?!1===t&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){var e=this.internal,i=e.config,e=e.org.xDomain;return 0!==t&&!t||(i.zoom_x_max=nt("max",[e[1],t])),i.zoom_x_max},min:function(t){var e=this.internal,i=e.config,e=e.org.xDomain;return 0!==t&&!t||(i.zoom_x_min=nt("min",[e[0],t])),i.zoom_x_min},range:function(t){var e,i=this.zoom;return O(t)&&(e=t.min,t=t.max,$(e)&&i.min(e),$(t)&&i.max(t)),{min:i.min(),max:i.max()}}});var In={zoom:se,unzoom:function(){var t=this.internal,e=t.config,i=t.$el,n=i.eventRect,i=i.zoomResetBtn;t.scale.zoom&&(e.subchart_show?t.brush.getSelection().call(t.brush.move,null):t.zoom.updateTransformScale(Pn.zoomIdentity),t.updateZoom(!0),null!=i&&i.style("display","none"),(0,Pn.zoomTransform)(n.node())!==Pn.zoomIdentity&&t.zoom.transform(n,Pn.zoomIdentity))}};function Dn(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function zn(e){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?Dn(Object(i),!0).forEach(function(t){u(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Dn(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))});return e}var Mn=zn(zn({},{drag:function(t){var e,i,d,u,g,f,n=this,p=this,a=p.config,r=p.state,s=p.$el.main,o=a.data_selection_grouped,l=a.interaction_enabled&&a.data_selection_isselectable;p.hasArcType()||!a.data_selection_enabled||a.zoom_enabled&&!p.zoom.altDomain||!a.data_selection_multiple||(e=(i=r.dragStart||[0,0])[0],a=i[1],i=t[0],t=t[1],d=Math.min(e,i),u=Math.max(e,i),g=o?r.margin.top:Math.min(a,t),f=o?r.height:Math.max(a,t),s.select("."+mt.dragarea).attr("x",d).attr("y",g).attr("width",u-d).attr("height",f-g),s.selectAll("."+Pt.shapes).selectAll("."+Pt.shape).filter(function(t){return I(this,n),null==l?void 0:l.bind(p.api)(t)}.bind(this)).each(function(t,e){var i,n=(0,D.select)(this),a=n.classed(Ot.SELECTED),r=n.classed(mt.INCLUDED),s=!1;if(n.classed(bt.circle))var o=+n.attr("cx"),l=+n.attr("cy"),c=p.togglePoint,s=d<o&&o<u&&g<l&&l<f;else{if(!n.classed(xt.bar))return;var o=(o=(h=(i=this).getBoundingClientRect()).width,h=h.height,{x:(i=j(i))[0].x,y:Math.min(i[0].y,i[1].y),width:o,height:h}),h=o.x,l=o.y;c=p.togglePath,s=!(u<h||h+o.width<d||f<l||l+o.height<g)}s^r&&(n.classed(mt.INCLUDED,!r),n.classed(Ot.SELECTED,!a),c.call(p,!a,n,t,e))}))},dragstart:function(t){var e=this.config,i=this.state,n=this.$el.main;!this.hasArcType()&&e.data_selection_enabled&&(i.dragStart=t,n.select("."+ut.chart).append("rect").attr("class",mt.dragarea).style("opacity","0.1"),this.setDragStatus(!0))},dragend:function(){var t=this.config,e=this.$el.main,i=this.$T;!this.hasArcType()&&t.data_selection_enabled&&(i(e.select("."+mt.dragarea)).style("opacity","0").remove(),e.selectAll("."+Pt.shape).classed(mt.INCLUDED,!1),this.setDragStatus(!1))}}),{},{selectPoint:function(t,e,i){var n=this,a=this,r=a.config,s=a.$el.main,o=a.$T,l=r.axis_rotated,c=(l?a.circleY:a.circleX).bind(a),h=(l?a.circleX:a.circleY).bind(a),l=a.pointSelectR.bind(a);F(r.data_onselected,a.api,e,t.node()),o(s.select("."+Ot.selectedCircles+a.getTargetSelectorSuffix(e.id)).selectAll("."+Ot.selectedCircle+"-"+i).data([e]).enter().append("circle").attr("class",function(){return I(this,n),a.generateClass(Ot.selectedCircle,i)}.bind(this)).attr("cx",c).attr("cy",h).attr("stroke",a.color).attr("r",function(t){return I(this,n),1.4*a.pointSelectR(t)}.bind(this))).attr("r",l)},unselectPoint:function(t,e,i){var n=this.config,a=this.$el.main,r=this.$T;F(n.data_onunselected,this.api,e,null==t?void 0:t.node()),r(a.select("."+Ot.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+Ot.selectedCircle+"-"+i)).attr("r",0).remove()},togglePoint:function(t,e,i,n){this[(t?"":"un")+"selectPoint"](e,i,n)},selectPath:function(t,e){var i=this.config;F(i.data_onselected,this.api,e,t.node()),i.interaction_brighten&&t.style("filter","brightness(1.25)")},unselectPath:function(t,e){var i=this.config;F(i.data_onunselected,this.api,e,t.node()),i.interaction_brighten&&t.style("filter",null)},togglePath:function(t,e,i,n){this[(t?"":"un")+"selectPath"](e,i,n)},getToggle:function(t,e){var i=this;return"path"===t.nodeName?this.togglePath:this.isStepType(e)?function(){I(this,i)}.bind(this):this.togglePoint},toggleShape:function(t,e,i){var n,a,r,s,o,l=this.config,c=this.$el.main;l.data_selection_enabled&&l.data_selection_isselectable.bind(this.api)(e)&&(a=(n=(0,D.select)(t)).classed(Ot.SELECTED),r=this.getToggle(t,e).bind(this),l.data_selection_multiple||(t="."+((o=l.point_focus_only)?Ot.selectedCircles:Pt.shapes),l.data_selection_grouped&&(t+=this.getTargetSelectorSuffix(e.id)),c.selectAll(t).selectAll(o?"."+Ot.selectedCircle:"."+Pt.shape+"."+Ot.SELECTED).classed(Ot.SELECTED,!1).each(function(t){var e=(0,D.select)(this);r(!1,s=e,t,t.index)})),s&&s.node()===n.node()||(n.classed(Ot.SELECTED,!a),r(!a,n,e,i)))}}),$n={initBrush:function(){var a,t,r=this,s=this,o=s.config,l=s.scale,i=s.$el.subchart,c=o.axis_rotated;s.brush=(c?(0,g.brushY):(0,g.brushX))().handleSize(5);var h=function(){I(this,r);var t=s.$el.svg.select("."+Xt.brush+" .overlay"),e={width:0,height:0};return t.size()&&(e.width=+t.attr("width"),e.height=+t.attr("height")),e[c?"width":"height"]}.bind(this);s.brush.on("start brush end",function(t){var i=this;I(this,r);var n=t.selection,e=t.target,t=t.type;"start"===t&&"touch"===s.state.inputType&&s.hideTooltip(),/(start|brush)/.test(t)&&s.redrawForBrush(),"end"===t&&(a=l.x.orgDomain()),null!=e&&e.handle&&(null===n?s.brush.handle.attr("display","none"):s.brush.handle.attr("display",null).attr("transform",function(t,e){return I(this,i),"translate("+(c?[33,n[e]-(0===e?30:24)]:[n[e],3])+")"}.bind(this)))}.bind(this)),s.brush.updateResize=function(){var e=this;t&&clearTimeout(t),t=setTimeout(function(){I(this,e);var t=this.getSelection();a&&(0,g.brushSelection)(t.node())&&this.move(t,a.map(l.subX.orgScale()))}.bind(this),0)},s.brush.update=function(){var t,e=this;return 0===this.extent()()[1].filter(function(t){return I(this,e),isNaN(t)}.bind(this)).length&&null!=(t=i.main)&&t.select("."+Xt.brush).call(this),this},s.brush.scale=function(t){var i=this,n=o.subchart_size_height||h(),e=s.getExtent();!e&&t.range?e=[[0,0],[t.range()[1],n]]:X(e)&&(e=e.map(function(t,e){return I(this,i),[t,0<e?n:e]}.bind(this))),c&&e[1].reverse(),this.extent(e),this.update()},s.brush.getSelection=function(){return I(this,r),i.main?i.main.select("."+Xt.brush):(0,D.select)([])}.bind(this)},initSubchart:function(){var i,n=this,a=this,t=a.config,e=a.state,r=e.clip,s=e.hasAxis,o=a.$el,l=o.defs,c=o.svg,h=o.subchart,d=o.axis;s&&(e=t.subchart_show?null:"hidden",o=r.id+"-subchart",s=a.getClipPath(o),r.idSubchart=o,a.appendClip(l,o),a.initBrush(),h.main=c.append("g").classed(Xt.subchart,!0).attr("transform",a.getTranslate("context")),(i=h.main).style("visibility",e),i.append("g").attr("clip-path",s).attr("class",Xt.chart),["bar","line","bubble","candlestick","scatter"].forEach(function(t){I(this,n);var e=q(/^(bubble|scatter)$/.test(t)?"circle":t);(a.hasType(t)||a.hasTypeOf(e))&&(t=i.select("."+Xt.chart),e=Xt["chart"+e+"s"],t.select("."+e).empty()&&t.append("g").attr("class",e))}.bind(this)),s=i.append("g").attr("clip-path",s).attr("class",Xt.brush).call(a.brush),t.subchart_showHandle&&a.addBrushHandle(s),d.subX=i.append("g").attr("class",Xt.axisX).attr("transform",a.getTranslate("subX")).attr("clip-path",t.axis_rotated?"":r.pathXAxis).style("visibility",t.subchart_axis_x_show?e:"hidden"))},addBrushHandle:function(t){var e=this,i=this.config,n=i.axis_rotated,i=i.subchart_init_range,a=n?["M 5.2491724,29.749209 a 6,6 0 0 0 -5.50000003,-6.5 H -5.7508276 a 6,6 0 0 0 -6.0000004,6.5 z m -5.00000003,-2 H -6.7508276 m 6.99999997,-2 H -6.7508276Z","M 5.2491724,23.249172 a 6,-6 0 0 1 -5.50000003,6.5 H -5.7508276 a 6,-6 0 0 1 -6.0000004,-6.5 z m -5.00000003,2 H -6.7508276 m 6.99999997,2 H -6.7508276Z"]:["M 0 18 A 6 6 0 0 0 -6.5 23.5 V 29 A 6 6 0 0 0 0 35 Z M -2 23 V 30 M -4 23 V 30Z","M 0 18 A 6 6 0 0 1 6.5 23.5 V 29 A 6 6 0 0 1 0 35 Z M 2 23 V 30 M 4 23 V 30Z"];this.brush.handle=t.selectAll(".handle--custom").data(n?[{type:"n"},{type:"s"}]:[{type:"w"},{type:"e"}]).enter().append("path").attr("class","handle--custom").attr("cursor",(n?"ns":"ew")+"-resize").attr("d",function(t){return I(this,e),a[+/[se]/.test(t.type)]}.bind(this)).attr("display",i?null:"none")},updateTargetsForSubchart:function(s){var o=this,l=this,t=l.config,e=l.state,c=l.$el.subchart.main;t.subchart_show&&(["bar","line","bubble","candlestick","scatter"].filter(function(t){return I(this,o),l.hasType(t)||l.hasTypeOf(q(t))}.bind(this)).forEach(function(t){I(this,o);var e=/^(bubble|scatter)$/.test(t),i=q(e?"circle":t),n=l.getChartClass(i,!0),a=l.getClass(e?"circles":t+"s",!0),r=c.select("."+Xt["chart"+i+"s"]);e?((e=r.selectAll("."+Xt.circles).data(s.filter(l["is"+q(t)+"Type"].bind(l))).attr("class",a)).exit().remove(),e.enter().append("g").attr("class",a)):(a=(i=r.selectAll("."+Xt["chart"+i]).attr("class",n).data(s.filter(l["is"+i+"Type"].bind(l)))).enter().append("g").style("opacity","0").attr("class",n).append("g").attr("class",a),i.exit().remove(),"line"===t&&l.hasTypeOf("Area")&&a.append("g").attr("class",l.getClass("areas",!0)))}.bind(this)),c.selectAll("."+Xt.brush+" rect").attr(t.axis_rotated?"width":"height",t.axis_rotated?e.width2:e.height2))},redrawSubchart:function(t,e,i){var n=this,a=this,r=a.config,s=a.$el.subchart.main,o=a.state,l=!!e;s.style("visibility",r.subchart_show?null:"hidden"),r.subchart_show&&("zoom"===(null==(s=o.event)?void 0:s.type)&&a.brush.update(),t&&(s=r.subchart_init_range,U(a)||a.brush.update(),Object.keys(i.type).forEach(function(t){I(this,n);var e=q(t),t=a["generateDraw"+e](i.indices[t],!0);a["update"+e](l,!0),a["redraw"+e](t,l,!0)}.bind(this)),(a.hasType("bubble")||a.hasType("scatter"))&&(t=i.pos.cx,r=a.updateCircleY(!0),a.updateCircle(!0),a.redrawCircle(t,r,l,void 0,!0)),!o.rendered&&s&&a.brush.move(a.brush.getSelection(),s.map(a.scale.x))))},redrawForBrush:function(){var t=this.config,e=t.subchart_onbrush,i=t.zoom_rescale,t=this.scale;this.redraw({withTransition:!1,withY:i,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),e.bind(this.api)(t.x.orgDomain())},transformContext:function(t,e){var i=this.$el.subchart,n=this.$T,t=null!=e&&e.axisSubX?e.axisSubX:n(i.main.select("."+Xt.axisX),t);i.main.attr("transform",this.getTranslate("context")),t.attr("transform",this.getTranslate("subX"))},getExtent:function(){var e,i=this,t=this.config,n=this.scale,t=t.axis_x_extent;return t&&(R(t)?t=t.bind(this.api)(this.getXDomain(this.data.targets),n.subX):this.axis.isTimeSeries()&&t.every(isNaN)&&(e=ot.bind(this),t=t.map(function(t){return I(this,i),n.subX(e(t))}.bind(this)))),t}},Xn={initZoom:function(){this.scale.zoom=null,this.generateZoom(),this.initZoomBehaviour()},bindZoomEvent:function(t){void 0===t&&(t=!0);var e=this.config;e.zoom_enabled&&t?e.subchart_show||this.bindZoomOnEventRect():!1===t&&(this.api.unzoom(),this.unbindZoomEvent())},generateZoom:function(){var o=this,l=this,c=l.config,h=l.org,d=l.scale,t=(0,Pn.zoom)().duration(0).on("start",l.onZoomStart.bind(l)).on("zoom",l.onZoom.bind(l)).on("end",l.onZoomEnd.bind(l));t.orgScaleExtent=function(){I(this,o);var t=c.zoom_extent||[1,10];return[t[0],Math.max(l.getMaxDataCount()/t[1],t[1])]}.bind(this),t.updateScaleExtent=function(){var t=E(l.scale.x.orgDomain())/E(l.getZoomDomain()),e=this.orgScaleExtent();return this.scaleExtent([e[0]*t,e[1]*t]),this},t.updateTransformScale=function(t,e){I(this,o);var i=c.axis_rotated;null!=(n=h.xScale)&&n.range(d.x.range());var n,a=t[i?"rescaleY":"rescaleX"](h.xScale||d.x),r=l.trimXDomain(a.domain()),s=c.zoom_rescale;a.domain(r,h.xDomain),e&&(n=a(d.x.domain()[0]),e=i?t.x:n,n=i?n:t.y,l.$el.eventRect.property("__zoom",Pn.zoomIdentity.translate(e,n).scale(t.k))),l.state.xTickOffset||(l.state.xTickOffset=l.axis.x.tickOffset()),d.zoom=l.getCustomizedXScale(a),l.axis.x.scale(d.zoom),s&&(h.xScale||(h.xScale=d.x.copy()),d.x.domain(r))}.bind(this),t.getDomain=function(){I(this,o);var t=d[d.zoom?"zoom":"subX"].domain();return l.axis.isCategorized()&&(t[1]-=2),t}.bind(this),l.zoom=t},onZoomStart:function(t){var e=t.sourceEvent;e&&(this.zoom.startEvent=e,this.state.zooming=!0,F(this.config.zoom_onzoomstart,this.api,t))},onZoom:function(t){var e,i,n,a=this,r=this,s=r.config,o=r.scale,l=r.state,c=r.org,h=t.sourceEvent,d=(null==t?void 0:t.transform)===Pn.zoomIdentity;!s.zoom_enabled||0===r.filterTargetsToShow(r.data.targets).length||!o.zoom&&-1<(null==h?void 0:h.type.indexOf("touch"))&&1===(null==h?void 0:h.touches.length)||(t.sourceEvent&&(l.zooming=!0),e="mousemove"===(null==h?void 0:h.type),i=(null==h?void 0:h.wheelDelta)<0,n=t.transform,!e&&i&&o.x.domain().every(function(t,e){return I(this,a),t!==c.xDomain[e]}.bind(this))&&o.x.domain(c.xDomain),r.zoom.updateTransformScale(n,"wheel"===s.zoom_type&&h),t=0<s.transition_duration&&!s.subchart_show&&(l.dragging||d||!t.sourceEvent),r.redraw({withTransition:t,withY:s.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),r.state.cancelClick=e,d||F(s.zoom_onzoom,r.api,r.zoom.getDomain()))},onZoomEnd:function(t){var e=this.config,i=this.state,n=this.zoom.startEvent,a=null==t?void 0:t.sourceEvent,r=(null==t?void 0:t.transform)===Pn.zoomIdentity;-1<(null==n?void 0:n.type.indexOf("touch"))&&(n=n.changedTouches[0],a=null==(t=a)||null==(t=t.changedTouches)?void 0:t[0]),"drag"===e.zoom_type&&a&&n.clientX===a.clientX&&n.clientY===a.clientY||(this.redrawEventRect(),this.updateZoom(),i.zooming=!1,r||!a&&!i.dragging||F(e.zoom_onzoomend,this.api,this.zoom.getDomain()))},updateZoom:function(t){var e=this.scale,i=e.subX,n=e.x,a=e.zoom;a&&(e=a.domain(),a=i.domain(),e=this.config.axis_x_inverted?(e[0]>=a[0]||e[0]+.015>=a[0])&&(a[1]>=e[1]||a[1]>=e[1]+.015):(e[0]<=a[0]||e[0]-.015<=a[0])&&(a[1]<=e[1]||a[1]<=e[1]-.015),(t||e)&&(this.axis.x.scale(i),n.domain(i.orgDomain()),this.scale.zoom=null))},bindZoomOnEventRect:function(){var t=this,e=this.config,i=this.$el.eventRect,e="drag"===e.zoom_type?this.zoomBehaviour:this.zoom;this.$el.svg.on("wheel",function(){I(this,t)}.bind(this)),i.call(e).on("dblclick.zoom",null)},initZoomBehaviour:function(){var n,a=this,r=this,t=r.config,s=r.state,e=t.axis_rotated,o=0,l=0,c={axis:e?"y":"x",attr:e?"height":"width",index:e?1:0};r.zoomBehaviour=(0,Re.drag)().clickDistance(4).on("start",function(t){s.event=t,r.setDragStatus(!0),r.unselectRect(),n=n||r.$el.main.append("rect").attr("clip-path",s.clip.path).attr("class",$t.zoomBrush).attr("width",e?s.width:0).attr("height",e?0:s.height),o=V(t,this)[c.index],l=o,n.attr(c.axis,o).attr(c.attr,0),r.onZoomStart(t)}).on("drag",function(t){l=V(t,this)[c.index],n.attr(c.axis,Math.min(o,l)).attr(c.attr,Math.abs(l-o))}).on("end",function(t){var e=this;I(this,a);var i=r.scale.zoom||r.scale.x;s.event=t,n.attr(c.axis,0).attr(c.attr,0),l<o&&(o=(t=[l,o])[0],l=t[1]),o<0&&(l+=Math.abs(o),o=0),o!==l&&r.api.zoom([o,l].map(function(t){return I(this,e),i.invert(t)}.bind(this))),r.setDragStatus(!1)}.bind(this))},setZoomResetButton:function(){var t=this,e=t.config,i=t.$el,n=e.zoom_resetButton;n&&"drag"===e.zoom_type&&(i.zoomResetBtn?i.zoomResetBtn.style("display",null):i.zoomResetBtn=t.$el.chart.append("div").classed(ut.button,!0).append("span").on("click",function(){R(n.onclick)&&n.onclick.bind(t.api)(this),t.api.unzoom()}).classed($t.buttonZoomReset,!0).text(n.text||"Reset Zoom"))}},Fn=void 0,Bn={data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return I(this,Fn),!0}.bind(void 0),data_selection_multiple:!0,data_selection_draggable:!1,data_onselected:function(){I(this,Fn)}.bind(void 0),data_onunselected:function(){I(this,Fn)}.bind(void 0)},Nn={subchart_show:!1,subchart_showHandle:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_format:void 0,subchart_axis_x_tick_text_show:!0,subchart_init_range:void 0,subchart_onbrush:function(){I(this,void 0)}.bind(void 0)},Gn={zoom_enabled:!1,zoom_type:"wheel",zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0},jn=void 0,Vn=function(){var t=this;return I(this,jn),Z(Je.prototype,Mn),Z(ni.prototype,Ln),Qt.setOptions([Bn]),(Vn=function(){return I(this,t),!0}.bind(this))()}.bind(void 0),Yn=function(){var t=this;return I(this,jn),Z(Je.prototype,$n),Z(ni.prototype,On),Qt.setOptions([Nn]),(Yn=function(){return I(this,t),!0}.bind(this))()}.bind(void 0),Hn=function(){var t=this;return I(this,jn),Z(Je.prototype,Xn),Z(ni.prototype,In),Qt.setOptions([Gn]),(Hn=function(){return I(this,t),!0}.bind(this))()}.bind(void 0),Wn={},Un={version:"3.9.1",generate:function(t){t=et({},Wn,t),t=new ni(t);return t.internal.charts=this.instance,this.instance.push(t),t},defaults:function(t){return Wn=O(t)?t:Wn},instance:[],plugin:{}};Object.keys(e).forEach(function(t){return I(this,void 0),e[t]()}.bind(void 0)),Object.keys(i).forEach(function(t){return I(this,void 0),i[t]()}.bind(void 0))}(),qn}()});