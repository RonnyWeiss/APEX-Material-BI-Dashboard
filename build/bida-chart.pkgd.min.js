!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom"));else if("function"==typeof define&&define.amd)define(["d3-axis","d3-brush","d3-drag","d3-dsv","d3-ease","d3-interpolate","d3-scale","d3-selection","d3-shape","d3-time-format","d3-transition","d3-zoom"],e);else{var i,n="object"==typeof exports?e(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom")):e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3);for(i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(e,a,s,r,o,l,c,h,d,u,g,f){return function(){"use strict";var i=[,,function(t){t.exports=h},function(t){t.exports=a},function(t){t.exports=u},function(t){t.exports=r},function(t){t.exports=c},function(t){t.exports=s},function(t){t.exports=g},function(t){t.exports=d},function(t){t.exports=e},function(t){t.exports=o},function(t){t.exports=l},function(t){t.exports=f}],n={};function On(t){var e=n[t];if(void 0!==e)return e.exports;e=n[t]={exports:{}};return i[t](e,e.exports,On),e.exports}On.d=function(t,e){for(var i in e)On.o(e,i)&&!On.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},On.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},On.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var Pn={};return function(){On.r(Pn),On.d(Pn,{bb:function(){return Ln},default:function(){return Ln}});var e={};On.r(e),On.d(e,{area:function(){return Ui},areaLineRange:function(){return Zi},areaSpline:function(){return qi},areaSplineRange:function(){return Ki},areaStep:function(){return Ji},bar:function(){return ln},bubble:function(){return cn},candlestick:function(){return hn},donut:function(){return nn},gauge:function(){return an},line:function(){return Qi},pie:function(){return sn},polar:function(){return rn},radar:function(){return on},scatter:function(){return dn},spline:function(){return tn},step:function(){return en}});var i={};function D(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}On.r(i),On.d(i,{selection:function(){return Sn},subchart:function(){return Cn},zoom:function(){return Rn}});var o=On(4),I=On(2),n=void 0,c=function(){return D(this,n),"object"==typeof globalThis&&null!==globalThis&&globalThis.Object===Object&&globalThis||"object"==typeof global&&null!==global&&global.Object===Object&&global||"object"==typeof self&&null!==self&&self.Object===Object&&self||Function("return this")()}.bind(void 0)();c.requestIdleCallback=c.requestIdleCallback||function(t){return D(this,n),setTimeout(t,1)}.bind(void 0),c.requestAnimationFrame=c.requestAnimationFrame||function(t){return D(this,n),setTimeout(t,1)}.bind(void 0);var p=null==c?void 0:c.document,S={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",POLAR:"polar",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step"},s={AREA:"initArea",AREA_LINE_RANGE:"initArea",AREA_SPLINE:"initArea",AREA_SPLINE_RANGE:"initArea",AREA_STEP:"initArea",BAR:"initBar",BUBBLE:"initCircle",CANDLESTICK:"initCandlestick",DONUT:"initArc",GAUGE:"initArc",LINE:"initLine",PIE:"initArc",POLAR:"initPolar",RADAR:"initCircle",SCATTER:"initCircle",SPLINE:"initLine",STEP:"initLine"},C={Area:[S.AREA,S.AREA_SPLINE,S.AREA_SPLINE_RANGE,S.AREA_LINE_RANGE,S.AREA_STEP],AreaRange:[S.AREA_SPLINE_RANGE,S.AREA_LINE_RANGE],Arc:[S.PIE,S.DONUT,S.GAUGE,S.POLAR,S.RADAR],Line:[S.LINE,S.SPLINE,S.AREA,S.AREA_SPLINE,S.AREA_SPLINE_RANGE,S.AREA_LINE_RANGE,S.STEP,S.AREA_STEP],Step:[S.STEP,S.AREA_STEP],Spline:[S.SPLINE,S.AREA_SPLINE,S.AREA_SPLINE_RANGE]};function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d=On(3),r=void 0;function l(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function h(e){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?l(Object(i),!0).forEach(function(t){a(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))});return e}var z=function(t){return D(this,r),t||0===t}.bind(void 0),M=function(t){return D(this,r),"function"==typeof t}.bind(void 0),u=function(t){return D(this,r),"string"==typeof t}.bind(void 0),X=function(t){return D(this,r),"number"==typeof t}.bind(void 0),$=function(t){return D(this,r),void 0===t}.bind(void 0),F=function(t){return D(this,r),void 0!==t}.bind(void 0),f=function(t){return D(this,r),"boolean"==typeof t}.bind(void 0),g=function(t){return D(this,r),10*Math.ceil(t/10)}.bind(void 0),x=function(t){return D(this,r),Math.ceil(t)+.5}.bind(void 0),R=function(t){return D(this,r),t[1]-t[0]}.bind(void 0),v=function(t){return D(this,r),"object"==typeof t}.bind(void 0),b=function(t){return D(this,r),$(t)||null===t||u(t)&&0===t.length||v(t)&&!(t instanceof Date)&&0===Object.keys(t).length||X(t)&&isNaN(t)}.bind(void 0),E=function(t){return D(this,r),!b(t)}.bind(void 0),B=function(t){return D(this,r),Array.isArray(t)}.bind(void 0),N=function(t){return D(this,r),t&&!(null!=t&&t.nodeType)&&v(t)&&!B(t)}.bind(void 0);function _(t,e,i){return F(t[e])?t[e]:i}function m(t,e){for(var i=M(t),n=arguments.length,a=Array(2<n?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];return i&&t.call.apply(t,[e].concat(a)),i}function y(t,n){function e(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];--a||n.apply.apply(n,[this].concat(e))}var i=this,a=0;"duration"in t?t.each(function(){return D(this,i),++a}.bind(this)).on("end",e):(++a,t.call(e))}function G(t){return u(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function T(i,t,n,e){var a,s,r=this;void 0===n&&(n=[-1,1]),void 0===e&&(e=!1),i&&u(t)&&(-1===t.indexOf("\n")?i.text(t):(a=[i.text(),t].map(function(t){return D(this,r),t.replace(/[\s\n]/g,"")}.bind(this)))[0]!==a[1]&&(t=t.split("\n"),s=e?t.length-1:1,i.html(""),t.forEach(function(t,e){D(this,r),i.append("tspan").attr("x",0).attr("dy",(0===e?n[0]*s:n[1])+"em").text(t)}.bind(this))))}function w(t){var e=t.getBBox(),i=e.x,n=e.y,t=e.width,e=e.height;return[{x:i,y:n+e},{x:i,y:n},{x:i+t,y:n},{x:i+t,y:n+e}]}function A(t,e){var i=t&&(null==(i=t.touches||t.sourceEvent&&t.sourceEvent.touches)?void 0:i[0]),e=(0,I.pointer)(i||t,e),n=this;return e.map(function(t){return D(this,n),isNaN(t)?0:t}.bind(this))}function k(t){var e,i=t.event,t=t.$el,t=t.subchart.main||t.main;return i&&"brush"===i.type?e=i.selection:t&&(e=t.select(".bb-brush").node())&&(e=(0,d.brushSelection)(e)),e}function L(t){return!("rect"in t)||"rect"in t&&t.hasAttribute("width")&&t.rect.width!==+t.getAttribute("width")?t.rect=t.getBoundingClientRect():t.rect}function O(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=0),void 0===i&&(i=1e4);e=Math.floor(Math.random()*(i-e)+e);return t?e+"":e}function P(t){t=k(t);return!t||t[0]===t[1]}function j(e,t){var i,n=this;for(i in void 0===e&&(e={}),B(t)&&t.forEach(function(t){return D(this,n),j(e,t)}.bind(this)),t)/^\d+$/.test(i)||i in e||(e[i]=t[i]);return e}var Y=function(t){return D(this,r),t.charAt(0).toUpperCase()+t.slice(1)}.bind(void 0);var V=function(t){return D(this,r),[].slice.call(t)}.bind(void 0);function H(t){t=t?t.transform:null,t=t&&t.baseVal;return t&&t.numberOfItems?t.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function W(t){var n=this,e=t[0]instanceof Date,t=(e?t.map(Number):t).filter(function(t,e,i){return D(this,n),i.indexOf(t)===e}.bind(this));return e?t.map(function(t){return D(this,n),new Date(t)}.bind(this)):t}function U(t){var i=this;return t&&t.length?t.reduce(function(t,e){return D(this,i),t.concat(e)}.bind(this)):[]}function Z(i){for(var n=this,t=arguments.length,e=Array(1<t?t-1:0),a=1;a<t;a++)e[a-1]=arguments[a];if(!e.length||1===e.length&&!e[0])return i;var s=e.shift();return N(i)&&N(s)&&Object.keys(s).forEach(function(t){D(this,n);var e=s[t];N(e)?(i[t]||(i[t]={}),i[t]=Z(i[t],e)):i[t]=B(e)?e.concat():e}.bind(this)),Z.apply(void 0,[i].concat(e))}function q(t,e){var i,n=this;return void 0===e&&(e=!0),t[0]instanceof Date?i=(e?function(t,e){return D(this,n),t-e}:function(t,e){return D(this,n),e-t}).bind(this):e&&!t.every(isNaN)?i=function(t,e){return D(this,n),t-e}.bind(this):e||(i=function(t,e){return D(this,n),(e<t?-1:t<e&&1)||t===e&&0}.bind(this)),t.concat().sort(i)}function K(t,e){var i=this,e=e.filter(function(t){return D(this,i),E(t)}.bind(this));return e.length?X(e[0])?e=Math[t].apply(Math,e):e[0]instanceof Date&&(e=q(e,"min"===t)[0]):e=void 0,e}var J=function(t,e,i){void 0===i&&(i=1),D(this,r);for(var n=[],a=0|Math.max(0,Math.ceil((e-t)/i)),s=t;s<a;s++)n.push(t+s*i);return n}.bind(void 0),Q={mouse:function(){var a=this;D(this,r);var s=function(){return D(this,a),{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}}.bind(this);try{return new MouseEvent("t"),function(t,e,i){void 0===i&&(i=s()),D(this,a),t.dispatchEvent(new MouseEvent(e,i))}.bind(this)}catch(t){return function(t,e,i){void 0===i&&(i=s()),D(this,a);var n=p.createEvent("MouseEvent");n.initMouseEvent(e,i.bubbles,i.cancelable,c,0,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}.bind(this)}}.bind(void 0)(),touch:function(t,e,i){D(this,r);i=new Touch(Z({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},i));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[i],targetTouches:[],changedTouches:[i]}))}.bind(void 0)};function tt(t,e){var i,n=t;for(i in e)n=n.replace(new RegExp("{="+i+"}","g"),e[i]);return n}function et(t){var e,i;return t instanceof Date?i=t:u(t)?(e=this.config,i=null!=(e=this.format.dataTime(e.data_xFormat)(t))?e:new Date(t)):X(t)&&!isNaN(t)&&(i=new Date(+t)),i&&!isNaN(+i)||console&&console.error&&console.error("Failed to parse x '"+t+"' to Date object"),i}function it(){return!1===(null==p?void 0:p.hidden)||"visible"===(null==p?void 0:p.visibilityState)}function nt(t){var e=t,t=e.config,i="";if(b(t.data_type||t.data_types)&&!e[s.LINE])i="line";else for(var n in s){var a=S[n];if(e.hasType(a)&&!e[s[n]]){i=a;break}}i&&function(t,e){var i,n="[billboard.js]";null!=(i=c.console)&&i.error&&(console.error("❌ "+n+" "+t,"background:red;color:white;display:block;font-size:15px",e),console.info("%cℹ️","font-size:15px","https://github.com/naver/billboard.js/wiki/CHANGELOG-v2#modularization-by-its-functionality"));throw Error(n+" "+t.replace(/\%c([a-z-]+)/i,"'$1' ")+" "+e)}("Please, make sure if %c"+function(t,e){var i=this;return t.split(e=void 0===e?"-":e).map(function(t,e){return D(this,i),e?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}.bind(this)).join("")}(i),"module has been imported and specified correctly.")}function at(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function t(e){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?at(Object(i),!0).forEach(function(t){a(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):at(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))});return e}var st={button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_"},rt={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title"},ot={area:"bb-area",areas:"bb-areas"},lt={axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label"},ct={bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars"},ht={candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"},dt={chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"},ut={colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"},gt={dragarea:"bb-dragarea",INCLUDED:"_included_"},ft={chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"},pt={legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"},xt={chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"},vt={eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"},bt={focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"},_t={grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"},mt="bb-level",yt="bb-levels",Tt={chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"},wt={region:"bb-region",regions:"bb-regions"},At={selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"},kt={shape:"bb-shape",shapes:"bb-shapes"},St={brush:"bb-brush",subchart:"bb-subchart"},Ct={chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",TextOverlapping:"text-overlapping"},Rt={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"},Et={buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"},Lt=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t({},st),rt),ot),lt),ct),ht),dt),ut),gt),ft),pt),xt),vt),bt),_t),Tt),wt),At),kt),St),Ct),Rt),Et),Ot={element:function(){return{chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null,zoomResetBtn:null}},state:function(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,cssRule:{},current:{width:0,height:0,dataMax:0,maxTickWidths:{x:{size:0,ticks:[],clipPath:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},types:[]},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",orgConfig:{},hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}},Pt=function(){function t(){var e=this;Object.keys(Ot).forEach(function(t){D(this,e),this[t]=new Ot[t]}.bind(this))}return t.prototype.getStore=function(t){return this[t]},t}(),It={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding:!0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,resize_timer:!0,onclick:void 0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:250,plugins:[],render:{},regions:[]},Dt={boost_useCssRule:!1,boost_useWorker:!1},zt=void 0,Mt={data_x:void 0,data_idConverter:function(t){return D(this,zt),t}.bind(void 0),data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_groupsZeroAs:"positive",data_color:void 0,data_colors:{},data_labels:{},data_labels_backgroundColors:void 0,data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:function(){D(this,zt)}.bind(void 0),data_onover:function(){D(this,zt)}.bind(void 0),data_onout:function(){D(this,zt)}.bind(void 0),data_onshown:void 0,data_onhidden:void 0,data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},Xt={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},$t={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}},Ft={legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:"<span style='color:#fff;padding:5px;background-color:{=COLOR}'>{=TITLE}</span>",legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_item_tile_r:5,legend_item_tile_type:"rectangle",legend_usePoint:!1},Bt={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},Nt=void 0,Gt={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){D(this,Nt)}.bind(void 0),tooltip_onhide:function(){D(this,Nt)}.bind(void 0),tooltip_onshown:function(){D(this,Nt)}.bind(void 0),tooltip_onhidden:function(){D(this,Nt)}.bind(void 0),tooltip_order:null};function jt(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function Yt(e){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?jt(Object(i),!0).forEach(function(t){a(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):jt(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))});return e}var Vt=function(){function t(){return function(){for(var n=this,a=function(t){if(D(this,n),N(t)&&t.constructor){var e,i=new t.constructor;for(e in t)i[e]=a(t[e]);return i}return t}.bind(this),t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.map(function(t){return D(this,n),a(t)}.bind(this)).reduce(function(t,e){return D(this,n),h(h({},t),e)}.bind(this))}(It,Dt,Mt,Xt,$t,Ft,Bt,Gt,t.data)}return t.setOptions=function(t){var i=this;this.data=t.reduce(function(t,e){return D(this,i),Yt(Yt({},t),e)}.bind(this),this.data)},t}();Vt.data={};var Ht="$baseLength",Wt="__colorPattern__",Ut="$dataMinMax",Zt="$dataTotalSum",qt="$totalPerIndex",Kt="legendItemTextBox",Jt="$radarPoints",Qt="setOverOut",te="callOverOutForTouch",ee="textRect",ie=function(){function t(){this.cache={}}var e=t.prototype;return e.add=function(t,e,i){return this.cache[t]=(i=void 0===i?!1:i)?this.cloneTarget(e):e,this.cache[t]},e.remove=function(t){var e=this;V(t).forEach(function(t){return D(this,e),delete this.cache[t]}.bind(this))},e.get=function(t,e){if(e=void 0===e?!1:e){for(var i,n=[],a=0;i=t[a];a++)i in this.cache&&n.push(this.cloneTarget(this.cache[i]));return n}e=this.cache[t];return z(e)?e:null},e.reset=function(t){for(var e in this.cache)(t||/^\$/.test(e))&&(this.cache[e]=null)},e.cloneTarget=function(t){var e=this;return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return D(this,e),{x:t.x,value:t.value,id:t.id}}.bind(this))}},t}(),ne=c.setTimeout,ae=c.clearTimeout;function se(){function t(t,e){var i=this;!function t(e,i){var n=this;!1===i()?c.requestAnimationFrame(function(){return D(this,n),t(e,i)}.bind(this)):e()}(function(){D(this,i),null!=e&&e()}.bind(this),function(){for(var t,e=0,i=0;t=n[i];i++)if(!0===t||null!=t.empty&&t.empty())e++;else{if(!1===it()){e=n.length;break}try{t.transition()}catch(t){e++}}return e===n.length})}var n=[];return t.add=function(t){B(t)?n=n.concat(t):n.push(t)},t}var re={};function oe(t,e,n,i){var a,s,r;return void 0===t&&(t=!0),c.Worker&&t?(r=i,(t=(i=(t=e).toString()).replace(/(function|[\s\W\n])/g,"").substring(0,15))in re||(re[t]=new c.Blob([(null!=(r=null==r?void 0:r.map(String).join(";"))?r:"")+"\n\n\t\t\tself.onmessage=function({data}) {\n\t\t\t\tconst result = ("+i+").apply(null, data);\n\t\t\t\tself.postMessage(result);\n\t\t\t};"],{type:"text/javascript"})),a=c.URL.createObjectURL(re[t]),s=new c.Worker(a),function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];s.postMessage(e),s.onmessage=function(t){return c.URL.revokeObjectURL(a),n(t.data)},s.onerror=function(t){console.error(t)}}):function(){var t=e.apply(void 0,arguments);n(t)}}var le=On(5);function ce(t){var a=[];return t.forEach(function(t,i){var n=t[0];t.forEach(function(t,e){if(0<e){if(void 0===a[e-1]&&(a[e-1]={}),void 0===t)throw new Error("Source data is missing a component at ("+i+", "+e+")!");a[e-1][n]=t}})}),a}function he(t){var a=t[0],e=[];return t.forEach(function(t,i){var n;0<i&&(n={},t.forEach(function(t,e){if(void 0===t)throw new Error("Source data is missing a component at ("+i+", "+e+")!");n[a[e]]=t}),e.push(n))}),e}function de(i,t){var n,a=[],t=Array.isArray(i)?(n=t.x?t.value.concat(t.x):t.value,a.push(n),i.forEach(function(e){var t=n.map(function(t){t=function(t,e){if(void 0!==t[e])return t[e];var e=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),i=t;return e.some(function(t){return!(i=i&&t in i?i[t]:void 0)}),i}(e,t);return t=void 0===t?null:t});a.push(t)}),he(a)):(Object.keys(i).forEach(function(t){var e=i[t].concat();e.unshift(t),a.push(e)}),ce(a));return t}function ue(t,e){var i,n=this,a=t.rows(e);return 1===a.length?(i=[{}],a[0].forEach(function(t){D(this,n),i[0][t]=null}.bind(this))):i=t.parse(e),i}function ge(t){return ue({rows:le.csvParseRows,parse:le.csvParse},t)}function fe(t){return ue({rows:le.tsvParseRows,parse:le.tsvParse},t)}function pe(t,e){t=t||(null==e?void 0:e.data_keys);return null!=t&&t.x&&(e.data_x=t.x),t}var xe={convertData:function(i,t){var n=this,e=this.config,a=e.boost_useWorker,s=i;if(i.bindto&&(s={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(t){D(this,n);var e="data_"+t;e in i&&(s[t]=i[e])}.bind(this))),s.url&&t)!function(e,i,n,a,s){void 0===i&&(i="csv");var r=new XMLHttpRequest,o={csv:ge,tsv:fe,json:de};r.open("GET",e),n&&Object.keys(n).forEach(function(t){r.setRequestHeader(t,n[t])}),r.onreadystatechange=function(){if(4===r.readyState){if(200!==r.status)throw new Error(e+": Something went wrong loading!");var t=r.responseText;t&&s.call(this,o[i]("json"===i?JSON.parse(t):t,a))}},r.send()}(s.url,s.mimeType,s.headers,pe(s.keys,e),t);else if(s.json)oe(a,de,t,[ce,he])(s.json,pe(s.keys,e));else if(s.rows)oe(a,he,t)(s.rows);else if(s.columns)oe(a,ce,t)(s.columns);else if(i.bindto)throw Error("url or json or rows or columns is required.")},convertDataToTargets:function(t,a){var g=this,f=this,e=f.axis,p=f.config,x=f.state,i=!1,s=!1,v=!1;e&&(i=e.isCategorized(),s=e.isTimeSeries(),v=e.isCustomX());var r,n=Object.keys(t[0]||{}),e=n.length?n.filter(f.isNotX,f):[],o=n.length?n.filter(f.isX,f):[];e.forEach(function(i){var n=this;D(this,g);var e=this.getXKey(i);v||s?0<=o.indexOf(e)?r=(a&&f.data.xs[i]||[]).concat(t.map(function(t){return D(this,n),t[e]}.bind(this)).filter(z).map(function(t,e){return D(this,n),f.generateTargetX(t,i,e)}.bind(this))):p.data_x?r=this.getOtherTargetXs():E(p.data_xs)&&(r=f.getXValuesOfXKey(e,f.data.targets)):r=t.map(function(t,e){return D(this,n),e}.bind(this)),r&&(this.data.xs[i]=r)}.bind(this)),e.forEach(function(t){if(D(this,g),!this.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}.bind(this));e=e.map(function(a,s){var r=this;D(this,g);var o=p.data_idConverter.bind(f.api)(a),l=f.getXKey(a),c=v&&i,h=c&&t.map(function(t){return D(this,r),t.x}.bind(this)).every(function(t){return D(this,r),-1<p.axis_x_categories.indexOf(t)}.bind(this)),d=t.__append__,u=null===l&&d?f.api.data.values(a).length:0;return{id:o,id_org:a,values:t.map(function(t,e){D(this,r);var i,n=t[l],t=null===(t=t[a])||isNaN(t)||N(t)?B(t)||N(t)?t:null:+t;return!c&&!x.hasRadar||0!==s||$(n)?i=f.generateTargetX(n,a,u+e):(h||0!==s||0!==e||d||(p.axis_x_categories=[]),-1===(i=p.axis_x_categories.indexOf(n))&&(i=p.axis_x_categories.length,p.axis_x_categories.push(n))),{x:i=$(t)||f.data.xs[a].length<=e?void 0:i,value:t,id:o,index:-1}}.bind(this)).filter(function(t){return D(this,r),F(t.x)}.bind(this))}}.bind(this));return e.forEach(function(t){var i=this;D(this,g),p.data_xSort&&(t.values=t.values.sort(function(t,e){return D(this,i),(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)}.bind(this))),t.values.forEach(function(t,e){return D(this,i),t.index=e}.bind(this)),null!=(t=f.data.xs[t.id])&&t.sort(function(t,e){return D(this,i),t-e}.bind(this))}.bind(this)),x.hasNegativeValue=f.hasNegativeValueInTargets(e),x.hasPositiveValue=f.hasPositiveValueInTargets(e),p.data_type&&f.setTargetType(f.mapToIds(e).filter(function(t){return D(this,g),!(t in p.data_types)}.bind(this)),p.data_type),e.forEach(function(t){return D(this,g),f.cache.add(t.id_org,t,!0)}.bind(this)),e}},ve={isX:function(t){var e=this.config,i=e.data_x&&t===e.data_x,t=E(e.data_xs)&&function(e,i){var n=this,a=!1;return Object.keys(e).forEach(function(t){return D(this,n),e[t]===i&&(a=!0)}.bind(this)),a}(e.data_xs,t);return i||t},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){var t=this.config;return!(!t.data_stack_normalize||!t.data_groups.length)},isGrouped:function(e){var i=this,t=this.config.data_groups;return e?t.some(function(t){return D(this,i),0<=t.indexOf(e)&&1<t.length}.bind(this)):0<t.length},getXKey:function(t){var e=this.config;return e.data_x||(E(e.data_xs)?e.data_xs[t]:null)},getXValuesOfXKey:function(e,t){var i,n=this,a=this;return(t&&E(t)?a.mapToIds(t):[]).forEach(function(t){D(this,n),a.getXKey(t)===e&&(i=a.data.xs[t])}.bind(this)),i},getIndexByX:function(t,e){return e?e.indexOf(u(t)?t:+t):(this.filterByX(this.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){return t in this.data.xs&&this.data.xs[t]&&z(this.data.xs[t][e])?this.data.xs[t][e]:e},getOtherTargetXs:function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(e){var i=this,n=this.config;Object.keys(e).forEach(function(t){D(this,i),n.data_xs[t]=e[t]}.bind(this))},isMultipleX:function(){return E(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter")},addName:function(t){var e=this.config;return t&&(e=e.data_names[t.id],t.name=void 0!==e?e:t.id),t},getAllValuesOnIndex:function(e,t){var i=this;void 0===t&&(t=!1);var n=this,a=n.filterTargetsToShow(n.data.targets).map(function(t){return D(this,i),n.addName(n.getValueOnIndex(t.values,e))}.bind(this));return a=t?a.filter(function(t){return D(this,i),t&&"value"in t&&z(t.value)}.bind(this)):a},getValueOnIndex:function(t,e){var i=this,t=t.filter(function(t){return D(this,i),t.index===e}.bind(this));return t.length?t[0]:null},updateTargetX:function(t,a){var e=this,s=this;t.forEach(function(i){var n=this;D(this,e),i.values.forEach(function(t,e){D(this,n),t.x=s.generateTargetX(a[e],i.id,e)}.bind(this)),s.data.xs[i.id]=a}.bind(this))},updateTargetXs:function(t,e){var i=this,n=this;t.forEach(function(t){D(this,i),e[t.id]&&n.updateTargetX([t],e[t.id])}.bind(this))},generateTargetX:function(t,e,i){var n=this.axis,a=(null==n||!n.isCategorized())&&t||i;return null!=n&&n.isTimeSeries()?a=et.bind(this)(t||this.getXValue(e,i)):null==n||!n.isCustomX()||null!=n&&n.isCategorized()||(a=z(t)?+t:this.getXValue(e,i)),a},updateXs:function(t){var e=this;t.length&&(this.axis.xs=t.map(function(t){return D(this,e),t.x}.bind(this)))},getPrevX:function(t){t=this.axis.xs[t-1];return F(t)?t:null},getNextX:function(t){t=this.axis.xs[t+1];return F(t)?t:null},getBaseValue:function(t){var e=this,i=e.state.hasAxis,n=t.value;return n&&i&&(e.isAreaRangeType(t)?n=e.getRangedData(t,"mid"):e.isBubbleZType(t)&&(n=e.getBubbleZData(n,"y"))),n},getMinMaxValue:function(t){var i,n,a=this,s=this.getBaseValue.bind(this);return(t||this.data.targets.map(function(t){return D(this,a),t.values}.bind(this))).forEach(function(t,e){D(this,a);t=t.map(s).filter(X);i=Math.min.apply(Math,[e?i:1/0].concat(t)),n=Math.max.apply(Math,[e?n:-1/0].concat(t))}.bind(this)),{min:i,max:n}},getMinMaxData:function(){var t,i,n,a,s=this,r=this,e=Ut,o=r.cache.get(e);return o||(t=r.data.targets.map(function(t){return D(this,s),t.values}.bind(this)),i=r.getMinMaxValue(t),n=[],a=[],t.forEach(function(t){D(this,s);var e=r.getFilteredDataByValue(t,i.min),t=r.getFilteredDataByValue(t,i.max);e.length&&(n=n.concat(e)),t.length&&(a=a.concat(t))}.bind(this)),r.cache.add(e,o={min:n,max:a})),o},getTotalPerIndex:function(){var e=this,n=this.cache.get(qt);return this.isStackNormalized()&&!n&&(n=[],this.data.targets.forEach(function(t){var i=this;D(this,e),t.values.forEach(function(t,e){D(this,i),n[e]||(n[e]=0),n[e]+=X(t.value)?t.value:0}.bind(this))}.bind(this))),n},getTotalDataSum:function(t){var e,i=this,n=Zt,a=this.cache.get(n);return X(a)||(e=U(this.data.targets.map(function(t){return D(this,i),t.values}.bind(this))).map(function(t){return D(this,i),t.value}.bind(this)).reduce(function(t,e){return D(this,i),t+e}.bind(this)),this.cache.add(n,a=e)),t&&(a-=this.getHiddenTotalDataSum()),a},getHiddenTotalDataSum:function(){var i=this,t=this.api,e=this.state.hiddenTargetIds,n=0;return n=e.length?t.data.values.bind(t)(e).reduce(function(t,e){return D(this,i),t+e}.bind(this)):n},getFilteredDataByValue:function(t,e){var i=this;return t.filter(function(t){return D(this,i),this.getBaseValue(t)===e}.bind(this))},getMaxDataCount:function(){var e=this;return Math.max.apply(Math,this.data.targets.map(function(t){return D(this,e),t.values.length}.bind(this)))},getMaxDataCountTarget:function(){var i=this,t=this.filterTargetsToShow()||[],e=t.length;return 1<e?t=q(W(t=t.map(function(t){return D(this,i),t.values}.bind(this)).reduce(function(t,e){return D(this,i),t.concat(e)}.bind(this)).map(function(t){return D(this,i),t.x}.bind(this)))).map(function(t,e){return D(this,i),{x:t,index:e}}.bind(this)):e&&(t=t[0].values),t},mapToIds:function(t){var e=this;return t.map(function(t){return D(this,e),t.id}.bind(this))},mapToTargetIds:function(t){return t?B(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function(t,e){for(var i,n=this.mapToIds(t),a=0;i=n[a];a++)if(i===e)return!0;return!1},isTargetToShow:function(t){return this.state.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.state.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this,i=this;return(t||i.data.targets).filter(function(t){return D(this,e),i.isTargetToShow(t.id)}.bind(this))},mapTargetsToUniqueXs:function(t){var i=this,e=this.axis,n=[];return null!=t&&t.length&&(n=W(U(t.map(function(t){var e=this;return D(this,i),t.values.map(function(t){return D(this,e),+t.x}.bind(this))}.bind(this)))),n=null!=e&&e.isTimeSeries()?n.map(function(t){return D(this,i),new Date(+t)}.bind(this)):n.map(Number)),q(n)},addTargetIds:function(e,t){var i=this,n=this.state;(B(t)?t:[t]).forEach(function(t){D(this,i),n[e].indexOf(t)<0&&n[e].push(t)}.bind(this))},removeTargetIds:function(e,t){var i=this,n=this.state;(B(t)?t:[t]).forEach(function(t){D(this,i);t=n[e].indexOf(t);0<=t&&n[e].splice(t,1)}.bind(this))},addHiddenTargetIds:function(t){this.addTargetIds("hiddenTargetIds",t)},removeHiddenTargetIds:function(t){this.removeTargetIds("hiddenTargetIds",t)},addHiddenLegendIds:function(t){this.addTargetIds("hiddenLegendIds",t)},removeHiddenLegendIds:function(t){this.removeTargetIds("hiddenLegendIds",t)},getValuesAsIdKeyed:function(t){var e=this,a=this,s=a.state.hasAxis,r={},o=a.isMultipleX(),l=o?a.mapTargetsToUniqueXs(t).map(function(t){return D(this,e),u(t)?t:+t}.bind(this)):null;return t.forEach(function(t){var i=this;D(this,e);var n=[];t.values.filter(function(t){t=t.value;return D(this,i),z(t)||null===t}.bind(this)).forEach(function(t){D(this,i);var e=t.value;null!==e&&a.isCandlestickType(t)&&(e=B(e)?e.slice(0,4):[e.open,e.high,e.low,e.close]),B(e)?n.push.apply(n,e):N(e)&&"high"in e?n.push.apply(n,Object.values(e)):a.isBubbleZType(t)?n.push(s&&a.getBubbleZData(e,"y")):o?n[a.getIndexByX(t.x,l)]=e:n.push(e)}.bind(this)),r[t.id]=n}.bind(this)),r},checkValueInTargets:function(t,e){for(var i=Object.keys(t),n=0;n<i.length;n++)for(var a=t[i[n]].values,s=0;s<a.length;s++)if(e(a[s].value))return!0;return!1},hasMultiTargets:function(){return 1<this.filterTargetsToShow().length},hasNegativeValueInTargets:function(t){var e=this;return this.checkValueInTargets(t,function(t){return D(this,e),t<0}.bind(this))},hasPositiveValueInTargets:function(t){var e=this;return this.checkValueInTargets(t,function(t){return D(this,e),0<t}.bind(this))},orderTargets:function(t){var e=[].concat(t),t=this.getSortCompareFn();return t&&e.sort(t),e},getSortCompareFn:function(i){var n=this;void 0===i&&(i=!1);var a,t,e=this.config.data_order,s=/asc/i.test(e),r=/desc/i.test(e);return s||r?(a=function(t,e){return D(this,n),t+Math.abs(e.value)}.bind(this),t=function(t,e){D(this,n);t="values"in t?t.values.reduce(a,0):t.value,e="values"in e?e.values.reduce(a,0):e.value;return i?s?t-e:e-t:s?e-t:t-e}.bind(this)):M(e)&&(t=e.bind(this.api)),t||null},filterByX:function(t,e){var i=this;return U(t.map(function(t){return D(this,i),t.values}.bind(this))).filter(function(t){return D(this,i),t.x-e==0}.bind(this))},filterRemoveNull:function(t){var e=this;return t.filter(function(t){return D(this,e),z(this.getBaseValue(t))}.bind(this))},filterByXDomain:function(t,i){var n=this;return t.map(function(t){var e=this;return D(this,n),{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return D(this,e),i[0]<=t.x&&t.x<=i[1]}.bind(this))}}.bind(this))},hasDataLabel:function(){var t=this.config.data_labels;return f(t)&&t||v(t)&&E(t)},getDataIndexFromEvent:function(t){var e=this.config,i=this.state,n=i.inputType,a=i.eventReceiver,i=a.coords,a=a.rect,e=e.axis_rotated,t="touch"===n&&t.changedTouches?t.changedTouches[0]:t;return function t(e,i,n,a,s){if(a<n)return-1;var r=Math.floor((n+a)/2),o=e[r],l=o.x,o=o.w,o=void 0===o?0:o;return s&&(l=e[r].y,o=e[r].h),l<=i&&i<=l+o?r:i<l?t(e,i,n,r-1,s):t(e,i,r+1,a,s)}(i,e?t.clientY-a.top:t.clientX-a.left,0,i.length-1,e)},getDataLabelLength:function(t,e,i){var n=this,a=this,s=[0,0];return a.$el.chart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return D(this,n),a.dataLabelFormat(t.id)(t)}.bind(this)).each(function(t,e){s[e]=1.3*this.getBoundingClientRect()[i]}).remove(),s},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){for(var i=t[e].x,n=[],a=e-1;0<=a&&i===t[a].x;a--)n.push(t[a]);for(a=e;a<t.length&&i===t[a].x;a++)n.push(t[a]);return n},findClosestFromTargets:function(t,e){var i=this,n=this,t=t.map(function(t){return D(this,i),n.findClosest(t.values,e)}.bind(this));return n.findClosest(t,e)},findClosest:function(t,i){var n,a=this,s=this,e=s.config,r=s.$el.main,t=t.filter(function(t){return D(this,a),t&&z(t.value)}.bind(this)),o=e.point_sensitivity;return t.filter(function(t){return D(this,a),s.isBarType(t.id)||s.isCandlestickType(t.id)}.bind(this)).forEach(function(t){D(this,a);var e=s.isBarType(t.id)?"."+ct.chartBar+"."+st.target+s.getTargetSelectorSuffix(t.id)+" ."+ct.bar+"-"+t.index:"."+ht.chartCandlestick+"."+st.target+s.getTargetSelectorSuffix(t.id)+" ."+ht.candlestick+"-"+t.index+" path";!n&&s.isWithinBar(r.select(e).node())&&(n=t)}.bind(this)),t.filter(function(t){return D(this,a),!s.isBarType(t.id)&&!s.isCandlestickType(t.id)}.bind(this)).forEach(function(t){D(this,a);var e=s.dist(t,i);e<o&&(o=e,n=t)}.bind(this)),n},dist:function(t,e){var i=this.config.axis_rotated,n=this.scale,a=i?1:0,s=i?0:1,i=this.circleY(t,t.index),t=(n.zoom||n.x)(t.x);return Math.sqrt(Math.pow(t-e[a],2)+Math.pow(i-e[s],2))},convertValuesToStep:function(t){var e=this.axis,i=this.config.line_step_type,n=!!e&&e.isCategorized(),a=B(t)?t.concat():[t];if(!n&&!/step\-(after|before)/.test(i))return t;var s=a[0],r=a[a.length-1],e=s.id,t=s.x;return a.unshift({x:--t,value:s.value,id:e}),n&&"step-after"===i&&a.unshift({x:--t,value:s.value,id:e}),t=r.x,a.push({x:++t,value:r.value,id:e}),n&&"step-before"===i&&a.push({x:++t,value:r.value,id:e}),a},convertValuesToRange:function(t){var n=this,t=B(t)?t.concat():[t],a=[];return t.forEach(function(t){D(this,n);var e=t.x,i=t.id;a.push({x:e,id:i,value:t.value[0]}),a.push({x:e,id:i,value:t.value[2]})}.bind(this)),a},updateDataAttributes:function(t,e){var i=this,n=this.config["data_"+t];return $(e)||(Object.keys(e).forEach(function(t){D(this,i),n[t]=e[t]}.bind(this)),this.redraw({withLegend:!0})),n},getRangedData:function(t,e,i){void 0===e&&(e=""),void 0===i&&(i="areaRange");t=null==t?void 0:t.value;if(B(t)){i={areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]}[i].indexOf(e);return 0<=i&&t?t[i]:void 0}return t&&t[e]},getRatio:function(t,e,i){var a=this;void 0===i&&(i=!1);var n,s,r=this,o=r.config,l=r.state,c=r.api,h=0;return e&&c.data.shown().length&&(h=e.ratio||e.value,"arc"===t?h=r.pie.padAngle()()?e.value/r.getTotalDataSum(!0):(n=o.gauge_fullCircle?r.getArcLength():-2*r.getStartAngle(),n=r.hasType("gauge")?n:2*Math.PI,(e.endAngle-e.startAngle)/n):"index"===t?(n=c.data.values.bind(c),c=this.getTotalPerIndex(),!l.hiddenTargetIds.length||(s=n(l.hiddenTargetIds,!1)).length&&(s=s.reduce(function(t,i){var n=this;return D(this,a),t.map(function(t,e){return D(this,n),(X(t)?t:0)+i[e]}.bind(this))}.bind(this)),c=c.map(function(t,e){return D(this,a),t-s[e]}.bind(this))),e.ratio=X(e.value)&&c&&0<c[e.index]?e.value/c[e.index]:0,h=e.ratio):"radar"===t?h=parseFloat(Math.max(e.value,0)+"")/l.current.dataMax*o.radar_size_ratio:"bar"===t&&(h=0===(r=r.getYScaleById.bind(r)(e.id).domain().reduce(function(t,e){return D(this,a),e-t}.bind(this)))?0:Math.abs(e.value)/r)),i&&h?100*h:h},updateDataIndexByX:function(t){var a=this,s=t.reduce(function(t,e,i){return D(this,a),t[+e.x]=i,t}.bind(this),{});this.data.targets.forEach(function(t){var n=this;D(this,a),t.values.forEach(function(t,e){D(this,n);var i=s[+t.x];t.index=i=void 0===i?e:i}.bind(this))}.bind(this))},isBubbleZType:function(t){return this.isBubbleType(t)&&(N(t.value)&&("z"in t.value||"y"in t.value)||B(t.value)&&2===t.value.length)},isBarRangeType:function(t){var e=this,i=t.value;return this.isBarType(t)&&B(i)&&2===i.length&&i.every(function(t){return D(this,e),X(t)}.bind(this))},getDataById:function(t){var e=this.cache.get(t)||this.api.data(t);return null!=(t=null==e?void 0:e[0])?t:e}},be={load:function(t,i){var n=this,a=this,s=i.append,r=t;r&&(i.filter&&(r=r.filter(i.filter)),(i.type||i.types)&&r.forEach(function(t){D(this,n);var e=(null==(e=i.types)?void 0:e[t.id])||i.type;a.setTargetType(t.id,e)}.bind(this)),a.data.targets.forEach(function(t){D(this,n);for(var e=0;e<r.length;e++)if(t.id===r[e].id){t.values=s?t.values.concat(r[e].values):r[e].values,r.splice(e,1);break}}.bind(this)),a.data.targets=a.data.targets.concat(r)),a.updateTargets(a.data.targets),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.updateTypesElements(),null!=(t=i.done)&&t.call(a.api)},loadFromArgs:function(e){var i=this,n=this;n.config&&(n.cache.reset(),n.convertData(e,function(t){D(this,i);t=e.data||t;e.append&&(t.__append__=!0),t&&n.load(n.convertDataToTargets(t),e)}.bind(this)))},unload:function(t,e){var n=this,a=this,s=a.state,r=a.$el,i=a.$T,e=e,t=t;a.cache.reset(),e=e||function(){D(this,n)}.bind(this),(t=t.filter(function(t){return D(this,n),a.hasTarget(a.data.targets,t)}.bind(this)))&&0!==t.length?(i(r.svg.selectAll(t.map(function(t){return D(this,n),a.selectorTarget(t)}.bind(this)))).style("opacity","0").remove().call(y,e),t.forEach(function(e){var i=this;D(this,n),s.withoutFadeIn[e]=!1,r.legend&&r.legend.selectAll("."+pt.legendItem+a.getTargetSelectorSuffix(e)).remove(),a.data.targets=a.data.targets.filter(function(t){return D(this,i),t.id!==e}.bind(this))}.bind(this)),a.updateTypesElements()):e()}},_e=On(7),me={selectRectForSingle:function(n,a,s){var r=this,o=this,t=o.config,e=o.$el.main,l=t.data_selection_enabled,c=t.data_selection_grouped,h=t.data_selection_isselectable,d=t.tooltip_grouped,t=o.getAllValuesOnIndex(s);d&&(o.showTooltip(t,n),null!=o.showGridFocus&&o.showGridFocus(t),!l||c)||e.selectAll("."+kt.shape+"-"+s).each(function(){(0,I.select)(this).classed(st.EXPANDED,!0),l&&a.style("cursor",c?"pointer":null),d||(null!=o.hideGridFocus&&o.hideGridFocus(),o.hideTooltip(),c||o.setExpand(s))}).filter(function(t){return o.isWithinShape(this,t)}).call(function(t){var e=this;D(this,r);var i=t.data();l&&(c||null!=h&&h.bind(o.api)(i))&&a.style("cursor","pointer"),d||(o.showTooltip(i,n),null!=o.showGridFocus&&o.showGridFocus(i),null!=o.unexpandCircles&&o.unexpandCircles(),t.each(function(t){return D(this,e),o.setExpand(s,t.id)}.bind(this)))}.bind(this))},setExpand:function(t,e,i){var n=this.config;this.$el.circle&&n.point_focus_expand_enabled&&this.expandCircles(t,e,i),this.expandBarTypeShapes(!0,t,e,i)},expandBarTypeShapes:function(e,i,n,a){var s=this;void 0===e&&(e=!0);var r=this;["bar","candlestick"].filter(function(t){return D(this,s),r.$el[t]}.bind(this)).forEach(function(t){D(this,s),a&&r.$el[t].classed(st.EXPANDED,!1),r.getShapeByIndex(t,i,n).classed(st.EXPANDED,e)}.bind(this))},setOverOut:function(t,e){var i,n,a=this,s=this,r=s.config,o=s.state.hasRadar,l=s.$el.main,c=N(e);!c&&-1===e||(i=r[t?"data_onover":"data_onout"].bind(s.api),r.color_onover&&s.setOverColor(t,e,c),c?i(e,l.select("."+rt.arc+s.getTargetSelectorSuffix(e.id)).node()):r.tooltip_grouped?(t&&(r.point_focus_only&&o?s.showCircleFocus(s.getAllValuesOnIndex(e,!0)):s.setExpand(e,null,!0)),s.isMultipleX()||l.selectAll("."+kt.shape+"-"+e).each(function(t){i(t,this)})):(n=s.cache.get(Qt)||[],(e=l.selectAll("."+kt.shape+"-"+e).filter(function(t){return s.isWithinShape(this,t)})).each(function(t){var e=this;0!==n.length&&!n.every(function(t){return D(this,e),t!==this}.bind(this))||(i(t,this),n.push(this))}),0<n.length&&e.empty()&&(i=r.data_onout.bind(s.api),n.forEach(function(t){return D(this,a),i((0,I.select)(t).datum(),t)}.bind(this)),n=[]),s.cache.add(Qt,n)))},callOverOutForTouch:function(t){var e=this.cache.get(te);(N(t)&&e?t.id!==e.id:t!==e)&&((e||X(e))&&this.setOverOut(!1,e),(t||X(t))&&this.setOverOut(!0,t),this.cache.add(te,t))},getDraggableSelection:function(){var e=this,i=this,t=i.config,n=i.state;return t.interaction_enabled&&t.data_selection_draggable&&i.drag?(0,_e.drag)().on("drag",function(t){n.event=t,i.drag(A(t,this))}).on("start",function(t){n.event=t,i.dragstart(A(t,this))}).on("end",function(t){D(this,e),n.event=t,i.dragend()}.bind(this)):function(){D(this,e)}.bind(this)},dispatchEvent:function(t,i,e){var n=this,a=this.config,s=this.state,r=s.eventReceiver,o=s.hasAxis,l=s.hasRadar,c=this.$el,h=c.eventRect,d=c.arcs,u=c.radar,s=this.isMultipleX(),c=(l?u.axes.select("."+lt.axis+"-"+i+" text"):h||d.selectAll("."+st.target+" path").filter(function(t,e){return D(this,n),e===i}.bind(this))).node(),u=c.getBoundingClientRect(),h=u.width,d=u.left,u=u.top;!o||l||s||(h=(r=r.coords[i]).w,d+=r.x,u+=r.y);h=d+(e?e[0]:0)+(s||a.axis_rotated?0:h/2),e=u+(e?e[1]:0);Q[/^(mouse|click)/.test(t)?"mouse":"touch"](c,t,{screenX:h,screenY:e,clientX:h,clientY:e})},setDragStatus:function(t){this.state.dragging=t},unbindZoomEvent:function(){var t=this.$el,e=t.eventRect,t=t.zoomResetBtn;null!=e&&e.on(".zoom wheel.zoom .drag",null),null!=t&&t.on("click",null).style("display","none")},unbindAllEvents:function(){var e=this,t=this.$el,i=t.arcs,n=t.eventRect,a=t.legend,s=t.region,r=t.svg,t=this.brush;[r,n,null==s?void 0:s.list,null==t?void 0:t.getSelection(),null==i?void 0:i.selectAll("path"),null==a?void 0:a.selectAll("g")].forEach(function(t){return D(this,e),null==t?void 0:t.on("wheel click mouseover mousemove mouseout touchstart touchmove touchend touchstart.eventRect touchmove.eventRect touchend.eventRect .brush .drag .zoom wheel.zoom dblclick.zoom",null)}.bind(this)),null!=this.unbindZoomEvent&&this.unbindZoomEvent()}},ye={generateClass:function(t,e){return" "+t+" "+(t+this.getTargetSelectorSuffix(e))},getClass:function(e,i){var n=this,a=/s$/.test(e),s=/^(area|arc|line)s?$/.test(e),r=a?"id":"index";return function(t){D(this,n);t=t.data||t;return((i?this.generateClass(Lt[a?"shapes":"shape"],t[r]):"")+this.generateClass(Lt[e],t[s?"id":r])).trim()}.bind(this)},getChartClass:function(e){var i=this;return function(t){return D(this,i),Lt["chart"+e]+this.classTarget((t.data||t).id)}.bind(this)},generateExtraLineClass:function(){var i=this.config.line_classes||[],n=[];return function(t){var e,t=t.id||(null==(e=t.data)?void 0:e.id)||t;return n.indexOf(t)<0&&n.push(t),i[n.indexOf(t)%i.length]}},classRegion:function(t,e){return this.generateClass(Lt.region,e)+" "+("class"in t?t.class:"")},classTarget:function(t){var e=this.config.data_classes[t],i="";return e&&(i=" "+Lt.target+"-"+e),this.generateClass(Lt.target,t)+i},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" "+(0<=this.state.focusedTargetIds.indexOf(t.id)?Lt.focused:"")},classDefocused:function(t){return" "+(0<=this.state.defocusedTargetIds.indexOf(t.id)?Lt.defocused:"")},getTargetSelectorSuffix:function(t){return(t||0===t?"-"+t:"").replace(/([\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\])/g,"-")},selectorTarget:function(t,e){e=e||"",t=this.getTargetSelectorSuffix(t);return e+"."+(Lt.target+t)+", "+e+"."+(Lt.circles+t)},selectorTargets:function(t,e){var i=this,t=t||[];return t.length?t.map(function(t){return D(this,i),this.selectorTarget(t,e)}.bind(this)):null},selectorLegend:function(t){return"."+(Lt.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return null!=t&&t.length?t.map(function(t){return D(this,e),this.selectorLegend(t)}.bind(this)):null}},Te=On(6),we=function(t,e,i){D(this,void 0);t=(0,I.select)(t.cloneNode(!0));return t.attr("id",i).insert("rect",":first-child").attr("width",t.attr("width")).attr("height",t.attr("height")).style("fill",e),{id:i,node:t.node()}}.bind(void 0);var Ae=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ke={generateColor:function(){var n,a=this,s=this,t=s.$el,r=s.config,o=r.data_colors,l=r.data_color,c=[],h=E(r.color_pattern)?r.color_pattern:(0,Te.scaleOrdinal)(function(t){var e,i=this,n=Wt,a=p.body,s=a[n];return s||(e=t.classed(ut.colorPattern,!0).style("background-image"),t.classed(ut.colorPattern,!1),-1<e.indexOf(";")&&(s=e.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(function(t){return D(this,i),t.trim().replace(/[\"'\s]/g,"")}.bind(this)).filter(Boolean),a[n]=s)),s}(t.chart)||Ae).range(),d=h;return M(r.color_tiles)&&(n=r.color_tiles.bind(s.api)(),h=(t=h.map(function(t,e){D(this,a);var i=t.replace(/[#\(\)\s,]/g,""),i=s.state.datetimeId+"-pattern-"+i+"-"+e;return we(n[e%n.length],t,i)}.bind(this))).map(function(t){return D(this,a),"url(#"+t.id+")"}.bind(this)),s.patterns=t),function(t){var e,i=t.id||(null==(n=t.data)?void 0:n.id)||t,n=s.isTypeOf(i,["line","spline","step"])||!r.data_types[i];return M(o[i])?e=o[i].bind(s.api)(t):o[i]?e=o[i]:(c.indexOf(i)<0&&c.push(i),e=n?d[c.indexOf(i)%d.length]:h[c.indexOf(i)%h.length],o[i]=e),M(l)?l.bind(s.api)(e,t):e}},generateLevelColor:function(){var t=this.config,s=t.color_pattern,t=t.color_threshold,r="value"===t.unit,o=t.max||100,l=t.values&&t.values.length?t.values:[];return E(t)?function(t){for(var e=r?t:100*t/o,i=s[s.length-1],n=0,a=l.length;n<a;n++)if(e<=l[n]){i=s[n];break}return i}:null},generateDataLabelBackgroundColorFilter:function(i){var n=this,a=this,s=a.$el,t=a.config,r=a.state,o=i||t.data_labels_backgroundColors;o&&(t=[],u(o)?t.push(""):N(o)&&(t=Object.keys(o)),t.forEach(function(t){D(this,n);var e=r.datetimeId+"-labels-bg"+a.getTargetSelectorSuffix(t)+(i?a.getTargetSelectorSuffix(i):"");s.defs.append("filter").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("id",e).html('<feFlood flood-color="'+(""===t?o:o[t])+'" /><feComposite in="SourceGraphic"/>')}.bind(this)))},getGradienColortUrl:function(t){return"url(#"+this.state.datetimeId+"-gradient"+this.getTargetSelectorSuffix(t)+")"},updateLinearGradient:function(){var c=this,h=this,d=h.config,t=h.data.targets,u=h.state.datetimeId,g=h.$el.defs;t.forEach(function(i){var n=this;D(this,c);var a,t,e,s,r=u+"-gradient"+h.getTargetSelectorSuffix(i.id),o=h.isAreaType(i)?"area":h.isBarType(i)&&"bar",l=d.axis_rotated;o&&g.select("#"+r).empty()&&(a=h.color(i),o=void 0===(t=(e=d[o+"_linearGradient"]).x)?l?[1,0]:[0,0]:t,t=void 0===(t=e.y)?l?[0,0]:[0,1]:t,e=void 0===(e=e.stops)?[[0,a,1],[1,a,0]]:e,s=g.append("linearGradient").attr("id",r).attr("x1",o[0]).attr("x2",o[1]).attr("y1",t[0]).attr("y2",t[1]),e.forEach(function(t){D(this,n);var e=M(t[1])?t[1].bind(h.api)(i.id):t[1];s.append("stop").attr("offset",t[0]).attr("stop-color",e||a).attr("stop-opacity",t[2])}.bind(this)))}.bind(this))},setOverColor:function(t,e){var i=this,n=this,a=n.config,s=n.$el.main,r=a.color_onover,t=t?r:n.color;N(t)?t=function(t){t=t.id;return D(this,i),t in r?r[t]:n.color(t)}.bind(this):u(t)?t=function(){return D(this,i),r}.bind(this):M(r)&&(t=t.bind(n.api)),s.selectAll(N(e)?"."+rt.arc+n.getTargetSelectorSuffix(e.id):"."+kt.shape+"-"+e).style("fill",t)}},Se={getYDomainMinMax:function(t,e){var o,i=this,n=this,l=n.axis,a=n.config,c="min"===e,a=a.data_groups,h=n.mapToIds(t),d=n.getValuesAsIdKeyed(t);return 0<a.length&&(o=n["has"+(c?"Negative":"Positive")+"ValueInTargets"](t),a.forEach(function(t){var a=this;D(this,i);var s,r,t=t.filter(function(t){return D(this,a),0<=h.indexOf(t)}.bind(this));t.length&&(s=t[0],r=l.getId(s),o&&d[s]&&(d[s]=d[s].map(function(t){return D(this,a),(c?t<0:0<t)?t:0}.bind(this))),t.filter(function(t,e){return D(this,a),0<e}.bind(this)).forEach(function(t){var i,n=this;D(this,a),d[t]&&(i=l.getId(t),d[t].forEach(function(t,e){D(this,n);t=+t;i!==r||o&&(c?0<t:t<0)||(d[s][e]+=t)}.bind(this)))}.bind(this)))}.bind(this))),K(e,Object.keys(d).map(function(t){return D(this,i),K(e,d[t])}.bind(this)))},isHiddenTargetWithYDomain:function(e){var i=this,n=this;return n.state.hiddenTargetIds.some(function(t){return D(this,i),n.axis.getId(t)===e}.bind(this))},getYDomain:function(t,e,i){var n=this,a=this,s=a.axis,r=a.config,o=a.scale,l="axis_"+e;if(a.isStackNormalized())return[0,100];var c=(null==o?void 0:o[e])&&"log"===o[e].type,h=t.filter(function(t){return D(this,n),s.getId(t.id)===e}.bind(this)),d=i?a.filterByXDomain(h,i):h;if(0===d.length)return a.isHiddenTargetWithYDomain(e)?o[e].domain():"y2"===e?o.y.domain():a.getYDomain(t,"y2",i);var u=r[l+"_min"],g=r[l+"_max"],f=r[l+"_center"],p=r[l+"_inverted"],x=a.hasDataLabel()&&r.axis_rotated,v=a.hasDataLabel()&&!r.axis_rotated,b=a.getYDomainMinMax(d,"min"),_=a.getYDomainMinMax(d,"max"),h=[S.BAR,S.BUBBLE,S.SCATTER].concat(C.Line).some(function(t){D(this,n);var e=-1<t.indexOf("area")?"area":t;return a.hasType(t,d,!0)&&r[e+"_zerobased"]}.bind(this));b=z(u)?u:!z(g)||b<g?b:g-10,_=z(g)?g:!z(u)||u<_?_:u+10,(b=isNaN(b)?0:b)===(_=isNaN(_)?b:_)&&(b<0?_=0:b=0);t=0<=b&&0<=_,i=b<=0&&_<=0;(h=z(u)&&t||z(g)&&i?!1:h)&&(t&&(b=0),i&&(_=0));var m,y,T,w=Math.abs(_-b),A={top:.1*w,bottom:.1*w};F(f)&&(_=f+(g=Math.max(Math.abs(b),Math.abs(_))),b=f-g),x?(m=R(o.y.range()),y=a.getDataLabelLength(b,_,"width").map(function(t){return D(this,n),t/m}.bind(this)),["bottom","top"].forEach(function(t,e){D(this,n),A[t]+=w*(y[e]/(1-y[0]-y[1]))}.bind(this))):v&&(T=a.getDataLabelLength(b,_,"height"),["bottom","top"].forEach(function(t,e){D(this,n),A[t]+=a.convertPixelToScale("y",T[e],w)}.bind(this)));var A=a.getResettedPadding(A),k=r[l+"_padding"];E(k)&&["bottom","top"].forEach(function(t){D(this,n),A[t]=s.getPadding(k,t,A[t],w)}.bind(this)),h&&(t&&(A.bottom=b),i&&(A.top=-_));_=c?[b,_].map(function(t){return D(this,n),t<0?0:t}.bind(this)):[b-A.bottom,_+A.top];return p?_.reverse():_},getXDomainMinMax:function(t,i){var e,n=this,a=this.config["axis_x_"+i],s=K(i,t.map(function(t){var e=this;return D(this,n),K(i,t.values.map(function(t){return D(this,e),t.x}.bind(this)))}.bind(this))),t=N(a)?a.value:a,t=F(t)&&null!=(e=this.axis)&&e.isTimeSeries()?et.bind(this)(t):t;return N(a)&&a.fit&&("min"===i&&t<s||"max"===i&&s<t)&&(t=void 0),F(t)?t:s},getXDomainPadding:function(t,e){var i=this,n=i.axis,a=i.config.axis_x_padding,s=n.isTimeSeries()&&e,r=R(t);t=n.isCategorized()||s?0:i.hasType("bar")?1<(l=i.getMaxDataCount())?r/(l-1)/2:.5:i.getResettedPadding(.01*r);var o,l=X(a)?{left:a,right:a}:a,i=l.left,i=void 0===i?t:i,l=l.right,l=void 0===l?t:l;return"px"===a.unit?(o=Math.abs(r+.2*r),i=n.getPadding(a,"left",t,o),l=n.getPadding(a,"right",t,o)):(o=r+i+l,s&&o&&(i=i/o/(e=r/e/o),l=l/o/e)),{left:i,right:l}},getXDomain:function(t){var e=this,i=e.axis,n=e.scale.x,a=[e.getXDomainMinMax(t,"min"),e.getXDomainMinMax(t,"max")],s=a[0],r=void 0===s?0:s,t=a[1],s=void 0===t?0:t;return"log"!==n.type&&(t=i.isCategorized(),n=i.isTimeSeries(),i=e.getXDomainPadding(a),(e=a[0])-(a=a[1])!=0||t||(a=n?(e=new Date(.5*e.getTime()),new Date(1.5*a.getTime())):(e=0===e?1:.5*e,0===a?-1:1.5*a)),!e&&0!==e||(r=n?new Date(e.getTime()-i.left):e-i.left),!a&&0!==a||(s=n?new Date(a.getTime()+i.right):a+i.right)),[r,s]},updateXDomain:function(t,e,i,n,a){var s=this,r=s.config,o=s.org,l=s.scale,c=l.x,l=l.subX,r=r.zoom_enabled;return i&&(c.domain(a||q(s.getXDomain(t))),o.xDomain=c.domain(),r&&s.zoom.updateScaleExtent(),l.domain(c.domain()),null!=(t=s.brush)&&t.scale(l)),e&&(l=a||!s.brush||P(s)?o.xDomain:k(s).map(l.invert),c.domain(l),r&&s.zoom.updateScaleExtent()),n&&c.domain(s.trimXDomain(c.orgDomain())),c.domain()},trimXDomain:function(t){var e=this.getZoomDomain(),i=e[0],e=e[1];return t[0]<=i&&(t[1]=+t[1]+(i-t[0]),t[0]=i),e<=t[1]&&(t[0]=+t[0]-(t[1]-e),t[1]=e),t},getZoomDomain:function(){var t=this.config,e=this.org.xDomain,i=e[0],e=e[1];return[i=F(t.zoom_x_min)?K("min",[i,t.zoom_x_min]):i,e=F(t.zoom_x_max)?K("max",[e,t.zoom_x_max]):e]},convertPixelToScale:function(t,e,i){var n=this.config,a=this.state,n=n.axis_rotated,n="x"===t?n?"height":"width":n?"width":"height";return i*(e/a[n])}};function Ce(t,e,i){var n=t.config,e="axis_"+e+"_tick_format";return(n[e]||t.defaultValueFormat)(i)}var Re={yFormat:function(t){return Ce(this,"y",t)},y2Format:function(t){return Ce(this,"y2",t)},getDefaultValueFormat:function(){var n=this,a=n.defaultArcValueFormat,s=n.yFormat,r=n.y2Format,o=n.hasArcType(null,["gauge","polar","radar"]);return function(t,e,i){return(o?a:n.axis&&"y2"===n.axis.getId(i)?r:s).call(n,t,e)}},defaultValueFormat:function(t){return z(t)?+t:""},defaultArcValueFormat:function(t,e){return(100*e).toFixed(1)+"%"},defaultPolarValueFormat:function(t){return""+t},dataLabelFormat:function(t){var e=this,i=this.config.data_labels,n=function(t){return D(this,e),z(t)?+t:""}.bind(this),a=n;return M(i.format)?a=i.format:v(i.format)&&(a=i.format[t]?!0===i.format[t]?n:i.format[t]:function(){return D(this,e),""}.bind(this)),a.bind(this.api)}};function Ee(t){t=this.getDataById(t);return this.levelColor?this.levelColor(t.values[0].value):this.color(t)}var Le={initLegend:function(){var t=this,e=t.config,i=t.$el;t.legendItemTextBox={},t.state.legendHasRendered=!1,e.legend_show?(e.legend_contents_bindto||(i.legend=t.$el.svg.append("g").classed(pt.legend,!0).attr("transform",t.getTranslate("legend"))),t.updateLegend()):t.state.hiddenLegendIds=t.mapToIds(t.data.targets)},updateLegend:function(t,e,i){var n=this,a=n.config,s=n.state,r=n.scale,o=n.$el,e=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};e.withTransition=_(e,"withTransition",!0),e.withTransitionForTransform=_(e,"withTransitionForTransform",!0),a.legend_contents_bindto&&a.legend_contents_template?n.updateLegendTemplate():n.updateLegendElement(t||n.mapToIds(n.data.targets),e,i),o.legend.selectAll("."+pt.legendItem).classed(pt.legendItemHidden,function(t){t=!n.isTargetToShow(t);return t&&(this.style.opacity=null),t}),n.updateScales(!1,!r.zoom),n.updateSvgSize(),n.transformAll(e.withTransitionForTransform,i),s.legendHasRendered=!0},updateLegendTemplate:function(){var i,n,a=this,s=this,t=s.config,e=s.$el,r=(0,I.select)(t.legend_contents_bindto),o=t.legend_contents_template;r.empty()||(t=s.mapToIds(s.data.targets),i=[],n="",t.forEach(function(t){D(this,a);var e=M(o)?o.bind(s.api)(t,s.color(t),s.api.data(t)[0].values):tt(o,{COLOR:s.color(t),TITLE:t});e&&(i.push(t),n+=e)}.bind(this)),t=r.html(n).selectAll(function(){return this.childNodes}).data(i),s.setLegendItem(t),e.legend=r)},updateSizeForLegend:function(t){var e=this,i=e.config,n=e.state,a=n.isLegendTop,s=n.isLegendLeft,r=n.isLegendRight,o=n.isLegendInset,l=n.current,n=t.width,t=t.height,i={top:a?e.getCurrentPaddingTop()+i.legend_inset_y+5.5:l.height-t-e.getCurrentPaddingBottom()-i.legend_inset_y,left:s?e.getCurrentPaddingLeft()+i.legend_inset_x+.5:l.width-n-e.getCurrentPaddingRight()-i.legend_inset_x+.5};e.state.margin3={top:r?0:o?i.top:l.height-t,right:NaN,bottom:0,left:r?l.width-n:o?i.left:0}},transformLegend:function(t){var e=this.$el.legend;(0,this.$T)(e,t).attr("transform",this.getTranslate("legend"))},updateLegendStep:function(t){this.state.legendStep=t},updateLegendItemWidth:function(t){this.state.legendItemWidth=t},updateLegendItemHeight:function(t){this.state.legendItemHeight=t},updateLegendItemColor:function(t,e){var i=this.$el.legend;i&&i.select("."+pt.legendItem+"-"+t+" line").style("stroke",e)},getLegendWidth:function(){var t=this.state,e=t.current.width,i=t.isLegendRight,n=t.isLegendInset,a=t.legendItemWidth,t=t.legendStep;return this.config.legend_show?i||n?a*(t+1):e:0},getLegendHeight:function(){var t=this.state,e=t.current,i=t.isLegendRight,n=t.legendItemHeight,t=t.legendStep;return this.config.legend_show?i?e.height:Math.max(20,n)*(t+1):0},opacityForUnfocusedLegend:function(t){return t.classed(pt.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var i=this,n=this,a=n.$el.legend,s=n.$T,r=n.mapToTargetIds(t);a&&s(a.selectAll("."+pt.legendItem).filter(function(t){return D(this,i),0<=r.indexOf(t)}.bind(this)).classed(bt.legendItemFocused,e)).style("opacity",function(){return e?null:n.opacityForUnfocusedLegend.call(n,(0,I.select)(this))})},revertLegend:function(){var t=this.$el.legend,e=this.$T;t&&e(t.selectAll("."+pt.legendItem).classed(bt.legendItemFocused,!1)).style("opacity",null)},showLegend:function(t){var e=this,i=e.config,n=e.$el,a=e.$T;i.legend_show||(i.legend_show=!0,n.legend?n.legend.style("visibility",null):e.initLegend(),e.state.legendHasRendered||e.updateLegend()),e.removeHiddenLegendIds(t),a(n.legend.selectAll(e.selectorLegends(t)).style("visibility",null)).style("opacity",null)},hideLegend:function(t){var e=this.config,i=this.$el.legend;e.legend_show&&b(t)&&(e.legend_show=!1,i.style("visibility","hidden")),this.addHiddenLegendIds(t),i.selectAll(this.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(t,e){var i,n=this.cache,a=this.state,s=Kt;return t&&((i=!a.redrawing&&n.get(s)||{})[t]||(i[t]=this.getTextRect(e,pt.legendItem),n.add(s,i)),i=i[t]),i},setLegendItem:function(t){var i=this,n=this,a=n.$el,s=n.api,r=n.config,o=n.state,l="touch"===o.inputType,c=n.hasType("gauge"),e=r.boost_useCssRule;t.attr("class",function(t){var e=(0,I.select)(this);return(!e.empty()&&e.attr("class")||"")+n.generateClass(pt.legendItem,t)}).style("visibility",function(t){return D(this,i),n.isLegendToShow(t)?null:"hidden"}.bind(this)),r.interaction_enabled&&(e&&[["."+pt.legendItem,"cursor:pointer"],["."+pt.legendItem+" text","pointer-events:none"],["."+pt.legendItemPoint+" text","pointer-events:none"],["."+pt.legendItemTile,"pointer-events:none"],["."+pt.legendItemEvent,"fill-opacity:0"]].forEach(function(t){D(this,i);var e=t[0],t=t[1];n.setCssRule(!1,e,[t])(a.legend)}.bind(this)),t.style("cursor",n.getStylePropValue("pointer")).on("click",function(t,e){m(r.legend_item_onclick,s,e)||(t.altKey?(s.hide(),s.show(e)):(s.toggle(e),(0,I.select)(this).classed(bt.legendItemFocused,!1))),l&&n.hideTooltip()}),l||t.on("mouseout",function(t,e){m(r.legend_item_onout,s,e)||((0,I.select)(this).classed(bt.legendItemFocused,!1),c&&n.undoMarkOverlapped(n,"."+ft.gaugeValue),n.api.revert())}).on("mouseover",function(t,e){m(r.legend_item_onover,s,e)||((0,I.select)(this).classed(bt.legendItemFocused,!0),c&&n.markOverlapped(e,n,"."+ft.gaugeValue),!o.transiting&&n.isTargetToShow(e)&&s.focus(e))}))},updateLegendElement:function(t,e){var i,n=this,a=this,s=a.config,r=a.state,o=a.$el.legend,l=a.$T,c="circle"!==s.legend_item_tile_type,h=s.legend_item_tile_r,d={width:c?s.legend_item_tile_width:2*h,height:c?s.legend_item_tile_height:2*h},u={padding:{top:4,right:10},max:{width:0,height:0},posMin:10,step:0,tileWidth:d.width+5,totalLength:0},g={offsets:{},widths:{},heights:{},margins:[0],steps:{}},c=t.filter(function(t){return D(this,n),!F(s.data_names[t])||null!==s.data_names[t]}.bind(this)),h=e.withTransition,f=a.getUpdateLegendPositions(c,u,g);r.isLegendInset&&(u.step=s.legend_inset_step||c.length,a.updateLegendStep(u.step));var p=r.isLegendRight?(i=function(t){return D(this,n),u.max.width*g.steps[t]}.bind(this),function(t){return D(this,n),g.margins[g.steps[t]]+g.offsets[t]}.bind(this)):r.isLegendInset?(i=function(t){return D(this,n),u.max.width*g.steps[t]+10}.bind(this),function(t){return D(this,n),g.margins[g.steps[t]]+g.offsets[t]}.bind(this)):(i=function(t){return D(this,n),g.margins[g.steps[t]]+g.offsets[t]}.bind(this),function(t){return D(this,n),u.max.height*g.steps[t]}.bind(this)),t={xText:function(t,e){return D(this,n),i(t,e)+4+d.width}.bind(this),xRect:function(t,e){return D(this,n),i(t,e)}.bind(this),x1Tile:function(t,e){return D(this,n),i(t,e)-2}.bind(this),x2Tile:function(t,e){return D(this,n),i(t,e)-2+d.width}.bind(this),yText:function(t,e){return D(this,n),p(t,e)+9}.bind(this),yRect:function(t,e){return D(this,n),p(t,e)-5}.bind(this),yTile:function(t,e){return D(this,n),p(t,e)+4}.bind(this)};a.generateLegendItem(c,d,f,t),e=o.select("."+pt.legendBackground+" rect"),r.isLegendInset&&0<u.max.width&&0===e.size()&&(e=o.insert("g","."+pt.legendItem).attr("class",pt.legendBackground).append("rect")),l(o.selectAll("text").data(c).text(function(t){return D(this,n),F(s.data_names[t])?s.data_names[t]:t}.bind(this)).each(function(t,e){f(this,t,e)}),h).attr("x",t.xText).attr("y",t.yText),l(o.selectAll("rect."+pt.legendItemEvent).data(c),h).attr("width",function(t){return D(this,n),g.widths[t]}.bind(this)).attr("height",function(t){return D(this,n),g.heights[t]}.bind(this)).attr("x",t.xRect).attr("y",t.yRect),a.updateLegendItemPos(c,h,t),e&&l(e,h).attr("height",a.getLegendHeight()-12).attr("width",u.max.width*(u.step+1)+10),a.updateLegendItemWidth(u.max.width),a.updateLegendItemHeight(u.max.height),a.updateLegendStep(u.step)},getUpdateLegendPositions:function(c,h,d){var u=this,g=u.config,f=u.state,p=f.isLegendRight||f.isLegendInset;return function(t,e,i){function n(t,e){e||(a=(l-h.totalLength-o)/2)<h.posMin&&(a=(l-o)/2,h.totalLength=0,h.step++),d.steps[t]=h.step,d.margins[h.step]=f.isLegendInset?10:a,d.offsets[t]=h.totalLength,h.totalLength+=o}var a,s=this,r=i===c.length-1,t=u.getLegendItemTextBox(e,t),r=t.width+h.tileWidth+(r&&!p?0:h.padding.right)+g.legend_padding,t=t.height+h.padding.top,o=p?t:r,l=p?u.getLegendHeight():u.getLegendWidth();if(0===i&&(h.totalLength=0,h.step=0,h.max.width=0,h.max.height=0),g.legend_show&&!u.isLegendToShow(e))return d.widths[e]=0,d.heights[e]=0,d.steps[e]=0,void(d.offsets[e]=0);d.widths[e]=r,d.heights[e]=t,(!h.max.width||r>=h.max.width)&&(h.max.width=r),(!h.max.height||t>=h.max.height)&&(h.max.height=t);t=p?h.max.height:h.max.width;g.legend_equally?(Object.keys(d.widths).forEach(function(t){return D(this,s),d.widths[t]=h.max.width}.bind(this)),Object.keys(d.heights).forEach(function(t){return D(this,s),d.heights[t]=h.max.height}.bind(this)),(a=(l-t*c.length)/2)<h.posMin?(h.totalLength=0,h.step=0,c.forEach(function(t){return D(this,s),n(t)}.bind(this))):n(e,!0)):n(e)}},generateLegendItem:function(t,e,i,n){var a,s=this,r=this,o=r.config,l=r.state,c=r.$el.legend,h=o.legend_usePoint,d=o.legend_item_tile_r,u=o.legend_item_tile_type,g="circle"!==u,f=l.isLegendRight||l.isLegendInset,t=c.selectAll("."+pt.legendItem).data(t).enter().append("g");r.setLegendItem(t),t.append("text").text(function(t){return D(this,s),F(o.data_names[t])?o.data_names[t]:t}.bind(this)).each(function(t,e){i(this,t,e)}).style("pointer-events",r.getStylePropValue("none")).attr("x",f?n.xText:-200).attr("y",f?-200:n.yText),t.append("rect").attr("class",pt.legendItemEvent).style("fill-opacity",r.getStylePropValue("0")).attr("x",f?n.xRect:-200).attr("y",f?-200:n.yRect),h?(a=[],t.append(function(t){D(this,s);var e=E(o.point_pattern)?o.point_pattern:[o.point_type];-1===a.indexOf(t)&&a.push(t);e=e[a.indexOf(t)%e.length];return"rectangle"===e&&(e="rect"),p.createElementNS(I.namespaces.svg,"hasValidPointType"in r&&r.hasValidPointType(e)?e:"use")}.bind(this)).attr("class",pt.legendItemPoint).style("fill",Ee.bind(r)).style("pointer-events",r.getStylePropValue("none")).attr("href",function(t,e,i){D(this,s);e=i[e].nodeName.toLowerCase(),t=r.getTargetSelectorSuffix(t);return"use"===e?"#"+l.datetimeId+"-point"+t:void 0}.bind(this))):t.append(g?"line":u).attr("class",pt.legendItemTile).style("stroke",Ee.bind(r)).style("pointer-events",r.getStylePropValue("none")).call(function(t){D(this,s),"circle"===u?t.attr("r",d).style("fill",Ee.bind(r)).attr("cx",f?n.x2Tile:-200).attr("cy",f?-200:n.yTile):g&&t.attr("stroke-width",e.height).attr("x1",f?n.x1Tile:-200).attr("y1",f?-200:n.yTile).attr("x2",f?n.x2Tile:-200).attr("y2",f?-200:n.yTile)}.bind(this))},updateLegendItemPos:function(t,e,d){var n=this,u=this.config,i=this.$el.legend,a=this.$T,s=u.legend_usePoint,r=u.legend_item_tile_type;s?a(i.selectAll("."+pt.legendItemPoint).data(t),e).each(function(){var t,e=this,i=this.nodeName.toLowerCase(),n=u.point_r,a="x",s="y",r=2,o=2.5,l=null,c=null,h=null;"circle"===i?(a="cx",s="cy",l=n+(t=.2*n),r=2*n,o=-t):"rect"===i&&(h=c=2.5*n,o=3),(0,I.select)(this).attr(a,function(t){return D(this,e),d.x1Tile(t)+r}.bind(this)).attr(s,function(t){return D(this,e),d.yTile(t)-o}.bind(this)).attr("r",l).attr("width",c).attr("height",h)}):a(i.selectAll("."+pt.legendItemTile).data(t),e).style("stroke",Ee.bind(this)).call(function(t){var i=this;D(this,n),"circle"===r?t.attr("cx",function(t){D(this,i);var e=d.x2Tile(t);return e-(e-d.x1Tile(t))/2}.bind(this)).attr("cy",d.yTile):"circle"!==r&&t.attr("x1",d.x1Tile).attr("y1",d.yTile).attr("x2",d.x2Tile).attr("y2",d.yTile)}.bind(this))}},Oe=On(8),Pe={redraw:function(t){var e,i=this;void 0===t&&(t={});var n=this,a=n.config,s=n.state,r=n.$el,o=r.main;s.redrawing=!0;var l=n.filterTargetsToShow(n.data.targets),c=t.flow,h=t.initializing,d=n.getWithOption(t),u=d.Transition?a.transition_duration:0,g=d.TransitionForExit?u:0,f=d.TransitionForAxis?u:0,f=null==(e=n.axis)?void 0:e.generateTransitions(f);n.updateSizes(h),d.Legend&&a.legend_show?(t.withTransition=!!u,n.updateLegend(n.mapToIds(n.data.targets),t,f)):d.Dimension&&n.updateDimension(!0),n.hasArcType()&&!s.hasRadar||n.updateCircleY&&(n.circleY=n.updateCircleY()),s.hasAxis?(n.axis.redrawAxis(l,d,f,c,h),a.data_empty_label_text&&o.select("text."+Ct.text+"."+st.empty).attr("x",s.width/2).attr("y",s.height/2).text(a.data_empty_label_text).style("display",l.length?"none":null),n.hasGrid()&&n.updateGrid(),a.regions.length&&n.updateRegion(),["bar","candlestick","line","area"].forEach(function(t){D(this,i);var e=Y(t);(/^(line|area)$/.test(t)&&n.hasTypeOf(e)||n.hasType(t))&&n["update"+e](d.TransitionForExit)}.bind(this)),r.text&&o.selectAll("."+At.selectedCircles).filter(n.isBarType.bind(n)).selectAll("circle").remove(),a.interaction_enabled&&!c&&d.EventRect&&(n.redrawEventRect(),null!=n.bindZoomEvent&&n.bindZoomEvent())):(r.arcs&&n.redrawArc(u,g,d.Transform),r.radar&&n.redrawRadar(),r.polar&&n.redrawPolar()),s.resizing||!n.hasPointType()&&!s.hasRadar||n.updateCircle(),n.hasDataLabel()&&!n.hasArcType(null,["radar"])&&n.updateText(),null!=n.redrawTitle&&n.redrawTitle(),h&&n.updateTypesElements(),n.generateRedrawList(l,c,u,d.Subchart),n.callPluginHook("$redraw",t,u)},generateRedrawList:function(t,e,i,n){var a=this,s=this,r=s.config,o=s.state,l=s.getDrawShape();o.hasAxis&&r.subchart_show&&s.redrawSubchart(n,i,l);var c,h=e&&s.generateFlow({targets:t,flow:e,duration:e.duration,shape:l,xv:s.xv.bind(s)}),t=(i||h)&&it(),d=s.getRedrawList(l,e,h,t),e=function(){D(this,a),h&&h(),o.redrawing=!1,m(r.onrendered,s.api)}.bind(this);e&&(t&&d.length?(c=se(),(0,Oe.transition)().duration(i).each(function(){var i=this;D(this,a),d.reduce(function(t,e){return D(this,i),t.concat(e)}.bind(this),[]).forEach(function(t){return D(this,i),c.add(t)}.bind(this))}.bind(this)).call(c,e)):o.transiting||e()),s.mapToIds(s.data.targets).forEach(function(t){D(this,a),o.withoutFadeIn[t]=!0}.bind(this))},getRedrawList:function(n,t,e,a){var s=this,r=this,i=r.config,o=r.state,l=o.hasAxis,c=o.hasRadar,h=r.$el.grid,d=n.pos,u=d.cx,g=d.cy,o=d.xForText,d=d.yForText,f=[];return l&&((i.grid_x_lines.length||i.grid_y_lines.length)&&f.push(r.redrawGrid(a)),i.regions.length&&f.push(r.redrawRegion(a)),Object.keys(n.type).forEach(function(t){D(this,s);var e=Y(t),i=n.type[t];(/^(area|line)$/.test(t)&&r.hasTypeOf(e)||r.hasType(t))&&f.push(r["redraw"+e](i,a))}.bind(this)),!t&&h.main&&f.push(r.updateGridFocus())),r.hasArcType()&&!c||E(i.data_labels)&&!1!==i.data_labels&&f.push(r.redrawText(o,d,t,a)),!r.hasPointType()&&!c||i.point_focus_only||r.redrawCircle&&f.push(r.redrawCircle(u,g,a,e)),f},updateAndRedraw:function(t){var e,i=this,n=i.config,a=i.state;(t=void 0===t?{}:t).withTransition=_(t,"withTransition",!0),t.withTransform=_(t,"withTransform",!1),t.withLegend=_(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=_(t,"withTransitionForTransform",t.withTransition),t.withLegend&&n.legend_show||(a.hasAxis&&(e=i.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0)),i.updateScales(),i.updateSvgSize(),i.transformAll(t.withTransitionForTransform,e)),i.redraw(t,e)},redrawWithoutRescale:function(){this.redraw({withY:!1,withDimension:!1,withLegend:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})}};function Ie(t,e,i){void 0===e&&(e=0),void 0===i&&(i=1);var n={linear:Te.scaleLinear,log:Te.scaleSymlog,_log:Te.scaleLog,time:Te.scaleTime,utc:Te.scaleUtc}[t=void 0===t?"linear":t]();return n.type=t,/_?log/.test(t)&&n.clamp(!0),n.range([e,i])}var De={getXScale:function(t,e,i,n){e=this.scale.zoom||Ie(this.axis.getAxisType("x"),t,e);return this.getCustomizedScale(i?e.domain(i):e,n)},getYScale:function(t,e,i,n){i=Ie(this.axis.getAxisType(t),e,i);return n&&i.domain(n),i},getYScaleById:function(t,e){void 0===e&&(e=!1);t="y2"===this.axis.getId(t);return this.scale[e?t?"subY2":"subY":t?"y2":"y"]},getCustomizedScale:function(i,t){function e(t,e){return t=i(t)+r(),e?t:Math.ceil(t)}var n,a=this,s=this,r=t||function(){return D(this,a),s.axis.x.tickOffset()}.bind(this);for(n in i)e[n]=i[n];return e.orgDomain=function(){return D(this,a),i.domain()}.bind(this),e.orgScale=function(){return D(this,a),i}.bind(this),s.axis.isCategorized()&&(e.domain=function(t){return arguments.length?(i.domain(t),e):[(t=this.orgDomain())[0],t[1]+1]}),e},updateScales:function(t,e){var i=this;void 0===e&&(e=!0);var n,a,s=this,r=s.axis,o=s.config,l=s.format,c=s.org,h=s.scale,d=s.state,u=d.width,g=d.height,f=d.width2,p=d.height2;d.hasAxis?(n=o.axis_rotated,d=s.getResettedPadding(1),p={x:n?d:0,y:n?0:g,subX:n?1:0,subY:n?0:p},f={x:n?g:u,y:n?u:d,subX:n?g:u,subY:n?f:1},a=e&&(null==(a=h.x)?void 0:a.orgDomain()),c=e&&c.xDomain,h.x=s.getXScale(p.x,f.x,a,function(){return D(this,i),r.x.tickOffset()}.bind(this)),h.subX=s.getXScale(p.x,f.x,c,function(t){return D(this,i),t%1?0:(null!=(t=r.subX)?t:r.x).tickOffset()}.bind(this)),l.xAxisTick=r.getXAxisTickFormat(),l.subXAxisTick=r.getXAxisTickFormat(!0),r.setAxis("x",h.x,o.axis_x_tick_outer,t),o.subchart_show&&r.setAxis("subX",h.subX,o.axis_x_tick_outer,t),h.y=s.getYScale("y",p.y,f.y,h.y?h.y.domain():o.axis_y_default),h.subY=s.getYScale("y",p.subY,f.subY,h.subY?h.subY.domain():o.axis_y_default),r.setAxis("y",h.y,o.axis_y_tick_outer,t),o.axis_y2_show&&(h.y2=s.getYScale("y2",p.y,f.y,h.y2?h.y2.domain():o.axis_y2_default),h.subY2=s.getYScale("y2",p.subY,f.subY,h.subY2?h.subY2.domain():o.axis_y2_default),r.setAxis("y2",h.y2,o.axis_y2_tick_outer,t))):null!=s.updateArc&&s.updateArc()},xx:function(t){var e=this.config,i=this.scale,n=i.x,i=i.zoom,n=e.zoom_enabled&&i?i:n;return t?n(z(t.x)?t.x:t):null},xv:function(t){var e=this,i=e.axis,n=e.config,a=e.scale,s=a.x,a=a.zoom,s=n.zoom_enabled&&a?a:s,t=e.getBaseValue(t);return i.isTimeSeries()?t=et.call(e,t):i.isCategorized()&&u(t)&&(t=n.axis_x_categories.indexOf(t)),Math.ceil(s(t))},yv:function(t){var e=this.scale,i=e.y,e=e.y2,i=t.axis&&"y2"===t.axis?e:i;return Math.ceil(i(this.getBaseValue(t)))},subxx:function(t){return t?this.scale.subX(t.x):null}},ze=On(9),Me={getDrawShape:function(){var t,n=this,a=this,e=a.config.axis_rotated,i=a.state.hasRadar,s={type:{},indices:{},pos:{}};return["bar","candlestick","line","area"].forEach(function(t){D(this,n);var e,i=Y(/^(bubble|scatter)$/.test(t)?"line":t);(a.hasType(t)||a.hasTypeOf(i)||"line"===t&&(a.hasType("bubble")||a.hasType("scatter")))&&(e=a.getShapeIndices(a["is"+i+"Type"]),i=a["generateDraw"+i],s.indices[t]=e,s.type[t]=i?i.bind(a)(e,!1):void 0)}.bind(this)),a.hasArcType()&&!i||(t=i?a.radarCircleX:e?a.circleY:a.circleX,e=i?a.radarCircleY:e?a.circleX:a.circleY,s.pos={xForText:a.generateXYForText(s.indices,!0),yForText:a.generateXYForText(s.indices,!1),cx:(t||function(){}).bind(a),cy:(e||function(){}).bind(a)}),s},getShapeIndices:function(t){var o=this,l=this.config,c=l.data_xs,e=E(c),h={},d=e?{}:0;return e&&W(Object.keys(c).map(function(t){return D(this,o),c[t]}.bind(this))).forEach(function(t){D(this,o),d[t]=0,h[t]={}}.bind(this)),this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){D(this,o);for(var e,i=(t.id in c?c[t.id]:""),n=i?h[i]:h,a=0;e=l.data_groups[a];a++)if(!(e.indexOf(t.id)<0))for(var s,r=0;s=e[r];r++)if(s in n){n[t.id]=n[s];break}$(n[t.id])&&(n[t.id]=i?d[i]++:d++,n.__max__=(i?d[i]:d)-1)}.bind(this)),h},getIndices:function(t,e){var i=this,n=this.config,a=n.data_xs,s=n.bar_indices_removeNull,n=e.id,e=e.index;if(this.isBarType(n)&&s){var r={};return this.getAllValuesOnIndex(e,!0).forEach(function(t,e){D(this,i),r[t.id]=e,r.__max__=e}.bind(this)),r}return E(a)?t[a[n]]:t},getIndicesMax:function(e){var i=this;return E(this.config.data_xs)?Object.keys(e).map(function(t){return D(this,i),e[t].__max__||0}.bind(this)).reduce(function(t,e){return D(this,i),t+e}.bind(this)):e.__max__},getShapeX:function(s,r,t){var o=this,l=this,e=l.config,i=l.scale,c=t?i.subX:i.zoom||i.x,h=e.bar_overlap,d=e.bar_padding,u=function(t,e){return D(this,o),t+e}.bind(this),g=v(s)&&(s._$total.length?s._$total.reduce(u)/2:0);return function(t){D(this,o);var e=l.getIndices(r,t,"getShapeX"),i=t.id in e?e[t.id]:0,n=(e.__max__||0)+1,a=0;return E(t.x)&&(e=c(t.x,!0),a=g?(t=s[t.id]||s._$width,h?e-t/2:e-t+s._$total.slice(0,i+1).reduce(u)-g):e-(X(s)?s:s._$width)*(n/2-(h?1:i))),s&&a&&1<n&&d&&(i&&(a+=d*i),2<n?a-=(n-1)*d/2:2===n&&(a-=d/2)),a}.bind(this)},getShapeY:function(i){var n=this,a=this,s=a.isStackNormalized();return function(t){D(this,n);var e=t.value;return X(t)?e=t:s?e=a.getRatio("index",t,!0):a.isBubbleZType(t)?e=a.getBubbleZData(t.value,"y"):a.isBarRangeType(t)&&(e=e[1]),a.getYScaleById(t.id,i)(e)}.bind(this)},getShapeYMin:function(t){var e=this.axis.getId(t),i=this.scale[e].domain()[0],e=this.config["axis_"+e+"_inverted"];return!this.isGrouped(t)&&!e&&0<i?i:0},getShapeOffsetData:function(t){var s=this,r=this,e=r.orderTargets(r.filterTargetsToShow(r.data.targets.filter(t,r))),o=r.isStackNormalized(),t=e.map(function(t){var n=this;D(this,s);var e=t.values,a={},i=(e=r.isStepType(t)?r.convertValuesToStep(e):e).reduce(function(t,e){D(this,n);var i=+e.x;return t[i]=e,a[i]=o?r.getRatio("index",e,!0):e.value,t}.bind(this),{});return{id:t.id,rowValues:e,rowValueMapByXValue:i,values:a}}.bind(this));return{indexMapByTargetId:e.reduce(function(t,e,i){e=e.id;return D(this,s),t[e]=i,t}.bind(this),{}),shapeOffsetTargets:t}},getShapeOffset:function(t,n,u){var g=this,f=this,t=f.getShapeOffsetData(t),p=t.shapeOffsetTargets,x=t.indexMapByTargetId,v=f.config.data_groupsZeroAs;return function(t,a){var s=this;D(this,g);var r=t.id,o=t.value,e=t.x,i=f.getIndices(n,t),l=f.getYScaleById(r,u);if(f.isBarRangeType(t))return l(o[0]);var c=+e,h=l("zero"===v?0:f.getShapeYMin(r)),d=h;return p.filter(function(t){return D(this,s),t.id!==r&&i[t.id]===i[r]}.bind(this)).forEach(function(t){D(this,s);var e=t.id,i=t.rowValueMapByXValue,n=t.rowValues,t=t.values;x[e]<x[r]&&(t=t[c],0<=(null==(n=!(n=n[a])||+n.x!=c?i[c]:n)?void 0:n.value)*o&&X(t)&&(0!==o||("positive"===v&&0<t||"negative"===v&&t<0))&&(d+=l(t)-h))}.bind(this)),d}.bind(this)},getBarW:function(t,e,n){var a=this,i=this,s=i.config,r=i.org,o=i.scale,l=i.getMaxDataCount(),c="bar"===t&&s.data_groups.length,h=t+"_width",d=o.zoom&&!i.axis.isCategorized()?r.xDomain.map(function(t){return D(this,a),o.zoom(t)}.bind(this)).reduce(function(t,e){return D(this,a),Math.abs(t)+e}.bind(this))/l:e.tickInterval(l),u=function(t){D(this,a);var e=t?s[h][t]:s[h],i=t?e.ratio:s[h+"_ratio"],t=t?e.max:s[h+"_max"],i=X(e)?e:n?d*i/n:0;return t&&t<i?t:i}.bind(this),g=u();return!c&&v(s[h])&&(g={_$width:g,_$total:[]},i.filterTargetsToShow(i.data.targets).forEach(function(t){D(this,a),s[h][t.id]&&(g[t.id]=u(t.id),g._$total.push(g[t.id]||g._$width))}.bind(this))),g},getShapeByIndex:function(t,e,i){var n=this,a=this.$el,s=z(e)?"-"+e:"",r=a[t];return r=r&&!r.empty()?r.filter(function(t){return D(this,n),!i||t.id===i}.bind(this)).filter(function(t){return D(this,n),!z(e)||t.index===e}.bind(this)):(i?a.main.selectAll("."+Lt[t+"s"]+this.getTargetSelectorSuffix(i)):a.main).selectAll("."+Lt[t]+s)},isWithinShape:function(t,e){var i,n=this,a=(0,I.select)(t);return n.isTargetToShow(e.id)?null!=n.hasValidPointType&&n.hasValidPointType(t.nodeName)?i=n.isStepType(e)?n.isWithinStep(t,n.getYScaleById(e.id)(e.value)):n.isWithinCircle(t,n.isBubbleType(e)?1.5*n.pointSelectR(e):0):"path"===t.nodeName&&(i=!a.classed(Lt.bar)||n.isWithinBar(t)):i=!1,i},getInterpolate:function(t){t=this.getInterpolateType(t);return{basis:ze.curveBasis,"basis-closed":ze.curveBasisClosed,"basis-open":ze.curveBasisOpen,bundle:ze.curveBundle,cardinal:ze.curveCardinal,"cardinal-closed":ze.curveCardinalClosed,"cardinal-open":ze.curveCardinalOpen,"catmull-rom":ze.curveCatmullRom,"catmull-rom-closed":ze.curveCatmullRomClosed,"catmull-rom-open":ze.curveCatmullRomOpen,"monotone-x":ze.curveMonotoneX,"monotone-y":ze.curveMonotoneY,natural:ze.curveNatural,"linear-closed":ze.curveLinearClosed,linear:ze.curveLinear,step:ze.curveStep,"step-after":ze.curveStepAfter,"step-before":ze.curveStepBefore}[t]},getInterpolateType:function(t){var e=this.config,i=e.spline_interpolation_type,i=this.isInterpolationType(i)?i:"cardinal";return this.isSplineType(t)?i:this.isStepType(t)?e.line_step_type:"linear"},isWithinBar:function(t){var e=A(this.state.event,t),i=w(t),n=i[0],a=i[1],s=Math.min(n.x,a.x),i=Math.min(n.y,a.y),n=this.config.bar_sensitivity,a=t.getBBox(),t=a.width,a=a.height;return s-n<e[0]&&e[0]<s+t+n&&i-n<e[1]&&e[1]<i+a+n}},Xe={setContainerSize:function(){var t=this.state;t.current.width=this.getCurrentWidth(),t.current.height=this.getCurrentHeight()},getCurrentWidth:function(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function(){var t=this.config,e=t.size_height||this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getCurrentPaddingTop:function(){var t=this,e=t.config,i=t.state.hasAxis,n=t.$el,a=i?e.axis_y2_axes.length:0,i=z(e.padding_top)?e.padding_top:0;return n.title&&n.title.node()&&(i+=t.getTitlePadding()),a&&e.axis_rotated&&(i+=t.getHorizontalAxisHeight("y2")*a),i},getCurrentPaddingBottom:function(){var t=this.config,e=this.state.hasAxis,i=t.axis_rotated?"y":"x",e=e?t["axis_"+i+"_axes"].length:0;return(z(t.padding_bottom)?t.padding_bottom:0)+(e?this.getHorizontalAxisHeight(i)*e:0)},getCurrentPaddingLeft:function(t){var e=this.config,i=this.state.hasAxis,n=e.axis_rotated,a=n?"x":"y",s=i?e["axis_"+a+"_axes"].length:0,t=i?this.getAxisWidthByAxisId(a,t):0,e=z(e.padding_left)?e.padding_left:i&&n?e.axis_x_show?Math.max(g(t),40):1:!i||e.axis_y_show&&!e.axis_y_inner?g(t):this.axis.getAxisLabelPosition("y").isOuter?30:1;return e+t*s},getCurrentPaddingRight:function(t){void 0===t&&(t=!1);var e=this,i=e.config,n=e.state.hasAxis,a=e.state.isLegendRight?e.getLegendWidth()+20:0,s=n?i.axis_y2_axes.length:0,n=n?e.getAxisWidthByAxisId("y2"):0,t=t?e.axis.getXAxisTickTextY2Overflow(10):0,t=z(i.padding_right)?i.padding_right+1:e.axis&&i.axis_rotated?10+a:!e.axis||i.axis_y2_show&&!i.axis_y2_inner?Math.max(g(n)+a,t):Math.max(2+a+(e.axis.getAxisLabelPosition("y2").isOuter?20:0),t);return t+n*s},getParentRectValue:function(t){for(var e="offset"+Y(t),i=this.$el.chart.node(),n=0;n<30&&i&&"BODY"!==i.tagName;){try{n=i.getBoundingClientRect()[t]}catch(t){e in i&&(n=i[e])}i=i.parentNode}var a=p.body[e];return n=a<n?a:n},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.$el.chart.style("height"),e=0;return e=t?/px$/.test(t)?parseInt(t,10):this.getParentRectValue("height"):e},getSvgLeft:function(t){var e=this.config,i=this.$el,n=e.axis_rotated||!e.axis_rotated&&!e.axis_y_inner,e=e.axis_rotated?lt.axisX:lt.axisY,e=i.main.select("."+e).node(),n=e&&n?e.getBoundingClientRect():{right:0},e=i.chart.node().getBoundingClientRect(),i=this.hasArcType(),t=n.right-e.left-(i?0:this.getCurrentPaddingLeft(t));return 0<t?t:0},updateDimension:function(t){var e,i=this,n=i.config,a=i.state.hasAxis,s=i.$el;a&&!t&&i.axis.x&&n.axis_rotated&&null!=(e=i.axis.subX)&&e.create(s.axis.subX),i.updateScales(t),i.updateSvgSize(),i.transformAll(!1)},updateSvgSize:function(){var t=this,e=t.state,i=e.clip,n=e.current,a=e.hasAxis,s=e.width,r=e.height,e=t.$el.svg;e.attr("width",n.width).attr("height",n.height),a&&(n={width:0,height:0},(a=e.select("."+St.brush+" .overlay")).size()&&(n.width=+a.attr("width"),n.height=+a.attr("height")),e.selectAll(["#"+i.id,"#"+i.idGrid]).select("rect").attr("width",s).attr("height",r),e.select("#"+i.idXAxis).select("rect").call(t.setXAxisClipPath.bind(t)),e.select("#"+i.idYAxis).select("rect").call(t.setYAxisClipPath.bind(t)),i.idSubchart&&e.select("#"+i.idSubchart).select("rect").attr("width",s).attr("height",n.height))},getResettedPadding:function(e){var i=this,n=this.config,t=X(e),a=t?0:{};return!1===n.padding?t||Object.keys(e).forEach(function(t){D(this,i),a[t]=b(n.data_labels)||!1===n.data_labels||"top"!==t?0:e[t]}.bind(this)):a=e,a},updateSizes:function(t){var e=this,i=e.config,n=e.state,a=e.$el.legend,s=i.axis_rotated,r=e.hasArcType();t||e.setContainerSize();var o={width:a?e.getLegendWidth():0,height:a?e.getLegendHeight():0};!r&&i.axis_x_show&&i.axis_x_tick_autorotate&&e.updateXAxisTickClip();var l=n.isLegendRight||n.isLegendInset?0:o.height,c=s||r?0:e.getHorizontalAxisHeight("x"),t=i.subchart_axis_x_show&&i.subchart_axis_x_tick_text_show?c:30,a=i.subchart_show&&!r?i.subchart_size_height+t:0;n.margin=!r&&s?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:r?0:e.getCurrentPaddingRight(!0),bottom:e.getHorizontalAxisHeight("y")+l+e.getCurrentPaddingBottom(),left:a+(r?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:r?0:e.getCurrentPaddingRight(!0),bottom:c+a+l+e.getCurrentPaddingBottom(),left:r?0:e.getCurrentPaddingLeft()},n.margin=e.getResettedPadding(n.margin),n.margin2=s?{top:n.margin.top,right:NaN,bottom:20+l,left:e.state.rotatedPadding.left}:{top:n.current.height-a-l,right:NaN,bottom:t+l,left:n.margin.left},n.margin3={top:0,right:NaN,bottom:0,left:0},null!=e.updateSizeForLegend&&e.updateSizeForLegend(o),n.width=n.current.width-n.margin.left-n.margin.right,n.height=n.current.height-n.margin.top-n.margin.bottom,n.width<0&&(n.width=0),n.height<0&&(n.height=0),n.width2=s?n.margin.left-n.rotatedPadding.left-n.rotatedPadding.right:n.width,n.height2=s?n.height:n.current.height-n.margin2.top-n.margin2.bottom,n.width2<0&&(n.width2=0),n.height2<0&&(n.height2=0);l=e.hasType("gauge"),s=i.legend_show&&n.isLegendRight;n.arcWidth=n.width-(s?o.width+10:0),n.arcHeight=n.height-(s&&!l?0:10),l&&!i.gauge_fullCircle&&(n.arcHeight+=n.height-e.getPaddingBottomForGauge()),null!=e.updateRadius&&e.updateRadius(),n.isLegendRight&&r&&(n.margin3.left=n.arcWidth/2+1.1*n.radiusExpanded)}},$e={setCssRule:function(a,s,r,o){var e=this,l=this,t=l.config,i=l.state,c=i.cssRule,h=i.style;return(t.boost_useCssRule?function(t){var n=this;D(this,e),t.each(function(t){var e=this;D(this,n);var i=o&&(null==o?void 0:o.call(l,t)),t=(a?"."+(kt.shapes+l.getTargetSelectorSuffix(t.id)):"")+s;s in c&&h.sheet.deleteRule(c[t]),l.state.cssRule[t]=function(t,e,i){var n=this,a=t.rootSelctor,t=t.sheet,i=a+" "+function(t){return D(this,n),t.replace(/\s?(bb-)/g,".$1").replace(/\.+/g,".")}.bind(this)(e)+" {"+i.join(";")+"}";return t[t.insertRule?"insertRule":"addRule"](i,t.cssRules.length)}(h,t,r.filter(Boolean).map(function(t){return D(this,e),u(i)&&-1===t.indexOf(":")?t+": "+i:t||""}.bind(this)))}.bind(this))}:function(){D(this,e)}).bind(this)},getStylePropValue:function(t){return this.config.boost_useCssRule?null:M(t)?t.bind(this):t}};var Fe={opacityForText:function(t){return(!this.isBarType(t)||this.meetsLabelThreshold(Math.abs(this.getRatio("bar",t)),"bar"))&&this.hasDataLabel?null:"0"},initText:function(){this.$el.main.select("."+st.chart).append("g").attr("class",Ct.chartTexts)},updateTargetsForText:function(t){var e=this,i=this,n=i.getChartClass("Text"),a=i.getClass("texts","id"),s=i.classFocus.bind(i);i.$el.main.select("."+Ct.chartTexts).selectAll("."+Ct.chartText).data(t).attr("class",function(t){return D(this,e),n(t)+s(t)}.bind(this)).enter().append("g").style("opacity","0").attr("class",n).call(i.setCssRule(!0," ."+Ct.text,["fill","pointer-events:none"],i.updateTextColor)).append("g").attr("class",a)},updateText:function(){var i=this,r=this,t=r.$el,e=r.$T,n=r.config,a=r.getClass("text","index"),s=t.main.selectAll("."+Ct.texts).selectAll("."+Ct.text).data(r.labelishData.bind(r));e(s.exit()).style("fill-opacity","0").remove(),t.text=s.enter().append("text").merge(s).attr("class",a).attr("text-anchor",function(t){D(this,i);var e=t.value<0;return r.isCandlestickType(t)&&(e=!(null!=(t=r.getCandlestickData(t))&&t._isUp)),n.axis_rotated?e?"end":"start":"middle"}.bind(this)).style("fill",r.getStylePropValue(r.updateTextColor)).style("fill-opacity","0").each(function(t,e,i){var n,a=(0,I.select)(this),s=t.value;r.isBubbleZType(t)?s=r.getBubbleZData(s,"z"):!r.isCandlestickType(t)||(n=r.getCandlestickData(t))&&(s=n.close),s=r.dataLabelFormat(t.id)(s,t.id,e,i),X(s)?this.textContent=s:T(a,s)})},updateTextColor:function(t){var e,i=this,n=i.config,a=n.data_labels_colors,s=i.isArcType(t)&&!i.isRadarType(t)?null:i.color(t);return u(a)?e=a:N(a)?e=a[(t.data||t).id]:M(a)&&(e=a.bind(i.api)(s,t)),i.isCandlestickType(t)&&!M(a)&&(null!=(i=i.getCandlestickData(t))&&i._isUp||(n=n.candlestick_color_down,e=N(n)?n[t.id]:n)),e||s},updateTextBacgroundColor:function(t){var e=this.$el,i=this.config.data_labels_backgroundColors,n="";return(u(i)||N(i))&&(t=u(i)?"":this.getTargetSelectorSuffix(("id"in t?t:t.data).id),(t=e.defs.select(["filter[id*='labels-bg","']"].join(t))).size()&&(n="url(#"+t.attr("id")+")")),n||null},redrawText:function(a,s,t,r){var e,i,o=this,l=o.$T,c=o.axis,h=o.config,d=O(!0),u=h.axis_rotated,g=h.data_labels.rotate,f=(i="middle",0<(e=g)&&e<=170?i="end":190<e&&e<=360&&(i="start"),i),p=g?"rotate("+g+")":"";return o.$el.text.style("fill",o.getStylePropValue(o.updateTextColor)).attr("filter",o.updateTextBacgroundColor.bind(o)).style("fill-opacity",t?0:o.opacityForText.bind(o)).each(function(t,e){var i=l(this,!(!r||!this.getAttribute("x")),d),n=h["axis_"+(null==c?void 0:c.getId(t.id))+"_inverted"],e={x:a.bind(this)(t,e),y:s.bind(this)(t,e)};g&&(e=function(t,e,i,n,a){var s=t.value,r=this.isCandlestickType(t),t=X(s)&&s<0||r&&!(null!=(o=this.getCandlestickData(t))&&o._isUp),o=e.x,e=e.y;return n?"start"===i?(o+=t?0:8,e+=4):"middle"===i?(o+=8,e-=8):"end"===i&&(t&&(o-=8),e+=4):("start"===i?(o+=4,t&&(e+=16)):"middle"===i?e-=8:"end"===i&&(o-=4,t&&(e+=16)),a&&(e+=t?-17:r?13:7)),{x:o,y:e}}.bind(o)(t,e,f,u,n),i.attr("text-anchor",f)),this.childElementCount||g?i.attr("transform","translate("+e.x+" "+e.y+") "+p):i.attr("x",e.x).attr("y",e.y)}),!0},getTextRect:function(t,e){var i=this,n=t.node?t.node():t,a=(n=!/text/i.test(n.tagName)?n.querySelector("text"):n).textContent,t=ee+"-"+a.replace(/\W/g,"_"),s=this.cache.get(t);return s||(this.$el.svg.append("text").style("visibility","hidden").style("font",(0,I.select)(n).style("font")).classed(e,!0).text(a).call(function(t){D(this,i),s=L(t.node())}.bind(this)).remove(),this.cache.add(t,s)),s},generateXYForText:function(e,t){var i=this,n=this,a=Object.keys(e),s={},r=t?n.getXForText:n.getYForText;return n.hasType("radar")&&a.push("radar"),a.forEach(function(t){D(this,i),s[t]=n["generateGet"+Y(t)+"Points"](e[t],!1)}.bind(this)),function(t,e){var i=(n.isAreaType(t)?"area":n.isBarType(t)&&"bar")||n.isCandlestickType(t)&&"candlestick"||n.isRadarType(t)&&"radar"||"line";return r.call(n,s[i](t,e),t,this)}},getCenteredTextPos:function(t,e,i){var n=this.config,a=n.axis_rotated;if(n.data_labels.centered&&this.isBarType(t)){i=L(i),t=0<=t.value;if(a){a=(t?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+i.width/2;return t?-a-3:2+a}i=(t?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+i.height/2;return t?i:-i-2}return 0},getTextPos:function(t,e){var i=this.config.data_labels_position;return(t in i?i[t]:i)[e]||0},getXForText:function(t,e,i){var n,a=this,s=a.config,r=a.state,o=s.axis_rotated,l=t[0][0];return a.isCandlestickType(e)?o?l=null!=(s=a.getCandlestickData(e))&&s._isUp?t[2][2]+4:t[2][1]-4:l+=(t[1][0]-l)/2:l=o?(n=a.isBarType(e)?4:6,t[2][1]+n*(e.value<0?-1:1)):a.hasType("bar")?(t[2][0]+t[0][0])/2:l,null===e.value&&(l>r.width?(n=L(i).width,l=r.width-n):l<0&&(l=4)),o&&(l+=a.getCenteredTextPos(e,t,i)),l+a.getTextPos(e.id,"x")},getYForText:function(t,e,i){var n,a=this,s=a.axis,r=a.config,o=a.state,l=r.axis_rotated,c=r["axis_"+(null==s?void 0:s.getId(e.id))+"_inverted"],h=a.isBarType(e),d=r.point_r,u=L(i),g=e.value,s=3;return a.isCandlestickType(e)?(g=a.getCandlestickData(e),l?(n=t[0][0],n+=(t[1][0]-n)/2+s):(n=g&&g._isUp?t[2][2]-s:t[2][1]+4*s,c&&(n+=15*(g._isUp?1:-1)))):l?n=(t[0][0]+t[2][0]+.6*u.height)/2:(n=t[2][1],X(d)&&5<d&&(a.isLineType(e)||a.isScatterType(e))&&(s+=r.point_r/2.3),g<0||0===g&&!o.hasPositiveValue&&o.hasNegativeValue?n+=c?h?-3:-5:u.height+(h?-s:s):(g=2*-s,h?g=-s:a.isBubbleType(e)&&(g=s),n+=g=c?h?10:15:g)),null!==e.value||l||(n<(u=u.height)?n=u:n>o.height&&(n=o.height-4)),l||(n+=a.getCenteredTextPos(e,t,i)),n+a.getTextPos(e.id,"y")},markOverlapped:function(e,t,i){var n=this,t=t.$el.arcs.selectAll(i),i=t.filter(function(t){return D(this,n),t.data.id!==e}.bind(this)),a=t.filter(function(t){return D(this,n),t.data.id===e}.bind(this)),s=H(a.node()),r=function(t,e){return D(this,n),Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}.bind(this);a.node()&&i.each(function(){var t=H(this),e=(0,I.select)(this),i=r(s.e,s.f)>r(t.e,t.f)?a:e,i=Math.ceil(Math.abs(s.e-t.e))<Math.ceil(i.node().getComputedTextLength()),t=Math.ceil(Math.abs(s.f-t.f))<parseInt(a.style("font-size"),10);e.classed(Ct.TextOverlapping,i&&t)})},undoMarkOverlapped:function(t,e){t.$el.arcs.selectAll(e).each(function(){(0,I.selectAll)([this,this.previousSibling]).classed(Ct.TextOverlapping,!1)})},meetsLabelThreshold:function(t,e){return(this.config[e+"_label_threshold"]||0)<=(t=void 0===t?0:t)}};function Be(t,e){void 0===t&&(t="left");var i=X(e),i=-1<t.indexOf("center")?i?e/2:"middle":-1<t.indexOf("right")?i?e:"end":i?0:"start";return i}var Ne={initTitle:function(){var t=this.config,e=this.$el;t.title_text&&(e.title=e.svg.append("g"),T(e.title.append("text").style("text-anchor",Be(t.title_position)).attr("class",Ct.title),t.title_text,[.3,1.5]))},redrawTitle:function(){var t,e=this,i=e.config,n=e.state.current,a=e.$el.title;a&&(t=e.yForTitle.call(e),/g/i.test(a.node().tagName)?a.attr("transform","translate("+Be(i.title_position,n.width)+", "+t+")"):a.attr("x",e.xForTitle.call(e)).attr("y",t))},xForTitle:function(){var t,e=this.config,i=this.state.current,n=e.title_position||"left",a=this.getTextRect(this.$el.title,Ct.title).width;return/(right|center)/.test(n)?(t=i.width-a,0<=n.indexOf("right")?t=i.width-a-e.title_padding.right:0<=n.indexOf("center")&&(t=(i.width-a)/2)):t=e.title_padding.left||0,t},yForTitle:function(){return(this.config.title_padding.top||0)+this.getTextRect(this.$el.title,Ct.title).height},getTitlePadding:function(){return this.yForTitle()+(this.config.title_padding.bottom||0)}},Ge={initTooltip:function(){var t=this.config,e=this.$el;e.tooltip=(0,I.select)(t.tooltip_contents.bindto),e.tooltip.empty()&&(e.tooltip=e.chart.append("div").attr("class",Rt.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),this.bindTooltipResizePos()},initShowTooltip:function(){var i=this,n=this,a=n.config,t=n.$el,e=n.state,s=e.hasAxis,e=e.hasRadar;if(a.tooltip_init_show){var r=!(s&&e);if(null!=(e=n.axis)&&e.isTimeSeries()&&u(a.tooltip_init_x)){var o,l,c=n.data.targets[0];for(a.tooltip_init_x=et.call(n,a.tooltip_init_x),o=0;(l=c.values[o])&&l.x-a.tooltip_init_x!=0;o++);a.tooltip_init_x=o}e=n.data.targets.map(function(t){D(this,i);var e=r?0:a.tooltip_init_x;return n.addName(t.values[e])}.bind(this));r&&(e=[e[a.tooltip_init_x]]),t.tooltip.html(n.getTooltipHTML(e,null==(e=n.axis)?void 0:e.getXAxisTickFormat(),n.getDefaultValueFormat(),n.color)),a.tooltip_contents.bindto||t.tooltip.style("top",a.tooltip_init_position.top).style("left",a.tooltip_init_position.left).style("display",null)}},getTooltipHTML:function(){var t=this.api,e=this.config;return M(e.tooltip_contents)?e.tooltip_contents.bind(t).apply(void 0,arguments):this.getTooltipContent.apply(this,arguments)},getTooltipContent:function(t,e,i,n){var a,s=this,r=this,o=r.api,l=r.config,c=r.state,h=["title","name","value"].map(function(t){D(this,s);t=l["tooltip_format_"+t];return M(t)?t.bind(o):t}.bind(this)),d=h[0],u=h[1],g=h[2],d=d||e,u=u||function(t){return D(this,s),t}.bind(this),g=g||(r.isStackNormalized()?function(t,e){return D(this,s),(100*e).toFixed(2)+"%"}.bind(this):i),f=l.tooltip_order,p=function(t){return D(this,s),r.axis&&r.isBubbleZType(t)?r.getBubbleZData(t.value,"z"):r.getBaseValue(t)}.bind(this),x=(r.levelColor?function(t){return D(this,s),r.levelColor(t.value)}:function(t){return D(this,s),n(t)}).bind(this),v=l.tooltip_contents,b=v.template,_=r.mapToTargetIds();null===f&&l.data_groups.length?(a=r.orderTargets(r.data.targets).map(function(t){return D(this,s),t.id}.bind(this)).reverse(),t.sort(function(t,e){D(this,s);var i=t?t.value:null,n=e?e.value:null;return 0<i&&0<n&&(i=t.id?a.indexOf(t.id):null,n=e.id?a.indexOf(e.id):null),i-n}.bind(this))):/^(asc|desc)$/.test(f)?t.sort(function(t,e){D(this,s);t=t?p(t):null,e=e?p(e):null;return"asc"===f?t-e:e-t}.bind(this)):M(f)&&t.sort(f.bind(o));for(var m,y,T,w,A,k,S,C,R,E,L=r.getTooltipContentTemplate(b),O=t.length,P=0;P<O;P++)(E=t[P])&&(p(E)||0===p(E))&&($(T)&&(y=(c.hasAxis||c.hasRadar)&&G(d?d(E.x):E.x),T=tt(L[0],{CLASS_TOOLTIP:Rt.tooltip,TITLE:z(y)?b?y:'<tr><th colspan="2">'+y+"</th></tr>":""})),!E.ratio&&r.$el.arcs&&(E.ratio=r.getRatio("arc",r.$el.arcs.select("path."+rt.arc+"-"+E.id).data()[0])),m=[E.ratio,E.id,E.index,t],w=G(g.apply(void 0,[p(E)].concat(m))),r.isAreaRangeType(E)?(k=(A=["high","low"].map(function(t){return D(this,s),G(g.apply(void 0,[r.getRangedData(E,t)].concat(m)))}.bind(this)))[0],S=A[1],w="<b>Mid:</b> "+w+" <b>High:</b> "+k+" <b>Low:</b> "+S):r.isCandlestickType(E)?(A=(C=["open","high","low","close","volume"].map(function(t){return D(this,s),G(g.apply(void 0,[r.getRangedData(E,t,"candlestick")].concat(m)))}.bind(this)))[0],k=C[1],S=C[2],R=C[3],C=C[4],w="<b>Open:</b> "+A+" <b>High:</b> "+k+" <b>Low:</b> "+S+" <b>Close:</b> "+R+(C?" <b>Volume:</b> "+C:"")):r.isBarRangeType(E)&&(C=(R=E.value)[0],R=R[1],w=g(C)+" ~ "+g(R)),void 0!==w&&function(){var e=this;if(null===E.name)return;var i,t=G(u.apply(void 0,[E.name].concat(m))),n=x(E),a={CLASS_TOOLTIP_NAME:Rt.tooltipName+r.getTargetSelectorSuffix(E.id),COLOR:b||!r.patterns?n:'<svg><rect style="fill:'+n+'" width="10" height="10"></rect></svg>',NAME:t,VALUE:w};b&&N(v.text)&&(i=_.indexOf(E.id),Object.keys(v.text).forEach(function(t){D(this,e),a[t]=v.text[t][i]}.bind(this))),T+=tt(L[1],a)}());return T+"</table>"},getTooltipContentTemplate:function(t){return(t||'<table class="{=CLASS_TOOLTIP}"><tbody>\n\t\t\t\t{=TITLE}\n\t\t\t\t{{<tr class="{=CLASS_TOOLTIP_NAME}">\n\t\t\t\t\t<td class="name">'+(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>')+'{=NAME}</td>\n\t\t\t\t\t<td class="value">{=VALUE}</td>\n\t\t\t\t</tr>}}\n\t\t\t</tbody></table>').replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},tooltipPosition:function(t,e,i,n){var a=this,s=this,r=s.config,o=s.scale,l=s.state,c=l.width,h=l.height,d=l.current,u=l.isLegendRight,g=l.inputType,f=l.event,p=s.hasType("gauge")&&!r.gauge_fullCircle,x=s.getSvgLeft(!0),v=x+d.width-s.getCurrentPaddingRight(),l=s.getCurrentPaddingLeft(!0),f=A(f,n),n=f[0],f=f[1];s.hasArcType()?"touch"===g||s.hasType("radar")||(f+=p?h:h/2,n+=(c-(u?s.getLegendWidth():0))/2):(t=o.x(t[0].x),r.axis_rotated?(f=t+20,n+=x+100,v-=x):(f-=5,n=x+l+20+(s.scale.zoom?n:t))),v<n+e+15&&(n-=e+l),f+i>d.height&&(f-=p?3*i:i+30);var b={top:f,left:n};return Object.keys(b).forEach(function(t){D(this,a),b[t]<0&&(b[t]=0)}.bind(this)),b},showTooltip:function(t,e){var i,n,a,s,r,o,l=this,c=this,h=c.config,d=c.scale,u=c.state,g=c.$el.tooltip,f=h.tooltip_contents.bindto,p=t.filter(function(t){return D(this,l),t&&z(c.getBaseValue(t))}.bind(this));g&&0!==p.length&&h.tooltip_show&&(n=void 0===(a=(s=(i=g.datum())||{}).width)?0:a,a=void 0===(r=s.height)?0:r,s=JSON.stringify(t),i&&i.current===s||(r=t.concat().sort()[0].index,m(h.tooltip_onshow,c.api,t),g.html(c.getTooltipHTML(t,c.axis?c.axis.getXAxisTickFormat():c.categoryName.bind(c),c.getDefaultValueFormat(),c.color)).style("display",null).style("visibility",null).datum(i={index:r,current:s,width:n=g.property("offsetWidth"),height:a=g.property("offsetHeight")}),m(h.tooltip_onshown,c.api,t),c._handleLinkedCharts(!0,r)),f||(h=(null==(f=h.tooltip_position)?void 0:f.bind(c.api))||c.tooltipPosition.bind(c),f={x:(f=A(u.event,e))[0],y:f[1]},t=null==(t=t.filter(Boolean))?void 0:t.shift(),d.x&&t&&"x"in t&&(f.xAxis=d.x(t.x)),o=h(p,n,a,e,f),["top","left"].forEach(function(t){D(this,l);var e=o[t];g.style(t,e+"px"),"left"!==t||i.xPosInPercent||(i.xPosInPercent=e/u.current.width*100)}.bind(this))))},bindTooltipResizePos:function(){var n=this,t=this.resizeFunction,a=this.state,s=this.$el.tooltip;t.add(function(){var t,e,i;D(this,n),"block"===s.style("display")&&(t=a.current,i=(e=s.datum()).width,e=e.xPosInPercent,e=t.width/100*e,(i=t.width-(e+i))<0&&(e+=i),s.style("left",e+"px"))}.bind(this))},hideTooltip:function(t){var e=this.api,i=this.config,n=this.$el.tooltip;!n||"none"===n.style("display")||i.tooltip_doNotHide&&!t||(t=JSON.parse(n.datum().current),m(i.tooltip_onhide,e,t),n.style("display","none").style("visibility","hidden").datum(null),m(i.tooltip_onhidden,e,t))},_handleLinkedCharts:function(s,r){var o,l=this,e=this,t=e.charts,i=e.config,n=e.state.event;null!=n&&n.isTrusted&&i.tooltip_linked&&1<t.length&&(o=i.tooltip_linked_name,t.filter(function(t){return D(this,l),t!==e.api}.bind(this)).forEach(function(t){D(this,l);var e=t.internal,i=e.config,n=e.$el,a=i.tooltip_linked,e=i.tooltip_linked_name,i=p.body.contains(n.chart.node());if(a&&o===e&&i){n=n.tooltip.data()[0],n=r!==(null==n?void 0:n.index);try{t.tooltip[s&&n?"show":"hide"]({index:r})}catch(t){}}}.bind(this)))}},je={getTranslate:function(t,e){var i,n,a=this.config,s=this.state,r=a.axis_rotated,a=0;return(e=void 0===e?0:e)&&/^(x|y2?)$/.test(t)&&(a=this.getAxisSize(t)*e),"main"===t?(i=x(s.margin.left),n=x(s.margin.top)):"context"===t?(i=x(s.margin2.left),n=x(s.margin2.top)):"legend"===t?(i=s.margin3.left,n=s.margin3.top):"x"===t?(i=r?-a:0,n=r?0:s.height+a):"y"===t?(i=r?0:-a,n=r?s.height+a:0):"y2"===t?(i=r?0:s.width+a,n=r?1-a:0):"subX"===t?(i=0,n=r?0:s.height2):"arc"===t||"polar"===t?(i=s.arcWidth/2,n=s.arcHeight/2):"radar"===t&&(t=this.getRadarSize()[0],i=s.width/2-t,n=x(s.margin.top)),"translate("+i+", "+n+")"},transformMain:function(t,e){var i=this,n=i.$el.main,a=i.$T,s=null!=e&&e.axisX?e.axisX:a(n.select("."+lt.axisX),t),r=null!=e&&e.axisY?e.axisY:a(n.select("."+lt.axisY),t),e=null!=e&&e.axisY2?e.axisY2:a(n.select("."+lt.axisY2),t);a(n,t).attr("transform",i.getTranslate("main")),s.attr("transform",i.getTranslate("x")),r.attr("transform",i.getTranslate("y")),e.attr("transform",i.getTranslate("y2")),n.select("."+rt.chartArcs).attr("transform",i.getTranslate("arc"))},transformAll:function(t,e){var i=this,n=i.config,a=i.state.hasAxis,s=i.$el;i.transformMain(t,e),a&&n.subchart_show&&i.transformContext(t,e),s.legend&&i.transformLegend(t)}},Ye={setTargetType:function(t,e){var i=this,n=this.config,a=this.state.withoutFadeIn;this.mapToTargetIds(t).forEach(function(t){D(this,i),a[t]=e===n.data_types[t],n.data_types[t]=e}.bind(this)),t||(n.data_type=e)},updateTypesElements:function(){var n=this,a=this,s=a.state.current;Object.keys(S).forEach(function(t){D(this,n);var e=S[t],i=a.hasType(e,null,!0),t=s.types.indexOf(e);-1===t&&i?s.types.push(e):-1<t&&!i&&s.types.splice(t,1)}.bind(this)),a.setChartElements()},hasType:function(e,t,i){var n=this,a=this.config,s=this.state.current,r=a.data_types,t=t||this.data.targets,o=!1;return!(i=void 0===i?!1:i)&&-1<(null==(s=s.types)?void 0:s.indexOf(e))?o=!0:null!=t&&t.length?t.forEach(function(t){D(this,n);t=r[t.id];t!==e&&(t||"line"!==e)||(o=!0)}.bind(this)):Object.keys(r).length?Object.keys(r).forEach(function(t){D(this,n),r[t]===e&&(o=!0)}.bind(this)):o=a.data_type===e,o},hasTypeOf:function(t,e,i){var n=this;return void 0===i&&(i=[]),t in C&&!C[t].filter(function(t){return D(this,n),-1===i.indexOf(t)}.bind(this)).every(function(t){return D(this,n),!this.hasType(t,e)}.bind(this))},isTypeOf:function(t,e){t=u(t)?t:t.id,t=this.config.data_types[t]||this.config.data_type;return B(e)?0<=e.indexOf(t):t===e},hasPointType:function(){return this.hasTypeOf("Line")||this.hasType("bubble")||this.hasType("scatter")},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},hasMultiArcGauge:function(){return this.hasType("gauge")&&"multi"===this.config.gauge_type},isLineType:function(t){t=u(t)?t:t.id;return!this.config.data_types[t]||this.isTypeOf(t,C.Line)},isStepType:function(t){return this.isTypeOf(t,C.Step)},isSplineType:function(t){return this.isTypeOf(t,C.Spline)},isAreaType:function(t){return this.isTypeOf(t,C.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,C.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isCandlestickType:function(t){return this.isTypeOf(t,"candlestick")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isPolarType:function(t){return this.isTypeOf(t,"polar")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isPolarType(t)||this.isRadarType(t)},isCirclePoint:function(t){var e=this.config,i=e.point_pattern;return"circle"===(null==t?void 0:t.tagName)||"circle"===e.point_type&&(!i||B(i)&&0===i.length)},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},labelishData:function(t){var e=this;return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isCandlestickType(t)||this.isRadarType(t)?t.values.filter(function(t){return D(this,e),X(t.value)||!!t.value}.bind(this)):[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return 0<=["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)}},Ve=function(){function t(t){this.api=void 0,this.config=void 0,this.cache=void 0,this.$el=void 0,this.state=void 0,this.charts=void 0,this.data={xs:{},targets:[]},this.axis=void 0,this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null},this.org={xScale:null,xDomain:null},this.color=void 0,this.patterns=void 0,this.levelColor=void 0,this.point=void 0,this.brush=void 0,this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null};var e=this;e.api=t,e.config=new Vt,e.cache=new ie;t=new Pt;e.$el=t.getStore("element"),e.state=t.getStore("state"),e.$T=e.$T.bind(e)}var e=t.prototype;return e.$T=function(t,e,i){var n=this.config,a=this.state,s=n.transition_duration,n=n.subchart_show,t=t;return t&&("tagName"in t&&(t=(0,I.select)(t)),t=(!1!==e&&s||e)&&(!a.zooming||a.dragging)&&!a.resizing&&a.rendered&&!n?t.transition(i).duration(s):t),t},e.beforeInit=function(){this.callPluginHook("$beforeInit"),m(this.config.onbeforeinit,this.api)},e.afterInit=function(){this.callPluginHook("$afterInit"),m(this.config.onafterinit,this.api)},e.init=function(){var t=this,e=t.config,i=t.state,n=t.$el,a=e.boost_useCssRule;nt(t),i.hasAxis=!t.hasArcType(),i.hasRadar=!i.hasAxis&&t.hasType("radar"),i.datetimeId="bb-"+ +new Date*O(),a&&((s=p.createElement("style")).type="text/css",p.head.appendChild(s),i.style={rootSelctor:"."+i.datetimeId,sheet:s.sheet},n.style=s);var s={element:e.bindto,classname:"bb"};N(e.bindto)&&(s.element=e.bindto.element||"#chart",s.classname=e.bindto.classname||s.classname),n.chart=M(s.element.node)?e.bindto.element:(0,I.select)(s.element||[]),n.chart.empty()&&(n.chart=(0,I.select)(p.body.appendChild(p.createElement("div")))),n.chart.html("").classed(s.classname,!0).classed(i.datetimeId,a).style("position","relative"),t.initParams(),t.initToRender()},e.initToRender=function(t){var i=this,n=this,e=n.config,a=n.state,s=n.$el.chart,r=function(){return D(this,i),"none"===s.style("display")||"hidden"===s.style("visibility")}.bind(this),o=e.render.lazy||r(),l=c.MutationObserver;o&&l&&!1!==e.render.observe&&!t&&new l(function(t,e){D(this,i),r()||(e.disconnect(),a.rendered||n.initToRender(!0))}.bind(this)).observe(s.node(),{attributes:!0,attributeFilter:["class","style"]}),o&&!t||n.convertData(e,function(t){D(this,i),n.initWithData(t),n.afterInit()}.bind(this))},e.initParams=function(){var n,a=this,s=this,t=s.config,r=s.format,e=s.state,i=t.axis_rotated;s.color=s.generateColor(),s.levelColor=s.generateLevelColor(),!1===t.padding&&(t.axis_x_show=!1,t.axis_y_show=!1,t.axis_y2_show=!1,t.subchart_show=!1),s.hasPointType()&&(s.point=s.generatePoint()),e.hasAxis&&(s.initClip(),r.extraLineClasses=s.generateExtraLineClass(),r.dataTime=t.data_xLocaltime?o.timeParse:o.utcParse,r.axisTime=t.axis_x_localtime?o.timeFormat:o.utcFormat,n=s.config.zoom_enabled&&"drag"===s.config.zoom_type,r.defaultAxisTime=function(t){D(this,a);var e=s.scale,i=e.x,e=e.zoom,e=n?e:e&&i.orgDomain().toString()!==e.domain().toString(),e=(t.getMilliseconds()?".%L":t.getSeconds()&&".:%S")||t.getMinutes()&&"%I:%M"||t.getHours()&&"%I %p"||1!==t.getDate()&&"%b %d"||e&&1===t.getDate()&&"%b'%y"||t.getMonth()&&"%-m/%-d"||"%Y";return r.axisTime(e)(t)}.bind(this)),e.isLegendRight="right"===t.legend_position,e.isLegendInset="inset"===t.legend_position,e.isLegendTop="top-left"===t.legend_inset_anchor||"top-right"===t.legend_inset_anchor,e.isLegendLeft="top-left"===t.legend_inset_anchor||"bottom-left"===t.legend_inset_anchor,e.rotatedPadding.top=s.getResettedPadding(e.rotatedPadding.top),e.rotatedPadding.right=i&&!t.axis_x_show?0:30,e.inputType=function(t,e){var i=this,n=c.DocumentTouch,a=c.matchMedia,s=c.navigator,r=!1;return e&&(r=s&&"maxTouchPoints"in s?0<s.maxTouchPoints:!!("ontouchmove"in c||n&&p instanceof n)||(!(null==a||!a("(pointer:coarse)").matches)||(s=s.userAgent,/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(s)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(s)))),(t&&["any-hover:hover","any-pointer:fine"].some(function(t){return D(this,i),null==a?void 0:a("("+t+")").matches}.bind(this))?"mouse":r&&"touch")||"mouse"}(t.interaction_inputType_mouse,t.interaction_inputType_touch)},e.initWithData=function(t){var i=this,e=this,n=e.config,a=e.scale,s=e.state,r=e.$el,o=e.org,l=s.hasAxis,c=n.interaction_enabled,h=e.hasType("polar");l&&(e.axis=e.getAxisInstance(),n.zoom_enabled&&e.initZoom()),e.data.xs={},e.data.targets=e.convertDataToTargets(t),n.data_filter&&(e.data.targets=e.data.targets.filter(n.data_filter.bind(e.api))),n.data_hide&&e.addHiddenTargetIds(!0===n.data_hide?e.mapToIds(e.data.targets):n.data_hide),n.legend_hide&&e.addHiddenLegendIds(!0===n.legend_hide?e.mapToIds(e.data.targets):n.legend_hide),e.updateSizes(),e.updateScales(!0);var d=a.x,u=a.y,g=a.y2,f=a.subX,t=a.subY,a=a.subY2;d&&(d.domain(q(e.getXDomain(e.data.targets))),f.domain(d.domain()),o.xDomain=d.domain()),u&&(u.domain(e.getYDomain(e.data.targets,"y")),t.domain(u.domain())),g&&(g.domain(e.getYDomain(e.data.targets,"y2")),a&&a.domain(g.domain())),r.svg=r.chart.append("svg").style("overflow","hidden").style("display","block"),c&&s.inputType&&(u="touch"===s.inputType,a=n.onclick,g=n.onover,p=n.onout,r.svg.on("click",(null==a?void 0:a.bind(e.api))||null).on(u?"touchstart":"mouseenter",(null==g?void 0:g.bind(e.api))||null).on(u?"touchend":"mouseleave",(null==p?void 0:p.bind(e.api))||null)),n.svg_classname&&r.svg.attr("class",n.svg_classname);var p=M(n.color_tiles)&&e.patterns;(l||p||n.data_labels_backgroundColors||h)&&(r.defs=r.svg.append("defs"),l&&["id","idXAxis","idYAxis","idGrid"].forEach(function(t){D(this,i),e.appendClip(r.defs,s.clip[t])}.bind(this)),e.generateDataLabelBackgroundColorFilter(),p&&e.patterns.forEach(function(t){var e=this;return D(this,i),r.defs.append(function(){return D(this,e),t.node}.bind(this))}.bind(this))),e.updateSvgSize(),e.bindResize();var x,p=r.svg.append("g").classed(st.main,!0).attr("transform",e.getTranslate("main"));r.main=p,n.subchart_show&&e.initSubchart(),n.tooltip_show&&e.initTooltip(),n.title_text&&e.initTitle(),n.legend_show&&e.initLegend(),n.data_empty_label_text&&p.append("text").attr("class",Ct.text+" "+st.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),l&&(n.regions.length&&e.initRegion(),n.clipPath||e.axis.init()),p.append("g").classed(st.chart,!0).attr("clip-path",l?s.clip.path:null),e.callPluginHook("$init"),l&&(c&&null!=e.initEventRect&&e.initEventRect(),e.initGrid(),n.clipPath&&null!=(x=e.axis)&&x.init()),e.initChartElements(),e.updateTargets(e.data.targets),e.updateDimension(),m(n.oninit,e.api),e.setBackground(),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),(n.data_onmin||n.data_onmax)&&(x=e.getMinMaxData(),m(n.data_onmin,e.api,x.min),m(n.data_onmax,e.api,x.max)),n.tooltip_show&&e.initShowTooltip(),s.rendered=!0},e.initChartElements=function(){var i=this,n=this,t=n.state,e=t.hasAxis,t=t.hasRadar,a=[];e?["bar","bubble","candlestick","line"].forEach(function(t){D(this,i);var e=Y(t);("line"===t&&n.hasTypeOf(e)||n.hasType(t))&&a.push(e)}.bind(this)):(e=n.hasType("polar"),t||a.push("Arc","Pie"),n.hasType("gauge")?a.push("Gauge"):t?a.push("Radar"):e&&a.push("Polar")),a.forEach(function(t){D(this,i),n["init"+t]()}.bind(this)),E(n.config.data_labels)&&!n.hasArcType(null,["radar"])&&n.initText()},e.setChartElements=function(){var t=this.$el,e=t.chart,i=t.svg,n=t.defs,a=t.main,s=t.tooltip,r=t.legend,o=t.title,l=t.grid,c=t.arcs,h=t.circle,d=t.bar,u=t.candlestick,g=t.line,f=t.area,t=t.text;this.api.$={chart:e,svg:i,defs:n,main:a,tooltip:s,legend:r,title:o,grid:l,arc:c,circles:h,bar:{bars:d},candlestick:u,line:{lines:g,areas:f},text:{texts:t}}},e.setBackground=function(){var t=this.config.background,e=this.state,i=this.$el.svg;E(t)&&(i=i.select("g").insert(t.imgUrl?"image":"rect",":first-child"),t.imgUrl?i.attr("href",t.imgUrl):t.color&&i.style("fill",t.color).attr("clip-path",e.clip.path),i.attr("class",t.class||null).attr("width","100%").attr("height","100%"))},e.updateTargets=function(e){var i=this,n=this,t=n.state,a=t.hasAxis,t=t.hasRadar,s=function(t){return D(this,i),n["updateTargetsFor"+t](e.filter(n["is"+t+"Type"].bind(n)))}.bind(this);n.updateTargetsForText(e),a?(["bar","candlestick","line"].forEach(function(t){D(this,i);var e=Y(t);("line"===t&&n.hasTypeOf(e)||n.hasType(t))&&s(e)}.bind(this)),n.updateTargetsForSubchart&&n.updateTargetsForSubchart(e)):n.hasArcType(e)&&(r="Arc",t?r="Radar":n.hasType("polar")&&(r="Polar"),s(r));var r=n.hasType("bubble")||n.hasType("scatter");r&&null!=n.updateTargetForCircle&&n.updateTargetForCircle(),n.filterTargetsToShowAtInit(r)},e.filterTargetsToShowAtInit=function(t){var e=this,i=this,n=i.$el.svg,a=i.$T,s="."+st.target;(t=void 0===t?!1:t)&&(s+=", ."+dt.chartCircles+" > ."+dt.circles),a(n.selectAll(s).filter(function(t){return D(this,e),i.isTargetToShow(t.id)}.bind(this))).style("opacity",null)},e.getWithOption=function(i){var n=this,a={Dimension:!0,EventRect:!0,Legend:!1,Subchart:!0,Transform:!1,Transition:!0,TrimXDomain:!0,UpdateXAxis:"UpdateXDomain",UpdateXDomain:!1,UpdateOrgXDomain:!1,TransitionForExit:"Transition",TransitionForAxis:"Transition",Y:!0};return Object.keys(a).forEach(function(t){D(this,n);var e=a[t];u(e)&&(e=a[e]),a[t]=_(i,"with"+t,e)}.bind(this)),a},e.initialOpacity=function(t){var e=this.state.withoutFadeIn;return null!==this.getBaseValue(t)&&e[t.id]?null:"0"},e.bindResize=function(){var e=this,t=this,i=t.config,n=t.state,a=function(e){var i,n=this,a=[],s=function(){var t=this;s.clear(),!1===e&&c.requestIdleCallback?requestIdleCallback(function(){var e=this;D(this,t),a.forEach(function(t){return D(this,e),t()}.bind(this))}.bind(this),{timeout:200}):i=ne(function(){var e=this;D(this,t),a.forEach(function(t){return D(this,e),t()}.bind(this))}.bind(this),X(e)?e:200)};return s.clear=function(){D(this,n),i&&(ae(i),i=null)}.bind(this),s.add=function(t){return D(this,n),a.push(t)}.bind(this),s.remove=function(t){return D(this,n),a.splice(a.indexOf(t),1)}.bind(this),s}(i.resize_timer),s=[];s.push(function(){return D(this,e),m(i.onresize,t.api)}.bind(this)),i.resize_auto&&s.push(function(){D(this,e),n.resizing=!0,i.legend_show&&(t.updateSizes(),t.updateLegend()),t.api.flush(!1)}.bind(this)),s.push(function(){D(this,e),m(i.onresized,t.api),n.resizing=!1}.bind(this)),s.forEach(function(t){return D(this,e),a.add(t)}.bind(this)),t.resizeFunction=a,c.addEventListener("resize",t.resizeFunction=a)},e.callPluginHook=function(e){for(var i=this,t=arguments.length,n=Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.config.plugins.forEach(function(t){D(this,i),"$beforeInit"===e&&(t.$$=this).api.plugins.push(t),t[e].apply(t,n)}.bind(this))},t}();j(Ve.prototype,[xe,ve,be,{categoryName:function(t){var e=this.config.axis_x_categories;return t<(null==e?void 0:e.length)?e[t]:t}},ye,ke,Se,me,Re,Le,Pe,De,Me,Xe,$e,Fe,Ne,Ge,je,Ye]);ye={resize:function(t){var e=this.internal,i=e.config,n=e.state;n.rendered&&(i.size_width=t?t.width:null,i.size_height=t?t.height:null,n.resizing=!0,this.flush(!1),e.resizeFunction())},flush:function(t){var e,i=this.internal,n=i.state,a=i.$el.zoomResetBtn;n.rendered?(n.resizing?null!=(e=i.brush)&&e.updateResize():null!=(e=i.axis)&&e.setOrient(),null!=a&&a.style("display","none"),i.scale.zoom=null,t?i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):i.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!n.resizing&&i.brush&&(i.brush.getSelection().call(i.brush.move),i.unselectRect())):i.initToRender(!0)},destroy:function(){var i=this,n=this.internal,t=n.$el,e=t.chart,a=t.style,t=t.svg;if(E(n))for(var s in n.callPluginHook("$willDestroy"),n.charts.splice(n.charts.indexOf(this),1),n.unbindAllEvents(),t.select("*").interrupt(),n.resizeFunction.clear(),c.removeEventListener("resize",n.resizeFunction),e.classed("bb",!1).style("position",null).selectChildren().remove(),a&&a.parentNode.removeChild(a),Object.keys(this).forEach(function(t){var e=this;D(this,i),"internal"===t&&Object.keys(n).forEach(function(t){D(this,e),n[t]=null}.bind(this)),this[t]=null,delete this[t]}.bind(this)),this)this[s]=function(){D(this,i)}.bind(this);return null},config:function(t,e,i){var n,a=this.internal,s=a.config,r=a.state,a=null==t?void 0:t.replace(/\./g,"_");return t&&a in s?F(e)?(n=s[a]=e,i&&this.flush()):n=s[a]:n=r.orgConfig,n}};function He(t){var n=this,e=this.internal.data.targets;if($(t))return e;var a=B(t)?t:[t];return e.filter(function(e){var i=this;return D(this,n),a.some(function(t){return D(this,i),t===e.id}.bind(this))}.bind(this))}j(He,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t,i){var n=this;void 0===i&&(i=!0);var a=null;return t&&(t=this.data(t),B(t)&&(a=[],t.forEach(function(t){var e=this;D(this,n);t=t.values.map(function(t){return D(this,e),t.value}.bind(this));i?a=a.concat(t):a.push(t)}.bind(this)))),a},names:function(t){return this.internal.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});var ke={data:He},We=function(t){var i=this;return D(this,void 0),btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return D(this,i),String.fromCharCode(+("0x"+e))}.bind(this)))}.bind(void 0);function Ue(t,e,i){var n=this,a=e||i,s=a.width,r=a.height,o=new XMLSerializer,l=t.cloneNode(!0),a=function(t){var i=this,n=[];return t.forEach(function(e){D(this,i);try{e.cssRules&&e.cssRules.length&&(n=n.concat(V(e.cssRules)))}catch(t){console.error("Error while reading rules from "+e.href+": "+t.toString())}}.bind(this)),n}(V(p.styleSheets)).filter(function(t){return D(this,n),t.cssText}.bind(this)).map(function(t){return D(this,n),t.cssText}.bind(this));l.setAttribute("xmlns",I.namespaces.xhtml);t=o.serializeToString(l),l=p.createElement("style");l.appendChild(p.createTextNode(a.join("\n")));l=o.serializeToString(l),t=('<svg xmlns="'+I.namespaces.svg+'" width="'+s+'" height="'+r+'" \n\t\tviewBox="0 0 '+i.width+" "+i.height+'" \n\t\tpreserveAspectRatio="'+(!1===(null==e?void 0:e.preserveAspectRatio)?"none":"xMinYMid meet")+'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t'+l+"\n\t\t\t\t"+t.replace(/(url\()[^#]+/g,"$1")+"\n\t\t\t</foreignObject></svg>").replace("/\n/g","%0A");return"data:image/svg+xml;base64,"+We(t)}function Ze(t,e,i){var n=this,a=this.internal,s=a.mapToTargetIds(e),r=a.state.hiddenTargetIds.map(function(t){return D(this,n),-1<s.indexOf(t)&&t}.bind(this)).filter(Boolean);a.state.toggling=!0,a[(t?"remove":"add")+"HiddenTargetIds"](s);var o=a.$el.svg.selectAll(a.selectorTargets(s)),l=t?null:"0";t&&r.length&&(o.style("display",null),m(a.config.data_onshown,this,r)),a.$T(o).style("opacity",l,"important").call(y,function(){D(this,n),t||0!==r.length||(o.style("display","none"),m(a.config.data_onhidden,this,s)),o.style("opacity",l)}.bind(this)),i.withLegend&&a[(t?"show":"hide")+"Legend"](s),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.state.toggling=!1}var qe=function t(e){this.plugins=[],this.internal=void 0;var i=new Ve(this);this.internal=i,function s(r,o,l){var c=this;Object.keys(r).forEach(function(t){D(this,c);var e=M(r[t]),i=o!==l,n=E(r[t]),a=n&&0<Object.keys(r[t]).length;o[t]=e&&(!i&&a||i)?r[t].bind(l):n&&!e?{}:r[t],a&&s(r[t],o[t],l)}.bind(this))}(t.prototype,this,this),function(e){var i,n,a,s=this,r=this.config,o=function(){D(this,s);var t=n.shift();return t&&i&&v(i)&&t in i?(i=i[t],o()):t?void 0:i}.bind(this);Object.keys(r).forEach(function(t){D(this,s),i=e,n=t.split("_"),a=o(),F(a)&&(r[t]=a)}.bind(this)),this.api&&(this.state.orgConfig=e)}.call(i,e),i.beforeInit(),i.init()};function Ke(t,i,e){var n=this,a=t.config,s=function(t,e){D(this,n);e=X(e)?e:!1===e?void 0:null;null!==e&&(a["axis_"+t+"_"+i]=e)}.bind(this);F(e)&&(v(e)?Object.keys(e).forEach(function(t){D(this,n),s(t,e[t])}.bind(this)):!X(e)&&!1!==e||["y","y2"].forEach(function(t){D(this,n),s(t,e)}.bind(this)),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function Je(t,e){t=t.config;return{x:t["axis_x_"+e],y:t["axis_y_"+e],y2:t["axis_y2_"+e]}}j(qe.prototype,[ye,{color:function(t){return this.internal.color(t)}},ke,{export:function(t,i){var n,a=this,e=this.internal,s=e.state,e=e.$el.chart,s=s.current,r=s.width,o=s.height,l=Z({width:r,height:o,preserveAspectRatio:!0,mimeType:"image/png"},t),e=Ue(e.node(),l,{width:r,height:o});return i&&M(i)&&((n=new Image).crossOrigin="Anonymous",n.onload=function(){D(this,a);var t=p.createElement("canvas"),e=t.getContext("2d");t.width=l.width||r,t.height=l.height||o,e.drawImage(n,0,0),i.bind(this)(t.toDataURL(l.mimeType))}.bind(this),n.src=e),e}},{focus:function(t){var e=this,i=this.internal,n=i.state,a=i.mapToTargetIds(t),s=i.$el.svg.selectAll(i.selectorTargets(a.filter(i.isTargetToShow,i)));this.revert(),this.defocus(),s.classed(bt.focused,!0).classed(bt.defocused,!1),i.hasArcType()&&!n.hasRadar&&(i.expandArc(a),i.hasType("gauge")&&i.markOverlapped(t,i,"."+ft.gaugeValue)),i.toggleFocusLegend(a,!0),n.focusedTargetIds=a,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(t){return D(this,e),a.indexOf(t)<0}.bind(this))},defocus:function(t){var e=this,i=this.internal,n=i.state,a=i.mapToTargetIds(t);i.$el.svg.selectAll(i.selectorTargets(a.filter(i.isTargetToShow,i))).classed(bt.focused,!1).classed(bt.defocused,!0),i.hasArcType(null,["polar"])&&(i.unexpandArc(a),i.hasType("gauge")&&i.undoMarkOverlapped(i,"."+ft.gaugeValue)),i.toggleFocusLegend(a,!1),n.focusedTargetIds=n.focusedTargetIds.filter(function(t){return D(this,e),a.indexOf(t)<0}.bind(this)),n.defocusedTargetIds=a},revert:function(t){var e=this.internal,i=e.config,n=e.state,a=e.$el,t=e.mapToTargetIds(t);a.svg.selectAll(e.selectorTargets(t)).classed(bt.focused,!1).classed(bt.defocused,!1),e.hasArcType(null,["polar"])&&e.unexpandArc(t),i.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),a.legend.selectAll(e.selectorLegends(t)).filter(function(){return(0,I.select)(this).classed(bt.legendItemFocused)}).classed(bt.legendItemFocused,!1)),n.focusedTargetIds=[],n.defocusedTargetIds=[]}},{legend:{show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}}},{load:function(e){var i=this,n=this.internal,a=n.config;e.xs&&n.addXs(e.xs),"names"in e&&this.data.names(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){D(this,i),a.data_classes[t]=e.classes[t]}.bind(this)),"categories"in e&&n.axis.isCategorized()&&(a.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){D(this,i),a.data_axes[t]=e.axes[t]}.bind(this)),"colors"in e&&Object.keys(e.colors).forEach(function(t){D(this,i),a.data_colors[t]=e.colors[t]}.bind(this)),"unload"in e&&!1!==e.unload?n.unload(n.mapToTargetIds(!0===e.unload?null:e.unload),function(){var t=this;D(this,i),c.requestIdleCallback(function(){return D(this,t),n.loadFromArgs(e)}.bind(this))}.bind(this)):n.loadFromArgs(e)},unload:function(t){var e=this,i=this.internal,n=t||{};B(n)?n={ids:n}:u(n)&&(n={ids:[n]});var a=i.mapToTargetIds(n.ids);i.unload(a,function(){D(this,e),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.cache.remove(a),n.done&&n.done.call(this)}.bind(this))}},{show:function(t,e){Ze.call(this,!0,t,e=void 0===e?{}:e)},hide:function(t,e){Ze.call(this,!1,t,e=void 0===e?{}:e)},toggle:function(t,e){var i=this;void 0===e&&(e={});var n=this.internal,a={show:[],hide:[]};n.mapToTargetIds(t).forEach(function(t){return D(this,i),a[n.isTargetToShow(t)?"hide":"show"].push(t)}.bind(this)),a.show.length&&this.show(a.show,e),a.hide.length&&setTimeout(function(){return D(this,i),this.hide(a.hide,e)}.bind(this),0)}},{tooltip:{show:function(t){var e,i,n,a,s=this,r=this.internal,o=r.config,l=r.state.inputType;t.mouse&&(i=t.mouse),t.data?(n=t.data,a=r.getYScaleById(n.id)(n.value),r.isMultipleX()?i=[r.scale.x(n.x),a]:(o.tooltip_grouped||(i=[0,a]),e=z(n.index)?n.index:r.getIndexByX(n.x))):F(t.x)?e=r.getIndexByX(t.x):F(t.index)&&(e=t.index),("mouse"===l?["mouseover","mousemove"]:["touchstart"]).forEach(function(t){D(this,s),r.dispatchEvent(t,e,i)}.bind(this))},hide:function(){var e,i=this,n=this.internal,t=n.state.inputType,a=n.$el.tooltip,a=null==a?void 0:a.datum();a&&(e=JSON.parse(a.current)[0].index,("mouse"===t?["mouseout"]:["touchend"]).forEach(function(t){D(this,i),n.dispatchEvent(t,e)}.bind(this))),"touch"===t&&n.callOverOutForTouch(),n.hideTooltip(!0),n.hideGridFocus(),null!=n.unexpandCircles&&n.unexpandCircles(),n.expandBarTypeShapes(!1)}}}]);Se={axis:{labels:function(e){var i,n=this,a=this.internal;return e&&(Object.keys(e).forEach(function(t){D(this,n),a.axis.setLabelText(t,e[t])}.bind(this)),a.axis.updateLabels()),["x","y","y2"].forEach(function(t){D(this,n);var e=a.axis.getLabelText(t);e&&((i=i||{})[t]=e)}.bind(this)),i},min:function(t){var e=this.internal;return z(t)||!1===t?Ke(e,"min",t):Je(e,"min")},max:function(t){var e=this.internal;return z(t)||!1===t?Ke(e,"max",t):Je(e,"max")},range:function(t){var e=this.axis;if(!arguments.length)return{max:e.max(),min:e.min()};var i=t.min,t=t.max;F(t)&&e.max(t),F(i)&&e.min(i)}}};function Qe(t){var e=this.internal,i=e.config;return t&&(i.grid_x_lines=t,e.redrawWithoutRescale()),i.grid_x_lines}j(Qe,{add:function(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!0)}});me={xgrids:Qe};function ti(t){var e=this.internal,i=e.config;return t&&(i.grid_y_lines=t,e.redrawWithoutRescale()),i.grid_y_lines}j(ti,{add:function(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!1)}});Re={ygrids:ti},Le={groups:function(t){var e=this.internal,i=e.config;return $(t)||(i.data_groups=t,e.redraw()),i.data_groups}};function ei(t){var e=this.internal,i=e.config;return t?(i.regions=t,e.redrawWithoutRescale(),t):i.regions}j(ei,{add:function(t){var e=this.internal,i=e.config;return t&&(i.regions=i.regions.concat(t),e.redrawWithoutRescale()),i.regions},remove:function(t){var n=this,e=this.internal,i=e.config,a=e.$T,t=t||{},s=_(t,"classes",[wt.region]),e=e.$el.main.select("."+wt.regions).selectAll(s.map(function(t){return D(this,n),"."+t}.bind(this)));return a(e).style("opacity","0").remove(),e=i.regions,Object.keys(t).length?(e=e.filter(function(t){var e=this;D(this,n);var i=!1;return!t.class||(t.class.split(" ").forEach(function(t){D(this,e),0<=s.indexOf(t)&&(i=!0)}.bind(this)),!i)}.bind(this)),i.regions=e):i.regions=[],e}});var Pe={regions:ei},De={x:function(t){var e=this.internal,i=e.axis,n=e.data,i=i.isCustomX()&&i.isCategorized();return B(t)&&(i?this.categories(t):(e.updateTargetX(n.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),i?this.categories():n.xs},xs:function(t){var e=this.internal;return N(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}},Me={flow:function(u){var g,e=this,f=this.internal;(u.json||u.rows||u.columns)&&f.convertData(u,function(t){D(this,e),g=t,function(){var t,e,i,a,n,s,r,o,l,c=this,h=0,d=0;!f.state.redrawing&&g&&it()&&(a=[],n=f.getMaxDataCount(),s=f.convertDataToTargets(g,!0),r=f.axis.isTimeSeries(),f.data.targets.forEach(function(t){D(this,c);for(var e=!1,i=0;i<s.length;i++)if(t.id===s[i].id){e=!0,t.values[t.values.length-1]&&(d=t.values[t.values.length-1].index+1),h=s[i].values.length;for(var n=0;n<h;n++)s[i].values[n].index=d+n,r||(s[i].values[n].x=d+n);t.values=t.values.concat(s[i].values),s.splice(i,1);break}e||a.push(t.id)}.bind(this)),f.data.targets.forEach(function(t){D(this,c);for(var e=0;e<a.length;e++)if(t.id===a[e]){d=t.values[t.values.length-1].index+1;for(var i=0;i<h;i++)t.values.push({id:t.id,index:d+i,x:r?f.getOtherTargetX(d+i):d+i,value:null})}}.bind(this)),f.data.targets.length&&s.forEach(function(t){var e=this;D(this,c);for(var i=[],n=f.data.targets[0].values[0].index;n<d;n++)i.push({id:t.id,index:n,x:r?f.getOtherTargetX(n):n,value:null});t.values.forEach(function(t){D(this,e),t.index+=d,r||(t.x+=d)}.bind(this)),t.values=i.concat(t.values)}.bind(this)),f.data.targets=f.data.targets.concat(s),o=f.data.targets[0],l=o.values[0],F(u.to)?(h=0,i=r?et.call(f,u.to):u.to,o.values.forEach(function(t){D(this,c),t.x<i&&h++}.bind(this))):F(u.length)&&(h=u.length),n?1===n&&r&&(e=(o.values[o.values.length-1].x-l.x)/2,t=[new Date(+l.x-e),new Date(+l.x+e)]):(e=r?1<o.values.length?o.values[o.values.length-1].x-l.x:l.x-f.getXDomain(f.data.targets)[0]:1,t=[l.x-e,l.x]),t&&f.updateXDomain(null,!0,!0,!1,t),f.updateTargets(f.data.targets),f.redraw({flow:{index:l.index,length:h,duration:z(u.duration)?u.duration:f.config.transition_duration,done:u.done,orgDataCount:n},withLegend:!0,withTransition:1<n,withTrimXDomain:!1,withUpdateXAxis:!0}))}()}.bind(this))}},ii=On(10),ni=function(){function t(t){this.owner=void 0,this.config=void 0,this.scale=void 0;var e=Ie(),i=t.config,n=t.params;this.owner=t,this.config=i,this.scale=e,!i.noTransition&&n.config.transition_duration||(i.withoutTransition=!0),i.range=this.scaleExtent((n.orgXScale||e).range())}t.getSizeFor1Char=function(t){var a=this,s={w:5.5,h:11.5};return t.empty()||t.select("text").text("0").call(function(t){D(this,a);try{var e=t.node().getBBox(),i=e.width,n=e.height;i&&n&&(s.w=i,s.h=n)}catch(t){}finally{t.text("")}}.bind(this)),this.getSizeFor1Char=function(){return D(this,a),s}.bind(this),s};var e=t.prototype;return e.getTickTransformSetter=function(t){var n=this,e=this.config,a=("x"===t?function(t){return D(this,n),"translate("+(t+e.tickOffset)+",0)"}:function(t){return D(this,n),"translate(0,"+t+")"}).bind(this);return function(t,e){var i=this;D(this,n),t.attr("transform",function(t){return D(this,i),a(Math.ceil(e(t)))}.bind(this))}.bind(this)},e.scaleExtent=function(t){var e=t[0],t=t[t.length-1];return e<t?[e,t]:[t,e]},e.generateTicks=function(t,e){var i=this,n=this.owner.params.tickStepSize,a=t.domain(),s=a[0],r=a[1],o=[];if(e&&n)for(var l=Math.round(s);l<=r;)o.push(l),l+=n;else if(t.ticks){e=this.config.tickArguments;if("log"!==t.type||e)o=t.ticks.apply(t,this.config.tickArguments||[]);else{for(var c=Ie("_log").domain([0<s?s:1,r]).range(t.range()),o=c.ticks(),h=r.toFixed().length;15<o.length;h--)o=c.ticks(h);o.splice(0,1,s),o.splice(o.length-1,1,r)}o=o.map(function(t){return D(this,i),u(t)&&X(t)&&!isNaN(t)&&Math.round(10*t)/10||t}.bind(this))}else{for(var d=Math.ceil(s);d<r;d++)o.push(d);0<o.length&&0<o[0]&&o.unshift(o[0]-(o[1]-o[0]))}return o},e.copyScale=function(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t.type=this.scale.type,t},e.textFormatted=function(t){var e=this.config.tickFormat,t=/\d+\.\d+0{5,}\d$/.test(t)?+(t+"").replace(/0+\d$/,""):t,t=e?e(t):t;return F(t)?t:""},e.transitionise=function(t){var e=this.config,i=t;if(e.withoutTransition)i=t.interrupt();else if(e.transition||!this.owner.params.noTransition)try{i=t.transition(e.transition)}catch(t){}return i},t}(),ai=function(){function t(t){void 0===t&&(t={}),this.helper=void 0,this.config=void 0,this.params=void 0,this.g=void 0,this.generatedTicks=void 0;var e={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};e.tickLength=Math.max(e.innerTickSize,0)+e.tickPadding,this.config=e,this.params=t,this.helper=new ni(this)}var e=t.prototype;return e.create=function(t){var g=this,f=g.config,p=g.helper,x=g.params,v=p.scale,b=f.orient,_=this.splitTickText.bind(g),m=/^(left|right)$/.test(b),y=/^(top|bottom)$/.test(b),T=p.getTickTransformSetter(y?"x":"y"),w=T===p.axisX?"y":"x",A=/^(top|left)$/.test(b)?-1:1,k=x.tickTextRotate;this.config.range=v.rangeExtent?v.rangeExtent():p.scaleExtent((x.orgXScale||v).range());var S,C=f.innerTickSize,R=f.tickLength,E=f.range,e=x.id,L=e&&/^(x|y|y2)$/.test(e)?x.config["axis_"+e+"_tick_text_position"]:{x:0,y:0},i="subX"===e?"subchart_axis_x":"axis_"+e,e=x.config[i+"_show"],O=!!e&&x.config[i+"_tick_show"],P=!!e&&x.config[i+"_tick_text_show"];t.each(function(){var n=this,t=(0,I.select)(this),e=this.__chart__||v,a=p.copyScale();S=t,this.__chart__=a,f.tickOffset=x.isCategory?Math.ceil((a(1)-a(0))/2):0;var s,i,r,o,l,c,h,d,u=t.selectAll(".domain").data([0]);u.enter().append("path").attr("class","domain").merge(u).attr("d",function(){D(this,n);var t=f.outerTickSize*A;return y?"M"+E[0]+","+t+"V0H"+E[1]+"V"+t:"M"+t+","+E[0]+"H0V"+E[1]+"H"+t}.bind(this)),(O||P)&&(s=f.tickValues||p.generateTicks(a,m),g.generatedTicks=s,i=(o=t.selectAll(".tick").data(s,a)).enter().insert("g",".domain").attr("class","tick"),r=o.exit().remove(),o=i.merge(o),O&&i.append("line"),P&&i.append("text"),l=ni.getSizeFor1Char(o),c=[],(u=o.select("text").selectAll("tspan").data(function(t,e){var i=this;D(this,n);t=x.tickMultiline?_(t,a,s,m,l.w):B(p.textFormatted(t))?p.textFormatted(t).concat():[p.textFormatted(t)];return c[e]=t.length,t.map(function(t){return D(this,i),{index:e,splitted:t}}.bind(this))}.bind(this))).exit().remove(),(u=u.enter().append("tspan").merge(u).text(function(t){return D(this,n),t.splitted}.bind(this))).attr("x",y?0:R*A).attr("dx",function(){D(this,n);var t=0;return(t=/(top|bottom)/.test(b)&&k?8*Math.sin(Math.PI*(k/180))*("top"===b?-1:1):t)+(L.x||0)}.bind(this)()).attr("dy",function(t,e){D(this,n);var i=0;return"top"!==b&&(i=l.h,0===e&&(i=m?-((c[t.index]-1)*(l.h/2)-3):0===L.y?".71em":0)),X(i)&&L.y?i+L.y:i||".71em"}.bind(this)),t=o.select("line"),u=o.select("text"),i.select("line").attr(w+"2",C*A),i.select("text").attr(w,R*A),g.setTickLineTextPosition(t,u),x.tickTitle&&((t=u.select("title")).empty()?u.append("title"):t).text(function(t){return D(this,n),x.tickTitle[t]}.bind(this)),a.bandwidth?(d=(h=a).bandwidth()/2,a=e=function(t){return D(this,n),h(t)+d}.bind(this)):e.bandwidth?e=a:T(r,a),o=x.owner.state.flowing?p.transitionise(o):x.owner.$T(o),T(i,e),T(o.style("opacity",null),a))}),this.g=S},e.getGeneratedTicks=function(t){var i,e=(null==(n=this.generatedTicks)?void 0:n.length)-1,n=this.generatedTicks,a=this;return t<e&&(i=Math.round(e/t+.1),n=this.generatedTicks.map(function(t,e){return D(this,a),e%i==0?t:null}.bind(this)).filter(function(t){return D(this,a),null!==t}.bind(this)).splice(0,t)),n},e.getTickXY=function(){var t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e},e.getTickSize=function(t){var e=this.helper.scale,i=this.config,n=i.innerTickSize,a=i.range,i=e(t)+(i.tickCentered?0:i.tickOffset);return a[0]<i&&i<a[1]?n:0},e.setTickLineTextPosition=function(t,e){var i=this,n=this.getTickXY(),a=this.config,s=a.innerTickSize,r=a.orient,o=a.tickLength,l=a.tickOffset,c=this.params.tickTextRotate,h=function(t){D(this,i);var e=["start","end"];return"top"===r&&e.reverse(),t?e[0<t?0:1]:"middle"}.bind(this),d=function(t){return D(this,i),t?"rotate("+t+")":null}.bind(this),u=function(t){return D(this,i),t?11.5-2.5*(t/("bottom"===r?15:23))*(0<t?1:-1):o}.bind(this);switch(r){case"bottom":t.attr("x1",n.x).attr("x2",n.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",u(c)).style("text-anchor",h(c)).attr("transform",d(c));break;case"top":t.attr("x2",0).attr("y2",-s),e.attr("x",0).attr("y",2*-u(c)).style("text-anchor",h(c)).attr("transform",d(c));break;case"left":t.attr("x2",-s).attr("y1",n.y).attr("y2",n.y),e.attr("x",-o).attr("y",l).style("text-anchor","end");break;case"right":t.attr("x2",s).attr("y2",0),e.attr("x",o).attr("y",0).style("text-anchor","start")}},e.splitTickText=function(t,e,i,n,r){var a=this.params,s=this.helper.textFormatted(t),t=u(s)&&-1<s.indexOf("\n")?s.split("\n"):[];if(t.length)return t;if(B(s))return s;var o=a.tickWidth;return(!o||o<=0)&&(o=n?95:a.isCategory?Math.ceil(e(i[1])-e(i[0]))-12:110),function t(e,i){for(var n,a,s=1;s<i.length;s++)if(" "===i.charAt(s)&&(n=s),a=i.substr(0,s+1),a=r*a.length,o<a)return t(e.concat(i.substr(0,n||s)),i.slice(n?n+1:s));return e.concat(i)}(t,s+"")},e.scale=function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale},e.orient=function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",this):this.config.orient},e.tickFormat=function(t){var e=this.config;return arguments.length?(e.tickFormat=t,this):e.tickFormat},e.tickCentered=function(t){var e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered},e.tickOffset=function(){return this.config.tickOffset},e.tickInterval=function(t){var e,n=this,i=this.config,a=i.outerTickSize,s=i.tickOffset,i=i.tickValues;return(e=this.params.isCategory?2*s:(e=(this.g.select("path.domain").node().getTotalLength()-2*a)/(t||this.g.selectAll("line").size()),i=i?i.map(function(t,e,i){D(this,n);e+=1;return e<i.length?this.helper.scale(i[e])-this.helper.scale(t):null}.bind(this)).filter(Boolean):[],Math.min.apply(Math,i.concat([e]))))===1/0?0:e},e.ticks=function(){for(var t=this.config,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.length?(t.tickArguments=V(i),this):t.tickArguments},e.tickCulling=function(t){var e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling},e.tickValues=function(t){var e=this,i=this.config;if(M(t))i.tickValues=function(){return D(this,e),t(this.helper.scale.domain())}.bind(this);else{if(!arguments.length)return i.tickValues;i.tickValues=t}return this},e.setTransition=function(t){return this.config.transition=t,this},t}(),Xe={getAxisInstance:function(){return this.axis||new si(this)}},si=function(){function t(t){this.owner=void 0,this.x=void 0,this.subX=void 0,this.y=void 0,this.y2=void 0,this.axesList={},this.tick={x:null,y:null,y2:null},this.xs=[],this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"},this.owner=t,this.setOrient()}var e=t.prototype;return e.getAxisClassName=function(t){return lt.axis+" "+lt["axis"+Y(t)]},e.isHorizontal=function(t,e){t=t.config.axis_rotated;return e?t:!t},e.isCategorized=function(){var t=this.owner,e=t.config,t=t.state;return 0<=e.axis_x_type.indexOf("category")||t.hasRadar},e.isCustomX=function(){var t=this.owner.config;return!this.isTimeSeries()&&(t.data_x||E(t.data_xs))},e.isTimeSeries=function(t){return"timeseries"===this.owner.config["axis_"+(t=void 0===t?"x":t)+"_type"]},e.isLog=function(t){return"log"===this.owner.config["axis_"+(t=void 0===t?"x":t)+"_type"]},e.isTimeSeriesY=function(){return this.isTimeSeries("y")},e.getAxisType=function(t){var e="linear";return this.isTimeSeries(t=void 0===t?"x":t)?e=this.owner.config.axis_x_localtime?"time":"utc":this.isLog(t)&&(e="log"),e},e.init=function(){var a=this,s=this.owner,r=s.config,t=s.$el,o=t.main,l=t.axis,c=s.state.clip,h=r.axis_rotated,t=["x","y"];r.axis_y2_show&&t.push("y2"),t.forEach(function(e){var i=this;D(this,a);var t=this.getAxisClassName(e),n=lt["axis"+e.toUpperCase()+"Label"];l[e]=o.append("g").attr("class",t).attr("clip-path",function(){D(this,i);var t=null;return"x"===e?t=c.pathXAxis:"y"===e&&(t=c.pathYAxis),t}.bind(this)).attr("transform",s.getTranslate(e)).style("visibility",r["axis_"+e+"_show"]?null:"hidden"),l[e].append("text").attr("class",n).attr("transform",["rotate(-90)",null]["x"===e?+!h:+h]).style("text-anchor",function(){return D(this,i),this.textAnchorForAxisLabel(e)}.bind(this)),this.generateAxes(e)}.bind(this))},e.setOrient=function(){var t=this.owner.config,e=t.axis_rotated,i=t.axis_y_inner,t=t.axis_y2_inner;this.orient={x:e?"left":"bottom",y:e?i?"top":"bottom":i?"right":"left",y2:e?t?"bottom":"top":t?"left":"right",subX:e?"left":"bottom"}},e.generateAxes=function(a){var s,r=this,o=this.owner,t=o.config,l=[],e=t["axis_"+a+"_axes"],t=t.axis_rotated;"x"===a?s=t?ii.axisLeft:ii.axisBottom:"y"===a?s=t?ii.axisBottom:ii.axisLeft:"y2"===a&&(s=t?ii.axisTop:ii.axisRight),e.length&&e.forEach(function(t){var e=this;D(this,r);var i=t.tick||{},n=o.scale[a].copy();t.domain&&n.domain(t.domain),l.push(s(n).ticks(i.count).tickFormat(M(i.format)?i.format.bind(o.api):function(t){return D(this,e),t}.bind(this)).tickValues(i.values).tickSizeOuter(!1===i.outer?0:6))}.bind(this)),this.axesList[a]=l},e.updateAxes=function(){var t=this,d=this.owner,u=d.config,g=d.$el.main,f=d.$T;Object.keys(this.axesList).forEach(function(r){var o=this;D(this,t);var l=u["axis_"+r+"_axes"],c=d.scale[r].copy(),h=c.range();this.axesList[r].forEach(function(t,e){var i=this;D(this,o);var n=t.scale().range();h.every(function(t,e){return D(this,i),t===n[e]}.bind(this))||t.scale().range(h);var a=this.getAxisClassName(r)+"-"+(e+1),s=g.select("."+a.replace(/\s/,"."));s.empty()?s=g.append("g").attr("class",a).style("visibility",u["axis_"+r+"_show"]?null:"hidden").call(t):(l[e].domain&&c.domain(l[e].domain),f(s).call(t.scale(c))),s.attr("transform",d.getTranslate(r,e+1))}.bind(this))}.bind(this))},e.setAxis=function(t,e,i,n){var a=this.owner;"subX"!==t&&(this.tick[t]=this.getTickValues(t)),this[t]=this.getAxis(t,e,i,!("x"!==t||!(a.scale.zoom||a.config.subchart_show||a.state.resizing))||n)},e.getAxis=function(t,e,i,n,a){var s,r=this,o=this.owner,l=o.config,c=/^(x|subX)$/.test(t),h=c?"x":t,d=c&&this.isCategorized(),u=this.orient[t],a=a?0:o.getAxisTickRotate(h);c?s="subX"===t?o.format.subXAxisTick:o.format.xAxisTick:(g=l["axis_"+t+"_tick_format"],M(g)&&(s=g.bind(o.api)));var g=this.tick[h],a=Z({outerTick:i,noTransition:n,config:l,id:t,tickTextRotate:a,owner:o},c&&{isCategory:d,tickMultiline:l.axis_x_tick_multiline,tickWidth:l.axis_x_tick_width,tickTitle:d&&l.axis_x_tick_tooltip&&o.api.categories(),orgXScale:o.scale.x});c||(a.tickStepSize=l["axis_"+h+"_tick_stepSize"]);var f,u=new ai(a).scale(c&&o.scale.zoom||e).orient(u);c&&this.isTimeSeries()&&g&&!M(g)?(f=et.bind(o),g=g.map(function(t){return D(this,r),f(t)}.bind(this))):!c&&this.isTimeSeriesY()&&(u.ticks(l.axis_y_tick_time_value),g=null),g&&u.tickValues(g),u.tickFormat(s||!c&&o.isStackNormalized()&&function(t){return D(this,r),t+"%"}.bind(this)),d&&(u.tickCentered(l.axis_x_tick_centered),b(l.axis_x_tick_culling)&&(l.axis_x_tick_culling=!1));h=l["axis_"+h+"_tick_count"];return h&&u.ticks(h),u},e.updateXAxisTickValues=function(t,e){var i,n=this.owner,a=n.config,s=a.axis_x_tick_fit,a=a.axis_x_tick_count;return(s||a&&s)&&(i=n.mapTargetsToUniqueXs(t),this.isCategorized()&&a>i.length&&(a=i.length),i=this.generateTickValues(i,a,this.isTimeSeries())),e?e.tickValues(i):this.x&&(this.x.tickValues(i),null!=(e=this.subX)&&e.tickValues(i)),i},e.getId=function(t){var e=this.owner,i=e.config,e=e.scale,t=i.data_axes[t];return t=!t||!e[t]?"y":t},e.getXAxisTickFormat=function(t){var e,i=this,n=this.owner,a=n.config,s=n.format,r=t&&a.subchart_axis_x_tick_format||a.axis_x_tick_format,a=this.isTimeSeries(),o=this.isCategorized();return r?M(r)?e=r.bind(n.api):a&&(e=function(t){return D(this,i),t?s.axisTime(r)(t):""}.bind(this)):e=a?s.defaultAxisTime:o?n.categoryName:function(t){return D(this,i),t<0?t.toFixed(0):t}.bind(this),M(e)?function(t){return D(this,i),e.apply(n,o?[t,n.categoryName(t)]:[t])}.bind(this):e},e.getTickValues=function(t){var e=this.owner,i=e.config["axis_"+t+"_tick_values"],t=e[t+"Axis"];return(M(i)?i.call(e.api):i)||(t?t.tickValues():void 0)},e.getLabelOptionByAxisId=function(t){return this.owner.config["axis_"+t+"_label"]},e.getLabelText=function(t){t=this.getLabelOptionByAxisId(t);return u(t)?t:t?t.text:null},e.setLabelText=function(t,e){var i=this.owner.config,n=this.getLabelOptionByAxisId(t);u(n)?i["axis_"+t+"_label"]=e:n&&(n.text=e)},e.getLabelPosition=function(t,e){var i=this,n=this.owner.config.axis_rotated,t=this.getLabelOptionByAxisId(t),a=v(t)&&t.position?t.position:e[+!n],n=function(t){return D(this,i),!!~a.indexOf(t)}.bind(this);return{isInner:n("inner"),isOuter:n("outer"),isLeft:n("left"),isCenter:n("center"),isRight:n("right"),isTop:n("top"),isMiddle:n("middle"),isBottom:n("bottom")}},e.getAxisLabelPosition=function(t){return this.getLabelPosition(t,"x"===t?["inner-top","inner-right"]:["inner-right","inner-top"])},e.getLabelPositionById=function(t){return this.getAxisLabelPosition(t)},e.xForAxisLabel=function(t){var e=this.owner,i=e.state,n=i.width,a=i.height,s=this.getAxisLabelPosition(t),i=s.isMiddle?-a/2:0;return this.isHorizontal(e,"x"!==t)?i=s.isLeft?0:s.isCenter?n/2:n:s.isBottom&&(i=-a),i},e.dxForAxisLabel=function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isBottom?"0.5em":"0";return this.isHorizontal(e,"x"!==t)?n=i.isLeft?"0.5em":i.isRight?"-0.5em":"0":i.isTop&&(n="-0.5em"),n},e.textAnchorForAxisLabel=function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isMiddle?"middle":"end";return this.isHorizontal(e,"x"!==t)?n=i.isLeft?"start":i.isCenter?"middle":"end":i.isBottom&&(n="start"),n},e.dyForAxisLabel=function(t){var e,i=this.owner,n=i.config,a=n.axis_rotated,s=this.getAxisLabelPosition(t).isInner,r=n["axis_"+t+"_tick_rotate"]?i.getHorizontalAxisHeight(t):0,o=this.getMaxTickWidth(t);return e="x"===t?(i=n.axis_x_height,a?s?"1.2em":-25-o:s?"-0.5em":i?i-10:r?r-10:"3em"):(e={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[t],a?s?e[0]:r?r*("y2"===t?-1:1)-e[1]:e[2]:s?e[3]:(e[4]+(n["axis_"+t+"_inner"]?0:o+e[4]))*("y"===t?-1:1))},e.getMaxTickWidth=function(t,e){var i=this,n=this.owner,a=n.config,s=n.state.current,r=n.$el,o=r.svg,l=r.chart,c=s.maxTickWidths[t],h=0;if(e||!a["axis_"+t+"_show"]||0===n.filterTargetsToShow().length)return c.size;if(o){var d=/^y2?$/.test(t),r=n.filterTargetsToShow(n.data.targets),s=n.scale[t].copy().domain(n["get"+(d?"Y":"X")+"Domain"](r,t)),e=s.domain(),o=e[0]===e[1]&&e.every(function(t){return D(this,i),0<t}.bind(this)),n=B(c.domain)&&c.domain[0]===c.domain[1]&&c.domain.every(function(t){return D(this,i),0<t}.bind(this));if(o||n)return c.size;c.domain=e,d||c.ticks.splice(0);n=this.getAxis(t,s,!1,!1,!0),s=a["axis_"+t+"_tick_count"];!a["axis_"+t+"_tick_values"]&&s&&n.tickValues(this.generateTickValues(e,s,d?this.isTimeSeriesY():this.isTimeSeries())),d||this.updateXAxisTickValues(r,n);l=l.append("svg").style("visibility","hidden").style("position","fixed").style("top","0").style("left","0");n.create(l),l.selectAll("text").each(function(t,e){var i=this.getBoundingClientRect().width;h=Math.max(h,i),d||(c.ticks[e]=i)}),l.remove()}return 0<h&&(c.size=h),c.size},e.getXAxisTickTextY2Overflow=function(t){var e=this.owner,i=e.axis,n=e.config,a=e.state,s=e.getAxisTickRotate("x");if((i.isCategorized()||i.isTimeSeries())&&n.axis_x_tick_fit&&!n.axis_x_tick_culling&&!n.axis_x_tick_multiline&&0<s&&s<90){e=a.current.width-e.getCurrentPaddingLeft(),s=this.getXAxisTickMaxOverflow(s,e-t),t=Math.max(0,s)+t;return Math.min(t,e/2)}return 0},e.getXAxisTickMaxOverflow=function(t,e){for(var i=this.owner,n=i.axis,a=i.config,s=i.state,r=n.isTimeSeries(),o=s.current.maxTickWidths.x.ticks,l=o.length,n=s.axis.x.padding,c=n.left,h=n.right,d=0,u=l-(r&&a.axis_x_tick_fit?.5:0),g=0;g<l;g++){var f=g+1,p=Math.cos(Math.PI*t/180)*o[g],x=f-(r?1:.5)+c;x<=0||(x=(e-p)/x,d=Math.max(d,p-x/2-((u-f)*x+h*x)))}s=i.filterTargetsToShow(i.data.targets),n=0;return!r&&a.axis_x_tick_count<=s.length&&s[0].values.length&&(i=Ie(i.axis.getAxisType("x"),0,e-d).domain([-1*c,i.getXDomainMax(i.data.targets)+1+h]),n=Math.ceil((i(1)-i(0))/2)),d+n},e.updateLabels=function(n){var a=this,t=this.owner,e=t.$el.main,s=t.$T,r={x:e.select("."+lt.axisX+" ."+lt.axisXLabel),y:e.select("."+lt.axisY+" ."+lt.axisYLabel),y2:e.select("."+lt.axisY2+" ."+lt.axisY2Label)};Object.keys(r).filter(function(t){return D(this,a),!r[t].empty()}.bind(this)).forEach(function(t){var e=this;D(this,a);var i=r[t];s(i,n).attr("x",function(){return D(this,e),this.xForAxisLabel(t)}.bind(this)).attr("dx",function(){return D(this,e),this.dxForAxisLabel(t)}.bind(this)).attr("dy",function(){return D(this,e),this.dyForAxisLabel(t)}.bind(this)).text(function(){return D(this,e),this.getLabelText(t)}.bind(this))}.bind(this))},e.getPadding=function(t,e,i,n){t=X(t)?t:t[e];return z(t)?this.owner.convertPixelToScale(/(bottom|top)/.test(e)?"y":"x",t,n):i},e.generateTickValues=function(t,e,i){var n=this,a=t;if(e){e=M(e)?e():e;if(1===e)a=[t[0]];else if(2===e)a=[t[0],t[t.length-1]];else if(2<e){for(var s,r=this.isCategorized(),o=e-2,l=t[0],c=t[t.length-1],a=[l],h=0;h<o;h++)s=+l+(c-l)/(1+o)*(h+1),a.push(i?new Date(s):r?Math.round(s):s);a.push(c)}}return a=!i?a.sort(function(t,e){return D(this,n),t-e}.bind(this)):a},e.generateTransitions=function(e){var i=this,t=this.owner,n=t.$el.axis,a=t.$T,t=["x","y","y2","subX"].map(function(t){return D(this,i),a(n[t],e)}.bind(this));return{axisX:t[0],axisY:t[1],axisY2:t[2],axisSubX:t[3]}},e.redraw=function(n,t,a){var s=this,e=this.owner,r=e.config,o=e.$el,l=t?"0":null;["x","y","y2","subX"].forEach(function(t){D(this,s);var e=this[t],i=o.axis[t];e&&i&&(a||r.transition_duration||(e.config.withoutTransition=!0),i.style("opacity",l),e.create(n["axis"+Y(t)]))}.bind(this)),this.updateAxes()},e.redrawAxis=function(s,t,e,i,n){var r,o=this,l=this.owner,c=l.config,h=l.scale,a=l.$el,d=!!h.zoom;!d&&this.isCategorized()&&0===s.length&&h.x.domain([0,a.axis.x.selectAll(".tick").size()]),h.x&&s.length?(d||l.updateXDomain(s,t.UpdateXDomain,t.UpdateOrgXDomain,t.TrimXDomain),c.axis_x_tick_values||this.updateXAxisTickValues(s)):this.x&&(this.x.tickValues([]),null!=(d=this.subX)&&d.tickValues([])),c.zoom_rescale&&!i&&(r=h.x.orgDomain()),["y","y2"].forEach(function(t){var e=this;D(this,o);var i,n="axis_"+t+"_",a=h[t];a&&(i=c[n+"tick_values"],n=c[n+"tick_count"],a.domain(l.getYDomain(s,t,r)),!i&&n&&(t=l.axis[t],a=a.domain(),t.tickValues(this.generateTickValues(a,a.every(function(t){return D(this,e),0===t}.bind(this))?1:n,this.isTimeSeriesY()))))}.bind(this)),this.redraw(e,l.hasArcType(),n),this.updateLabels(t.Transition),(t.UpdateXDomain||t.UpdateXAxis||t.Y)&&s.length&&this.setCulling(),t.Y&&(null!=(t=h.subY)&&t.domain(l.getYDomain(s,"y")),null!=(t=h.subY2)&&t.domain(l.getYDomain(s,"y2")))},e.setCulling=function(){var h=this,t=this.owner,d=t.config,e=t.state,u=e.clip,g=e.current,f=t.$el;["subX","x","y","y2"].forEach(function(t){D(this,h);var e=f.axis[t],i="axis_"+("subX"===t?"x":t)+"_tick_culling",n=d[i];if(e&&n){var a,e=e.selectAll(".tick"),s=q(e.data()),r=s.length,o=d[i+"_max"],l=d[i+"_lines"];if(r){for(var c=1;c<r;c++)if(r/c<o){a=c;break}e.each(function(t){var e=l?this.querySelector("text"):this;e&&(e.style.display=s.indexOf(t)%a?"none":null)})}else e.style("display",null);"x"===t&&(t=g.maxTickWidths.x.clipPath?u.pathXAxisTickTexts:null,f.svg.selectAll("."+lt.axisX+" .tick text").attr("clip-path",t))}}.bind(this))},t}(),$e={initEventRect:function(){this.$el.main.select("."+st.chart).append("g").attr("class",vt.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t=this,e=t.config,i=t.state,n=t.$el,a=t.isMultipleX();n.eventRect?t.updateEventRect(n.eventRect,!0):(e=t.$el.main.select("."+vt.eventRects).style("cursor",e.zoom_enabled&&"drag"!==e.zoom_type?e.axis_rotated?"ns-resize":"ew-resize":null).classed(vt.eventRectsMultiple,a).classed(vt.eventRectsSingle,!a).selectAll("."+vt.eventRect).data([0]).enter().append("rect"),t.updateEventRect(e),a?t.generateEventRectsForMultipleXs(e):t.generateEventRectsForSingleX(e),e.call(t.getDraggableSelection()),n.eventRect=e,"touch"!==t.state.inputType||n.svg.on("touchstart.eventRect")||t.hasArcType()||t.bindTouchOnEventRect(a)),a||(a=t.getMaxDataCountTarget(),t.updateDataIndexByX(a),t.updateXs(a),null!=t.updatePointClass&&t.updatePointClass(!0),i.eventReceiver.data=a),t.updateEventRectData()},bindTouchOnEventRect:function(i){var n,a=this,s=this,r=s.config,o=s.state,t=s.$el,l=t.eventRect,e=t.svg,c=function(t){var e;D(this,a),i?s.selectRectForMultipleXs(t):(e=s.getDataIndexFromEvent(o.event),s.callOverOutForTouch(e),-1===e?s.unselectRect():s.selectRectForSingle(t,l,e))}.bind(this),h=function(){D(this,a),s.unselectRect(),s.callOverOutForTouch()}.bind(this),t=r.interaction_inputType_touch.preventDefault,d=f(t)&&t||!1,u=!isNaN(t)&&t||null,g=function(t){D(this,a);var e=t.type,i=t.changedTouches[0]["client"+(r.axis_rotated?"Y":"X")];"touchstart"===e?d?t.preventDefault():null!==u&&(n=i):"touchmove"===e&&(d||!0===n||null!==u&&Math.abs(n-i)>=u)&&(n=!0,t.preventDefault())}.bind(this);l.on("touchstart",function(t){D(this,a),o.event=t,s.updateEventRect()}.bind(this)).on("touchstart.eventRect touchmove.eventRect",function(t){D(this,a),o.event=t,!l.empty()&&l.classed(vt.eventRect)?o.dragging||o.flowing||s.hasArcType()||1<t.touches.length||(g(t),c(l.node())):h()}.bind(this),!0).on("touchend.eventRect",function(t){D(this,a),o.event=t,!l.empty()&&l.classed(vt.eventRect)&&(s.hasArcType()||!s.toggleShape||o.cancelClick)&&o.cancelClick&&(o.cancelClick=!1)}.bind(this),!0),e.on("touchstart",function(t){D(this,a);t=(o.event=t).target;t&&t!==l.node()&&h()}.bind(this))},updateEventRect:function(t,e){var i=this;void 0===e&&(e=!1);var n=this.state,a=this.$el,s=n.eventReceiver,r=n.width,o=n.height,l=n.rendered,n=n.resizing,c=t||a.eventRect,a=function(){D(this,i),s&&(s.rect=c.node().getBoundingClientRect())}.bind(this);l&&!n&&!e||(c.attr("x",0).attr("y",0).attr("width",r).attr("height",o),l||c.attr("class",vt.eventRect)),a()},updateEventRectData:function(){var i,n,a,s,e,r=this,o=this,t=o.config,l=o.scale,c=o.state,h=l.zoom||l.x,d=t.axis_rotated,u=o.isMultipleX()?(n=i=0,a=c.width,c.height):(t=o.axis.isCategorized()?(e=o.getEventRectWidth(),function(t){return D(this,r),h(t.x)-e/2}.bind(this)):(s=function(t){t=t.index;return D(this,r),{prev:o.getPrevX(t),next:o.getNextX(t)}}.bind(this),e=function(t){var i=this;D(this,r);var n=s(t),a=h.domain();return null===n.prev&&null===n.next?d?c.height:c.width:(Object.keys(n).forEach(function(t,e){D(this,i),n[t]=null!=(t=n[t])?t:a[e]}.bind(this)),Math.max(0,(h(n.next)-h(n.prev))/2))}.bind(this),function(t){D(this,r);var e=s(t),t=t.x;return null===e.prev&&null===e.next?0:(null===e.prev&&(e.prev=h.domain()[0]),(h(t)+h(e.prev))/2)}.bind(this)),i=d?0:t,n=d?t:0,a=d?c.width:e,d?e:c.height),g=c.eventReceiver,f=function(t,e){return D(this,r),M(t)?t(e):t}.bind(this);g.coords.splice(g.data.length),g.data.forEach(function(t,e){D(this,r),g.coords[e]={x:f(i,t),y:f(n,t),w:f(a,t),h:f(u,t)}}.bind(this))},selectRectForMultipleXs:function(t){var e,i,n=this,a=this,s=a.config,r=a.state,o=a.filterTargetsToShow(a.data.targets);r.dragging||a.hasArcType(o)||(e=A(r.event,t),i=a.findClosestFromTargets(o,e),!r.mouseover||i&&i.id===r.mouseover.id||(s.data_onout.call(a.api,r.mouseover),r.mouseover=void 0),i?(o=(a.isBubbleType(i)||a.isScatterType(i)||!s.tooltip_grouped?[i]:a.filterByX(o,i.x)).map(function(t){return D(this,n),a.addName(t)}.bind(this)),a.showTooltip(o,t),a.setExpand(i.index,i.id,!0),a.showGridFocus(o),(a.isBarType(i.id)||a.dist(i,e)<s.point_sensitivity)&&(a.$el.svg.select("."+vt.eventRect).style("cursor","pointer"),r.mouseover||(s.data_onover.call(a.api,i),r.mouseover=i))):a.unselectRect())},unselectRect:function(){var t=this.config,e=this.$el,i=e.circle,e=e.tooltip;this.$el.svg.select("."+vt.eventRect).style("cursor",null),this.hideGridFocus(),e&&(this.hideTooltip(),this._handleLinkedCharts(!1)),i&&!t.point_focus_only&&this.unexpandCircles(),this.expandBarTypeShapes(!1)},generateEventRectsForSingleX:function(t){var s,e=this,r=this,o=r.config,l=r.state,c=l.eventReceiver,h=t.style("cursor",o.data_selection_enabled&&o.data_selection_grouped?"pointer":null).on("click",function(t){l.event=t;var e=c.currentIdx,e=c.data[-1===e?r.getDataIndexFromEvent(t):e];r.clickHandlerForSingleX.bind(this)(e,r)});return"mouse"===l.inputType&&(s=function(t){D(this,e);t=t?r.getDataIndexFromEvent(t):c.currentIdx;return-1<t?c.data[t]:null}.bind(this),h.on("mouseover",function(t){D(this,e),l.event=t,r.updateEventRect()}.bind(this)).on("mousemove",function(t){var e,i,n,a=s(t);l.event=t,a&&(e=a.index,i=o.line_step_type,o.line_step_tooltipMatch&&r.hasType("step")&&/^step\-(before|after)$/.test(i)&&(n=r.scale.zoom||r.scale.x,a=r.axis.xs[e],t=n.invert(A(t,this)[0]),"step-after"===i&&t<a?--e:"step-before"===i&&a<t&&(e+=1)),l.dragging||l.flowing||r.hasArcType()||o.tooltip_grouped&&e===c.currentIdx||(e!==c.currentIdx&&(r.setOverOut(!1,c.currentIdx),c.currentIdx=e),-1===e?r.unselectRect():r.selectRectForSingle(this,h,e),r.setOverOut(-1!==e,e)))}).on("mouseout",function(t){D(this,e),l.event=t,o&&!r.hasArcType()&&-1!==c.currentIdx&&(r.unselectRect(),r.setOverOut(!1,c.currentIdx),c.currentIdx=-1)}.bind(this))),h},clickHandlerForSingleX:function(t,e){var i,n=e,a=n.config,s=n.state,e=n.$el.main;!t||n.hasArcType()||s.cancelClick?s.cancelClick&&(s.cancelClick=!1):(i=t.index,e.selectAll("."+kt.shape+"-"+i).each(function(t){(a.data_selection_grouped||n.isWithinShape(this,t))&&(null!=n.toggleShape&&n.toggleShape(this,t,i),a.data_onclick.bind(n.api)(t,this))}))},generateEventRectsForMultipleXs:function(t){var e=this,i=this,n=i.state;t.on("click",function(t){n.event=t,i.clickHandlerForMultipleXS.bind(this)(i)}),"mouse"===n.inputType&&t.on("mouseover mousemove",function(t){n.event=t,i.selectRectForMultipleXs(this)}).on("mouseout",function(t){D(this,e),n.event=t,i.config&&!i.hasArcType()&&i.unselectRect()}.bind(this))},clickHandlerForMultipleXS:function(t){var e,i=t,n=i.config,a=i.state,t=i.filterTargetsToShow(i.data.targets);i.hasArcType(t)||(a=A(a.event,this),(e=i.findClosestFromTargets(t,a))&&(i.isBarType(e.id)||i.dist(e,a)<n.point_sensitivity)&&i.$el.main.selectAll("."+kt.shapes+i.getTargetSelectorSuffix(e.id)).selectAll("."+kt.shape+"-"+e.index).each(function(){(n.data_selection_grouped||i.isWithinShape(this,e))&&(null!=i.toggleShape&&i.toggleShape(this,e,e.index),n.data_onclick.bind(i.api)(e,this))}))}},ri=On(11),Fe={generateFlow:function(t){var i=this,s=i.data,r=i.state,o=i.$el;return function(){var n=this,e=t.flow.length;r.flowing=!0,s.targets.forEach(function(t){D(this,n),t.values.splice(0,e)}.bind(this)),i.updateXGrid&&i.updateXGrid(!0);var a={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(function(t){D(this,n);var e=t.split("."),i=o[e[0]];null!=(i=i&&1<e.length?i[e[1]]:i)&&i.size()&&(a[t]=i)}.bind(this)),i.hideGridFocus(),i.setFlowList(a,t)}},setFlowList:function(i,t){var n,a=this,s=this,e=t.flow,r=t.targets,o=e.duration,l=void 0===o?t.duration:o,c=e.index,o=e.length,e=e.orgDataCount,h=s.getFlowTransform(r,e,c,o),o=se();o.add(Object.keys(i).map(function(t){var e=this;return D(this,a),n=i[t].transition().ease(ri.easeLinear).duration(l),n="axis.x"===t?n.call(function(t){D(this,e),s.axis.x.setTransition(t).create(t)}.bind(this)):("region.list"===t?n.filter(s.isRegionOnX):n).attr("transform",h)}.bind(this))),n.call(o,function(){D(this,a),s.cleanUpFlow(i,t)}.bind(this))},cleanUpFlow:function(s,t){var r=this,o=this,l=o.config,c=o.state,n=o.$el.svg,h=l.axis_rotated,e=t.flow,d=t.shape,u=t.xv,t=d.pos,g=t.cx,f=t.cy,p=t.xForText,x=t.yForText,t=e,e=t.done,e=void 0===e?function(){D(this,r)}.bind(this):e,a=t.length;a&&(["circle","text","shape","eventRect"].forEach(function(t){D(this,r);for(var e=[],i=0;i<a;i++)e.push("."+Lt[t]+"-"+i);n.selectAll("."+Lt[t+"s"]).selectAll(e).remove()}.bind(this)),n.select("."+Lt.xgrid).remove()),Object.keys(s).forEach(function(t){var e=this;D(this,r);var i,n,a=s[t];"axis.x"!==t&&a.attr("transform",null),"grid.x"===t?a.attr(c.xgridAttr):"gridLines.x"===t?a.attr("x1",h?0:u).attr("x2",h?c.width:u):"gridLines.x"===t?(a.select("line").attr("x1",h?0:u).attr("x2",h?c.width:u),a.select("text").attr("x",h?c.width:0).attr("y",u)):/^(area|bar|line)$/.test(t)?a.attr("d",d.type[t]):"text"===t?a.attr("x",p).attr("y",x).style("fill-opacity",o.opacityForText.bind(o)):"circle"===t?o.isCirclePoint()?a.attr("cx",g).attr("cy",f):(i=function(t){return D(this,e),g(t)-l.point_r}.bind(this),n=function(t){return D(this,e),f(t)-l.point_r}.bind(this),a.attr("x",i).attr("y",n).attr("cx",g).attr("cy",f)):"region.list"===t&&a.select("rect").filter(o.isRegionOnX).attr("x",o.regionX.bind(o)).attr("width",o.regionWidth.bind(o))}.bind(this)),l.interaction_enabled&&o.redrawEventRect(),e.call(o.api),c.flowing=!1},getFlowTransform:function(t,e,i,n){var a=this.data,s=this.scale.x,r=a.targets[0].values,a=this.getValueOnIndex(r,i),i=this.getValueOnIndex(r,i+n),n=s.domain(),t=this.updateXDomain(t,!0,!0);return"translate("+(e?1===e||(null==a?void 0:a.x)===(null==i?void 0:i.x)||this.axis.isTimeSeries()?s(n[0])-s(t[0]):s((null==a?void 0:a.x)||0)-s(i.x):1!==r.length?s(n[0])-s(t[0]):this.axis.isTimeSeries()?(a=this.getValueOnIndex(r,0),i=this.getValueOnIndex(r,r.length-1),s(a.x)-s(i.x)):R(t)/2)+",0) scale("+R(n)/R(t)+",1)"}},Ne={initClip:function(){var t=this.state.clip;t.id=this.state.datetimeId+"-clip",t.idXAxis=t.id+"-xaxis",t.idYAxis=t.id+"-yaxis",t.idGrid=t.id+"-grid",t.path=this.getClipPath(t.id),t.pathXAxis=this.getClipPath(t.idXAxis),t.pathYAxis=this.getClipPath(t.idYAxis),t.pathGrid=this.getClipPath(t.idGrid)},getClipPath:function(t){var e=this.config;return!e.clipPath&&/-clip$/.test(t)||!e.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!e.axis_y_clipPath&&/-clip-yaxis$/.test(t)?null:"url("+(!!c.navigator&&0<=c.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":p.URL.split("#")[0])+"#"+t+")"},appendClip:function(t,e){e&&t.append("clipPath").attr("id",e).append("rect")},setXAxisClipPath:function(t){var e=this.config,i=this.state,n=i.margin,a=i.width,s=i.height,r=e.axis_rotated,o=Math.max(30,n.left)-(r?0:20),i=r?-(1+o):-(o-1),e=-Math.max(15,n.top),o=r?n.left+20:a+10+o,n=(r?n.top+s+10:n.bottom)+20;t.attr("x",i).attr("y",e).attr("width",o).attr("height",n)},setYAxisClipPath:function(t){var e=this.config,i=this.state,n=i.margin,a=i.width,s=i.height,r=e.axis_rotated,o=Math.max(30,n.left)-(r?20:0),i=e.axis_y_inner,e=-(r?20:n.top),a=(r?a+15+o:n.left+20)+(i?20:0),s=(r?n.bottom:n.top+s)+10;t.attr("x",i?-1:r?-(1+o):-(o-1)).attr("y",e).attr("width",a).attr("height",s)},updateXAxisTickClip:function(){var t=this,e=t.config,i=t.state,n=i.clip,a=i.xAxisHeight,s=t.$el.defs,r=t.getHorizontalAxisHeight("x");s&&!n.idXAxisTickTexts&&(i=n.id+"-xaxisticktexts",t.appendClip(s,i),n.pathXAxisTickTexts=t.getClipPath(n.idXAxisTickTexts),n.idXAxisTickTexts=i),!e.axis_x_tick_multiline&&t.getAxisTickRotate("x")&&r!==a&&(t.setXAxisTickClipWidth(),t.setXAxisTickTextClipPathWidth()),t.state.xAxisHeight=r},setXAxisTickClipWidth:function(){var t=this.config,e=this.state.current.maxTickWidths,i=this.getAxisTickRotate("x");!t.axis_x_tick_multiline&&i?(i=Math.sin(Math.PI/180*Math.abs(i)),e.x.clipPath=(this.getHorizontalAxisHeight("x")-20)/i):e.x.clipPath=null},setXAxisTickTextClipPathWidth:function(){var t=this.state,e=t.clip,i=t.current,t=this.$el.svg;t&&t.select("#"+e.idXAxisTickTexts+" rect").attr("width",i.maxTickWidths.x.clipPath).attr("height",30)}},oi=function(t){return D(this,void 0),z(t.position)||"end"}.bind(void 0),li=function(t){return D(this,void 0),"start"===t.position?4:"middle"===t.position?0:-4}.bind(void 0);function ci(i,n,a){var s=this;return function(t){D(this,s);var e=i?0:n;return"start"===t.position?e=i?-a:0:"middle"===t.position&&(e=(i?-a:n)/2),e}.bind(this)}function hi(t,e){"grid"===e&&t.each(function(){var e=this,i=(0,I.select)(this);["x1","x2","y1","y2"].forEach(function(t){return D(this,e),i.attr(t,Math.ceil(+i.attr(t)))}.bind(this))})}Ge={hasGrid:function(){var e=this,i=this.config;return["x","y"].some(function(t){return D(this,e),i["grid_"+t+"_show"]||i["grid_"+t+"_lines"].length}.bind(this))},initGrid:function(){this.hasGrid()&&this.initGridLines(),this.initFocusGrid()},initGridLines:function(){var t=this.config,e=this.state.clip,i=this.$el;(t.grid_x_lines.length||t.grid_y_lines.length)&&(i.gridLines.main=i.main.insert("g","."+st.chart+(t.grid_lines_front?" + *":"")).attr("clip-path",e.pathGrid).attr("class",_t.grid+" "+_t.gridLines),i.gridLines.main.append("g").attr("class",_t.xgridLines),i.gridLines.main.append("g").attr("class",_t.ygridLines),i.gridLines.x=(0,I.selectAll)([]))},updateXGrid:function(t){var e=this,i=this.config,n=this.scale,a=this.state,s=this.$el,r=s.main,o=s.grid,l=i.axis_rotated,s=this.generateGridData(i.grid_x_type,n.x),c=this.axis.isCategorized()?this.axis.x.tickOffset():0,i=function(t){return D(this,e),(n.zoom||n.x)(t)+c*(l?-1:1)}.bind(this);a.xgridAttr=l?{x1:0,x2:a.width,y1:i,y2:i}:{x1:i,x2:i,y1:0,y2:a.height},o.x=r.select("."+_t.xgrids).selectAll("."+_t.xgrid).data(s),o.x.exit().remove(),o.x=o.x.enter().append("line").attr("class",_t.xgrid).merge(o.x),t||o.x.each(function(){var i=this,n=(0,I.select)(this);Object.keys(a.xgridAttr).forEach(function(t){var e=this;D(this,i),n.attr(t,a.xgridAttr[t]).style("opacity",function(){return D(this,e),n.attr(l?"y1":"x1")===(l?a.height:0)?"0":null}.bind(this))}.bind(this))})},updateYGrid:function(){var e=this,t=this.axis,i=this.config,n=this.scale,a=this.state,s=this.$el,r=s.grid,o=s.main,l=i.axis_rotated,s=function(t){return D(this,e),Math.ceil(n.y(t))}.bind(this),i=t.y.getGeneratedTicks(i.grid_y_ticks)||this.scale.y.ticks(i.grid_y_ticks);r.y=o.select("."+_t.ygrids).selectAll("."+_t.ygrid).data(i),r.y.exit().remove(),r.y=r.y.enter().append("line").attr("class",_t.ygrid).merge(r.y),r.y.attr("x1",l?s:0).attr("x2",l?s:a.width).attr("y1",l?0:s).attr("y2",l?a.height:s),hi(r.y,"grid")},updateGrid:function(){var t=this.$el,e=t.grid;t.gridLines.main||this.initGridLines(),e.main.style("visibility",this.hasArcType()?"hidden":null),this.hideGridFocus(),this.updateXGridLines(),this.updateYGridLines()},updateXGridLines:function(){var e=this,t=this.config,i=this.$el,n=i.gridLines,a=i.main,s=this.$T,i=t.axis_rotated;t.grid_x_show&&this.updateXGrid();a=a.select("."+_t.xgridLines).selectAll("."+_t.xgridLine).data(t.grid_x_lines);s(a.exit()).style("opacity","0").remove();t=a.enter().append("g");t.append("line").style("opacity","0"),t.append("text").attr("transform",i?"":"rotate(-90)").attr("dy",-5).style("opacity","0"),s((a=t.merge(a)).attr("class",function(t){return D(this,e),(_t.xgridLine+" "+(t.class||"")).trim()}.bind(this)).select("text").attr("text-anchor",oi).attr("dx",li)).text(function(t){return D(this,e),t.text}.bind(this)).style("opacity",null),n.x=a},updateYGridLines:function(){var e=this,t=this.config,i=this.state,n=i.width,a=i.height,s=this.$el,r=this.$T,o=t.axis_rotated;t.grid_y_show&&this.updateYGrid(),r((i=s.main.select("."+_t.ygridLines).selectAll("."+_t.ygridLine).data(t.grid_y_lines)).exit()).style("opacity","0").remove();t=i.enter().append("g");t.append("line").style("opacity","0"),t.append("text").attr("transform",o?"rotate(-90)":"").style("opacity","0");i=t.merge(i),t=this.yv.bind(this);r(i.attr("class",function(t){return D(this,e),(_t.ygridLine+" "+(t.class||"")).trim()}.bind(this)).select("line")).attr("x1",o?t:0).attr("x2",o?t:n).attr("y1",o?0:t).attr("y2",o?a:t).style("opacity",null),r(i.select("text").attr("text-anchor",oi).attr("dx",li)).attr("dy",-5).attr("x",ci(o,n,a)).attr("y",t).text(function(t){return D(this,e),t.text}.bind(this)).style("opacity",null),s.gridLines.y=i},redrawGrid:function(t){var e=this,i=this.config.axis_rotated,n=this.state,a=n.width,s=n.height,r=this.$el.gridLines,o=this.$T,l=this.xv.bind(this),n=r.x.select("line"),r=r.x.select("text"),n=o(n,t).attr("x1",i?0:l).attr("x2",i?a:l).attr("y1",i?l:0).attr("y2",i?l:s),r=o(r,t).attr("x",ci(!i,a,s)).attr("y",l).text(function(t){return D(this,e),t.text}.bind(this));return[n.style("opacity",null),r.style("opacity",null)]},initFocusGrid:function(){var t=this.config,e=this.state.clip,i=this.$el,n=t.grid_front,n="."+(n&&i.gridLines.main?_t.gridLines:st.chart)+(n?" + *":""),e=i.main.insert("g",n).attr("clip-path",e.pathGrid).attr("class",_t.grid);i.grid.main=e,t.grid_x_show&&e.append("g").attr("class",_t.xgrids),t.grid_y_show&&e.append("g").attr("class",_t.ygrids),t.interaction_enabled&&t.grid_focus_show&&(e.append("g").attr("class",bt.xgridFocus).append("line").attr("class",bt.xgridFocus),t.grid_focus_y&&!t.tooltip_grouped&&e.append("g").attr("class",bt.ygridFocus).append("line").attr("class",bt.ygridFocus))},showGridFocus:function(t){var s,r,e=this,o=this,i=o.config,n=o.state,l=n.width,c=n.height,h=i.axis_rotated,a=o.$el.main.selectAll("line."+bt.xgridFocus+", line."+bt.ygridFocus),n=(t||[a.datum()]).filter(function(t){return D(this,e),t&&z(o.getBaseValue(t))}.bind(this));!i.tooltip_show||0===n.length||o.hasType("bubble")||o.hasArcType()||(s=i.grid_focus_edge&&!i.tooltip_grouped,r=o.xx.bind(o),a.style("visibility",null).data(n.concat(n)).each(function(t){var i,n=this,a=(0,I.select)(this),e={x:r(t),y:o.getYScaleById(t.id)(t.value)};i=a.classed(bt.xgridFocus)?h?[null,e.x,s?e.y:l,e.x]:[e.x,s?e.y:null,e.x,c]:(t="y2"===o.axis.getId(t.id),h?[e.y,s&&!t?e.x:null,e.y,s&&t?e.x:c]:[s&&t?e.x:null,e.y,s&&!t?e.x:l,e.y]),["x1","y1","x2","y2"].forEach(function(t,e){return D(this,n),a.attr(t,i[e])}.bind(this))}),hi(a,"grid"),null!=o.showCircleFocus&&o.showCircleFocus(t))},hideGridFocus:function(){var t=this.state,e=t.inputType,i=t.resizing,t=this.$el.main;"mouse"!==e&&i||(t.selectAll("line."+bt.xgridFocus+", line."+bt.ygridFocus).style("visibility","hidden"),null!=this.hideCircleFocus&&this.hideCircleFocus())},updateGridFocus:function(){var t=this.state,e=t.inputType,i=t.width,n=t.height,a=t.resizing,t=this.$el.grid.main.select("line."+bt.xgridFocus);return"touch"===e?t.empty()?a&&null!=this.showCircleFocus&&this.showCircleFocus():this.showGridFocus():(a=this.config.axis_rotated,t.attr("x1",a?0:-10).attr("x2",a?i:-10).attr("y1",a?-10:0).attr("y2",a?-10:n)),!0},generateGridData:function(t,e){var i=this,n=this.$el.main.select("."+lt.axisX).selectAll(".tick").size(),a=[];if("year"===t)for(var s=this.getXDomain().map(function(t){return D(this,i),t.getFullYear()}.bind(this)),t=s[0],r=s[1],o=t;o<=r;o++)a.push(new Date(o+"-01-01 00:00:00"));else(a=e.ticks(10)).length>n&&(a=a.filter(function(t){return D(this,i),(t+"").indexOf(".")<0}.bind(this)));return a},getGridFilterToRemove:function(t){var a=this;return(t?function(e){var i=this;D(this,a);var n=!1;return(B(t)?t.concat():[t]).forEach(function(t){D(this,i),("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(n=!0)}.bind(this)),n}:function(){return D(this,a),!0}).bind(this)},removeGridLines:function(t,e){var i=this,n=this.config,a=this.$T,s=this.getGridFilterToRemove(t),r=function(t){return D(this,i),!s(t)}.bind(this),t=e?_t.xgridLine:_t.ygridLine;a(this.$el.main.select("."+(e?_t.xgridLines:_t.ygridLines)).selectAll("."+t).filter(s)).style("opacity","0").remove();e="grid_"+(e?"x":"y")+"_lines";n[e]=n[e].filter(r)}},je={initRegion:function(){var t=this.$el;t.region.main=t.main.insert("g",":first-child").attr("clip-path",this.state.clip.path).attr("class",wt.regions)},updateRegion:function(){var t=this.config,e=this.$el.region,i=this.$T;e.main||this.initRegion(),e.main.style("visibility",this.hasArcType()?"hidden":null);t=e.main.selectAll("."+wt.region).data(t.regions);i(t.exit()).style("opacity","0").remove(),(t=t.enter().append("g").merge(t).attr("class",this.classRegion.bind(this))).append("rect").style("fill-opacity","0"),e.list=t},redrawRegion:function(t){var e=this,i=this,n=i.$el.region;return[(0,i.$T)(n.list.select("rect"),t).attr("x",i.regionX.bind(i)).attr("y",i.regionY.bind(i)).attr("width",i.regionWidth.bind(i)).attr("height",i.regionHeight.bind(i)).style("fill-opacity",function(t){return D(this,e),z(t.opacity)?t.opacity:null}.bind(this)).on("end",function(){(0,I.select)(this.parentNode).selectAll("rect:not([x])").remove()})]},getRegionXY:function(t,e){var i=this.config,n=this.scale,a=i.axis_rotated,s="x"===t,i="start",t=0;return"y"===e.axis||"y2"===e.axis?(s||(i="end"),(s?a:!a)&&i in e&&(t=(0,n[e.axis])(e[i]))):(s?!a:a)&&i in e&&(t=(n.zoom||n.x)(this.axis.isTimeSeries()?et.call(this,e[i]):e[i])),t},regionX:function(t){return this.getRegionXY("x",t)},regionY:function(t){return this.getRegionXY("y",t)},getRegionSize:function(t,e){var i=this.config,n=this.scale,a=this.state,s=i.axis_rotated,r="width"===t,o=this[r?"regionX":"regionY"](e),i="end",t=a[t];return"y"===e.axis||"y2"===e.axis?(r||(i="start"),(r?s:!s)&&i in e&&(t=(0,n[e.axis])(e[i]))):(r?!s:s)&&i in e&&(t=(n.zoom||n.x)(this.axis.isTimeSeries()?et.call(this,e[i]):e[i])),t<o?0:t-o},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},isRegionOnX:function(t){return!t.axis||"x"===t.axis}},Ye={getAxisSize:function(t){var e=this.config.axis_rotated;return e&&"x"===t||!e&&/y2?/.test(t)?this.getAxisWidthByAxisId(t,!0):this.getHorizontalAxisHeight(t)},getAxisWidthByAxisId:function(t,e){if(this.axis){var i=null==(i=this.axis)?void 0:i.getLabelPositionById(t),e=this.axis.getMaxTickWidth(t,e);return e+(i.isInner?20+(0===e?.5:0):40)}return 40},getHorizontalAxisHeight:function(t){var e=this.config,i=this.state,n=i.current,a=i.rotatedPadding,s=i.isLegendRight,r=i.isLegendInset,o=e.axis_rotated,i=30;if("x"===t&&!e.axis_x_show)return 8;if("x"===t&&e.axis_x_height)return e.axis_x_height;if("y"===t&&!e.axis_y_show)return!e.legend_show||s||r?1:10;if("y2"===t&&!e.axis_y2_show)return a.top;a=this.getAxisTickRotate(t);return("x"===t&&!o||/y2?/.test(t)&&o)&&a&&(i=30+this.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(a))/180),!e.axis_x_tick_multiline&&n.height&&i>n.height/2&&(i=n.height/2)),i+(this.axis.getLabelPositionById(t).isInner?0:10)+("y2"!==t||o?0:-10)},getEventRectWidth:function(){return Math.max(0,this.axis.x.tickInterval())},getAxisTickRotate:function(t){var e,i,n=this.axis,a=this.config,s=this.state,r=this.$el,o=a["axis_"+t+"_tick_rotate"];return"x"===t&&(e=n.isCategorized()||n.isTimeSeries(),a.axis_x_tick_fit&&e&&(i=a.axis_x_tick_count,t=s.current.maxTickWidths.x.ticks.length,n=0,i?n=t<i?t:i:t&&(n=t),n!==s.axis.x.tickCount&&(t=this.data.targets,s.axis.x.padding=this.getXDomainPadding([this.getXDomainMinMax(t,"min"),this.getXDomainMinMax(t,"max")],n)),s.axis.x.tickCount=n),r.svg&&a.axis_x_tick_fit&&!a.axis_x_tick_multiline&&!a.axis_x_tick_culling&&a.axis_x_tick_autorotate&&e&&(o=this.needToRotateXAxisTickTexts()?a.axis_x_tick_rotate:0)),o},needToRotateXAxisTickTexts:function(){var t=this.state,e=t.axis,t=t.current.width-this.getCurrentPaddingLeft(!1)-this.getCurrentPaddingRight(),e=e.x.tickCount+e.x.padding.left+e.x.padding.right;return(e?t/e:0)<this.axis.getMaxTickWidth("x")}},ye={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_culling_lines:!0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},ke={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_culling_lines:!0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]};function di(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function ui(e){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?di(Object(i),!0).forEach(function(t){a(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):di(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))});return e}var ke=ui(ui(ui({axis_rotated:!1},{axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_culling_lines:!0,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]}),ye),ke),gi=[Se,{category:function(t,e){var i=this.internal,n=i.config;return 1<arguments.length&&(n.axis_x_categories[t]=e,i.redraw()),n.axis_x_categories[t]},categories:function(t){var e=this.internal,i=e.config;return arguments.length&&(i.axis_x_categories=t,e.redraw()),i.axis_x_categories}},me,Re,Me,Le,Pe,De],fi=[Xe,Ne,$e,Fe,Ge,je,Ye],pi=[{data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},ke,{grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:void 0,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0}],xi=On(12),vi={initPie:function(){var e=this,t=this.config,i=t.data_type,n=t[i+"_padding"],a=t[i+"_startingAngle"]||0,i=(n?.01*n:t[i+"_padAngle"])||0;this.pie=(0,ze.pie)().startAngle(a).endAngle(a+2*Math.PI).padAngle(i).value(function(t){var i=this;return D(this,e),t.values.reduce(function(t,e){return D(this,i),t+e.value}.bind(this),0)}.bind(this)).sort(this.getSortCompareFn.bind(this)(!0))},updateRadius:function(){var t=this.config,e=this.state,i=t[t.data_type+"_padding"],n=t.gauge_width||t.donut_width,a=this.filterTargetsToShow(this.data.targets).length*t.gauge_arcs_minWidth;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2*(this.hasMultiArcGauge()&&t.gauge_label_show?.85:1),e.radius=.95*e.radiusExpanded,e.innerRadiusRatio=n?(e.radius-n)/e.radius:.6,e.gaugeArcWidth=n||(a<=e.radius-e.innerRadius?e.radius-e.innerRadius:a<=e.radius?a:e.radius);i=t.pie_innerRadius||(i?i*(e.innerRadiusRatio+.1):0);e.outerRadius=t.pie_outerRadius,e.innerRadius=this.hasType("donut")||this.hasType("gauge")?e.radius*e.innerRadiusRatio:i},getRadius:function(t){var e=null==t?void 0:t.data,i=this.state,t=i.innerRadius,i=i.outerRadius;return!X(t)&&e&&(t=t[e.id]||0),N(i)&&e&&e.id in i?i=i[e.id]:X(i)||(i=this.state.radius),{innerRadius:t,outerRadius:i}},updateArc:function(){this.updateRadius(),this.svgArc=this.getSvgArc(),this.svgArcExpanded=this.getSvgArcExpanded()},getArcLength:function(){var t=3.6*this.config.gauge_arcLength,e=t/360*2;return t<-360?e=-2:360<t&&(e=2),e*Math.PI},getStartAngle:function(){var t=this.config,e=t.gauge_fullCircle,i=-1*Math.PI/2,n=Math.PI/2,t=t.gauge_startingAngle;return!e&&t<=i?t=i:!e&&n<=t?t=n:(t>Math.PI||t<-1*Math.PI)&&(t=Math.PI),t},updateAngle:function(t){var i=this,e=this,n=e.config,a=e.state,s=e.pie,r=t,o=!1;if(!n)return null;var l,c=e.getStartAngle(),h=n.gauge_fullCircle?e.getArcLength():-2*c;return r.data&&e.isGaugeType(r.data)&&!e.hasMultiArcGauge()&&(l=n.gauge_min,t=n.gauge_max,a=e.getTotalDataSum(a.rendered),s=s.startAngle(c).endAngle(h*((a-l)/(t-l))+c)),s(e.filterTargetsToShow()).forEach(function(t,e){D(this,i),o||t.data.id!==r.data.id||(o=!0,(r=t).index=e)}.bind(this)),isNaN(r.startAngle)&&(r.startAngle=0),isNaN(r.endAngle)&&(r.endAngle=r.startAngle),r.data&&e.hasMultiArcGauge()&&(s=n.gauge_min,e=n.gauge_max,n=r.value<s?0:r.value<e?r.value-s:e-s,r.startAngle=c,r.endAngle=c+h/(e-s)*n),o?r:null},getSvgArc:function(){function t(t,e){var i,n="M 0 0";return(t.value||t.data)&&(i=!e&&a.updateAngle(t),e?n=c(t):i&&(n=c(i))),n}var n=this,a=this,s=a.state,r=s.gaugeArcWidth/a.filterTargetsToShow(a.data.targets).length,o=a.hasMultiArcGauge(),l=a.hasType("polar"),c=(0,ze.arc)().innerRadius(function(t){D(this,n);var e=a.getRadius(t).innerRadius;return o?s.radius-r*(t.index+1):X(e)?e:0}.bind(this)).outerRadius(function(t){D(this,n);var e=a.getRadius(t).outerRadius,i=e;return o?i=s.radius-r*t.index:l&&(i=a.getPolarOuterRadius(t,e)),i}.bind(this));return t.centroid=c.centroid,t},getSvgArcExpanded:function(t){var i=this,n=this,a=n.state,s=t||1,r=a.gaugeArcWidth/n.filterTargetsToShow(n.data.targets).length,o=n.hasMultiArcGauge(),l=Math.min(a.radiusExpanded*s-a.radius,.8*r-100*(1-s)),e=(0,ze.arc)().innerRadius(function(t){return D(this,i),o?a.radius-r*(t.index+1):n.getRadius(t).innerRadius}.bind(this)).outerRadius(function(t){var e;return D(this,i),o?a.radius-r*t.index+l:(e=n.getRadius(t).outerRadius,t=a.radiusExpanded,a.radius!==e&&(t-=Math.abs(a.radius-e)),t*s)}.bind(this));return function(t){t=n.updateAngle(t);return t?e(t):"M 0 0"}},getArc:function(t,e,i){return i||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},transformForArcLabel:function(t){var e,i,n,a=this,s=this,r=s.config,o=s.state.radiusExpanded,l=s.updateAngle(t),c="";return l&&(s.hasMultiArcGauge()?(e=Math.sin(l.endAngle-Math.PI/2),c="translate("+(n=Math.cos(l.endAngle-Math.PI/2)*(o+25))+","+(i=e*(o+15-Math.abs(10*e))+3)+")"):(!s.hasType("gauge")||1<s.data.targets.length)&&(e=s.getRadius(t).outerRadius,s.hasType("polar")&&(e=s.getPolarOuterRadius(t,e)),n=(l=this.svgArc.centroid(l).map(function(t){return D(this,a),isNaN(t)?0:t}.bind(this)))[0],i=l[1],l=Math.sqrt(n*n+i*i),c="translate("+n*(n=(n=null==(n=["donut","pie","polar"].filter(s.hasType.bind(s)).map(function(t){return D(this,a),r[t+"_label_ratio"]}.bind(this)))?void 0:n[0])?M(n)?n.bind(s.api)(t,e,l):n:e&&(l?(.375<36/e?1.175-36/e:.8)*e/l:0))+","+i*n+")")),c},convertToArcData:function(t){return this.addName({id:(t.data||t).id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},textForArcLabel:function(t){var s=this,r=s.hasType("gauge");s.shouldShowArcLabel()&&t.style("fill",s.updateTextColor.bind(s)).attr("filter",s.updateTextBacgroundColor.bind(s)).each(function(t){var e,i=(0,I.select)(this),n=s.updateAngle(t),a=s.getRatio("arc",n);s.meetsLabelThreshold(a,null==(e=["donut","gauge","pie","polar"].filter(s.hasType.bind(s)))?void 0:e[0])?(n=(n||t).value,T(i,(s.getArcLabelFormat()||s.defaultArcValueFormat)(n,a,t.data.id).toString(),[-1,1],r)):i.text("")})},expandArc:function(t){var e,i,n=this,a=this,s=a.state.transiting,r=a.$el;s?e=setInterval(function(){D(this,n),s||(clearInterval(e),0<r.legend.selectAll("."+bt.legendItemFocused).size()&&a.expandArc(t))}.bind(this),10):(i=a.mapToTargetIds(t),r.svg.selectAll(a.selectorTargets(i,"."+rt.chartArc)).each(function(t){var e;a.shouldExpand(t.data.id)&&(e=a.getExpandConfig(t.data.id,"duration"),t=a.getSvgArcExpanded(a.getExpandConfig(t.data.id,"rate")),(0,I.select)(this).selectAll("path").transition().duration(e).attr("d",a.svgArcExpanded).transition().duration(2*e).attr("d",t))}))},unexpandArc:function(t){var e=this,i=this,n=i.state.transiting,a=i.$el.svg;n||(t=i.mapToTargetIds(t),a.selectAll(i.selectorTargets(t,"."+rt.chartArc)).selectAll("path").transition().duration(function(t){return D(this,e),i.getExpandConfig(t.data.id,"duration")}.bind(this)).attr("d",i.svgArc),a.selectAll(""+rt.arc).style("opacity",null))},getExpandConfig:function(t,e){var i,n=this.config;return this.isDonutType(t)?i="donut":this.isGaugeType(t)?i="gauge":this.isPieType(t)&&(i="pie"),i?n[i+"_expand_"+e]:{duration:50,rate:.98}[e]},shouldExpand:function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},shouldShowArcLabel:function(){var e=this,i=this,n=i.config;return["donut","gauge","pie","polar"].some(function(t){return D(this,e),i.hasType(t)&&n[t+"_label_show"]}.bind(this))},getArcLabelFormat:function(){var e=this,i=this.config,n=function(t){return D(this,e),t}.bind(this);return["donut","gauge","pie","polar"].filter(this.hasType.bind(this)).forEach(function(t){D(this,e),n=i[t+"_label_format"]}.bind(this)),M(n)?n.bind(this.api):n},getArcTitle:function(){var t=this.hasType("donut")?"donut":this.hasType("gauge")&&"gauge";return t?this.config[t+"_title"]:""},updateTargetsForArc:function(t){var e=this,i=this,n=i.$el,a=i.hasType("gauge"),s=i.getChartClass("Arc"),r=i.getClass("arcs",!0),o=i.classFocus.bind(i),l=n.main.select("."+rt.chartArcs),c=l.selectAll("."+rt.chartArc).data(i.pie(t)).attr("class",function(t){return D(this,e),s(t)+o(t.data)}.bind(this)),t=c.enter().append("g").attr("class",s).call(this.setCssRule(!1,"."+rt.chartArcs+" text",["pointer-events:none","text-anchor:middle"]));t.append("g").attr("class",r).merge(c),t.append("text").attr("dy",a&&!i.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor",i.getStylePropValue("middle")).style("pointer-events",i.getStylePropValue("none")),n.text=l.selectAll("."+st.target+" text")},initArc:function(){var t=this.$el;t.arcs=t.main.select("."+st.chart).append("g").attr("class",rt.chartArcs).attr("transform",this.getTranslate("arc")),this.setArcTitle()},setArcTitle:function(){var t,e=this.getArcTitle(),i=this.hasType("gauge");e&&(t=this.$el.arcs.append("text").attr("class",i?ft.chartArcsGaugeTitle:rt.chartArcsTitle).style("text-anchor","middle"),i&&t.attr("dy","-0.3em"),T(t,e,i?void 0:[-.6,1.35],!0))},redrawArc:function(t,e,i){var n=this,a=this,s=a.config,r=a.state,o=a.$el.main,l=s.interaction_enabled,c=l&&s.data_selection_isselectable,o=o.selectAll("."+rt.arcs).selectAll("."+rt.arc).data(a.arcData.bind(a));o.exit().transition().duration(e).style("opacity","0").remove(),o=o.enter().append("path").attr("class",a.getClass("arc",!0)).style("fill",function(t){return D(this,n),a.color(t.data)}.bind(this)).style("cursor",function(t){return D(this,n),null!=c&&null!=c.bind&&c.bind(a.api)(t)?"pointer":null}.bind(this)).style("opacity","0").each(function(t){a.isGaugeType(t.data)&&(t.startAngle=s.gauge_startingAngle,t.endAngle=s.gauge_startingAngle),this._current=t}).merge(o),a.hasType("gauge")&&(a.updateGaugeMax(),a.hasMultiArcGauge()&&a.redrawMultiArcGauge()),o.attr("transform",function(t){return D(this,n),!a.isGaugeType(t.data)&&i?"scale(0)":""}.bind(this)).style("opacity",function(t){return t===this._current?"0":null}).each(function(){D(this,n),r.transiting=!0}.bind(this)).transition().duration(t).attrTween("d",function(e){var t=this,i=a.updateAngle(e);if(!i)return function(){return D(this,t),"M 0 0"}.bind(this);isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var n=(0,xi.interpolate)(this._current,i);return this._current=n(0),function(t){t=n(t);return t.data=e.data,a.getArc(t,!0)}}).attr("transform",i?"scale(1)":"").style("fill",function(t){var e;return D(this,n),a.levelColor?(e=a.levelColor(t.data.values[0].value),s.data_colors[t.data.id]=e):e=a.color(t.data),e}.bind(this)).style("opacity",null).call(y,function(){var t,e;a.levelColor&&(e=(t=(0,I.select)(this)).datum(),a.updateLegendItemColor(e.data.id,t.style("fill"))),r.transiting=!1,m(s.onrendered,a.api)}),l&&a.bindArcEvent(o),a.hasType("polar")&&a.redrawPolar(),a.hasType("gauge")&&a.redrawBackgroundArcs(),a.redrawArcText(t)},redrawBackgroundArcs:function(){var e,i=this,n=this,a=n.config,s=n.state,t=n.hasMultiArcGauge(),r=a.gauge_fullCircle,o=n.getStartAngle(),l=r?o+n.getArcLength():-1*o,r=n.$el.arcs.select((t?"g":"")+"."+rt.chartArcsBackground);t?(e=0,(r=r.selectAll("path."+rt.chartArcsBackground).data(n.data.targets)).enter().append("path").attr("class",function(t,e){return D(this,i),rt.chartArcsBackground+" "+rt.chartArcsBackground+"-"+e}.bind(this)).merge(r).style("fill",a.gauge_background||null).attr("d",function(t){t=t.id;if(D(this,i),0<=s.hiddenTargetIds.indexOf(t))return"M 0 0";t={data:[{value:a.gauge_max}],startAngle:o,endAngle:l,index:e++};return n.getArc(t,!0,!0)}.bind(this)),r.exit().remove()):r.attr("d",function(){D(this,i);var t={data:[{value:a.gauge_max}],startAngle:o,endAngle:l};return n.getArc(t,!0,!0)}.bind(this))},bindArcEvent:function(t){var i,n=this,a=this,s=a.config,r=a.state,e="touch"===r.inputType,o="mouse"===r.inputType;function l(t,e,i){a.expandArc(i),a.api.focus(i),a.toggleFocusLegend(i,!0),a.showTooltip([e],t)}function c(t){t=(null==t?void 0:t.id)||void 0;a.unexpandArc(t),a.api.revert(),a.revertLegend(),a.hideTooltip()}t.on("click",function(t,e,i){e=a.updateAngle(e);e&&(e=a.convertToArcData(e),null!=a.toggleShape&&a.toggleShape(this,e,i),s.data_onclick.bind(a.api)(e,this))}),o&&t.on("mouseover",function(t,e){r.transiting||(r.event=t,l(this,e=(e=a.updateAngle(e))?a.convertToArcData(e):null,(null==e?void 0:e.id)||void 0),a.setOverOut(!0,e))}).on("mouseout",function(t,e){D(this,n),r.transiting||(r.event=t,e=(e=a.updateAngle(e))?a.convertToArcData(e):null,c(),a.setOverOut(!1,e))}.bind(this)).on("mousemove",function(t,e){e=a.updateAngle(e),e=e?a.convertToArcData(e):null;r.event=t,a.showTooltip([e],this)}),e&&a.hasArcType()&&!a.radars&&(i=function(t){D(this,n);t=t.changedTouches[0];return(0,I.select)(p.elementFromPoint(t.clientX,t.clientY))}.bind(this),a.$el.svg.on("touchstart touchmove",function(t){var e;r.transiting||(r.event=t,t=(null==(e=(t=null!=(e=i(t).datum())&&e.data&&e.data.id?a.updateAngle(e):null)?a.convertToArcData(t):null)?void 0:e.id)||void 0,a.callOverOutForTouch(e),$(t)?c():l(this,e,t))}))},redrawArcText:function(t){var e,i=this,n=this,a=n.config,s=n.state,r=n.$el,o=r.main,l=r.arcs,r=n.hasType("gauge"),c=n.hasMultiArcGauge();r&&1===n.data.targets.length&&a.gauge_title||(e=o.selectAll("."+rt.chartArc).select("text").style("opacity","0").attr("class",function(t){return D(this,i),n.isGaugeType(t.data)?ft.gaugeValue:null}.bind(this)).call(n.textForArcLabel.bind(n)).attr("transform",n.transformForArcLabel.bind(n)).style("font-size",function(t){return D(this,i),n.isGaugeType(t.data)&&1===n.data.targets.length&&!c?Math.round(s.radius/5)+"px":null}.bind(this)).transition().duration(t).style("opacity",function(t){return D(this,i),n.isTargetToShow(t.data.id)&&n.isArcType(t.data)?null:"0"}.bind(this)),c&&e.attr("dy","-.1em")),o.select("."+rt.chartArcsTitle).style("opacity",n.hasType("donut")||r?null:"0"),r&&((r=a.gauge_fullCircle)&&null!=e&&e.attr("dy",""+(c?0:Math.round(s.radius/14))),a.gauge_label_show&&(l.select("."+ft.chartArcsGaugeUnit).attr("dy",(r?1.5:.75)+"em").text(a.gauge_units),l.select("."+ft.chartArcsGaugeMin).attr("dx",-1*(s.innerRadius+(s.radius-s.innerRadius)/(r?1:2))+"px").attr("dy","1.2em").text(n.textForGaugeMinMax(a.gauge_min,!1)),r||l.select("."+ft.chartArcsGaugeMax).attr("dx",s.innerRadius+(s.radius-s.innerRadius)/2+"px").attr("dy","1.2em").text(n.textForGaugeMinMax(a.gauge_max,!0))))}},bi={initArea:function(t){var e=this.config;t.insert("g","."+(e.area_front?dt.circles:xt.lines)).attr("class",this.getClass("areas",!0))},updateAreaColor:function(t){return this.config.area_linearGradient?this.getGradienColortUrl(t.id):this.color(t)},updateArea:function(t,e){var i=this,n=i.config,a=i.state,s=i.$el,r=i.$T,s=(e=void 0===e?!1:e)?s.subchart:s;n.area_linearGradient&&i.updateLinearGradient();n=s.main.selectAll("."+ot.areas).selectAll("."+ot.area).data(i.lineData.bind(i));r(n.exit(),t).style("opacity","0").remove(),s.area=n.enter().append("path").attr("class",i.getClass("area",!0)).style("fill",i.updateAreaColor.bind(i)).style("opacity",function(){return a.orgAreaOpacity=(0,I.select)(this).style("opacity"),"0"}).merge(n),n.style("opacity",a.orgAreaOpacity)},redrawArea:function(t,e,i){var n=this,a=this,i=((i=void 0===i?!1:i)?this.$el.subchart:this.$el).area,s=a.state.orgAreaOpacity;return[a.$T(i,e,O()).attr("d",t).style("fill",a.updateAreaColor.bind(a)).style("opacity",function(t){return D(this,n),(a.isAreaRangeType(t)?s/1.75:s)+""}.bind(this))]},generateDrawArea:function(t,i){var r=this,o=this,l=o.config,c=l.line_connectNull,h=l.axis_rotated,n=o.generateGetAreaPoints(t,i),a=o.getYScaleById.bind(o),d=function(t){return D(this,r),(i?o.subxx:o.xx).call(o,t)}.bind(this),u=function(t,e){return D(this,r),o.isGrouped(t.id)?n(t,e)[0][1]:a(t.id,i)(o.isAreaRangeType(t)?o.getRangedData(t,"high"):o.getShapeYMin(t.id))}.bind(this),g=function(t,e){return D(this,r),o.isGrouped(t.id)?n(t,e)[1][1]:a(t.id,i)(o.isAreaRangeType(t)?o.getRangedData(t,"low"):t.value)}.bind(this);return function(t){var e=this;D(this,r);var i,n=c?o.filterRemoveNull(t.values):t.values,a=0,s=0,s=o.isAreaType(t)?(i=(0,ze.area)(),i=h?i.y(d).x0(u).x1(g):i.x(d).y0(l.area_above?0:l.area_below?o.state.height:u).y1(g),c||(i=i.defined(function(t){return D(this,e),null!==o.getBaseValue(t)}.bind(this))),o.isStepType(t)&&(n=o.convertValuesToStep(n)),i.curve(o.getCurve(t))(n)):(n[0]&&(a=o.scale.x(n[0].x),s=o.getYScaleById(t.id)(n[0].value)),h?"M "+s+" "+a:"M "+a+" "+s);return s||"M 0 0"}.bind(this)},generateGetAreaPoints:function(t,s){var r=this,o=r.config,l=r.getShapeX(0,t,s),c=r.getShapeY(!!s),h=r.getShapeOffset(r.isAreaType,t,s),d=r.getYScaleById.bind(r);return function(t,e){var i=d.call(r,t.id,s)(r.getShapeYMin(t.id)),n=h(t,e)||i,a=l(t),e=t.value,t=c(t);return[[a,n],[a,(t=o.axis_rotated&&(0<e&&t<i||e<0&&i<t)?i:t)-(i-n)],[a,t-(i-n)],[a,n]]}}},_i={initBar:function(){var t=this.$el,e=this.config,i=this.state.clip;t.bar=t.main.select("."+st.chart).insert("g",":first-child").attr("class",ct.chartBars).call(this.setCssRule(!1,"."+ct.chartBars,["pointer-events:none"])),!1===e.clipPath&&(e.bar_radius||e.bar_radius_ratio)&&t.bar.attr("clip-path",i.pathXAxis.replace(/#[^)]*/,"#"+i.id))},updateTargetsForBar:function(t){var i=this,n=this,e=n.config,a=n.$el,s=n.getChartClass("Bar"),r=n.getClass("bars",!0),o=n.classFocus.bind(n),l=e.interaction_enabled&&e.data_selection_isselectable;a.bar||n.initBar(),n.$el.main.select("."+ct.chartBars).selectAll("."+ct.chartBar).data(t.filter(function(t){var e=this;return D(this,i),t.values.some(function(t){return D(this,e),X(t.value)||n.isBarRangeType(t)}.bind(this))}.bind(this))).attr("class",function(t){return D(this,i),s(t)+o(t)}.bind(this)).enter().append("g").attr("class",s).style("opacity","0").style("pointer-events",n.getStylePropValue("none")).append("g").attr("class",r).style("cursor",function(t){return D(this,i),null!=l&&null!=l.bind&&l.bind(n.api)(t)?"pointer":null}.bind(this)).call(n.setCssRule(!0," ."+ct.bar,["fill"],n.color))},updateBar:function(t,e){var i=this,n=i.config,a=i.$el,s=i.$T,r=(e=void 0===e?!1:e)?a.subchart:a,e=i.getClass("bar",!0),a=i.initialOpacity.bind(i);n.bar_linearGradient&&i.updateLinearGradient();n=r.main.selectAll("."+ct.bars).selectAll("."+ct.bar).data(i.labelishData.bind(i));s(n.exit(),t).style("opacity","0").remove(),r.bar=n.enter().append("path").attr("class",e).style("fill",i.updateBarColor.bind(i)).merge(n).style("opacity",a)},updateBarColor:function(t){var e=this.getStylePropValue(this.color);return this.config.bar_linearGradient?this.getGradienColortUrl(t.id):e?e(t):null},redrawBar:function(e,t,i){var n=this,a=this,i=((i=void 0===i?!1:i)?a.$el.subchart:a.$el).bar;return[a.$T(i,t,O()).attr("d",function(t){return D(this,n),(X(t.value)||a.isBarRangeType(t))&&e(t)}.bind(this)).style("fill",a.updateBarColor.bind(a)).style("opacity",null)]},generateDrawBar:function(t,e){var l=this,c=this,i=c.config,h=c.generateGetBarPoints(t,e),d=i.axis_rotated,n=i.bar_radius,a=i.bar_radius_ratio,u=X(n)&&0<n?function(){return D(this,l),n}.bind(this):X(a)?function(t){return D(this,l),t*a}.bind(this):null;return function(t,e){D(this,l);var i=h(t,e),n=+d,a=+!n,s=t.value<0,r=["",""],o=0,e=c.isGrouped(t.id),t=!(!u||!e)&&c.isStackingRadiusData(t);!u||e&&!t||(t=i[2][t=d?a:n]-i[0][t],t="a"+(o=u(t))+","+o+" "+(s?"1 0 0":"0 0 1")+" ",r[+!d]=t+o+","+o,r[+d]=t+[-o,o][d?"sort":"reverse"](),s&&r.reverse());r=d?"H"+(i[1][n]-o)+" "+r[0]+"V"+(i[2][a]-o)+" "+r[1]+"H"+i[3][n]:"V"+(i[1][a]+(s?-o:o))+" "+r[0]+"H"+(i[2][n]-o)+" "+r[1]+"V"+i[3][a];return"M"+i[0][n]+","+i[0][a]+r+"z"}.bind(this)},isStackingRadiusData:function(t){var i=this,e=this.$el,n=this.config,a=this.data,s=this.state,r=t.id,o=t.index,l=t.value;if(-1<s.hiddenTargetIds.indexOf(r)){e=e.bar.filter(function(t){return D(this,i),t.id===r&&t.value===l}.bind(this));return!e.empty()&&/a\d+/i.test(e.attr("d"))}var c=n.data_groups.find(function(t){return D(this,i),-1<t.indexOf(r)}.bind(this)),a=this.orderTargets(this.filterTargetsToShow(a.targets.filter(this.isBarType,this))).filter(function(t){return D(this,i),-1<c.indexOf(t.id)}.bind(this)).map(function(t){var e=this;return D(this,i),t.values.filter(function(t){return D(this,e),t.index===o&&(X(l)&&0<l?0<t.value:t.value<0)}.bind(this))[0]}.bind(this)).filter(Boolean).map(function(t){return D(this,i),t.id}.bind(this));return 0!==l&&a.indexOf(r)===a.length-1},generateGetBarPoints:function(t,o){var l=this,c=this,h=c.config,e=o?c.axis.subX:c.axis.x,i=c.getIndicesMax(t)+1,d=c.getBarW("bar",e,i),u=c.getShapeX(d,t,!!o),g=c.getShapeY(!!o),f=c.getShapeOffset(c.isBarType,t,!!o),p=c.getYScaleById.bind(c);return function(t,e){D(this,l);var i=p.call(c,t.id,o)(c.getShapeYMin(t.id)),n=f(t,e)||i,a=X(d)?d:d[t.id]||d._$width,s=t.value,r=u(t),e=g(t);h.axis_rotated&&(0<s&&e<i||s<0&&i<e)&&(e=i),c.isBarRangeType(t)||(e-=i-n);a=r+a;return[[r,n],[r,e],[a,e],[a,n]]}.bind(this)}};function mi(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}var yi={initCandlestick:function(){var t=this.$el;t.candlestick=t.main.select("."+st.chart).append("g").attr("class",ht.chartCandlesticks)},updateTargetsForCandlestick:function(t){var e=this,i=this.$el,n=this.getChartClass("Candlestick"),a=this.classFocus.bind(this);i.candlestick||this.initCandlestick(),this.$el.main.select("."+ht.chartCandlesticks).selectAll("."+ht.chartCandlestick).data(t).attr("class",function(t){return D(this,e),n(t)+a(t)}.bind(this)).enter().append("g").attr("class",n).style("pointer-events","none")},updateCandlestick:function(t,e){var i=this,n=this.$el,a=this.$T,s=(e=void 0===e?!1:e)?n.subchart:n,r=this.getClass("candlestick",!0),e=this.initialOpacity.bind(this),n=s.main.selectAll("."+ht.chartCandlestick).selectAll("."+ht.candlestick).data(this.labelishData.bind(this));a(n.exit(),t).style("opacity","0").remove();r=n.enter().filter(function(t){return D(this,i),t.value}.bind(this)).append("g").attr("class",r);r.append("line"),r.append("path"),s.candlestick||(s.candlestick={}),s.candlestick=n.merge(r).style("opacity",e)},generateDrawCandlestick:function(t,e){var c=this,h=this,i=h.config,d=h.generateGetCandlestickPoints(t,e),u=i.axis_rotated,g=i.candlestick_color_down;return function(t,e,i){var n=this;D(this,c);var a=d(t,e),e=h.getCandlestickData(t),s=null==e?void 0:e._isUp,t=+u;i.classed&&i.classed(ht[s?"valueUp":"valueDown"],!0);e=u?"H"+a[1][1]+" V"+a[1][0]+" H"+a[0][1]:"V"+a[1][1]+" H"+a[1][0]+" V"+a[0][1];i.select("path").attr("d","M"+a[0][t]+","+a[0][+!t]+e+"z").style("fill",function(t){return D(this,n),(s?h.color(t):N(g)?g[t.id]:g)||h.color(t)}.bind(this));var r,o=i.select("line"),l=u?{x1:a[2][1],x2:a[2][2],y1:a[2][0],y2:a[2][0]}:{x1:a[2][0],x2:a[2][0],y1:a[2][1],y2:a[2][2]};for(r in l)o.attr(r,l[r])}.bind(this)},generateGetCandlestickPoints:function(t,l){var c=this,h=this,d=h.config,e=(l=void 0===l?!1:l)?h.axis.subX:h.axis.x,i=h.getIndicesMax(t)+1,u=h.getBarW("candlestick",e,i),g=h.getShapeX(u,t,!!l),f=h.getShapeY(!!l),p=h.getShapeOffset(h.isBarType,t,!!l),x=h.getYScaleById.bind(h);return function(t,e){D(this,c);var i,n=x.call(h,t.id,l)(h.getShapeYMin(t.id)),a=p(t,e)||n,s=X(u)?u:u[t.id]||u._$width,r=h.getCandlestickData(t),o=r?((i={start:g(t),end:0}).end=i.start+s,e={start:f(r.open),end:f(r.close)},o={x:i.start+s/2,high:f(r.high),low:f(r.low)},d.axis_rotated&&(0<t.value&&e.start<n||t.value<0&&n<e.start)&&(e.start=n),e.start-=n-a,[[i.start,e.start],[i.end,e.end],[o.x,o.low,o.high]]):[[0,0],[0,0],[0,0,0]];return o}.bind(this)},redrawCandlestick:function(n,a,t){var e=this.$el,s=this.$T,e=((t=void 0===t?!1:t)?e.subchart:e).candlestick,r=O(!0);return[e.each(function(t,e){var i=s((0,I.select)(this),a,r);n(t,e,i)}).style("opacity",null)]},getCandlestickData:function(t){var e,i=t.value;return B(i)?!(e={open:i[0],high:i[1],low:i[2],close:i[3]})!==(t=void 0!==(t=i[4])&&t)&&(e.volume=t):N(i)&&(e=function(e){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?mi(Object(i),!0).forEach(function(t){a(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mi(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))});return e}({},i)),e&&(e._isUp=e.close>=e.open),e||null}},Ti={initGauge:function(){var t,e=this,i=this.config,n=this.$el.arcs,a=function(t){D(this,e),n.append("text").attr("class",t).style("text-anchor","middle").style("pointer-events","none")}.bind(this);this.hasType("gauge")&&(t=this.hasMultiArcGauge(),n.append(t?"g":"path").attr("class",rt.chartArcsBackground).style("fill",!t&&i.gauge_background||null),i.gauge_units&&a(ft.chartArcsGaugeUnit),i.gauge_label_show&&(a(ft.chartArcsGaugeMin),i.gauge_fullCircle||a(ft.chartArcsGaugeMax)))},updateGaugeMax:function(){var t=this.config,e=this.state,e=this.hasMultiArcGauge()?this.getMinMaxData().max[0].value:this.getTotalDataSum(e.rendered);e+t.gauge_min*(0<t.gauge_min?-1:1)>t.gauge_max&&(t.gauge_max=e-t.gauge_min)},redrawMultiArcGauge:function(){var e=this,l=this,t=l.config,c=l.state,i=l.$el,h=l.state.hiddenTargetIds,i=i.main.selectAll("."+rt.arcs).selectAll("."+rt.arcLabelLine).data(l.arcData.bind(l));i.enter().append("rect").attr("class",function(t){return D(this,e),rt.arcLabelLine+" "+st.target+" "+st.target+"-"+t.data.id}.bind(this)).merge(i).style("fill",function(t){return D(this,e),l.levelColor?l.levelColor(t.data.values[0].value):l.color(t.data)}.bind(this)).style("display",t.gauge_label_show?null:"none").each(function(t){var e,i,n,a=0,s=0,r=0,o="";h.indexOf(t.data.id)<0&&(n=l.updateAngle(t),e=c.gaugeArcWidth/l.filterTargetsToShow(l.data.targets).length*(n.index+1),n=(i=n.endAngle-Math.PI/2)-(0==(t=c.radius-e)?0:1/t),a=c.radiusExpanded-c.radius+e,s=Math.cos(n)*t,r=Math.sin(n)*t,o="rotate("+180*i/Math.PI+", "+s+", "+r+")"),(0,I.select)(this).attr("x",s).attr("y",r).attr("width",a).attr("height",2).attr("transform",o).style("stroke-dasharray","0, "+(a+2)+", 0")})},textForGaugeMinMax:function(t,e){var i=this.config.gauge_label_extents;return M(i)?i.bind(this.api)(t,e):t},getGaugeLabelHeight:function(){var t=this.config;return this.config.gauge_label_show&&!t.gauge_fullCircle?20:0},getPaddingBottomForGauge:function(){return this.getGaugeLabelHeight()*(this.config.gauge_label_show?2:2.5)}},wi={initBubble:function(){var t=this.config;this.hasType("bubble")&&(t.point_show=!0,t.point_type="circle",t.point_sensitivity=25)},getBaseLength:function(){var t=this.state,e=t.width,i=t.height,n=Ht,t=this.cache.get(n);return t||this.cache.add(n,t=K("min",[e,i])),t},getBubbleR:function(t){var e=this,i=this,n=i.config.bubble_maxR;M(n)?n=n.bind(i.api)(t):X(n)||(n=i.getBaseLength()/(2*i.getMaxDataCount())+12);var a=K("max",i.getMinMaxData().max.map(function(t){return D(this,e),i.isBubbleZType(t)?i.getBubbleZData(t.value,"y"):N(t.value)?t.value.mid:t.value}.bind(this))),n=n*n*Math.PI,a=(i.isBubbleZType(t)?i.getBubbleZData(t.value,"z"):t.value)*(n/a);return Math.sqrt(a/Math.PI)},getBubbleZData:function(t,e){return N(t)?t[e]:t["y"===e?0:1]}},Ai={initLine:function(){var t=this.$el;t.line=t.main.select("."+st.chart).append("g").attr("class",xt.chartLines).call(this.setCssRule(!1,"."+xt.chartLines,["pointer-events:none"]))},updateTargetsForLine:function(t){var e=this,i=this,n=i.$el,a=n.area,s=n.line,r=n.main,o=i.getChartClass("Line"),n=i.getClass("lines",!0),l=i.classFocus.bind(i);s||i.initLine();s=t.filter(function(t){return D(this,e),!(i.isScatterType(t)||i.isBubbleType(t))}.bind(this)),t=r.select("."+xt.chartLines).selectAll("."+xt.chartLine).data(s).attr("class",function(t){return D(this,e),o(t)+l(t)}.bind(this)),r=t.enter().append("g").attr("class",o).style("opacity","0").style("pointer-events",i.getStylePropValue("none"));r.append("g").attr("class",n),i.hasTypeOf("Area")&&(t=(!a&&r.empty()?t:r).filter(i.isAreaType.bind(i)),i.initArea(t)),i.updateTargetForCircle(s,r)},updateLine:function(t,e){var i=this,n=this,a=n.format.extraLineClasses,s=n.$el,r=n.$T,e=(e=void 0===e?!1:e)?s.subchart:s,s=e.main.selectAll("."+xt.lines).selectAll("."+xt.line).data(n.lineData.bind(n));r(s.exit(),t).style("opacity","0").remove(),e.line=s.enter().append("path").attr("class",function(t){return D(this,i),n.getClass("line",!0)(t)+" "+(a(t)||"")}.bind(this)).style("stroke",n.color).merge(s).style("opacity",n.initialOpacity.bind(n)).style("shape-rendering",function(t){return D(this,i),n.isStepType(t)?"crispEdges":""}.bind(this)).attr("transform",null)},redrawLine:function(t,e,i){var n=this.$el;return[(0,this.$T)(((i=void 0===i?!1:i)?n.subchart:n).line,e,O()).attr("d",t).style("stroke",this.color).style("opacity",null)]},getCurve:function(e){var i=this,n=this;return n.config.axis_rotated&&n.isStepType(e)?function(t){D(this,i);t=n.getInterpolate(e)(t);return t.orgPoint=t.point,t.pointRotated=function(t,e){1===this._point&&(this._point=2);var i=this._y*(1-this._t)+e*this._t;this._context.lineTo(this._x,i),this._context.lineTo(t,i),this._x=t,this._y=e},t.point=function(t,e){0===this._point?this.orgPoint(t,e):this.pointRotated(t,e)},t}.bind(this):n.getInterpolate(e)},generateDrawLine:function(t,r){var o=this,l=this,c=l.config,h=l.scale,d=c.line_connectNull,u=c.axis_rotated,i=l.generateGetLinePoints(t,r),g=l.getYScaleById.bind(l),e=function(t){return D(this,o),(r?l.subxx:l.xx).call(l,t)}.bind(this),t=function(t,e){return D(this,o),l.isGrouped(t.id)?i(t,e)[0][1]:g(t.id,r)(l.getBaseValue(t))}.bind(this),f=(0,ze.line)(),f=u?f.x(t).y(e):f.x(e).y(t);d||(f=f.defined(function(t){return D(this,o),null!==l.getBaseValue(t)}.bind(this)));var p=r?h.subX:h.x;return function(t){D(this,o);var e,i=g(t.id,r),n=d?l.filterRemoveNull(t.values):t.values,a=0,s=0;return(l.isLineType(t)?(e=c.data_regions[t.id])?l.lineWithRegions(n,h.zoom||p,i,e):(l.isStepType(t)&&(n=l.convertValuesToStep(n)),f.curve(l.getCurve(t))(n)):(n[0]&&(a=p(n[0].x),s=i(n[0].value)),u?"M "+s+" "+a:"M "+a+" "+s))||"M 0 0"}.bind(this)},lineWithRegions:function(t,s,r,e){var o=this,i=this,l=i.config.axis_rotated,n=i.axis.isTimeSeries(),a=i.axis.isCategorized()?.5:0,c=[],h=function(t,e){D(this,o);for(var i,n=0;i=e[n];n++)if(i.start<t&&t<=i.end)return i.style;return!1}.bind(this);if(F(e))for(var d,u=function(t,e){return D(this,o),$(t)?e:n?et.call(i,t):t}.bind(this),g=0;d=e[g];g++){var f=u(d.start,t[0].x),p=u(d.end,t[t.length-1].x),x=d.style||{dasharray:"2 2"};c[g]={start:f,end:p,style:x}}for(var v,b=(l?function(t){return D(this,o),r(t.value)}:function(t){return D(this,o),s(t.x)}).bind(this),_=(l?function(t){return D(this,o),s(t.x)}:function(t){return D(this,o),r(t.value)}).bind(this),m=function(t){return D(this,o),"M"+t[0][0]+","+t[0][1]+"L"+t[1][0]+","+t[1][1]}.bind(this),y=(n?function(t,e,i,n){D(this,o);var a=t.x.getTime(),e=e.x-t.x,t=new Date(a+e*i),n=new Date(a+e*(i+n)),i=l?[[r(E(i)),s(t)],[r(E(i+C)),s(n)]]:[[s(t),r(E(i))],[s(n),r(E(i+C))]];return m(i)}:function(t,e,i,n){D(this,o);n=l?[[r(E(i),!0),s(R(i))],[r(E(i+n),!0),s(R(i+n))]]:[[s(R(i),!0),r(E(i))],[s(R(i+n),!0),r(E(i+n))]];return m(n)}).bind(this),T={x:i.axis.getAxisType("x"),y:i.axis.getAxisType("y")},w="",A=0;v=t[A];A++){var k=t[A-1],S=k&&z(k.value),x=h(v.x,c);if(z(v.value))if(!$(c)&&x&&S){if(S){try{x=x.dasharray.split(" ")}catch(t){x="2 2".split(" ")}for(var C,R=Ie(T.x,k.x+a,v.x+a),E=Ie(T.y,k.value,v.value),L=s(v.x)-s(k.x),O=r(v.value)-r(k.value),O=Math.sqrt(Math.pow(L,2)+Math.pow(O,2)),P=(C=x[0]/O)*x[1],I=C;I<=1;I+=P)w+=y(k,v,I,C),1<=I+P&&(w+=y(k,v,1,0))}}else w+=(A&&S?"L":"M")+b(v)+","+_(v)}return w},isWithinStep:function(t,e){return Math.abs(e-A(this.state.event,t)[1])<30},shouldDrawPointsForLine:function(t){var e=this.config.line_point;return!0===e||B(e)&&-1!==e.indexOf(t.id)}},ki=function(){return D(this,void 0),O()}.bind(void 0),Si={hasValidPointType:function(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasValidPointDrawMethods:function(t){t=t||this.config.point_type;return v(t)&&M(t.create)&&M(t.update)},initialOpacityForCircle:function(t){var e=this.config,i=this.state.withoutFadeIn,e=e.point_opacity;return e=$(e)?null!==this.getBaseValue(t)&&i[t.id]?this.opacityForCircle(t):"0":e},opacityForCircle:function(t){var e=this.config,i=e.point_opacity;return $(i)&&(i=e.point_show&&!e.point_focus_only?null:"0",i=z(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":i:"0"),i},initCircle:function(){var t=this.$el.main;this.point=this.generatePoint(),(this.hasType("bubble")||this.hasType("scatter"))&&t.select("."+dt.chartCircles).empty()&&t.select("."+st.chart).append("g").attr("class",dt.chartCircles)},updateTargetForCircle:function(t,e){var n=this,a=this,i=a.config,s=a.data,r=a.$el,o=i.interaction_enabled&&i.data_selection_enabled,l=o&&i.data_selection_isselectable,c=a.getClass("circles",!0);i.point_show&&(r.circle||a.initCircle(),e=e,(t=t)||(t=s.targets.filter(function(t){return D(this,n),this.isScatterType(t)||this.isBubbleType(t)}.bind(this)),(s=r.main.select("."+dt.chartCircles).style("pointer-events","none").selectAll("."+dt.circles).data(t)).exit().remove(),e=s.enter()),o&&e.append("g").attr("class",function(t){return D(this,n),a.generateClass(At.selectedCircles,t.id)}.bind(this)),e.append("g").attr("class",c).call(function(t){D(this,n),a.setCssRule(!0,"."+dt.circles,["cursor:pointer"],l)(t),a.setCssRule(!0," ."+dt.circle,["fill","stroke"],a.color)(t)}.bind(this)).style("opacity",function(){return-1<(0,I.select)(this.parentNode).attr("class").indexOf(dt.chartCircles)?"0":null}),o&&t.forEach(function(e){var i=this;D(this,n),r.main.selectAll("."+At.selectedCircles+a.getTargetSelectorSuffix(e.id)).selectAll(""+At.selectedCircle).each(function(t){D(this,i),t.value=e.values[t.index].value}.bind(this))}.bind(this)))},updateCircle:function(t){var e=this,i=this,n=i.config,a=i.state,s=i.$el,r=n.point_focus_only,s=(t=void 0===t?!1:t)?s.subchart:s;n.point_show&&!a.toggling&&((a=s.main.selectAll("."+dt.circles).selectAll("."+dt.circle).data(function(t){return D(this,e),i.isLineType(t)&&i.shouldDrawPointsForLine(t)||i.isBubbleType(t)||i.isRadarType(t)||i.isScatterType(t)?r?[t.values[0]]:t.values:[]}.bind(this))).exit().remove(),a.enter().filter(Boolean).append(i.point("create",this,i.pointR.bind(i),i.getStylePropValue(i.color))),s.circle=s.main.selectAll("."+dt.circles+" ."+dt.circle).style("stroke",i.getStylePropValue(i.color)).style("opacity",i.initialOpacityForCircle.bind(i)))},redrawCircle:function(t,e,i,n,a){var s=this,r=s.state.rendered,o=s.$el,l=s.$T,a=(a=void 0===a?!1:a)?o.subchart:o,o=a.main.selectAll("."+At.selectedCircle);if(!s.config.point_show)return[];var c=s.point("update",s,t,e,s.getStylePropValue(s.color),i,n,o),n=s.isCirclePoint()?"c":"",h=O(),d=s.opacityForCircle.bind(s),u=[];return a.circle.each(function(t){t=c.bind(this)(t),t=l(t,i||!r,h).style("opacity",d);u.push(t)}),[u,l(o,i).attr(n+"x",t).attr(n+"y",e)]},showCircleFocus:function(n){var s,r=this,t=r.config,e=r.state,i=e.hasRadar,a=e.resizing,o=e.toggling,l=e.transiting,e=r.$el.circle;!1===l&&t.point_focus_only&&e&&(t=(i?r.radarCircleX:r.circleX).bind(r),i=(i?r.radarCircleY:r.circleY).bind(r),o=o||$(n),s=r.point("update",r,t,i,r.getStylePropValue(r.color),!a&&o),(e=n?e.filter(function(e){var i=this,t=n.filter(function(t){return D(this,i),t.id===e.id}.bind(this));return!!t.length&&(0,I.select)(this).datum(t[0])}):e).attr("class",this.updatePointClass.bind(this)).style("opacity",null).each(function(t){var e=t.id,i=t.index,n=t.value,a="hidden";z(n)&&(s.bind(this)(t),r.expandCircles(i,e),a=""),this.style.visibility=a}))},hideCircleFocus:function(){var t=this.config,e=this.$el.circle;t.point_focus_only&&e&&(this.unexpandCircles(),e.style("visibility","hidden"))},circleX:function(t){return this.xx(t)},updateCircleY:function(n){var a=this;void 0===n&&(n=!1);var s=this,r=s.generateGetLinePoints(s.getShapeIndices(s.isLineType),n);return function(t,e){D(this,a);var i=t.id;return s.isGrouped(i)?r(t,e)[0][1]:s.getYScaleById(i,n)(s.getBaseValue(t))}.bind(this)},expandCircles:function(t,e,i){var n=this.pointExpandedR.bind(this);i&&this.unexpandCircles();var e=this.getShapeByIndex("circle",t,e).classed(st.EXPANDED,!0),a=n(e)/this.config.point_r,s=1-a;this.isCirclePoint()?e.attr("r",n):e.each(function(){var t,e,i=(0,I.select)(this);"circle"===this.tagName?i.attr("r",n):(t=(e=this.getBBox()).width,e=e.height,t=s*(+i.attr("x")+t/2),e=s*(+i.attr("y")+e/2),i.attr("transform","translate("+t+" "+e+") scale("+a+")"))})},unexpandCircles:function(t){var e=this.pointR.bind(this),t=this.getShapeByIndex("circle",t).filter(function(){return(0,I.select)(this).classed(st.EXPANDED)}).classed(st.EXPANDED,!1);t.attr("r",e),this.isCirclePoint()||(e=e(t)/this.config.point_r,t.attr("transform",1!=e?"scale("+e+")":null))},pointR:function(t){var e=this.config.point_r,i=e;return this.isBubbleType(t)?i=this.getBubbleR(t):M(e)&&(i=e.bind(this.api)(t)),i},pointExpandedR:function(t){var e=this.config,i=this.isBubbleType(t)?1.15:1.75;return e.point_focus_expand_enabled?e.point_focus_expand_r||this.pointR(t)*i:this.pointR(t)},pointSelectR:function(t){var e=this.config.point_select_r;return M(e)?e(t):e||4*this.pointR(t)},isWithinCircle:function(t,e){var i=A(this.state.event,t),n=(0,I.select)(t),a=this.isCirclePoint(t)?"c":"",s=+n.attr(a+"x"),a=+n.attr(a+"y");return s||a||1!==t.nodeType||(s=(t=L(t)).x,a=t.y),Math.sqrt(Math.pow(s-i[0],2)+Math.pow(a-i[1],2))<(e||this.config.point_sensitivity)},insertPointInfoDefs:function(t,e){var i,s=this,n=function(t,e){D(this,s);for(var i,n=t.attributes,a=0;i=n[a];a++)i=i.name,e.setAttribute(i,t.getAttribute(i))}.bind(this),a=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement,t=p.createElementNS(I.namespaces.svg,a.nodeName.toLowerCase());t.id=e,t.style.fill="inherit",t.style.stroke="inherit",n(a,t),null!=(e=a.childNodes)&&e.length&&(i=(0,I.select)(t),"innerHTML"in t?i.html(a.innerHTML):V(a.childNodes).forEach(function(t){D(this,s),n(t,i.append(t.tagName).node())}.bind(this))),this.$el.defs.node().appendChild(t)},pointFromDefs:function(t){return this.$el.defs.select("#"+t)},updatePointClass:function(t){var e=this,i=e.$el.circle,n=!1;return n=N(t)||i?!0===t?i.each(function(t){t=e.getClass("circle",!0)(t);-1<this.getAttribute("class").indexOf(st.EXPANDED)&&(t+=" "+st.EXPANDED),this.setAttribute("class",t)}):e.getClass("circle",!0)(t):n},generateGetLinePoints:function(t,s){var r=this,o=this,l=o.config,c=o.getShapeX(0,t,s),h=o.getShapeY(s),d=o.getShapeOffset(o.isLineType,t,s),u=o.getYScaleById.bind(o);return function(t,e){D(this,r);var i=u.call(o,t.id,s)(o.getShapeYMin(t.id)),n=d(t,e)||i,a=c(t),e=h(t),n=[a,(e=l.axis_rotated&&(0<t.value&&e<i||t.value<0&&i<e)?i:e)-(i-n)];return[n,n,n,n]}.bind(this)},generatePoint:function(){var r=this,t=r.config,o=r.state.datetimeId,l=[],c=E(t.point_pattern)?t.point_pattern:[t.point_type];return function(n,a){for(var t=arguments.length,s=Array(2<t?t-2:0),e=2;e<t;e++)s[e-2]=arguments[e];return function(t){var e=r.getTargetSelectorSuffix(t.id||(null==(i=t.data)?void 0:i.id)||t),i=(0,I.select)(this);l.indexOf(e)<0&&l.push(e);t=c[l.indexOf(e)%c.length];if(r.hasValidPointType(t))t=r[t];else if(!r.hasValidPointDrawMethods(t)){e=o+"-point"+e;if(r.pointFromDefs(e).size()<1&&r.insertPointInfoDefs(t,e),"create"===n)return r.custom.create.bind(a).apply(void 0,[i,e].concat(s));if("update"===n)return r.custom.update.bind(a).apply(void 0,[i].concat(s))}return t[n].bind(a).apply(void 0,[i].concat(s))}}},custom:{create:function(t,e,i){return t.append("use").attr("xlink:href","#"+e).attr("class",this.updatePointClass.bind(this)).style("fill",i).node()},update:function(t,e,i,n,a,s,r){var o=this,l=t.node().getBBox(),c=l.width,h=l.height,d=function(t){return D(this,o),z(t.value)?e(t)-c/2:0}.bind(this),l=function(t){return D(this,o),z(t.value)?i(t)-h/2:0}.bind(this),t=t;return a&&(s&&t.attr("x",d),t=this.$T(t,a,ki()),r&&this.$T(r,a,ki())),t.attr("x",d).attr("y",l).style("fill",n)}},circle:{create:function(t,e,i){return t.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",e).style("fill",i).node()},update:function(t,e,i,n,a,s,r){return this.hasType("bubble")&&t.attr("r",this.pointR.bind(this)),a&&(s&&t.attr("cx",e),t.attr("cx")&&(t=this.$T(t,a,ki())),r&&this.$T(t,a,ki())),t.attr("cx",e).attr("cy",i).style("fill",n)}},rectangle:{create:function(t,e,i){var n=this,a=function(t){return D(this,n),2*e(t)}.bind(this);return t.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",a).attr("height",a).style("fill",i).node()},update:function(t,e,i,n,a,s,r){var o=this,l=this.config.point_r,c=function(t){return D(this,o),e(t)-l}.bind(this),h=function(t){return D(this,o),i(t)-l}.bind(this),t=t;return a&&(s&&t.attr("x",c),t=this.$T(t,a,ki()),r&&this.$T(r,a,ki())),t.attr("x",c).attr("y",h).style("fill",n)}}};function Ci(t){var e=t.config.polar_level_max,t=t.getMinMaxData().max[0].value;return t=e&&t<e?e:t}var Ri={initPolar:function(){var t=this.$el.arcs,e=this.config,i=e.polar_level_text_show,e=e.polar_level_text_backgroundColor;t.levels=t.append("g").attr("class",yt),i&&e&&this.generateDataLabelBackgroundColorFilter(e)},getPolarOuterRadius:function(t,e){var i=Ci(this);return(null!=(t=null==t?void 0:t.data.values[0].value)?t:0)/i*e},updateTargetsForPolar:function(t){this.updateTargetsForArc(t)},redrawPolar:function(){this.config.polar_level_show&&this.updatePolarLevel()},updatePolarLevel:function(){var i=this,t=this.config,e=this.state,n=this.$el.arcs.levels,a=t.polar_level_depth,s=Ci(this),r=J(0,a),o=e.radius,l=r.map(function(t){return D(this,i),o*((t+1)/a)}.bind(this)),c=(t.polar_level_text_format||function(){}).bind(this.api),h=n.selectAll("."+mt).data(r);h.exit().remove();n=h.enter().append("g").attr("class",function(t,e){return D(this,i),mt+" "+mt+"-"+e}.bind(this));n.append("circle"),n.merge(h).selectAll("circle").style("visibility",t.polar_level_show?null:"hidden").attr("cx",0).attr("cy",0).attr("r",function(t){return D(this,i),l[t]}.bind(this)),t.polar_level_text_show&&(t=t.polar_level_text_backgroundColor,e="#"+e.datetimeId+"-labels-bg"+this.getTargetSelectorSuffix(t),n.append("text").style("text-anchor","middle"),n.merge(h).selectAll("text").attr("dy",function(t){return D(this,i),5-l[t]}.bind(this)).attr("filter",t?"url("+e+")":null).text(function(t){return D(this,i),c(s/r.length*(t+1))}.bind(this)))}};var Ei=Jt,Li={initRadar:function(){var t=this.config,e=this.state.current,i=this.$el;this.hasType("radar")&&(i.radar=i.main.select("."+st.chart).append("g").attr("class",Tt.chartRadars),i.radar.levels=i.radar.append("g").attr("class",yt),i.radar.axes=i.radar.append("g").attr("class",lt.axis),i.radar.shapes=i.radar.append("g").attr("class",kt.shapes),e.dataMax=t.radar_axis_max||this.getMinMaxData().max[0].value)},getRadarSize:function(){var t=this.config,e=this.state,i=e.arcWidth,e=e.arcHeight,t=t.axis_x_categories.length<4?-20:10,t=(Math.min(i,e)-t)/2;return[t,t]},updateTargetsForRadar:function(t){var e=this,i=this.config;b(i.axis_x_categories)&&(i.axis_x_categories=J(0,K("max",t.map(function(t){return D(this,e),t.values.length}.bind(this))))),this.generateRadarPoints()},getRadarPosition:function(o,l,c,h){var d=this,u=this.config,t=this.getRadarSize(),g=t[0],f=t[1],p=u.axis_x_categories.length,x=u.radar_direction_clockwise,t=V(o).map(function(t){return D(this,d),e=x,i=t,n=p,a=l,s=F(c)?c:"x"===o?g:f,r=X(h)?h:u.radar_size_ratio,t=2*Math.PI,s*(1-r*("x"===i?Math.sin:Math.cos)((e&&0<a?n-a:a)*t/n));var e,i,n,a,s,r}.bind(this));return 1===t.length?t[0]:t},generateRadarPoints:function(){var e=this,n=this,t=n.data.targets,i=n.getRadarSize(),a=i[0],s=i[1],r=n.cache.get(Ei)||{},i=r._size;i&&(i.width===a||i.height===s)||(t.forEach(function(t){var i=this;D(this,e),r[t.id]=t.values.map(function(t,e){return D(this,i),n.getRadarPosition(["x","y"],e,void 0,n.getRatio("radar",t))}.bind(this))}.bind(this)),r._size={width:a,height:s},n.cache.add(Ei,r))},redrawRadar:function(){var t=this.$el,e=t.radar,i=t.main,t=this.getTranslate("radar");t&&(e.attr("transform",t),i.select("."+Ct.chartTexts).attr("transform",t),this.generateRadarPoints(),this.updateRadarLevel(),this.updateRadarAxes(),this.updateRadarShape())},generateGetRadarPoints:function(){var i=this,n=this.cache.get(Ei);return function(t,e){D(this,i);e=n[t.id][e];return[e,e,e,e]}.bind(this)},updateRadarLevel:function(){var n=this,a=this,t=a.config,e=a.state,i=a.$el.radar,s=a.getRadarSize(),r=s[0],o=s[1],l=t.radar_level_depth,c=t.axis_x_categories.length,h=t.radar_level_text_show,d=i.levels,u=J(0,l),g=t.radar_size_ratio*Math.min(r,o),f=u.map(function(t){return D(this,n),(t+1)/l*g}.bind(this)),p=(t.radar_level_text_format||function(){}).bind(a.api),x=u.map(function(t){var e=this;D(this,n);var i=f[t];return J(0,c).map(function(t){return D(this,e),a.getRadarPosition(["x","y"],t,i,1).join(",")}.bind(this)).join(" ")}.bind(this)),s=d.selectAll("."+mt).data(u);s.exit().remove();i=s.enter().append("g").attr("class",function(t,e){return D(this,n),mt+" "+mt+"-"+e}.bind(this));i.append("polygon").style("visibility",t.radar_level_show?null:"hidden"),h&&(d.select("text").empty()&&d.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return D(this,n),p(0)}.bind(this)),i.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(t){return D(this,n),p(e.current.dataMax/u.length*(t+1))}.bind(this))),i.merge(s).attr("transform",function(t){return D(this,n),"translate("+(r-f[t])+", "+(o-f[t])+")"}.bind(this)).selectAll("polygon").attr("points",function(t){return D(this,n),x[t]}.bind(this)),h&&d.selectAll("text").attr("x",function(t){return D(this,n),$(t)?r:x[t].split(",")[0]}.bind(this)).attr("y",function(t){return D(this,n),$(t)?o:0}.bind(this))},updateRadarAxes:function(){var i=this,n=this,t=n.config,e=n.$el.radar,a=n.getRadarSize(),s=a[0],r=a[1],a=t.axis_x_categories,e=e.axes.selectAll("g").data(a);e.exit().remove();var o,l,a=e.enter().append("g").attr("class",function(t,e){return D(this,i),lt.axis+"-"+e}.bind(this));t.radar_axis_line_show&&a.append("line"),t.radar_axis_text_show&&a.append("text"),e=a.merge(e),t.radar_axis_line_show&&e.select("line").attr("x1",s).attr("y1",r).attr("x2",function(t,e){return D(this,i),n.getRadarPosition("x",e)}.bind(this)).attr("y2",function(t,e){return D(this,i),n.getRadarPosition("y",e)}.bind(this)),t.radar_axis_text_show&&(t=(a=t.radar_axis_text_position).x,o=void 0===t?0:t,a=a.y,l=void 0===a?0:a,e.select("text").style("text-anchor","middle").attr("dy",".5em").call(function(t){D(this,i),t.each(function(t){T((0,I.select)(this),t+"",[-.6,1.2])})}.bind(this)).datum(function(t,e){return D(this,i),{index:e}}.bind(this)).attr("transform",function(t){$(this.width)&&(this.width=this.getBoundingClientRect().width/2);var e=n.getRadarPosition("x",t.index,void 0,1),t=Math.round(n.getRadarPosition("y",t.index,void 0,1));return s<e?e+=this.width+o:Math.round(e)<s&&(e-=this.width+o),r<t?(t/2===r&&"tspan"===this.firstChild.tagName&&this.firstChild.setAttribute("dy","0em"),t+=l):t<r&&(t-=l),"translate("+e+" "+t+")"})),n.bindEvent()},bindEvent:function(){var i,n,a=this,s=this,t=s.config,r=s.state,e=s.$el,o=e.radar,l=e.svg,c=t.point_focus_only,e=r.inputType,h=r.transiting;t.interaction_enabled&&(i="mouse"===e,n=function(t){D(this,a);t=t.target;/tspan/i.test(t.tagName)&&(t=t.parentNode);t=(0,I.select)(t).datum();return t&&1===Object.keys(t).length?t.index:void 0}.bind(this),e=function(t){D(this,a),r.event=t;var e=n(t),t=$(e);(i||t)&&(s.hideTooltip(),c?s.hideCircleFocus():s.unexpandCircles(),i?s.setOverOut(!1,e):t&&s.callOverOutForTouch())}.bind(this),o.axes.selectAll("text").on(i?"mouseover ":"touchstart",function(t){D(this,a),h||(r.event=t,t=n(t),s.selectRectForSingle(l.node(),null,t),i?s.setOverOut(!0,t):s.callOverOutForTouch(t))}.bind(this)).on("mouseout",i?e:null),i||l.on("touchstart",e))},updateRadarShape:function(){var e=this,i=this,t=i.data.targets.filter(function(t){return D(this,e),i.isRadarType(t)}.bind(this)),n=i.cache.get(Ei),a=i.$el.radar.shapes.selectAll("polygon").data(t),s=a.enter().append("g").attr("class",i.getChartClass("Radar"));i.$T(a.exit()).remove(),s.append("polygon").merge(a).style("fill",i.color).style("stroke",i.color).attr("points",function(t){return D(this,e),n[t.id].join(" ")}.bind(this)),i.updateTargetForCircle(t,s)},radarCircleX:function(t){return this.cache.get(Ei)[t.id][t.index][0]},radarCircleY:function(t){return this.cache.get(Ei)[t.id][t.index][1]}},Oi={point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"},Pi={area_above:!1,area_below:!1,area_front:!0,area_linearGradient:!1,area_zerobased:!0},Ii={bar_label_threshold:0,bar_linearGradient:!1,bar_indices_removeNull:!1,bar_overlap:!1,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0},Di={bubble_maxR:35,bubble_zerobased:!1},zi={candlestick_width:void 0,candlestick_width_ratio:.6,candlestick_width_max:void 0,candlestick_color_down:"red"},Mi={line_connectNull:!1,line_step_type:"step",line_step_tooltipMatch:!1,line_zerobased:!1,line_classes:void 0,line_point:!0},Xi={scatter_zerobased:!1},$i={spline_interpolation_type:"cardinal"},Fi={donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_rate:.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0},Bi={gauge_background:"",gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_label_extents:void 0,gauge_label_threshold:0,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_arcLength:100,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50},Ni={pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_rate:.98,pie_expand_duration:50,pie_innerRadius:0,pie_outerRadius:void 0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0},Gi={polar_label_show:!0,polar_label_format:void 0,polar_label_threshold:.05,polar_label_ratio:void 0,polar_level_depth:3,polar_level_max:void 0,polar_level_show:!0,polar_level_text_backgroundColor:"#fff",polar_level_text_format:function(t){return D(this,void 0),t%1==0?t:t.toFixed(2)}.bind(void 0),polar_level_text_show:!0,polar_padAngle:0,polar_padding:0,polar_startingAngle:0},ji={radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function(t){return D(this,void 0),t%1==0?t:t.toFixed(2)}.bind(void 0),radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1},Yi=void 0;function Vi(t,e){j(Ve.prototype,fi.concat(t)),j(qe.prototype,gi),Vt.setOptions(pi.concat(e||[]))}function Hi(t,e){Vi([Si,Ai].concat(t||[])),Vt.setOptions([Oi,Mi].concat(e||[]))}function Wi(t,e){j(Ve.prototype,[vi].concat(t||[])),Vt.setOptions(e)}var Ui=function(){var t=this;return D(this,Yi),Hi(bi,[Pi]),(Ui=function(){return D(this,t),S.AREA}.bind(this))()}.bind(void 0),Zi=function(){var t=this;return D(this,Yi),Hi(bi,[Pi]),(Zi=function(){return D(this,t),S.AREA_LINE_RANGE}.bind(this))()}.bind(void 0),qi=function(){var t=this;return D(this,Yi),Hi(bi,[Pi,$i]),(qi=function(){return D(this,t),S.AREA_SPLINE}.bind(this))()}.bind(void 0),Ki=function(){var t=this;return D(this,Yi),Hi(bi,[Pi,$i]),(Ki=function(){return D(this,t),S.AREA_SPLINE_RANGE}.bind(this))()}.bind(void 0),Ji=function(){var t=this;return D(this,Yi),Hi(bi,[Pi]),(Ji=function(){return D(this,t),S.AREA_STEP}.bind(this))()}.bind(void 0),Qi=function(){var t=this;return D(this,Yi),Hi(),(Qi=function(){return D(this,t),S.LINE}.bind(this))()}.bind(void 0),tn=function(){var t=this;return D(this,Yi),Hi(void 0,[$i]),(tn=function(){return D(this,t),S.SPLINE}.bind(this))()}.bind(void 0),en=function(){var t=this;return D(this,Yi),Hi(),(en=function(){return D(this,t),S.STEP}.bind(this))()}.bind(void 0),nn=function(){var t=this;return D(this,Yi),Wi(void 0,[Fi]),(nn=function(){return D(this,t),S.DONUT}.bind(this))()}.bind(void 0),an=function(){var t=this;return D(this,Yi),Wi([Ti],[Bi]),(an=function(){return D(this,t),S.GAUGE}.bind(this))()}.bind(void 0),sn=function(){var t=this;return D(this,Yi),Wi(void 0,[Ni]),(sn=function(){return D(this,t),S.PIE}.bind(this))()}.bind(void 0),rn=function(){var t=this;return D(this,Yi),Wi([Ri],[Gi]),(rn=function(){return D(this,t),S.POLAR}.bind(this))()}.bind(void 0),on=function(){var t=this;return D(this,Yi),Wi([Si,Li],[Oi,ji]),(on=function(){return D(this,t),S.RADAR}.bind(this))()}.bind(void 0),ln=function(){var t=this;return D(this,Yi),Vi([_i],Ii),(ln=function(){return D(this,t),S.BAR}.bind(this))()}.bind(void 0),cn=function(){var t=this;return D(this,Yi),Vi([Si,wi],[Di,Oi]),(cn=function(){return D(this,t),S.BUBBLE}.bind(this))()}.bind(void 0),hn=function(){var t=this;return D(this,Yi),Vi([yi],[zi]),(hn=function(){return D(this,t),S.CANDLESTICK}.bind(this))()}.bind(void 0),dn=function(){var t=this;return D(this,Yi),Vi([Si],[Oi,Xi]),(dn=function(){return D(this,t),S.SCATTER}.bind(this))()}.bind(void 0),un={selected:function(t){var e=this,i=this.internal,n=[];return i.$el.main.selectAll("."+(kt.shapes+i.getTargetSelectorSuffix(t))).selectAll("."+kt.shape).filter(function(){return(0,I.select)(this).classed(At.SELECTED)}).each(function(t){return D(this,e),n.push(t)}.bind(this)),n},select:function(o,l,c){var h=this.internal,d=h.config,t=h.$el;d.data_selection_enabled&&t.main.selectAll("."+kt.shapes).selectAll("."+kt.shape).each(function(t,e){var i=(0,I.select)(this),n=(t.data||t).id,a=h.getToggle(this,t).bind(h),s=d.data_selection_grouped||!o||0<=o.indexOf(n),r=!l||0<=l.indexOf(e),n=i.classed(At.SELECTED);i.classed(xt.line)||i.classed(ot.area)||(s&&r?d.data_selection_isselectable.bind(h.api)(t)&&!n&&a(!0,i.classed(At.SELECTED,!0),t,e):F(c)&&c&&n&&a(!1,i.classed(At.SELECTED,!1),t,e))})},unselect:function(o,l){var c=this.internal,h=c.config,t=c.$el;h.data_selection_enabled&&t.main.selectAll("."+kt.shapes).selectAll("."+kt.shape).each(function(t,e){var i=(0,I.select)(this),n=(t.data||t).id,a=c.getToggle(this,t).bind(c),s=h.data_selection_grouped||!o||0<=o.indexOf(n),r=!l||0<=l.indexOf(e),n=i.classed(At.SELECTED);i.classed(xt.line)||i.classed(ot.area)||s&&r&&h.data_selection_isselectable.bind(c.api)(t)&&n&&a(!1,i.classed(At.SELECTED,!1),t,e)})}},gn={subchart:{show:function(){var t=this.internal,e=t.$el.subchart,i=t.config,n=i.subchart_show;n||(t.unbindZoomEvent(),i.subchart_show=!n,e.main||t.initSubchart(),n=e.main.selectAll("."+st.target),t.data.targets.length!==n.size()&&(t.updateSizes(),t.updateTargetsForSubchart(t.data.targets),n=null==(t=e.main)?void 0:t.selectAll("."+st.target)),null!=n&&n.style("opacity",null),null!=(e=e.main)&&e.style("display",null),this.resize())},hide:function(){var t=this.internal,e=t.$el.subchart.main,t=t.config;t.subchart_show&&"none"!==(null==e?void 0:e.style("display"))&&(t.subchart_show=!1,e.style("display","none"),this.resize())},toggle:function(){var t=this.internal.config;this.subchart[t.subchart_show?"hide":"show"]()}}},fn=On(13);Jt=function(t){var i=this,e=this.internal,n=e.$el,a=e.axis,s=e.config,r=e.org,o=e.scale,l=s.axis_rotated,c=a.isCategorized(),t=t;return s.zoom_enabled&&t?function(n,a,t){var s=this,r=t[0],o=t[1];return n.every(function(t,e){var i=this;return D(this,s),(0===e?r<=t:t<=o)&&!n.every(function(t,e){return D(this,i),t===a[e]}.bind(this))}.bind(this))}(t=a.isTimeSeries()?t.map(function(t){return D(this,i),et.bind(e)(t)}.bind(this)):t,e.getZoomDomain(!0),e.getZoomDomain())&&(c&&(t=t.map(function(t,e){return D(this,i),+t+(0===e?0:1)}.bind(this))),e.api.tooltip.hide(),s.subchart_show?(s=o.zoom||o.x,e.brush.getSelection().call(e.brush.move,t.map(s))):(r=[-(c=c?o.x.orgScale():r.xScale||o.x)(t[0]),0],r=(c=fn.zoomIdentity.scale(c.range()[1]/(c(t[1])-c(t[0])))).translate.apply(c,l?r.reverse():r),n.eventRect.call(e.zoom.transform,r)),e.setZoomResetButton()):t=o.zoom?o.zoom.domain():o.x.orgDomain(),t};j(Jt,{enable:function(t){var e=this.internal,i=e.config;/^(drag|wheel)$/.test(t)&&(i.zoom_type=t),i.zoom_enabled=!!t,e.zoom?!1===t&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){var e=this.internal,i=e.config,e=e.org.xDomain;return 0!==t&&!t||(i.zoom_x_max=K("max",[e[1],t])),i.zoom_x_max},min:function(t){var e=this.internal,i=e.config,e=e.org.xDomain;return 0!==t&&!t||(i.zoom_x_min=K("min",[e[0],t])),i.zoom_x_min},range:function(t){var e,i=this.zoom;return N(t)&&(e=t.min,t=t.max,F(e)&&i.min(e),F(t)&&i.max(t)),{min:i.min(),max:i.max()}}});var pn={zoom:Jt,unzoom:function(){var t=this.internal,e=t.config,i=t.$el,n=i.eventRect,i=i.zoomResetBtn;t.scale.zoom&&(e.subchart_show?t.brush.getSelection().call(t.brush.move,null):t.zoom.updateTransformScale(fn.zoomIdentity),t.updateZoom(!0),null!=i&&i.style("display","none"),(0,fn.zoomTransform)(n.node())!==fn.zoomIdentity&&t.zoom.transform(n,fn.zoomIdentity))}};function xn(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function vn(e){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?xn(Object(i),!0).forEach(function(t){a(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xn(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))});return e}var bn=vn(vn({},{drag:function(t){var e,i,d,u,g,f,n=this,p=this,a=p.config,s=p.state,r=p.$el.main,o=a.data_selection_grouped,l=a.interaction_enabled&&a.data_selection_isselectable;p.hasArcType()||!a.data_selection_enabled||a.zoom_enabled&&!p.zoom.altDomain||!a.data_selection_multiple||(e=(i=s.dragStart||[0,0])[0],a=i[1],i=t[0],t=t[1],d=Math.min(e,i),u=Math.max(e,i),g=o?s.margin.top:Math.min(a,t),f=o?s.height:Math.max(a,t),r.select("."+gt.dragarea).attr("x",d).attr("y",g).attr("width",u-d).attr("height",f-g),r.selectAll("."+kt.shapes).selectAll("."+kt.shape).filter(function(t){return D(this,n),null==l?void 0:l.bind(p.api)(t)}.bind(this)).each(function(t,e){var i,n=(0,I.select)(this),a=n.classed(At.SELECTED),s=n.classed(gt.INCLUDED),r=!1;if(n.classed(dt.circle))var o=+n.attr("cx"),l=+n.attr("cy"),c=p.togglePoint,r=d<o&&o<u&&g<l&&l<f;else{if(!n.classed(ct.bar))return;var o=(o=(h=(i=this).getBoundingClientRect()).width,h=h.height,{x:(i=w(i))[0].x,y:Math.min(i[0].y,i[1].y),width:o,height:h}),h=o.x,l=o.y;c=p.togglePath,r=!(u<h||h+o.width<d||f<l||l+o.height<g)}r^s&&(n.classed(gt.INCLUDED,!s),n.classed(At.SELECTED,!a),c.call(p,!a,n,t,e))}))},dragstart:function(t){var e=this.config,i=this.state,n=this.$el.main;!this.hasArcType()&&e.data_selection_enabled&&(i.dragStart=t,n.select("."+st.chart).append("rect").attr("class",gt.dragarea).style("opacity","0.1"),this.setDragStatus(!0))},dragend:function(){var t=this.config,e=this.$el.main,i=this.$T;!this.hasArcType()&&t.data_selection_enabled&&(i(e.select("."+gt.dragarea)).style("opacity","0").remove(),e.selectAll("."+kt.shape).classed(gt.INCLUDED,!1),this.setDragStatus(!1))}}),{},{selectPoint:function(t,e,i){var n=this,a=this,s=a.config,r=a.$el.main,o=a.$T,l=s.axis_rotated,c=(l?a.circleY:a.circleX).bind(a),h=(l?a.circleX:a.circleY).bind(a),l=a.pointSelectR.bind(a);m(s.data_onselected,a.api,e,t.node()),o(r.select("."+At.selectedCircles+a.getTargetSelectorSuffix(e.id)).selectAll("."+At.selectedCircle+"-"+i).data([e]).enter().append("circle").attr("class",function(){return D(this,n),a.generateClass(At.selectedCircle,i)}.bind(this)).attr("cx",c).attr("cy",h).attr("stroke",a.color).attr("r",function(t){return D(this,n),1.4*a.pointSelectR(t)}.bind(this))).attr("r",l)},unselectPoint:function(t,e,i){var n=this.config,a=this.$el.main,s=this.$T;m(n.data_onunselected,this.api,e,t.node()),s(a.select("."+At.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+At.selectedCircle+"-"+i)).attr("r",0).remove()},togglePoint:function(t,e,i,n){this[(t?"":"un")+"selectPoint"](e,i,n)},selectPath:function(t,e){var i=this.config;m(i.data_onselected,this.api,e,t.node()),i.interaction_brighten&&t.style("filter","brightness(1.25)")},unselectPath:function(t,e){var i=this.config;m(i.data_onunselected,this.api,e,t.node()),i.interaction_brighten&&t.style("filter",null)},togglePath:function(t,e,i,n){this[(t?"":"un")+"selectPath"](e,i,n)},getToggle:function(t,e){var i=this;return"path"===t.nodeName?this.togglePath:this.isStepType(e)?function(){D(this,i)}.bind(this):this.togglePoint},toggleShape:function(t,e,i){var n,a,s,r,o=this.config,l=this.$el.main;o.data_selection_enabled&&o.data_selection_isselectable.bind(this.api)(e)&&(a=(n=(0,I.select)(t)).classed(At.SELECTED),s=this.getToggle(t,e).bind(this),o.data_selection_multiple||(t="."+kt.shapes,o.data_selection_grouped&&(t+=this.getTargetSelectorSuffix(e.id)),l.selectAll(t).selectAll("."+kt.shape).each(function(t,e){var i=(0,I.select)(this);i.classed(At.SELECTED)&&s(!1,(r=i).classed(At.SELECTED,!1),t,e)})),r&&r.node()===n.node()||(n.classed(At.SELECTED,!a),s(!a,n,e,i)))}}),_n={initBrush:function(){var a,t,s=this,r=this,o=r.config,l=r.scale,i=r.$el.subchart,c=o.axis_rotated;r.brush=(c?(0,d.brushY):(0,d.brushX))().handleSize(5);var h=function(){D(this,s);var t=r.$el.svg.select("."+Lt.brush+" .overlay"),e={width:0,height:0};return t.size()&&(e.width=+t.attr("width"),e.height=+t.attr("height")),e[c?"width":"height"]}.bind(this);r.brush.on("start brush end",function(t){var i=this;D(this,s);var n=t.selection,e=t.target,t=t.type;"start"===t&&"touch"===r.state.inputType&&r.hideTooltip(),/(start|brush)/.test(t)&&r.redrawForBrush(),"end"===t&&(a=l.x.orgDomain()),null!=e&&e.handle&&(null===n?r.brush.handle.attr("display","none"):r.brush.handle.attr("display",null).attr("transform",function(t,e){return D(this,i),"translate("+(c?[33,n[e]-(0===e?30:24)]:[n[e],3])+")"}.bind(this)))}.bind(this)),r.brush.updateResize=function(){var e=this;t&&clearTimeout(t),t=setTimeout(function(){D(this,e);var t=this.getSelection();a&&(0,d.brushSelection)(t.node())&&this.move(t,a.map(l.subX.orgScale()))}.bind(this),0)},r.brush.update=function(){var t,e=this;return 0===this.extent()()[1].filter(function(t){return D(this,e),isNaN(t)}.bind(this)).length&&null!=(t=i.main)&&t.select("."+Lt.brush).call(this),this},r.brush.scale=function(t){var i=this,n=o.subchart_size_height||h(),e=r.getExtent();!e&&t.range?e=[[0,0],[t.range()[1],n]]:B(e)&&(e=e.map(function(t,e){return D(this,i),[t,0<e?n:e]}.bind(this))),c&&e[1].reverse(),this.extent(e),this.update()},r.brush.getSelection=function(){return D(this,s),i.main?i.main.select("."+Lt.brush):(0,I.select)([])}.bind(this)},initSubchart:function(){var i,n=this,a=this,t=a.config,e=a.state,s=e.clip,r=e.hasAxis,o=a.$el,l=o.defs,c=o.svg,h=o.subchart,d=o.axis;r&&(e=t.subchart_show?null:"hidden",o=s.id+"-subchart",r=a.getClipPath(o),s.idSubchart=o,a.appendClip(l,o),a.initBrush(),h.main=c.append("g").classed(Lt.subchart,!0).attr("transform",a.getTranslate("context")),(i=h.main).style("visibility",e),i.append("g").attr("clip-path",r).attr("class",Lt.chart),["bar","line","bubble","candlestick","scatter"].forEach(function(t){D(this,n);var e=Y(/^(bubble|scatter)$/.test(t)?"circle":t);(a.hasType(t)||a.hasTypeOf(e))&&(t=i.select("."+Lt.chart),e=Lt["chart"+e+"s"],t.select("."+e).empty()&&t.append("g").attr("class",e))}.bind(this)),r=i.append("g").attr("clip-path",r).attr("class",Lt.brush).call(a.brush),t.subchart_showHandle&&a.addBrushHandle(r),d.subX=i.append("g").attr("class",Lt.axisX).attr("transform",a.getTranslate("subX")).attr("clip-path",t.axis_rotated?"":s.pathXAxis).style("visibility",t.subchart_axis_x_show?e:"hidden"))},addBrushHandle:function(t){var e=this,i=this.config,n=i.axis_rotated,i=i.subchart_init_range,a=n?["M 5.2491724,29.749209 a 6,6 0 0 0 -5.50000003,-6.5 H -5.7508276 a 6,6 0 0 0 -6.0000004,6.5 z m -5.00000003,-2 H -6.7508276 m 6.99999997,-2 H -6.7508276Z","M 5.2491724,23.249172 a 6,-6 0 0 1 -5.50000003,6.5 H -5.7508276 a 6,-6 0 0 1 -6.0000004,-6.5 z m -5.00000003,2 H -6.7508276 m 6.99999997,2 H -6.7508276Z"]:["M 0 18 A 6 6 0 0 0 -6.5 23.5 V 29 A 6 6 0 0 0 0 35 Z M -2 23 V 30 M -4 23 V 30Z","M 0 18 A 6 6 0 0 1 6.5 23.5 V 29 A 6 6 0 0 1 0 35 Z M 2 23 V 30 M 4 23 V 30Z"];this.brush.handle=t.selectAll(".handle--custom").data(n?[{type:"n"},{type:"s"}]:[{type:"w"},{type:"e"}]).enter().append("path").attr("class","handle--custom").attr("cursor",(n?"ns":"ew")+"-resize").attr("d",function(t){return D(this,e),a[+/[se]/.test(t.type)]}.bind(this)).attr("display",i?null:"none")},updateTargetsForSubchart:function(r){var o=this,l=this,t=l.config,e=l.state,c=l.$el.subchart.main;t.subchart_show&&(["bar","line","bubble","candlestick","scatter"].filter(function(t){return D(this,o),l.hasType(t)||l.hasTypeOf(Y(t))}.bind(this)).forEach(function(t){D(this,o);var e=/^(bubble|scatter)$/.test(t),i=Y(e?"circle":t),n=l.getChartClass(i,!0),a=l.getClass(e?"circles":t+"s",!0),s=c.select("."+Lt["chart"+i+"s"]);e?((e=s.selectAll("."+Lt.circles).data(r.filter(l["is"+Y(t)+"Type"].bind(l))).attr("class",a)).exit().remove(),e.enter().append("g").attr("class",a)):(a=(i=s.selectAll("."+Lt["chart"+i]).attr("class",n).data(r.filter(l["is"+i+"Type"].bind(l)))).enter().append("g").style("opacity","0").attr("class",n).append("g").attr("class",a),i.exit().remove(),"line"===t&&l.hasTypeOf("Area")&&a.append("g").attr("class",l.getClass("areas",!0)))}.bind(this)),c.selectAll("."+Lt.brush+" rect").attr(t.axis_rotated?"width":"height",t.axis_rotated?e.width2:e.height2))},redrawSubchart:function(t,e,i){var n=this,a=this,s=a.config,r=a.$el.subchart.main,o=a.state,l=!!e;r.style("visibility",s.subchart_show?null:"hidden"),s.subchart_show&&("zoom"===(null==(r=o.event)?void 0:r.type)&&a.brush.update(),t&&(r=s.subchart_init_range,P(a)||a.brush.update(),Object.keys(i.type).forEach(function(t){D(this,n);var e=Y(t),t=a["generateDraw"+e](i.indices[t],!0);a["update"+e](l,!0),a["redraw"+e](t,l,!0)}.bind(this)),(a.hasType("bubble")||a.hasType("scatter"))&&(t=i.pos.cx,s=a.updateCircleY(!0),a.updateCircle(!0),a.redrawCircle(t,s,l,void 0,!0)),!o.rendered&&r&&a.brush.move(a.brush.getSelection(),r.map(a.scale.x))))},redrawForBrush:function(){var t=this.config,e=t.subchart_onbrush,i=t.zoom_rescale,t=this.scale;this.redraw({withTransition:!1,withY:i,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),e.bind(this.api)(t.x.orgDomain())},transformContext:function(t,e){var i=this.$el.subchart,n=this.$T,t=null!=e&&e.axisSubX?e.axisSubX:n(i.main.select("."+Lt.axisX),t);i.main.attr("transform",this.getTranslate("context")),t.attr("transform",this.getTranslate("subX"))},getExtent:function(){var e,i=this,t=this.config,n=this.scale,t=t.axis_x_extent;return t&&(M(t)?t=t.bind(this.api)(this.getXDomain(this.data.targets),n.subX):this.axis.isTimeSeries()&&t.every(isNaN)&&(e=et.bind(this),t=t.map(function(t){return D(this,i),n.subX(e(t))}.bind(this)))),t}},mn={initZoom:function(){this.scale.zoom=null,this.generateZoom(),this.initZoomBehaviour()},bindZoomEvent:function(t){void 0===t&&(t=!0);var e=this.config;e.zoom_enabled&&t?e.subchart_show||this.bindZoomOnEventRect():!1===t&&(this.api.unzoom(),this.unbindZoomEvent())},generateZoom:function(){var o=this,l=this,c=l.config,h=l.org,d=l.scale,t=(0,fn.zoom)().duration(0).on("start",l.onZoomStart.bind(l)).on("zoom",l.onZoom.bind(l)).on("end",l.onZoomEnd.bind(l));t.orgScaleExtent=function(){D(this,o);var t=c.zoom_extent||[1,10];return[t[0],Math.max(l.getMaxDataCount()/t[1],t[1])]}.bind(this),t.updateScaleExtent=function(){var t=R(l.scale.x.orgDomain())/R(l.getZoomDomain()),e=this.orgScaleExtent();return this.scaleExtent([e[0]*t,e[1]*t]),this},t.updateTransformScale=function(t,e){D(this,o);var i=c.axis_rotated;null!=(n=h.xScale)&&n.range(d.x.range());var n,a=t[i?"rescaleY":"rescaleX"](h.xScale||d.x),s=l.trimXDomain(a.domain()),r=c.zoom_rescale;a.domain(s,h.xDomain),e&&(n=a(d.x.domain()[0]),e=i?t.x:n,n=i?n:t.y,l.$el.eventRect.property("__zoom",fn.zoomIdentity.translate(e,n).scale(t.k))),l.state.xTickOffset||(l.state.xTickOffset=l.axis.x.tickOffset()),d.zoom=l.getCustomizedScale(a),l.axis.x.scale(d.zoom),r&&(h.xScale||(h.xScale=d.x.copy()),d.x.domain(s))}.bind(this),t.getDomain=function(){D(this,o);var t=d[d.zoom?"zoom":"subX"].domain();return l.axis.isCategorized()&&(t[1]-=2),t}.bind(this),l.zoom=t},onZoomStart:function(t){var e=t.sourceEvent;e&&(this.zoom.startEvent=e,this.state.zooming=!0,m(this.config.zoom_onzoomstart,this.api,t))},onZoom:function(t){var e,i,n,a=this,s=this,r=s.config,o=s.scale,l=s.state,c=s.org,h=t.sourceEvent,d=(null==t?void 0:t.transform)===fn.zoomIdentity;!r.zoom_enabled||0===s.filterTargetsToShow(s.data.targets).length||!o.zoom&&-1<(null==h?void 0:h.type.indexOf("touch"))&&1===(null==h?void 0:h.touches.length)||(t.sourceEvent&&(l.zooming=!0),e="mousemove"===(null==h?void 0:h.type),i=(null==h?void 0:h.wheelDelta)<0,n=t.transform,!e&&i&&o.x.domain().every(function(t,e){return D(this,a),t!==c.xDomain[e]}.bind(this))&&o.x.domain(c.xDomain),s.zoom.updateTransformScale(n,"wheel"===r.zoom_type&&h),t=0<r.transition_duration&&!r.subchart_show&&(l.dragging||d||!t.sourceEvent),s.redraw({withTransition:t,withY:r.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),s.state.cancelClick=e,d||m(r.zoom_onzoom,s.api,s.zoom.getDomain()))},onZoomEnd:function(t){var e,i=this.config,n=this.state,a=this.zoom.startEvent,s=null==t?void 0:t.sourceEvent,t=(null==t?void 0:t.transform)===fn.zoomIdentity;-1<(null==a?void 0:a.type.indexOf("touch"))&&(a=a.changedTouches[0],s=null==s||null==(e=s.changedTouches)?void 0:e[0]),"drag"===i.zoom_type&&s&&a.clientX===s.clientX&&a.clientY===s.clientY||(this.redrawEventRect(),this.updateZoom(),n.zooming=!1,t||!s&&!n.dragging||m(i.zoom_onzoomend,this.api,this.zoom.getDomain()))},updateZoom:function(t){var e=this.scale,i=e.subX,n=e.x,a=e.zoom;a&&(e=a.domain(),a=i.domain(),e=(e[0]<=a[0]||e[0]-.015<=a[0])&&(a[1]<=e[1]||a[1]<=e[1]-.015),(t||e)&&(this.axis.x.scale(i),n.domain(i.orgDomain()),this.scale.zoom=null))},bindZoomOnEventRect:function(){var t=this,e=this.config,i=this.$el.eventRect,e="drag"===e.zoom_type?this.zoomBehaviour:this.zoom;this.$el.svg.on("wheel",function(){D(this,t)}.bind(this)),i.call(e).on("dblclick.zoom",null)},initZoomBehaviour:function(){var n,a=this,s=this,t=s.config,r=s.state,e=t.axis_rotated,o=0,l=0,c={axis:e?"y":"x",attr:e?"height":"width",index:e?1:0};s.zoomBehaviour=(0,_e.drag)().clickDistance(4).on("start",function(t){r.event=t,s.setDragStatus(!0),s.unselectRect(),n=n||s.$el.main.append("rect").attr("clip-path",r.clip.path).attr("class",Et.zoomBrush).attr("width",e?r.width:0).attr("height",e?0:r.height),o=A(t,this)[c.index],l=o,n.attr(c.axis,o).attr(c.attr,0),s.onZoomStart(t)}).on("drag",function(t){l=A(t,this)[c.index],n.attr(c.axis,Math.min(o,l)).attr(c.attr,Math.abs(l-o))}).on("end",function(t){var e=this;D(this,a);var i=s.scale.zoom||s.scale.x;r.event=t,n.attr(c.axis,0).attr(c.attr,0),l<o&&(o=(t=[l,o])[0],l=t[1]),o<0&&(l+=Math.abs(o),o=0),o!==l&&s.api.zoom([o,l].map(function(t){return D(this,e),i.invert(t)}.bind(this))),s.setDragStatus(!1)}.bind(this))},setZoomResetButton:function(){var t=this,e=t.config,i=t.$el,n=e.zoom_resetButton;n&&"drag"===e.zoom_type&&(i.zoomResetBtn?i.zoomResetBtn.style("display",null):i.zoomResetBtn=t.$el.chart.append("div").classed(st.button,!0).append("span").on("click",function(){M(n.onclick)&&n.onclick.bind(t.api)(this),t.api.unzoom()}).classed(Et.buttonZoomReset,!0).text(n.text||"Reset Zoom"))}},yn=void 0,Tn={data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return D(this,yn),!0}.bind(void 0),data_selection_multiple:!0,data_selection_draggable:!1,data_onselected:function(){D(this,yn)}.bind(void 0),data_onunselected:function(){D(this,yn)}.bind(void 0)},wn={subchart_show:!1,subchart_showHandle:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_format:void 0,subchart_axis_x_tick_text_show:!0,subchart_init_range:void 0,subchart_onbrush:function(){D(this,void 0)}.bind(void 0)},An={zoom_enabled:!1,zoom_type:"wheel",zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0},kn=void 0,Sn=function(){var t=this;return D(this,kn),j(Ve.prototype,bn),j(qe.prototype,un),Vt.setOptions([Tn]),(Sn=function(){return D(this,t),!0}.bind(this))()}.bind(void 0),Cn=function(){var t=this;return D(this,kn),j(Ve.prototype,_n),j(qe.prototype,gn),Vt.setOptions([wn]),(Cn=function(){return D(this,t),!0}.bind(this))()}.bind(void 0),Rn=function(){var t=this;return D(this,kn),j(Ve.prototype,mn),j(qe.prototype,pn),Vt.setOptions([An]),(Rn=function(){return D(this,t),!0}.bind(this))()}.bind(void 0),En={},Ln={version:"3.6.0",generate:function(t){t=Z({},En,t),t=new qe(t);return t.internal.charts=this.instance,this.instance.push(t),t},defaults:function(t){return En=N(t)?t:En},instance:[],plugin:{}};Object.keys(e).forEach(function(t){return D(this,void 0),e[t]()}.bind(void 0)),Object.keys(i).forEach(function(t){return D(this,void 0),i[t]()}.bind(void 0))}(),Pn}()});