((t,i)=>{"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("jquery")):t.jQueryBridget=i(t,t.jQuery)})(window,function(e,t){var i=Array.prototype.slice,n=e.console,u=void 0===n?function(){}:function(e){n.error(e)};function a(l,d,c){(c=c||t||e.jQuery)&&(d.prototype.option||(d.prototype.option=function(e){c.isPlainObject(e)&&(this.options=c.extend(!0,this.options,e))}),c.fn[l]=function(e){var t,n,a,o,r,s;return"string"==typeof e?(t=i.call(arguments,1),a=t,r="$()."+l+'("'+(n=e)+'")',(t=this).each(function(e,t){var i,t=c.data(t,l);t?(i=t[n])&&"_"!=n.charAt(0)?(i=i.apply(t,a),o=void 0===o?i:o):u(r+" is not a valid method"):u(l+" not initialized. Cannot call methods, i.e. "+r)}),void 0!==o?o:t):(s=e,this.each(function(e,t){var i=c.data(t,l);i?(i.option(s),i._init()):(i=new d(t,s),c.data(t,l,i))}),this)},o(c))}function o(e){e&&!e.bridget&&(e.bridget=a)}return o(t||e.jQuery),a}),((e,t)=>{"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()})("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){var i;if(e&&t)return-1==(i=(i=this._events=this._events||{})[e]=i[e]||[]).indexOf(t)&&i.push(t),this},t.once=function(e,t){var i;if(e&&t)return this.on(e,t),((i=this._onceEvents=this._onceEvents||{})[e]=i[e]||{})[t]=!0,this},t.off=function(e,t){e=this._events&&this._events[e];if(e&&e.length)return-1!=(t=e.indexOf(t))&&e.splice(t,1),this},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],a=0;a<i.length;a++){var o=i[a];n&&n[o]&&(this.off(e,o),delete n[o]),o.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),((e,t)=>{"function"==typeof define&&define.amd?define("get-size/get-size",t):"object"==typeof module&&module.exports?module.exports=t():e.getSize=t()})(window,function(){function g(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var t="undefined"==typeof console?function(){}:function(e){console.error(e)},b=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],y=b.length;function v(e){e=getComputedStyle(e);return e||t("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}var D,x=!1;function C(e){if(x||(x=!0,(c=document.createElement("div")).style.width="200px",c.style.padding="1px 2px 3px 4px",c.style.borderStyle="solid",c.style.borderWidth="1px 2px 3px 4px",c.style.boxSizing="border-box",(d=document.body||document.documentElement).appendChild(c),o=v(c),D=200==Math.round(g(o.width)),C.isBoxSizeOuter=D,d.removeChild(c)),(e="string"==typeof e?document.querySelector(e):e)&&"object"==typeof e&&e.nodeType){var t=v(e);if("none"==t.display){for(var i={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=0;n<y;n++)i[b[n]]=0;return i}for(var a={},o=(a.width=e.offsetWidth,a.height=e.offsetHeight,a.isBorderBox="border-box"==t.boxSizing),r=0;r<y;r++){var s=b[r],l=t[s],l=parseFloat(l);a[s]=isNaN(l)?0:l}var d=a.paddingLeft+a.paddingRight,c=a.paddingTop+a.paddingBottom,e=a.marginLeft+a.marginRight,u=a.marginTop+a.marginBottom,p=a.borderLeftWidth+a.borderRightWidth,f=a.borderTopWidth+a.borderBottomWidth,h=o&&D,m=g(t.width),m=(!1!==m&&(a.width=m+(h?0:d+p)),g(t.height));return!1!==m&&(a.height=m+(h?0:c+f)),a.innerWidth=a.width-(d+p),a.innerHeight=a.height-(c+f),a.outerWidth=a.width+e,a.outerHeight=a.height+u,a}}return C}),((e,t)=>{"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",t):"object"==typeof module&&module.exports?module.exports=t():e.matchesSelector=t()})(window,function(){var i=(()=>{var e=window.Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],i=0;i<t.length;i++){var n=t[i]+"MatchesSelector";if(e[n])return n}})();return function(e,t){return e[i](t)}}),((t,i)=>{"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("desandro-matches-selector")):t.fizzyUIUtils=i(t,t.matchesSelector)})(window,function(i,o){var l={extend:function(e,t){for(var i in t)e[i]=t[i];return e},modulo:function(e,t){return(e%t+t)%t}},t=Array.prototype.slice,d=(l.makeArray=function(e){return Array.isArray(e)?e:null==e?[]:"object"==typeof e&&"number"==typeof e.length?t.call(e):[e]},l.removeFrom=function(e,t){t=e.indexOf(t);-1!=t&&e.splice(t,1)},l.getParent=function(e,t){for(;e.parentNode&&e!=document.body;)if(o(e=e.parentNode,t))return e},l.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},l.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},l.filterFindElements=function(e,n){e=l.makeArray(e);var a=[];return e.forEach(function(e){if(e instanceof HTMLElement)if(n){o(e,n)&&a.push(e);for(var t=e.querySelectorAll(n),i=0;i<t.length;i++)a.push(t[i])}else a.push(e)}),a},l.debounceMethod=function(e,t,n){n=n||100;var a=e.prototype[t],o=t+"Timeout";e.prototype[t]=function(){var e=this[o],t=(clearTimeout(e),arguments),i=this;this[o]=setTimeout(function(){a.apply(i,t),delete i[o]},n)}},l.docReady=function(e){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},l.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,i){return t+"-"+i}).toLowerCase()},i.console);return l.htmlInit=function(r,s){l.docReady(function(){var e=l.toDashed(s),n="data-"+e,t=document.querySelectorAll("["+n+"]"),e=document.querySelectorAll(".js-"+e),t=l.makeArray(t).concat(l.makeArray(e)),a=n+"-options",o=i.jQuery;t.forEach(function(t){var e,i=t.getAttribute(n)||t.getAttribute(a);try{e=i&&JSON.parse(i)}catch(e){return void(d&&d.error("Error parsing "+n+" on "+t.className+": "+e))}i=new r(t,e);o&&o.data(t,s,i)})})},l}),((e,t)=>{"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],t):"object"==typeof module&&module.exports?module.exports=t(require("ev-emitter"),require("get-size")):(e.Outlayer={},e.Outlayer.Item=t(e.EvEmitter,e.getSize))})(window,function(e,t){var i=document.documentElement.style,n="string"==typeof i.transition?"transition":"WebkitTransition",i="string"==typeof i.transform?"transform":"WebkitTransform",a={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[n],o={transform:i,transition:n,transitionDuration:n+"Duration",transitionProperty:n+"Property",transitionDelay:n+"Delay"};function r(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}e=r.prototype=Object.create(e.prototype);e.constructor=r,e._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},e.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},e.getSize=function(){this.size=t(this.element)},e.css=function(e){var t,i=this.element.style;for(t in e)i[o[t]||t]=e[t]},e.getPosition=function(){var e=getComputedStyle(this.element),t=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=e[t?"left":"right"],e=e[i?"top":"bottom"],a=parseFloat(n),o=parseFloat(e),r=this.layout.size;-1!=n.indexOf("%")&&(a=a/100*r.width),-1!=e.indexOf("%")&&(o=o/100*r.height),a=isNaN(a)?0:a,o=isNaN(o)?0:o,a-=t?r.paddingLeft:r.paddingRight,o-=i?r.paddingTop:r.paddingBottom,this.position.x=a,this.position.y=o},e.layoutPosition=function(){var e=this.layout.size,t={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),a=i?"right":"left",o=this.position.x+e[i?"paddingLeft":"paddingRight"],i=(t[i?"left":"right"]=this.getXValue(o),t[a]="",n?"paddingTop":"paddingBottom"),o=n?"bottom":"top",a=this.position.y+e[i];t[n?"top":"bottom"]=this.getYValue(a),t[o]="",this.css(t),this.emitEvent("layout",[this])},e.getXValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?e/this.layout.size.width*100+"%":e+"px"},e.getYValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?e/this.layout.size.height*100+"%":e+"px"},e._transitionTo=function(e,t){this.getPosition();var i=this.position.x,n=this.position.y,a=e==this.position.x&&t==this.position.y;this.setPosition(e,t),a&&!this.isTransitioning?this.layoutPosition():((a={}).transform=this.getTranslate(e-i,t-n),this.transition({to:a,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0}))},e.getTranslate=function(e,t){return"translate3d("+(e=this.layout._getOption("originLeft")?e:-e)+"px, "+(t=this.layout._getOption("originTop")?t:-t)+"px, 0)"},e.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},e.moveTo=e._transitionTo,e.setPosition=function(e,t){this.position.x=parseFloat(e),this.position.y=parseFloat(t)},e._nonTransition=function(e){for(var t in this.css(e.to),e.isCleaning&&this._removeStyles(e.to),e.onTransitionEnd)e.onTransitionEnd[t].call(this)},e.transition=function(e){if(parseFloat(this.layout.options.transitionDuration)){var t,i=this._transn;for(t in e.onTransitionEnd)i.onEnd[t]=e.onTransitionEnd[t];for(t in e.to)i.ingProperties[t]=!0,e.isCleaning&&(i.clean[t]=!0);e.from&&(this.css(e.from),this.element.offsetHeight,0),this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0}else this._nonTransition(e)};var s="opacity,"+i.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}),l=(e.enableTransition=function(){var e;this.isTransitioning||(e=this.layout.options.transitionDuration,this.css({transitionProperty:s,transitionDuration:e="number"==typeof e?e+"ms":e,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(a,this,!1))},e.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},e.onotransitionend=function(e){this.ontransitionend(e)},{"-webkit-transform":"transform"}),d=(e.ontransitionend=function(e){var t,i;e.target===this.element&&(t=this._transn,i=l[e.propertyName]||e.propertyName,delete t.ingProperties[i],(e=>{for(var t in e)return;return 1})(t.ingProperties)&&this.disableTransition(),i in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[i]),i in t.onEnd&&(t.onEnd[i].call(this),delete t.onEnd[i]),this.emitEvent("transitionEnd",[this]))},e.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(a,this,!1),this.isTransitioning=!1},e._removeStyles=function(e){var t,i={};for(t in e)i[t]="";this.css(i)},{transitionProperty:"",transitionDuration:"",transitionDelay:""});return e.removeTransitionStyles=function(){this.css(d)},e.stagger=function(e){e=isNaN(e)?0:e,this.staggerDelay=e+"ms"},e.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},e.remove=function(){n&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()},e.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},e.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},e.getHideRevealTransitionEndProperty=function(e){var t,e=this.layout.options[e];if(e.opacity)return"opacity";for(t in e)return t},e.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},e.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},e.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},r}),((a,o)=>{"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(e,t,i,n){return o(a,e,t,i,n)}):"object"==typeof module&&module.exports?module.exports=o(a,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):a.Outlayer=o(a,a.EvEmitter,a.getSize,a.fizzyUIUtils,a.Outlayer.Item)})(window,function(e,t,a,n,o){function i(){}var r=e.console,s=e.jQuery,l=0,d={};function c(e,t){var i=n.getQueryElement(e);i?(this.element=i,s&&(this.$element=s(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(t),t=++l,this.element.outlayerGUID=t,(d[t]=this)._create(),this._getOption("initLayout")&&this.layout()):r&&r.error("Bad element for "+this.constructor.namespace+": "+(i||e))}c.namespace="outlayer",c.Item=o,c.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var u=c.prototype;function p(e){function t(){e.apply(this,arguments)}return(t.prototype=Object.create(e.prototype)).constructor=t}n.extend(u,t.prototype),u.option=function(e){n.extend(this.options,e)},u._getOption=function(e){var t=this.constructor.compatOptions[e];return t&&void 0!==this.options[t]?this.options[t]:this.options[e]},c.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},u._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},u.reloadItems=function(){this.items=this._itemize(this.element.children)},u._itemize=function(e){for(var t=this._filterFindItemElements(e),i=this.constructor.Item,n=[],a=0;a<t.length;a++){var o=new i(t[a],this);n.push(o)}return n},u._filterFindItemElements=function(e){return n.filterFindElements(e,this.options.itemSelector)},u.getItemElements=function(){return this.items.map(function(e){return e.element})},u.layout=function(){this._resetLayout(),this._manageStamps();var e=this._getOption("layoutInstant"),e=void 0!==e?e:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},u._init=u.layout,u._resetLayout=function(){this.getSize()},u.getSize=function(){this.size=a(this.element)},u._getMeasurement=function(e,t){var i,n=this.options[e];n?("string"==typeof n?i=this.element.querySelector(n):n instanceof HTMLElement&&(i=n),this[e]=i?a(i)[t]:n):this[e]=0},u.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},u._getItemsForLayout=function(e){return e.filter(function(e){return!e.isIgnored})},u._layoutItems=function(e,i){var n;this._emitCompleteOnItems("layout",e),e&&e.length&&(n=[],e.forEach(function(e){var t=this._getItemLayoutPosition(e);t.item=e,t.isInstant=i||e.isLayoutInstant,n.push(t)},this),this._processLayoutQueue(n))},u._getItemLayoutPosition=function(){return{x:0,y:0}},u._processLayoutQueue=function(e){this.updateStagger(),e.forEach(function(e,t){this._positionItem(e.item,e.x,e.y,e.isInstant,t)},this)},u.updateStagger=function(){var e=this.options.stagger;if(null!=e)return this.stagger=(e=>{var t;return"number"==typeof e?e:(t=(e=e.match(/(^\d*\.?\d*)(\w*)/))&&e[1],e=e&&e[2],t.length?(t=parseFloat(t),e=f[e]||1,t*e):0)})(e),this.stagger;this.stagger=0},u._positionItem=function(e,t,i,n,a){n?e.goTo(t,i):(e.stagger(a*this.stagger),e.moveTo(t,i))},u._postLayout=function(){this.resizeContainer()},u.resizeContainer=function(){var e;this._getOption("resizeContainer")&&(e=this._getContainerSize())&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))},u._getContainerSize=i,u._setContainerMeasure=function(e,t){var i;void 0!==e&&((i=this.size).isBorderBox&&(e+=t?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px")},u._emitCompleteOnItems=function(t,e){var i=this;function n(){i.dispatchEvent(t+"Complete",null,[e])}var a,o=e.length;function r(){++a==o&&n()}e&&o?(a=0,e.forEach(function(e){e.once(t,r)})):n()},u.dispatchEvent=function(e,t,i){var n=t?[t].concat(i):i;this.emitEvent(e,n),s&&(this.$element=this.$element||s(this.element),t?((n=s.Event(t)).type=e,this.$element.trigger(n,i)):this.$element.trigger(e,i))},u.ignore=function(e){e=this.getItem(e);e&&(e.isIgnored=!0)},u.unignore=function(e){e=this.getItem(e);e&&delete e.isIgnored},u.stamp=function(e){(e=this._find(e))&&(this.stamps=this.stamps.concat(e),e.forEach(this.ignore,this))},u.unstamp=function(e){(e=this._find(e))&&e.forEach(function(e){n.removeFrom(this.stamps,e),this.unignore(e)},this)},u._find=function(e){if(e)return"string"==typeof e&&(e=this.element.querySelectorAll(e)),e=n.makeArray(e)},u._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},u._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},u._manageStamp=i,u._getElementOffset=function(e){var t=e.getBoundingClientRect(),i=this._boundingRect,e=a(e);return{left:t.left-i.left-e.marginLeft,top:t.top-i.top-e.marginTop,right:i.right-t.right-e.marginRight,bottom:i.bottom-t.bottom-e.marginBottom}},u.handleEvent=n.handleEvent,u.bindResize=function(){e.addEventListener("resize",this),this.isResizeBound=!0},u.unbindResize=function(){e.removeEventListener("resize",this),this.isResizeBound=!1},u.onresize=function(){this.resize()},n.debounceMethod(c,"onresize",100),u.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},u.needsResizeLayout=function(){var e=a(this.element);return this.size&&e&&e.innerWidth!==this.size.innerWidth},u.addItems=function(e){e=this._itemize(e);return e.length&&(this.items=this.items.concat(e)),e},u.appended=function(e){e=this.addItems(e);e.length&&(this.layoutItems(e,!0),this.reveal(e))},u.prepended=function(e){var t,e=this._itemize(e);e.length&&(t=this.items.slice(0),this.items=e.concat(t),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(t))},u.reveal=function(e){var i;this._emitCompleteOnItems("reveal",e),e&&e.length&&(i=this.updateStagger(),e.forEach(function(e,t){e.stagger(t*i),e.reveal()}))},u.hide=function(e){var i;this._emitCompleteOnItems("hide",e),e&&e.length&&(i=this.updateStagger(),e.forEach(function(e,t){e.stagger(t*i),e.hide()}))},u.revealItemElements=function(e){e=this.getItems(e);this.reveal(e)},u.hideItemElements=function(e){e=this.getItems(e);this.hide(e)},u.getItem=function(e){for(var t=0;t<this.items.length;t++){var i=this.items[t];if(i.element==e)return i}},u.getItems=function(e){e=n.makeArray(e);var t=[];return e.forEach(function(e){e=this.getItem(e);e&&t.push(e)},this),t},u.remove=function(e){e=this.getItems(e);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(e){e.remove(),n.removeFrom(this.items,e)},this)},u.destroy=function(){var e=this.element.style,e=(e.height="",e.position="",e.width="",this.items.forEach(function(e){e.destroy()}),this.unbindResize(),this.element.outlayerGUID);delete d[e],delete this.element.outlayerGUID,s&&s.removeData(this.element,this.constructor.namespace)},c.data=function(e){e=(e=n.getQueryElement(e))&&e.outlayerGUID;return e&&d[e]},c.create=function(e,t){var i=p(c);return i.defaults=n.extend({},c.defaults),n.extend(i.defaults,t),i.compatOptions=n.extend({},c.compatOptions),i.namespace=e,i.data=c.data,i.Item=p(o),n.htmlInit(i,e),s&&s.bridget&&s.bridget(e,i),i};var f={ms:1,s:1e3};return c.Item=o,c}),((e,t)=>{"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],t):"object"==typeof module&&module.exports?module.exports=t(require("outlayer"),require("get-size")):e.Masonry=t(e.Outlayer,e.getSize)})(window,function(e,s){var e=e.create("masonry"),t=(e.compatOptions.fitWidth="isFitWidth",e.prototype);return t._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var e=0;e<this.cols;e++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},t.measureColumns=function(){this.getContainerWidth(),this.columnWidth||(e=(e=this.items[0])&&e.element,this.columnWidth=e&&s(e).outerWidth||this.containerWidth);var e=this.columnWidth+=this.gutter,t=this.containerWidth+this.gutter,i=t/e,t=e-t%e,i=Math[t&&t<1?"round":"floor"](i);this.cols=Math.max(i,1)},t.getContainerWidth=function(){var e=this._getOption("fitWidth")?this.element.parentNode:this.element,e=s(e);this.containerWidth=e&&e.innerWidth},t._getItemLayoutPosition=function(e){e.getSize();for(var t=e.size.outerWidth%this.columnWidth,t=Math[t&&t<1?"round":"ceil"](e.size.outerWidth/this.columnWidth),t=Math.min(t,this.cols),i=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](t,e),n={x:this.columnWidth*i.col,y:i.y},a=i.y+e.size.outerHeight,o=t+i.col,r=i.col;r<o;r++)this.colYs[r]=a;return n},t._getTopColPosition=function(e){var e=this._getTopColGroup(e),t=Math.min.apply(Math,e);return{col:e.indexOf(t),y:t}},t._getTopColGroup=function(e){if(e<2)return this.colYs;for(var t=[],i=this.cols+1-e,n=0;n<i;n++)t[n]=this._getColGroupY(n,e);return t},t._getColGroupY=function(e,t){return t<2?this.colYs[e]:(e=this.colYs.slice(e,e+t),Math.max.apply(Math,e))},t._getHorizontalColPosition=function(e,t){var i=this.horizontalColIndex%this.cols,i=1<e&&i+e>this.cols?0:i,t=t.size.outerWidth&&t.size.outerHeight;return this.horizontalColIndex=t?i+e:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,e)}},t._manageStamp=function(e){var t=s(e),e=this._getElementOffset(e),i=this._getOption("originLeft")?e.left:e.right,n=i+t.outerWidth,i=Math.floor(i/this.columnWidth),i=Math.max(0,i),a=Math.floor(n/this.columnWidth);a-=n%this.columnWidth?0:1;for(var a=Math.min(this.cols-1,a),o=(this._getOption("originTop")?e.top:e.bottom)+t.outerHeight,r=i;r<=a;r++)this.colYs[r]=Math.max(o,this.colYs[r])},t._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this._getOption("fitWidth")&&(e.width=this._getContainerFitWidth()),e},t._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},t.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!=this.containerWidth},e}),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.pell={})})(this,function(e){function r(e,t,i){e.addEventListener(t,i)}function s(e,t){e.appendChild(t)}function l(e){return document.createElement(e)}function t(e){return document.queryCommandState(e)}function d(e){return document.execCommand(e,!1,1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)}function i(t){var e=t.actions?t.actions.map(function(e){return"string"==typeof e?f[e]:f[e.name]?c({},f[e.name],e):e}):Object.keys(f).map(function(e){return f[e]}),n=c({},h,t.classes),i=t[u]||"div",a=l("div"),o=(a.className=n.actionbar,s(t.element,a),t.element.content=l("div"));return o.contentEditable=!0,o.className=n.content,o.oninput=function(e){e=e.target.firstChild;e&&3===e.nodeType?d(p,"<"+i+">"):"<br>"===o.innerHTML&&(o.innerHTML=""),t.onChange(o.innerHTML)},o.onkeydown=function(e){"Enter"===e.key&&"blockquote"===document.queryCommandValue(p)&&setTimeout(function(){return d(p,"<"+i+">")},0)},s(t.element,o),e.forEach(function(e){var t,i=l("button");i.className=n.button,i.innerHTML=e.icon,i.title=e.title,i.setAttribute("type","button"),i.onclick=function(){return e.result()&&o.focus()},e.state&&(r(o,"keyup",t=function(){return i.classList[e.state()?"add":"remove"](n.selected)}),r(o,"mouseup",t),r(i,"click",t)),s(a,i)}),t.styleWithCSS&&d("styleWithCSS"),d(u,i),t.element}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u="defaultParagraphSeparator",p="formatBlock",f={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return t("bold")},result:function(){return d("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return t("italic")},result:function(){return d("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return t("underline")},result:function(){return d("underline")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return t("strikeThrough")},result:function(){return d("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return d(p,"<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return d(p,"<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return d(p,"<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return d(p,"<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return d("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return d("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return d(p,"<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return d("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var e=window.prompt("Enter the link URL");e&&d("createLink",e)}},image:{icon:"&#128247;",title:"Image",result:function(){var e=window.prompt("Enter the image URL");e&&d("insertImage",e)}}},h={actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},n={exec:d,init:i};e.exec=d,e.init=i,e.default=n,Object.defineProperty(e,"__esModule",{value:!0})}),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).DOMPurify=t()})(this,function(){let{entries:Be,setPrototypeOf:r,isFrozen:s,getPrototypeOf:n,getOwnPropertyDescriptor:a}=Object,{freeze:je,seal:e,create:Ue}=Object,{apply:o,construct:l}="undefined"!=typeof Reflect&&Reflect,Je=(je=je||function(e){return e},e=e||function(e){return e},o=o||function(e,t,i){return e.apply(t,i)},l=l||function(e,t){return new e(...t)},c(Array.prototype.forEach)),Ge=c(Array.prototype.pop),Ye=c(Array.prototype.push),qe=c(String.prototype.toLowerCase),$e=c(String.prototype.toString),Ve=c(String.prototype.match),Qe=c(String.prototype.replace),ht=c(String.prototype.indexOf),mt=c(String.prototype.trim),Xe=c(RegExp.prototype.test),Ze=(d=TypeError,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l(d,t)});var d;function c(a){return function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return o(a,e,i)}}function Ke(t,i,e){var n,a=2<arguments.length&&void 0!==e?e:qe;r&&r(t,null);let o=i.length;for(;o--;){let e=i[o];"string"==typeof e&&(n=a(e))!==e&&(s(i)||(i[o]=n),e=n),t[e]=!0}return t}function et(e){var t,i,n=Ue(null);for([t,i]of Be(e))n[t]=i;return n}function tt(e,t){for(;null!==e;){var i=a(e,t);if(i){if(i.get)return c(i.get);if("function"==typeof i.value)return c(i.value)}e=n(e)}return function(e){return console.warn("fallback value for",e),null}}let it=je(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),nt=je(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),at=je(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),gt=je(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ot=je(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),bt=je(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),rt=je(["#text"]),st=je(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),lt=je(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),dt=je(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ct=je(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]);var t=e(/\{\{[\w\W]*|[\w\W]*\}\}/gm),i=e(/<%[\w\W]*|[\w\W]*%>/gm),u=e(/\${[\w\W]*}/gm),p=e(/^data-[\-\w.\u00B7-\uFFFF]/),f=e(/^aria-[\-\w]+$/);let ut=e(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i);var h=e(/^(?:\w+script|data):/i),m=e(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);let pt=e(/^html$/i);var ft=Object.freeze({__proto__:null,MUSTACHE_EXPR:t,ERB_EXPR:i,TMPLIT_EXPR:u,DATA_ATTR:p,ARIA_ATTR:f,IS_ALLOWED_URI:ut,IS_SCRIPT_OR_DATA:h,ATTR_WHITESPACE:m,DOCTYPE_NAME:pt});return function R(e){e=0<arguments.length&&void 0!==e?e:"undefined"==typeof window?null:window;let d=e=>R(e);if(d.version="3.0.5",d.removed=[],!e||!e.document||9!==e.document.nodeType)return d.isSupported=!1,d;let a=e.document,s=a,H=s.currentScript,{DocumentFragment:P,HTMLTemplateElement:W,Node:l,Element:F,NodeFilter:t,NamedNodeMap:B=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:j,DOMParser:U,trustedTypes:c}=e;e=F.prototype;let J=tt(e,"cloneNode"),G=tt(e,"nextSibling"),Y=tt(e,"childNodes"),o=tt(e,"parentNode");"function"==typeof W&&(e=a.createElement("template")).content&&e.content.ownerDocument&&(a=e.content.ownerDocument);function q(e){return e instanceof RegExp||e instanceof Function}function u(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!L||L!==e){if(e=et(e=e&&"object"==typeof e?e:{}),E=E=-1===_e.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,M="application/xhtml+xml"===E?$e:qe,m="ALLOWED_TAGS"in e?Ke({},e.ALLOWED_TAGS,M):pe,g="ALLOWED_ATTR"in e?Ke({},e.ALLOWED_ATTR,M):fe,Me="ALLOWED_NAMESPACES"in e?Ke({},e.ALLOWED_NAMESPACES,$e):Le,Ae="ADD_URI_SAFE_ATTR"in e?Ke(et(Ie),e.ADD_URI_SAFE_ATTR,M):Ie,Se="ADD_DATA_URI_TAGS"in e?Ke(et(Ne),e.ADD_DATA_URI_TAGS,M):Ne,T="FORBID_CONTENTS"in e?Ke({},e.FORBID_CONTENTS,M):Te,y="FORBID_TAGS"in e?Ke({},e.FORBID_TAGS,M):{},he="FORBID_ATTR"in e?Ke({},e.FORBID_ATTR,M):{},i="USE_PROFILES"in e&&e.USE_PROFILES,me=!1!==e.ALLOW_ARIA_ATTR,ge=!1!==e.ALLOW_DATA_ATTR,be=e.ALLOW_UNKNOWN_PROTOCOLS||!1,ye=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,v=e.SAFE_FOR_TEMPLATES||!1,D=e.WHOLE_DOCUMENT||!1,x=e.RETURN_DOM||!1,C=e.RETURN_DOM_FRAGMENT||!1,k=e.RETURN_TRUSTED_TYPE||!1,De=e.FORCE_BODY||!1,xe=!1!==e.SANITIZE_DOM,Ce=e.SANITIZE_NAMED_PROPS||!1,we=!1!==e.KEEP_CONTENT,w=e.IN_PLACE||!1,ue=e.ALLOWED_URI_REGEXP||ut,I=e.NAMESPACE||A,b=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&q(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(b.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&q(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(b.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(b.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),v&&(ge=!1),C&&(x=!0),i&&(m=Ke({},[...rt]),g=[],!0===i.html&&(Ke(m,it),Ke(g,st)),!0===i.svg&&(Ke(m,nt),Ke(g,lt),Ke(g,ct)),!0===i.svgFilters&&(Ke(m,at),Ke(g,lt),Ke(g,ct)),!0===i.mathMl)&&(Ke(m,ot),Ke(g,dt),Ke(g,ct)),e.ADD_TAGS&&Ke(m=m===pe?et(m):m,e.ADD_TAGS,M),e.ADD_ATTR&&Ke(g=g===fe?et(g):g,e.ADD_ATTR,M),e.ADD_URI_SAFE_ATTR&&Ke(Ae,e.ADD_URI_SAFE_ATTR,M),e.FORBID_CONTENTS&&Ke(T=T===Te?et(T):T,e.FORBID_CONTENTS,M),we&&(m["#text"]=!0),D&&Ke(m,["html","head","body"]),m.table&&(Ke(m,["tbody"]),delete y.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Ze('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Ze('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');p=e.TRUSTED_TYPES_POLICY,f=p.createHTML("")}else null!==(p=void 0===p?((e,t)=>{if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let i=null;var n="data-tt-policy-suffix",t="dompurify"+((i=t&&t.hasAttribute(n)?t.getAttribute(n):i)?"#"+i:"");try{return e.createPolicy(t,{createHTML(e){return e},createScriptURL(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+t+" could not be created."),null}})(c,H):p)&&"string"==typeof f&&(f=p.createHTML(""));je&&je(e),L=e}}function $(e){let t=null,i=null;De?e="<remove></remove>"+e:(n=Ve(e,/^[\r\n\t ]+/),i=n&&n[0]),"application/xhtml+xml"===E&&I===A&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var n=p?p.createHTML(e):e;if(I===A)try{t=(new U).parseFromString(n,E)}catch(e){}if(!t||!t.documentElement){t=r.createDocument(I,"template",null);try{t.documentElement.innerHTML=Ee?f:n}catch(e){}}return n=t.body||t.documentElement,e&&i&&n.insertBefore(a.createTextNode(i),n.childNodes[0]||null),I===A?ne.call(t,D?"html":"body")[0]:D?t.documentElement:n}function V(e){return te.call(e.ownerDocument||e,e,t.SHOW_ELEMENT|t.SHOW_COMMENT|t.SHOW_TEXT,null)}function Q(e){return"function"==typeof l&&e instanceof l}function X(t){let i=null;if(z("beforeSanitizeElements",t,null),!((e=t)instanceof j)||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof B&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore&&"function"==typeof e.hasChildNodes){var e=M(t.nodeName);if(z("uponSanitizeElement",t,{tagName:e,allowedTags:m}),!t.hasChildNodes()||Q(t.firstElementChild)||!Xe(/<[/\w]/g,t.innerHTML)||!Xe(/<[/\w]/g,t.textContent)){if(m[e]&&!y[e])return t instanceof F&&!(e=>{let t=o(e);t&&t.tagName||(t={namespaceURI:I,tagName:"template"});var i=qe(e.tagName),n=qe(t.tagName);return!!Me[e.namespaceURI]&&(e.namespaceURI===N?t.namespaceURI===A?"svg"===i:t.namespaceURI===S?"svg"===i&&("annotation-xml"===n||ze[n]):Boolean(_[i]):e.namespaceURI===S?t.namespaceURI===A?"math"===i:t.namespaceURI===N?"math"===i&&Re[n]:Boolean(Pe[i]):e.namespaceURI===A?!(t.namespaceURI===N&&!Re[n]||t.namespaceURI===S&&!ze[n]||Pe[i])&&(He[i]||!_[i]):!("application/xhtml+xml"!==E||!Me[e.namespaceURI]))})(t)||("noscript"===e||"noembed"===e||"noframes"===e)&&Xe(/<\/no(script|embed|frames)/i,t.innerHTML)?(O(t),!0):(v&&3===t.nodeType&&(i=t.textContent,Je([h,oe,re],e=>{i=Qe(i,e," ")}),t.textContent!==i)&&(Ye(d.removed,{element:t.cloneNode()}),t.textContent=i),z("afterSanitizeElements",t,null),!1);if(!y[e]&&Z(e)){if(b.tagNameCheck instanceof RegExp&&Xe(b.tagNameCheck,e))return;if(b.tagNameCheck instanceof Function&&b.tagNameCheck(e))return}if(we&&!T[e]){var n=o(t)||t.parentNode,a=Y(t)||t.childNodes;if(a&&n)for(let e=a.length-1;0<=e;--e)n.insertBefore(J(a[e],!0),G(t))}}}return O(t),1}function Z(e){return 0<e.indexOf("-")}function K(i){z("beforeSanitizeAttributes",i,null);var n=i.attributes;if(n){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:g};let e=n.length;for(;e--;){var{name:o,namespaceURI:r,value:s}=n[e],l=M(o);let t="value"===o?s:mt(s);if(a.attrName=l,a.attrValue=t,a.keepAttr=!0,a.forceKeepAttr=void 0,z("uponSanitizeAttribute",i,a),t=a.attrValue,!a.forceKeepAttr&&(We(o,i),a.keepAttr))if(!ye&&Xe(/\/>/i,t))We(o,i);else if(v&&Je([h,oe,re],e=>{t=Qe(t,e," ")}),s=M(i.nodeName),Fe(s,l,t)){if(!Ce||"id"!==l&&"name"!==l||(We(o,i),t=ke+t),p&&"object"==typeof c&&"function"==typeof c.getAttributeType&&!r)switch(c.getAttributeType(s,l)){case"TrustedHTML":t=p.createHTML(t);break;case"TrustedScriptURL":t=p.createScriptURL(t)}try{r?i.setAttributeNS(r,o,t):i.setAttribute(o,t),Ge(d.removed)}catch(e){}}}z("afterSanitizeAttributes",i,null)}}function ee(e){var t,i=V(e);for(z("beforeSanitizeShadowDOM",e,null);t=i.nextNode();)z("uponSanitizeShadowNode",t,null),X(t)||(t.content instanceof P&&ee(t.content),K(t));z("afterSanitizeShadowDOM",e,null)}let p,f="",{implementation:r,createNodeIterator:te,createDocumentFragment:ie,getElementsByTagName:ne}=a,ae=s.importNode,n={},{MUSTACHE_EXPR:h,ERB_EXPR:oe,TMPLIT_EXPR:re,DATA_ATTR:se,ARIA_ATTR:le,IS_SCRIPT_OR_DATA:de,ATTR_WHITESPACE:ce}=(d.isSupported="function"==typeof Be&&"function"==typeof o&&r&&void 0!==r.createHTMLDocument,ft),ue=ft.IS_ALLOWED_URI,m=null,pe=Ke({},[...it,...nt,...at,...ot,...rt]),g=null,fe=Ke({},[...st,...lt,...dt,...ct]),b=Object.seal(Ue(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),y=null,he=null,me=!0,ge=!0,be=!1,ye=!0,v=!1,D=!1,ve=!1,De=!1,x=!1,C=!1,k=!1,xe=!0,Ce=!1,ke="user-content-",we=!0,w=!1,i={},T=null,Te=Ke({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Se=null,Ne=Ke({},["audio","video","img","source","image","track"]),Ae=null,Ie=Ke({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),S="http://www.w3.org/1998/Math/MathML",N="http://www.w3.org/2000/svg",A="http://www.w3.org/1999/xhtml",I=A,Ee,Me=null,Le=Ke({},[S,N,A],$e),E=null,_e=["application/xhtml+xml","text/html"],M=null,L=null,Oe=a.createElement("form"),ze=Ke({},["mi","mo","mn","ms","mtext"]),Re=Ke({},["foreignobject","desc","title","annotation-xml"]),He=Ke({},["title","style","font","a","script"]),_=Ke({},nt),Pe=(Ke(_,at),Ke(_,gt),Ke({},ot)),O=(Ke(Pe,bt),function(t){Ye(d.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.remove()}}),We=function(e,t){try{Ye(d.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){Ye(d.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!g[e])if(x||C)try{O(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},z=function(e,t,i){n[e]&&Je(n[e],e=>{e.call(d,t,i,L)})},Fe=function(e,t,i){if(xe&&("id"===t||"name"===t)&&(i in a||i in Oe))return!1;if((!ge||he[t]||!Xe(se,t))&&(!me||!Xe(le,t)))if(!g[t]||he[t]){if(!(Z(e)&&(b.tagNameCheck instanceof RegExp&&Xe(b.tagNameCheck,e)||b.tagNameCheck instanceof Function&&b.tagNameCheck(e))&&(b.attributeNameCheck instanceof RegExp&&Xe(b.attributeNameCheck,t)||b.attributeNameCheck instanceof Function&&b.attributeNameCheck(t))||"is"===t&&b.allowCustomizedBuiltInElements&&(b.tagNameCheck instanceof RegExp&&Xe(b.tagNameCheck,i)||b.tagNameCheck instanceof Function&&b.tagNameCheck(i))))return!1}else if(!Ae[t]&&!Xe(ue,Qe(i,ce,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==ht(i,"data:")||!Se[e])&&(!be||Xe(de,Qe(i,ce,"")))&&i)return!1;return!0};return d.sanitize=function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};let n=null,a=null;if("string"!=typeof(e=(Ee=!e)?"\x3c!--\x3e":e)&&!Q(e)){if("function"!=typeof e.toString)throw Ze("toString is not a function");if("string"!=typeof(e=e.toString()))throw Ze("dirty is not a string, aborting")}if(!d.isSupported)return e;if(ve||u(i),d.removed=[],w="string"!=typeof e&&w){if(e.nodeName){i=M(e.nodeName);if(!m[i]||y[i])throw Ze("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)1===(i=(n=$("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===i.nodeName||"HTML"===i.nodeName?n=i:n.appendChild(i);else{if(!x&&!v&&!D&&-1===e.indexOf("<"))return p&&k?p.createHTML(e):e;if(!(n=$(e)))return x?null:k?f:""}n&&De&&O(n.firstChild);for(var o=V(w?e:n);t=o.nextNode();)X(t)||(t.content instanceof P&&ee(t.content),K(t));if(w)return e;if(x){if(C)for(a=ie.call(n.ownerDocument);n.firstChild;)a.appendChild(n.firstChild);else a=n;return a=g.shadowroot||g.shadowrootmode?ae.call(s,a,!0):a}let r=D?n.outerHTML:n.innerHTML;return D&&m["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&Xe(pt,n.ownerDocument.doctype.name)&&(r="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+r),v&&Je([h,oe,re],e=>{r=Qe(r,e," ")}),p&&k?p.createHTML(r):r},d.setConfig=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};u(e),ve=!0},d.clearConfig=function(){L=null,ve=!1},d.isValidAttribute=function(e,t,i){return L||u({}),e=M(e),t=M(t),Fe(e,t,i)},d.addHook=function(e,t){"function"==typeof t&&(n[e]=n[e]||[],Ye(n[e],t))},d.removeHook=function(e){if(n[e])return Ge(n[e])},d.removeHooks=function(e){n[e]&&(n[e]=[])},d.removeAllHooks=function(){n={}},d}()});let apexBIDashBoard=function(vt,Dt,a,n,xt){let Ct={featureDetails:{name:"Material-BI-Dashboard",scriptVersion:"23.10.09",utilVersion:"22.11.28",url:"https://github.com/RonnyWeiss",url2:"https://linktr.ee/ronny.weiss",license:"MIT License"},isDefinedAndNotNull:function(e){return null!=e&&""!==e},debounce:function(t,i=50){let n;return(...e)=>{clearTimeout(n),n=setTimeout(function(){t.apply(this,e)},i)}},groupObjectArray:function(e,n){return e&&Array.isArray(e)?e.reduce(function(e,t){var i=t[n];return i&&(e[i="â€‹"+i]=e[i]||[]).push(t),e},{}):[]},link:function(e,t="_parent"){null!=e&&""!==e&&window.open(e,t)},tooltip:{show:function(e,t,i){try{var n;0===Dt("#dynToolTip").length?(n=Dt("<div></div>").attr("id","dynToolTip").css("color","#111").css("max-width","400px").css("position","absolute").css("top","0px").css("left","0px").css("z-index","2000").css("background-color","rgba(240, 240, 240, 1)").css("padding","10px").css("display","block").css("top","0").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto"),t&&n.css("background-color",t),i&&n.css("max-width",i),Dt("body").append(n)):Dt("#dynToolTip").css("visibility","visible"),Dt("#dynToolTip").html(e),Dt("#dynToolTip").find("*").css("max-width","100%").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto").css("white-space","normal"),Dt("#dynToolTip").find("img").css("object-fit","contain").css("object-position","50% 0%")}catch(e){vt.debug.error({module:"utils.js",msg:"Error while try to show tooltip",err:e})}},setPosition:function(e){Dt("#dynToolTip").position({my:"left+6 top+6",of:e,collision:"flipfit"})},hide:function(){Dt("#dynToolTip").css("visibility","hidden")},remove:function(){Dt("#dynToolTip").remove()}},escapeHTML:function(e){if(null===e)return null;if(void 0!==e){if("object"==typeof e)try{e=JSON.stringify(e)}catch(e){}return vt.util.escapeHTML(String(e))}},loader:{start:function(e,t){t&&Dt(e).css("min-height","100px"),vt.util.showSpinner(Dt(e))},stop:function(e,t){t&&Dt(e).css("min-height",""),Dt(e+" > .u-Processing").remove(),Dt(e+" > .ct-loader").remove()}},splitString2Array:function(i){if(null!=i&&""!==i&&0<i.length){if(vt&&vt.server&&vt.server.chunk)return vt.server.chunk(i);{let e,t=[];if(8e3<i.length)for(t=[],e=0;e<i.length;)t.push(i.substr(e,8e3)),e+=8e3;else t.push(i);return t}}return[]},jsonSaveExtend:function(t,i){let n={},e={};if("string"==typeof i)try{e=JSON.parse(i)}catch(e){vt.debug.error({module:"util.js",msg:"Error while try to parse targetConfig. Please check your Config JSON. Standard Config will be used.",err:e,targetConfig:i})}else e=Dt.extend(!0,{},i);try{n=Dt.extend(!0,{},t,e)}catch(e){n=Dt.extend(!0,{},t),vt.debug.error({module:"util.js",msg:"Error while try to merge 2 JSONs into standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used.",err:e,finalConfig:n})}return n},printDOMMessage:{show:function(e,t,i,n){var a,o,r=Dt("<div>");150<=Dt(e).height()?(a=Dt("<div></div>"),o=Dt("<span></span>").addClass("fa").addClass(i||"fa-info-circle-o").addClass("fa-2x").css("height","32px").css("width","32px").css("margin-bottom","16px").css("color",n||"#D0D0D0"),a.append(o),o=Dt("<span></span>").text(t).css("display","block").css("color","#707070").css("text-overflow","ellipsis").css("overflow","hidden").css("white-space","nowrap").css("font-size","12px"),r.css("margin","12px").css("text-align","center").css("padding","10px 0").addClass("dominfomessagediv").append(a).append(o)):(a=Dt("<span></span>").addClass("fa").addClass(i||"fa-info-circle-o").css("font-size","22px").css("line-height","26px").css("margin-right","5px").css("color",n||"#D0D0D0"),o=Dt("<span></span>").text(t).css("color","#707070").css("text-overflow","ellipsis").css("overflow","hidden").css("white-space","nowrap").css("font-size","12px").css("line-height","20px"),r.css("margin","10px").css("text-align","center").addClass("dominfomessagediv").append(a).append(o)),Dt(e).append(r)},hide:function(e){Dt(e).children(".dominfomessagediv").remove()}},noDataMessage:{show:function(e,t){Ct.printDOMMessage.show(e,t,"fa-search")},hide:function(e){Ct.printDOMMessage.hide(e)}},errorMessage:{show:function(e,t){Ct.printDOMMessage.show(e,t,"fa-exclamation-triangle","#FFCB3D")},hide:function(e){Ct.printDOMMessage.hide(e)}},cutString:function(t,e){try{return!(e<0)&&t.length>e?t.substring(0,e-3)+"...":t}catch(e){return t}},isBetween:function(e,t,i){i=i||0;return t-i<=e&&e<=t+i}};function kt(e){var e=new Date(e),t=vt.locale&&vt.locale.getLanguage?vt.locale.getLanguage():void 0;return e.toLocaleDateString(t)}function wt(e,t,i){return i?void 0!==e&&null!=e?1===e||"true"===e:t:Ct.isDefinedAndNotNull(e)?e:t}function Tt(e,t,i,n,a){e=e.append("defs").append("filter").attr("id",t),e.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",a).attr("result","blur"),e.append("feOffset").attr("in","blur").attr("dx",n).attr("dy",i).attr("result","offsetBlur"),e.append("feFlood").attr("in","offsetBlur").attr("flood-color","#000").attr("flood-opacity","0.26").attr("result","offsetColor"),e.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("operator","in").attr("result","offsetBlur"),t=e.append("feMerge");t.append("feMergeNode").attr("in","offsetBlur"),t.append("feMergeNode").attr("in","SourceGraphic")}function St(e,t,i,n){return!1!==n?Ct.escapeHTML(e):!0!==i&&-1<Dt.inArray("sanitizer",t.features)&&!0!==i?a.sanitize(e,t.purifyOptions):e}return{initialize:function(f,h,ut,l,d,c,m,u,p,g,b,pt,y,ft,v,D,x,C){vt.debug.info({fct:Ct.featureDetails.name+" - initialize",arguments:{pRegionID:f,pRegionIDRefresh:h,pAjaxID:ut,pNoDataMsg:l,pErrMsg:d,pDefaultConfigJSON:c,pLoadingMethod:m,pFeatures:u,pChartConfigJSON:p,pItems2Submit:g,pItems2SubmitImg:b,pRequireHTMLEscape:pt,pPurifyOptions:y,pMapURL:ft,pMapOptions:v,pTableConfigJSON:D,pClockOptions:x,pCalendarOptions:C},featureDetails:Ct.featureDetails});let a="#"+f,ht=Dt(a),k="#"+h,w=10,o=f+"-sizer",i,mt={},gt={},T=0,S=0,N={initMasonry:function(){i&&i.destroy();var e="."+f,t={itemSelector:"."+f+"-item",columnWidth:"."+o,horizontalOrder:!1,initLayout:!0,percentPosition:!0,transitionDuration:0,gutter:0};i=new n(e,t)},resizeMasonry:function(){i&&(i.layout(),Dt(document).scrollTop(T))}};if(f&&0<ht.length){ht.addClass(f),Ct.loader.start(k);var A={footprint:!0,isSortable:!1,colSpan:12,height:400,refresh:0,backColor:"transparent",color:"inherit",boxShadow:"0px 0px 6px 0.32px rgba(0, 0, 0, 0.26)",optionsLink:{backColor:"transparent",color:"inherit",icon:"fa-link"},optionsLinkTop:{backColor:"transparent",color:"inherit",icon:"fa-link"},title:{backColor:"transparent",color:"inherit",icon:null}},I={header:{background:"white",textAlign:"left",color:"inherit",border:"1px solid rgba(240, 240, 240, 1)"},cells:{background:"transparent",textAlign:"left",color:"inherit",border:"1px solid rgba(240, 240, 240, 1)"},evenRow:{background:"white",textAlign:"left",color:"inherit",borderBottom:"1px solid rgba(240, 240, 240, 1)"},oddRow:{background:"rgb(240,240,240)",textAlign:"left",color:"inherit",borderBottom:"1px solid rgba(240, 240, 240, 1)"}},_={tour:{enabled:!0,direction:"right",speed:2,start:-30,shadowEffect:!0},circles:{color:"rgb(97, 159, 209)",radius:5,opacity:.8,opacityHover:.65,shadows:!1},map:{stroke:"#303030",strokeWidth:"0.5px",color:"#eee",centerLongitude:0,centerLatitude:0,initialZoom:1,zoomEnabled:!0,shadows:!0}},O={axisLabelPosition:"inner3",background:null,chartTitle:null,gauge:{min:0,max:null,type:"single",width:null,arcMinWidth:null,fullCircle:!1,title:null,axisLabels:!0},grid:{x:!0,y:!0},legend:{position:"right",show:!0},line:{step:"step"},padding:{bottom:null,left:null,right:null,top:null},rotateAxis:!1,showDataLabels:!1,showDataPoints:!0,showAbsoluteValues:!1,threshold:.05,tooltip:{grouped:!0,show:!0},transitionDuration:200,x:{axisHeight:null,label:"x Axis",timeFormat:"%Y-%m-%dT%H:%M:%S",type:"category",tick:{cutAfter:30,maxNumber:25,multiline:!1,rotation:60,autoRotate:!0,timeFormat:"%y-%m-%d %H:%M",fit:!0}},y:{label:"y Axis 1",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},y2:{label:"y Axis 2",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},zoom:{enabled:!0,type:"scroll",rescale:!1}},z={ALLOWED_ATTR:["accesskey","align","alt","always","autocomplete","autoplay","border","cellpadding","cellspacing","charset","class","colspan","dir","height","href","id","lang","name","rel","required","rowspan","src","style","summary","tabindex","target","title","type","value","width"],ALLOWED_TAGS:["a","address","b","blockquote","br","caption","code","dd","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","label","li","nl","ol","p","pre","s","span","strike","strong","sub","sup","table","tbody","td","th","thead","tr","u","ul"]},R={shadows:!1,label:{labelColor:"#303030",labelColor2:"#303030"},hour:{labelColor:"#303030",tickColor:"#999"},second:{label:!1,labelColor:"#707070",tickColor:"#ccc"},hands:{color:"#303030",coverFillColor:"white",coverStrokeColor:"#999",coverSize:2},circle:{color:"#ccc",width:5,fillColor:"#eeeeee"}},H={eventLimitPerDay:2,viewType:"dayGridMonth",displayTime:!0,hours12:!1,timeGridStartTime:"06:00:00",stickyHeaderDates:"auto"};let e,t=(Ct.isDefinedAndNotNull(u)&&(e=u.split(":")),{}),i,n,a,o,r,s;(t=Ct.jsonSaveExtend(A,c)).features=[],e&&0<e.length&&(t.features=e),-1<Dt.inArray("charts",t.features)?(i=Ct.jsonSaveExtend(O,p),t.d3JSchart=i):t.d3JSchart=null,-1<Dt.inArray("table",t.features)?(n=Ct.jsonSaveExtend(I,D),t.table=n):t.table=null,-1<Dt.inArray("sanitizer",t.features)?(a=Ct.jsonSaveExtend(z,y),t.purifyOptions=a):t.purifyOptions=null,-1<Dt.inArray("map",t.features)?(o=Ct.jsonSaveExtend(_,v),t.mapOptions=o):t.mapOptions=null,-1<Dt.inArray("clock",t.features)?(r=Ct.jsonSaveExtend(R,x),t.clockOptions=r):t.clockOptions=null,-1<Dt.inArray("calendar",t.features)?(s=Ct.jsonSaveExtend(H,C),t.calendarOptions=s):t.calendarOptions=null,t.noDataMessage=l,t.errorMessage=d,t.items2Submit=g,t.items2SubmitImg=b,vt.debug.info({fct:Ct.featureDetails.name+" - initialize",finalConfigJSON:t,featureDetails:Ct.featureDetails}),Dt(document).on("scroll touchmove",function(){T=Dt(document).scrollTop()}),E(0,t);try{h?Dt(k).bind("apexrefresh",function(){vt.debug.info({fct:Ct.featureDetails.name+" - initialize",msg:"Refresh event was fired",featureDetails:Ct.featureDetails}),E(0,t,!0)}):vt.debug.error({fct:Ct.featureDetails.name+" - initialize",msg:"Can't bind refresh event because Refresh Region ID is missing",featureDetails:Ct.featureDetails})}catch(e){vt.debug.error({fct:Ct.featureDetails.name+" - initialize",msg:"Can't bind refresh event on",err:e,featureDetails:Ct.featureDetails})}if(0<t.refresh){let e=setInterval(function(){0===Dt(ht).length?clearInterval(e):(vt.debug.info({fct:Ct.featureDetails.name+" - initialize",msg:"Refresh by time was fired",featureDetails:Ct.featureDetails}),E(0,t,!0))},1e3*t.refresh)}}else vt.debug.error({fct:Ct.featureDetails.name+" - initialize",msg:"Can't find pRegionID: "+f,featureDetails:Ct.featureDetails});function E(e,i,t){t&&(Ct.loader.start(k),S+=1);var n=i.items2Submit;vt.server.plugin(ut,{pageItems:n,x01:"items"},{success:function(n){{var p=i;vt.debug.info({fct:Ct.featureDetails.name+" - drawGridItems",ajaxResponse:n,featureDetails:Ct.featureDetails}),ht.empty();let e=Dt("<div></div>").addClass("bida-container-sizer").addClass(o).attr("id",o),t=(ht.append(e),new ResizeObserver(Ct.debounce(function(){!document.hidden&&e.is(":visible")&&ht.trigger("resize")})));if(ht.on("resize",function(){N.resizeMasonry()}),t.observe(e[0]),gt.outerItemIntervals&&0<gt.outerItemIntervals.length&&Dt.each(gt.outerItemIntervals,function(e,t){clearInterval(t)}),gt.outerItemIntervals=[],gt.innerItemsIntervals&&Dt.each(gt.innerItemsIntervals,function(e,t){clearInterval(t)}),gt.innerItemsIntervals={},gt.d3Timer&&0<gt.d3Timer.length&&Dt.each(gt.d3Timer,function(e,t){t.stop()}),gt.d3Timer=[],n.items&&0<n.items.length){ht.removeClass("bida-container-nodat"),Dt.each(n.items,function(o,r){let s=p.colSpan;r.colSpan&&(s=r.colSpan);{var l=o,d=(o=s,ht),c=r,u=p;let e=Ct.jsonSaveExtend(null,c),t=f+"--"+l,i="#"+t,n=(c.height||u.height)-w,a=Dt("<div></div>");if(a.attr("id",t),a.attr("item-id",c.itemID),a.addClass("bida-container-item"),a.addClass(f+"-item"),a.addClass("bida-container-item--width"+o),a.css("min-height",n),a.css("background",c.backColor||u.backColor),a.css("color",c.color||u.color),a.css("box-shadow",c.boxShadow||u.boxShadow),Ct.isDefinedAndNotNull(c.itemID)&&(a.attr("item-id",c.itemID),a.addClass(h+"--"+c.itemID)),d.append(a),M(l,n,i,e,u),o=wt(c.isAsync,!1,!0),"A"===m&&o&&(Dt(a).on("itemrefresh",function(){c.itemData=null,M(l,n,i,c,u,!0)}),0<c.refresh)){let e=setInterval(function(){0===Dt(i).length?clearInterval(e):(c.itemData=null,M(l,n,i,c,u,!0))},1e3*c.refresh);gt.outerItemIntervals.push(e)}}}),p.footprint&&(e=>{var t=Dt("<div></div>"),i=(t.css("position","absolute"),t.css("margin","-5px"),t.css("bottom","0px"),t.css("right","10px"),t.css("font-size","9px"),t.css("color","rgb(0,0,0,0.3)"),t.css("line-height","9px"),Dt("<i></i>")),n=(i.addClass("fa"),i.addClass("fa-heart"),i.css("font-size","9px"),i.css("color","inherit"),i.css("opacity","0.3"),i.css("line-height","10px"),Dt("<a></a>")),a=(n.attr("href","https://linktr.ee/ronny.weiss"),n.attr("target","_blank"),n.css("color","inherit"),n.append(i),(i=Dt("<i></i>")).addClass("fa"),i.addClass("fa-apex"),i.css("font-size","9px"),i.css("color","inherit"),i.css("opacity","0.3"),i.css("line-height","10px"),Dt("<a></a>"));a.attr("href","https://apex.oracle.com"),a.attr("target","_blank"),a.css("color","inherit"),a.append(i),t.append("Build with "),t.append(n),t.append(" for "),t.append(a),Dt(e).append(t)})(ht),N.initMasonry();let i,e={delay:50,zIndex:10,items:".bida-container-item",grid:[10,10],tolerance:"pointer",start:function(e,t){i||(i=Dt(t.item).clone(),Dt("body").append(i)),Dt(t.item).hide(),i.fadeIn(),i.css("opacity","0.5"),i.css("filter","grayscale(100%)")},sort:function(e,t){i.css("left",t.offset.left),i.css("top",t.offset.top)},change:function(e,t){ht.find(".ui-sortable-placeholder").each(function(e,t){Dt(t).css("visibility","visible")}),Dt(t.item).css("left",t.position.left),Dt(t.item).css("top",t.position.top),N.initMasonry()},stop:function(e,t){i.remove(),i="",Dt(t.item).show(),N.initMasonry()},update:function(){let i=[];ht.find(".bida-container-item").each(function(e,t){t=Dt(t).attr("item-id");i.push(t)}),vt.debug.info({fct:Ct.featureDetails.name+" - drawGridItems",sortInfo:i,featureDetails:Ct.featureDetails}),ht.trigger("sortorder",i.join(":"))}},t;p.isSortable&&(t=ht.sortable(e)),Dt(k).on("sortableOn",function(){vt.debug.info({fct:Ct.featureDetails.name+" - drawGridItems",msg:"sortable on by trigger",featureDetails:Ct.featureDetails}),t||ht.sortable(e),ht.sortable("enable")}),Dt(k).on("sortableOff",function(){vt.debug.info({fct:Ct.featureDetails.name+" - drawGridItems",msg:"sortable off by trigger",featureDetails:Ct.featureDetails}),ht.sortable("disable")})}else ht.addClass("bida-container-nodat"),Ct.noDataMessage.show(ht,p.noDataMessage);Ct.loader.stop(k),ht.trigger("rendered"),vt.debug.info({fct:Ct.featureDetails.name+" - drawGridItems",msg:"Material BI Dashboard rendering finished",featureDetails:Ct.featureDetails})}t&&ht.trigger("refreshed")},error:function(e){e=e,Dt(a).empty(),Dt(a).addClass("bida-container-nodat"),Ct.errorMessage.show(a,i.errorMessage),Ct.loader.stop(k),e.responseText&&vt.debug.error({fct:Ct.featureDetails.name+" - getData",msg:e.responseText,featureDetails:Ct.featureDetails}),t&&ht.trigger("refreshed")},dataType:"json"})}function M(n,e,a,o,r,t){let s=Dt(a),i=100,l=e;function d(){Ct.loader.stop(a),setTimeout(function(){Ct.loader.stop(a)},i)}e=wt(o.isAsync,!1,!0);if(t||"A"===m&&e)if(Ct.isDefinedAndNotNull(o.itemID)){t=r.items2Submit;setTimeout(function(){Ct.loader.start(a)},i),vt.server.plugin(ut,{pageItems:t,x01:"itemData",x02:o.itemID,x04:S},{success:function(e,t,i){vt.debug.info({fct:Ct.featureDetails.name+" - prepareItemContent",asyncAjaxReference:S,pData:e,featureDetails:Ct.featureDetails}),parseInt(i.getResponseHeader("ajax-reference"),10)===S?(i=e,i=Ct.jsonSaveExtend(o,i),s.empty(),Ct.isDefinedAndNotNull(i.itemID)&&s.attr("item-id",i.itemID),l=(i.height||r.height)-w,s.css("min-height",l),L(n,a,l,i,r),d(),N.resizeMasonry()):vt.debug.info({fct:Ct.featureDetails.name+" - prepareItemContent",msg:"Expired Async AJAX Call returned.",pData:e,featureDetails:Ct.featureDetails})},error:function(e){e=e,s.empty(),e.status&&404===e.status?Ct.noDataMessage.show(a,r.noDataMessage):(Ct.errorMessage.show(a,r.errorMessage),vt.debug.error({msg:"Error occured in PL/SQL Block for async Loading of Data",data:e,featureDetails:Ct.featureDetails})),d(),N.resizeMasonry()},dataType:"json"})}else s.empty(),Ct.errorMessage.show(a,r.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - prepareItemContent",msg:"itemID missing in JSON for async load!",featureDetails:Ct.featureDetails});else L(n,a,l,o,r),N.resizeMasonry()}function bt(e,t,i,n,a){vt.debug.info({fct:Ct.featureDetails.name+" - drawSubText",pPosition:e,pParent:t,pText:i,pDefaultConfig:n,pIsSafeItem:a,featureDetails:Ct.featureDetails});var o="bida-item-subtext-"+e,r=Dt(t).find("."+o);let s=Dt("<div></div>");(s=r[0]?r:s).addClass(o);r=Dt("<span></span>"),r.addClass("bida-item-subtext-text"),r.addClass("bida-item-subtext-text-"+e),r.addClass("truncate-text"),o=St(i,n,a,pt);r.html(o),s.html(r),s.attr("title",r.text()),Dt(t).append(s)}function L(N,D,A,x,C){var t=Dt(D),i="fa-";let I;I=x.itemConfig||{},Ct.isDefinedAndNotNull(x.optionsLink)&&((a=Dt("<a></a>")).addClass("bida-item-options-link"),a.attr("href",x.optionsLink),a.css("background-color",x.optionsLinkBackColor||C.optionsLink.backColor),o=x.optionsLinkIcon||C.optionsLink.icon,n=Dt("<i></i>"),Ct.isDefinedAndNotNull(o)&&o.substr(0,i.length)===i?(n.addClass("fa"),n.addClass(o),n.css("color",x.optionsLinkColor||C.optionsLink.color)):n.css("background-image","url("+o+")"),n.addClass("bida-item-options-link-icon"),a.append(n),t.append(a)),Ct.isDefinedAndNotNull(x.optionsLinkTop)&&((o=Dt("<a></a>")).addClass("bida-item-options-link-top"),o.attr("href",x.optionsLinkTop),o.css("background-color",x.optionsLinkTopBackColor||C.optionsLinkTop.backColor),n=x.optionsLinkTopIcon||C.optionsLinkTop.icon,a=Dt("<i></i>"),Ct.isDefinedAndNotNull(n)&&n.substr(0,i.length)===i?(a.addClass("fa"),a.addClass(n),a.css("color",x.optionsLinkTopColor||C.optionsLinkTop.color)):a.css("background-image","url("+n+")"),a.addClass("bida-item-options-link-icon"),o.append(a),t.append(o));i=wt(x.isMarked,!1,!0);if(t.removeClass("bida-container-item-marked"),i&&t.addClass("bida-container-item-marked"),Ct.isDefinedAndNotNull(x.itemType)){let h=!1,v=(Ct.isDefinedAndNotNull(x.oversize)&&(h=wt(x.oversize,!1,!0)),!1);Ct.isDefinedAndNotNull(x.noSanitize)&&(v=wt(x.noSanitize,!1,!0));var k,E;if(Ct.isDefinedAndNotNull(x.title)){var n=D;var a=x.title;var o=x.titleBackColor;i=x.titleColor;t=x.titleIcon;var M=x.titleIconColor;var L=C;var _=v;vt.debug.info({fct:Ct.featureDetails.name+" - drawItemTitle",pText:a,pBackColor:o,pColor:i,pParent:n,pIcon:t,pIconColor:M,pDefaultConfig:L,pIsSafeItem:_,featureDetails:Ct.featureDetails});var O="bida-item-title",r=Dt(n).find("."+O);let e=Dt("<div></div>");(e=r[0]?r:e).addClass(O),e.css("background",o||L.title.backColor),e.css("color",i||L.title.color),(r=Dt("<span></span>")).addClass("bida-item-title-text"),r.addClass("truncate-text"),O=St(a,L,_,pt),r.html(O),r.attr("title",r.text()),e.html(r),o=t||L.title.icon,i=M||L.title.iconColor,Ct.isDefinedAndNotNull(o)&&(a=Dt("<i></i>"),"fa-"===o.substr(0,"fa-".length)?(a.addClass("fa"),a.addClass(o),a.css("color",i)):a.css("background-image","url("+o+")"),a.addClass("bida-item-title-icon"),r.prepend(a)),Dt(n).prepend(e)}if(Ct.isDefinedAndNotNull(x.subText1)&&bt(1,D,x.subText1,C,v),Ct.isDefinedAndNotNull(x.subText2)&&bt(2,D,x.subText2,C,v),k=((e,t)=>{let i=t;return Dt(e).children(".bida-item-title").each(function(){i=Math.floor(i-Dt(this).height())-1}),Dt(e).children(".bida-item-subtext-1").each(function(){i=Math.floor(i-Dt(this).height())-1}),Dt(e).children(".bida-item-subtext-2").each(function(){i=Math.floor(i-Dt(this).height())-1}),i})(D,A),Ct.isDefinedAndNotNull(x.itemData)||"calendar"===x.itemType||"note"===x.itemType||"clock"===x.itemType)switch(vt.debug.info({fct:Ct.featureDetails.name+" - drawItemRegionContent",msg:"Render Item "+x.itemType+"("+x.title+")",featureDetails:Ct.featureDetails}),x.itemType){case"chart":if(-1<Dt.inArray("charts",C.features))if(x.itemData){var K=D;var ie=k;var ee=I;var ne=x.itemData;var te=C;var ae=v;vt.debug.info({fct:Ct.featureDetails.name+" - drawChart",pItemSel:K,pItemHeight:ie,pConfigData:ee,pValuesData:ne,pDefaultConfig:te,pIsSafeItem:ae,featureDetails:Ct.featureDetails});let a=d3,$=["pie","donut","gauge"],V=Ct.groupObjectArray(ne,"seriesID"),Q=!1,X=!1,Z=!1;function oe(e,n){try{e.sort(function(e,t){var e=(i=a.timeParse(n))(e.x),i=i(t.x);return new Date(e).getTime()-new Date(i).getTime()})}catch(e){vt.debug.error({fct:Ct.featureDetails.name+" - drawChart",msg:"Error while try sort JSON Array by Time Value",err:e,featureDetails:Ct.featureDetails})}}try{var re=wt(ee.chartTitle,te.d3JSchart.chartTitle||"").toString(),se=wt(ee.background,te.d3JSchart.background);let a=null,r=!1;Ct.isDefinedAndNotNull(se)&&(a={color:se});var le=wt(ee.lineStep,te.d3JSchart.line.step);let o=wt(ee.gaugeMin,te.d3JSchart.gauge.min),s=wt(ee.gaugeMax,te.d3JSchart.gauge.max),l=wt(ee.gaugeType,te.d3JSchart.gauge.type),d=wt(ee.gaugeWidth,te.d3JSchart.gauge.width),c=wt(ee.gaugeArcMinWidth,te.d3JSchart.gauge.arcMinWidth),u=wt(ee.gaugeFullCircle,te.d3JSchart.gauge.fullCircle,!0),p=wt(ee.gaugeAxisLabels,te.d3JSchart.gauge.axisLabels,!0),f=wt(ee.gaugeTitle,te.d3JSchart.gauge.title||"").toString();var de,ce=wt(ee.gridX,te.d3JSchart.grid.x,!0),ue=wt(ee.gridY,te.d3JSchart.grid.y,!0),pe=wt(ee.xAxisHeight,te.d3JSchart.x.axisHeight),fe=wt(ee.legendShow,te.d3JSchart.legend.show,!0),he=wt(ee.legendPosition,te.d3JSchart.legend.position),me=Ct.jsonSaveExtend(null,te.d3JSchart.padding),ge=(Ct.isDefinedAndNotNull(ee.paddingBottom)&&(me.bottom=ee.paddingBottom),Ct.isDefinedAndNotNull(ee.paddingLeft)&&(me.left=ee.paddingLeft),Ct.isDefinedAndNotNull(ee.paddingRight)&&(me.right=ee.paddingRight),Ct.isDefinedAndNotNull(ee.paddingTop)&&(me.top=ee.paddingTop),wt(ee.rotateAxis,te.d3JSchart.rotateAxis,!0)),be=wt(ee.axisLabelPosition,te.d3JSchart.axisLabelPosition);let h=null,m=null;switch(be){case"inner1":h="inner-left",m="inner-bottom";break;case"inner2":h="inner-center",m="inner-middle";break;case"inner3":h="inner-right",m="inner-top";break;case"outer1":h="outer-left",m="outer-bottom";break;case"outer2":h="outer-center",m="outer-middle";break;case"outer3":h="outer-right",m="outer-top"}ge&&(de=h,h=m,m=de);var ye=wt(ee.tooltipShow,te.d3JSchart.tooltip.show,!0),ve=wt(ee.tooltipGrouped,te.d3JSchart.tooltip.grouped,!0),De=wt(ee.transitionDuration||te.d3JSchart.transitionDuration),xe=wt(ee.xShow,te.d3JSchart.x.show,!0),Ce=wt(ee.xLabel,te.d3JSchart.x.label||"").toString();let g=wt(ee.xType,te.d3JSchart.x.type),b=null,y=null,i=wt(ee.xTickCutAfter,te.d3JSchart.x.tick.cutAfter),v=wt(ee.xTickMaxNumber,te.d3JSchart.x.tick.maxNumber),D=wt(ee.xTickRotation,te.d3JSchart.x.tick.rotation),x=wt(ee.xTickMultiline,te.d3JSchart.x.tick.multiline,!0),W=wt(ee.xTickFit,te.d3JSchart.x.tick.fit,!0),F=wt(ee.xTickAutoRotate,te.d3JSchart.x.tick.autoRotate,!0),C=null;"category"!==g&&"timeseries"!==g||(y="x"),"timeseries"===g&&(b=wt(ee.xTimeFormat,te.d3JSchart.x.timeFormat),C=wt(ee.xTickTimeFormat,te.d3JSchart.x.tick.timeFormat),oe(ne,b)),"category"===g&&(C=function(e,t){return Ct.cutString(t,i)});var ke=wt(ee.yLabel,te.d3JSchart.y.label||"").toString(),we=wt(ee.yLog,te.d3JSchart.y.log,!0);let k=null,B=(we&&(k="log"),ee.yMin||te.d3JSchart.y.min),j=ee.yMax||te.d3JSchart.y.max,U=ee.yTickMaxNumber||te.d3JSchart.y.tick.maxNumber,w=ee.yUnit||te.d3JSchart.y.unit;var Te=wt(ee.y2Label,te.d3JSchart.y2.label||"").toString(),Se=wt(ee.y2Log,te.d3JSchart.y2.log,!0);let T=null,S=!1,J=(Se&&(T="log"),wt(ee.y2Min,te.d3JSchart.y2.min)),G=wt(ee.y2Max,te.d3JSchart.y2.max),Y=wt(ee.y2TickMaxNumber,te.d3JSchart.y2.tick.maxNumber),q=wt(ee.y2Unit,te.d3JSchart.y2.unit);var Ne=wt(ee.zoomType,te.d3JSchart.zoom.type);let N=!1,A=wt(ee.zoomEnabled,te.d3JSchart.zoom.enabled,!0);var Ae,Ie=wt(ee.threshold,te.d3JSchart.threshold),Ee=(!A||"scroll"===Ne?N=!1:"subchart"===Ne?(N=!0,A=!1):"drag"===Ne&&(A=!0,N=!1),wt(ee.zoomRescale,te.d3JSchart.zoom.rescale,!0));let I=[],E=[],M=[],L={},_={},O={},z={},R={},H=Ct.groupObjectArray(ne,"x"),P=0;if(V){"category"!==g&&"timeseries"!==g||(E.push("x"),Ae=Object.keys(H),Dt.each(Ae,function(e,t){E.push(wt(t.replace("â€‹",""),null))})),I.push(E),Dt.each(V,function(e,t){var i,n;if(P+=1,t[0]&&t[0].seriesID){i=t[0];let a=escape(i.seriesID);L[a]=i.color,_[a]=i.type,0<=$.indexOf(i.type)&&(A=!1),"gauge"===i.type&&(Q=!0),"pie"===i.type&&(X=!0),"donut"===i.type&&(Z=!0),Ct.isDefinedAndNotNull(i.tooltip)&&(r=!0),O[a]=i.yAxis||"y",Ct.isDefinedAndNotNull(i.groupID)&&(n=escape(i.groupID.toString()),R[n]||(R[n]=[]),R[n].push(a)),"y2"===i.yAxis&&(S=!0),z[a]=wt(i.label,a);let o=[];o.push(a),"category"===g||"timeseries"===g?Dt.each(H,function(e,t){let i=null,n=null;Dt.each(t,function(e,t){escape(t.seriesID)===a&&(i=t.y,t.z)&&(n=t.z)}),null!==n?o.push({y:i,z:n}):o.push(i)}):Dt.each(t,function(e,t){var i=wt(t.y,null);t.z?(t=t.z,o.push({y:i,z:t})):o.push(i)}),I.push(o)}else Ct.errorMessage.show(K,te.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - drawChart",msg:"No seriesID found in seriesID Cursor",featureDetails:Ct.featureDetails})}),Dt.each(R,function(e,t){M.push(t)});let e=wt(ee.showDataLabels,te.d3JSchart.showDataLabels,!0);X||Z?e={colors:"white"}:Q&&(e={colors:"single"===l&&1<P?"white":null});var Me=wt(ee.showDataPoints,te.d3JSchart.showDataPoints,!0),Le=wt(ee.showAbsoluteValues,te.d3JSchart.showAbsoluteValues);let i;Le&&(i=function(e){return e+w});let n;r&&(n=function(e){let a=Dt("<div></div>");return a.addClass("bb-tooltip"),a.addClass("bida-chart-tooltip-custome"),Dt.each(e,function(e,t){var i="â€‹"+unescape(t.id),i=V[i],n=t.index;i&&i[n]&&Ct.isDefinedAndNotNull(i[n].tooltip)&&Ct.isDefinedAndNotNull(t.value)&&(t=Dt("<div>"),i=St(i[n].tooltip,te,ae,pt),t.append(i),a.append(t))}),a[0].outerHTML});try{var _e=K+"bbc",Oe=_e.replace("#",""),ze=Dt("<div></div>"),Re=(ze.attr("id",Oe),Dt(K).append(ze),{bindto:_e,background:a,title:{text:re},size:{height:ie},data:{x:y,xFormat:b,columns:I,types:_,groups:M,colors:L,labels:e,axes:O,names:z,onclick:function(t){{var i="â€‹"+unescape(t.id);let e=t.index;V[i]&&(1===V[i].length&&(e=0),V[i][e])&&V[i][e].link&&Ct.link(V[i][e].link,V[i][e].linkTarget)}}},pie:{label:{format:i,threshold:Ie}},donut:{label:{format:i,threshold:Ie}},line:{step:{type:le}},gauge:{label:{format:i,threshold:Ie,extents:function(e){return p?e:null}},fullCircle:u,min:o,max:s,type:l,width:d,title:f,arc:{minWidth:c}},radar:{direction:{clockwise:!0}},subchart:{show:N},zoom:{type:Ne,enabled:A,rescale:Ee},transition:{duration:De},legend:{show:fe,position:he},tooltip:{show:ye,grouped:ve,contents:n},grid:{x:{show:ce},y:{show:ue}},point:{show:Me},axis:{rotated:ge,x:{show:xe,label:{text:Ce,position:h},type:g,tick:{culling:{max:v},autorotate:F,rotate:D,multiline:x,format:C,fit:W},height:pe},y:{label:{text:ke,position:m},type:k,max:j,min:B,tick:{culling:{max:U},format:function(e){return e+w}}},y2:{show:S,label:{text:Te,position:m},type:T,max:G,min:J,tick:{culling:{max:Y},format:function(e){return e+q}}}},padding:me});vt.debug.info({fct:Ct.featureDetails.name+" - drawChart",finalChartData:Re,featureDetails:Ct.featureDetails});let t=bb.generate(Re);A&&Dt(_e).contextmenu(function(e){e.preventDefault(),t.unzoom()}),ht.on("resize",function(){t.resize({height:ie})})}catch(e){Dt(K).empty(),Ct.errorMessage.show(K,te.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - drawChart",msg:"Error while try to render chart",err:e,featureDetails:Ct.featureDetails})}}else Ct.noDataMessage.show(K,te.noDataMessage)}catch(e){Dt(K).empty(),Ct.errorMessage.show(K,te.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - drawChart",msg:"Error while prepare data for chart",err:e,featureDetails:Ct.featureDetails})}}else Ct.errorMessage.show(D,C.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - drawItemRegionContent",msg:"itemData is missing in JSON",featureDetails:Ct.featureDetails});else Ct.errorMessage.show(D,C.errorMessage),vt.debug.info({fct:Ct.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Charts is not activated.",featureDetails:Ct.featureDetails});break;case"calendarheatmap":if(-1<Dt.inArray("calendarheatmap",C.features))if(x.itemData){ne=D;var z=k;ee=I;var R=x.itemData;var H=C;var P=v;vt.debug.info({fct:Ct.featureDetails.name+" - drawCalendarHeatmap",pItemSel:ne,pItemHeight:z,pConfigData:ee,pValuesData:R,featureDetails:Ct.featureDetails});let e="sunday",r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=("function"==typeof vt.locale.getSettings&&vt.locale.getSettings().calendar&&vt.locale.getSettings().calendar.startOfWeek&&(t=vt.locale.getAbbrevMonthNames(),r=vt.locale.getAbbrevDayNames(),e=vt.locale.getSettings().calendar.startOfWeek),d3),l=new Map,d=Dt(ne),i=d.attr("id")+"-cheatmap",c="#"+i,u=new Date,p="#efefef",n=u.getMonth(),f=new Date(u.getFullYear()-1,n+1,1),h=new Date(u.getFullYear(),n+1,1),a=t.slice(n+1),o=t.slice(0,n+1),m=a.concat(o),g=!1,b=s.timeSunday;function W(){y.empty();let e=d.width(),a=e/53-40/53,o=z/7-20/7,t=4;e<=640?t=2:e<=450&&(t=1);var i=s.select(c).selectAll("svg").data(s.range(u.getFullYear(),u.getFullYear()+1)).enter().append("svg").attr("viewBox",`0 0 ${e} `+z).attr("width","100%").attr("height","100%").attr("class","bida-calendar-heatmap-calendar").append("g").attr("transform",`translate(${(e-53*a)/2+10}, 15)`),n=(i.append("g").attr("fill",p).attr("stroke","transparent").attr("stroke-width","0.1px").selectAll("rect").data(s.timeDays(f,h)).enter().append("rect").attr("rx",3).attr("ry",3).attr("class","bida-calendar-heatmap-day").attr("width",a-t).attr("height",o-t).attr("transform",`translate(${t/3}, ${t/3})`).attr("x",function(e){return b.count(f,e)*a+t/4}).attr("y",function(e){return g?(e.getDay()+6)%7*o+t/4:e.getDay()*o}).datum(s.timeFormat("%Y-%m-%d")).attr("fill",function(e){e=l.get(e);if(e)return e.color||p}),y.find(".bida-calendar-heatmap-day")),n=(Dt.each(n,function(){var e=Dt(this)[0];e.hasAttribute("fill")&&s.select(e).on("mouseover",function(e,t){var i,n,a,o,r,t=l.get(t);t&&(i=Dt("<div>"),n=Dt("<div>"),a=Dt("<div>"),i.addClass("bida-calendar-heatmap-tt"),(r=Dt("<b>")).text(kt(t.date)+": "),(o=Dt("<span>")).text(t.value),n.append(r),n.append(o),i.append(n),Ct.isDefinedAndNotNull(t.tooltip)&&(r=St(t.tooltip,H,P,pt),a.html(r),i.append(a)),Ct.tooltip.show(i[0].outerHTML))}).on("mouseout",function(){Ct.tooltip.hide()}).on("mousemove",function(e){Ct.tooltip.setPosition(e)}).on("click",function(e,t){t=l.get(t);t&&Ct.isDefinedAndNotNull(t.link)&&Ct.link(t.link,t.linkTarget)})}),i.append("g").attr("fill","none").attr("stroke","#aaa").attr("stroke-width","1px").selectAll("path").data(s.timeMonths(f,h)).enter().append("path").attr("class","bida-calendar-heatmap-month").attr("d",function(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),i=g?(e.getDay()+6)%7:e.getDay(),e=b.count(f,e),n=g?(t.getDay()+6)%7:t.getDay(),t=b.count(f,t);return`M${(e+1)*a}, ${i*o}H${e*a}V${7*o}H${t*a}V${(n+1)*o}H${(t+1)*a}V0H${(e+1)*a}Z`}),s.scaleBand().domain(m).range([0,e-40])),n=s.axisTop(n).tickSize(0),n=(i.append("g").call(n).selectAll("path").attr("stroke","transparent"),s.scaleBand().domain(r).range([0,z-20])),n=s.axisLeft(n).tickSize(0);i.append("g").call(n).selectAll("path").attr("stroke","transparent")}"monday"===e&&(g=!0,b=s.timeMonday),R.forEach(e=>{e.date&&l.set(e.date.substr(0,10),e)});let y=Dt("<div>");y.attr("id",i),y.css("height",z),d.append(y),W(),ht.on("resize",function(){W()})}else Ct.errorMessage.show(D,C.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - drawItemRegionContent",msg:"itemData is missing in JSON",featureDetails:Ct.featureDetails});else Ct.errorMessage.show(D,C.errorMessage),vt.debug.info({fct:Ct.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Calendar Heatmap is not activated.",featureDetails:Ct.featureDetails});break;case"html":{var F=D;R=k;var e=x.itemData;var B=x.itemID;var j=C;var X=h;var Z=v;vt.debug.info({fct:Ct.featureDetails.name+" - drawHTML",pItemSel:F,pItemHeight:R,pItemData:e,pDefaultConfig:j,pOversize:X,pIsSafeItem:Z,featureDetails:Ct.featureDetails});let o=Dt("<div></div>");function He(e){var t=St(e,j,Z,pt);vt.debug.info({fct:Ct.featureDetails.name+" - drawHTML",submodule:"renderHTML",pContent:e,contentAfterEscapeOrSanitize:t,featureDetails:Ct.featureDetails}),o.html(t),-1<Dt.inArray("inlineimagesdownload",j.features)&&(e=o.find('img[alt*="aih#"]'),Dt.each(e,function(e,t){let i=t.title;var n;(i=i||t.alt.split("aih##")[1])&&(vt.debug.info({fct:Ct.featureDetails.name+" - drawHTML",pItemID:B,pk:i,featureDetails:Ct.featureDetails}),n=j.items2SubmitImg,n=vt.server.pluginUrl(ut,{x01:"imageDownload",x02:B,x03:i,pageItems:n}),t.src=n,Dt(t).addClass("bida-item-urte-img"))})),o.find("*").css("max-width","100%").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto").css("white-space","normal"),o.find("img").css("object-fit","contain").css("object-position","50% 0%")}if(o.addClass("bida-item-html"),e&&"object"==typeof e&&1<e.length){let i=0,n,a=function(){if(i>e.length-1?i=0:i<0&&(i=e.length-1),e[i]){He(e[i].html);let t=e[i].duration;if(t&&0<t){let e=function(){n=setTimeout(function(){i+=1,Dt(o).fadeOut("slow",function(){a(),Dt(o).fadeIn("slow")})},1e3*t)};Dt(F).hover(function(){clearTimeout(n)}),Dt(F).mouseleave(function(){e()}),e()}}};var s=Dt("<div></div>"),l=(s.addClass("bida-item-html-slide-lc"),s.on("click",function(){--i,clearTimeout(n),Dt(o).fadeOut("fast",function(){a(),Dt(o).fadeIn("fast")})}),Dt("<span></span>")),l=(l.addClass("fa fa-chevron-left fa-lg"),l.addClass("bida-item-html-slide-lc-s"),s.append(l),Dt(F).append(s),Dt("<div></div>")),s=(l.addClass("bida-item-html-slide-rc"),l.on("click",function(){i+=1,clearTimeout(n),Dt(o).fadeOut("fast",function(){a(),Dt(o).fadeIn("fast")})}),Dt("<span></span>"));s.addClass("fa fa-chevron-right fa-lg"),s.addClass("bida-item-html-slide-rc-s"),l.append(s),Dt(F).append(l),a()}else e&&"object"==typeof e&&1===e.length?Ct.isDefinedAndNotNull(e[0].html)&&""!==e[0].html?He(e[0].html):Ct.noDataMessage.show(o,j.noDataMessage):Ct.isDefinedAndNotNull(e)&&""!==e?He(e):Ct.noDataMessage.show(o,j.noDataMessage);Dt(F).append(o),!0!==X&&(o.css("height",R),yt(o))}break;case"card":{s=N;l=k;X=D;var p=x.itemData;var f=C;var Pe=h;var m=v;vt.debug.info({fct:Ct.featureDetails.name+" - drawCard",pIndex:s,pItemHeight:l,pItemSel:X,pItemData:p,pDefaultConfig:f,pOversize:Pe,pIsSafeItem:m,featureDetails:Ct.featureDetails});var We,d,Fe,c=Dt("<div></div>"),g=(c.addClass("bida-item-card"),Dt("<div></div>"));g.addClass("card-content"),(Ct.isDefinedAndNotNull(p.icon)||Ct.isDefinedAndNotNull(p.iconText))&&((Fe=Dt("<div></div>")).addClass("card-content-icon-div"),d=Dt("<span></span>"),Ct.isDefinedAndNotNull(p.icon)&&"fa-"===p.icon.substr(0,"fa-".length)?(d.addClass("fa "+p.icon),d.css("background",p.iconBackColor||"hsl("+23*s%350+", 79%, 45%)")):(Ct.isDefinedAndNotNull(p.iconText)&&(s=St(p.iconText,f,m,pt),(We=Dt("<span></span>")).addClass("card-content-icon-text"),We.html(s),d.append(We)),Ct.isDefinedAndNotNull(p.icon)&&d.css("background-image","url("+p.icon+")"),d.css("background-color",p.iconBackColor)),d.addClass("card-content-icon"),d.css("color",p.iconColor||"white"),Fe.append(d),g.append(Fe)),(s=Dt("<div></div>")).addClass("card-title-div"),Ct.isDefinedAndNotNull(p.icon)&&s.css("width","calc(100% - 55px)");let e;Ct.isDefinedAndNotNull(p.value)&&((e=Dt("<p></p>")).addClass("card-title"),e.addClass("truncate-text"),We=St(p.value,f,m,pt),e.html(We),s.append(e)),Ct.isDefinedAndNotNull(p.valueSmall)&&(Ct.isDefinedAndNotNull(p.value)&&e.css("line-height","30px"),(d=Dt("<p></p>")).addClass("card-sub-title"),Fe=St(p.valueSmall,f,m,pt),d.html(Fe),s.append(d)),g.append(s),c.append(g),Ct.isDefinedAndNotNull(p.footer)&&((s=Dt("<div></div>")).addClass("bida-card-footer"),(g=Dt("<div></div>")).addClass("stats"),f=St(p.footer,f,m,pt),g.html(f),s.append(g),c.append(s)),Ct.isDefinedAndNotNull(p.link)?((m=Dt("<a></a>")).addClass("bida-a"),m.attr("href",p.link),Ct.isDefinedAndNotNull(p.linkTarget)&&m.attr("target",p.linkTarget),m.append(c),Dt(X).append(m),!0!==Pe&&(m.css("height",l),yt(m))):(Dt(X).append(c),!0!==Pe&&(c.css("height",l),yt(c)))}break;case"badge":{f=N;var Be=k;g=D;var b=x.itemData;p=C;m=v;vt.debug.info({fct:Ct.featureDetails.name+" - drawBadges",pIndex:f,pItemHeight:Be,pItemSel:g,pItemData:b,pDefaultConfig:p,pIsSafeItem:m,featureDetails:Ct.featureDetails});let e="hsl("+23*f%350+", 79%, 45%)",i,n,a,t=0,o=.98,r=.28,s=!1,l=.15,d=r-l,c=.28,u=Dt("<div></div>");function je(){var e=Be,t=Math.min(e,u.width());n&&(n.css("font-size",t*l+"px"),n.css("line-height",e*(o-d)+"px")),i&&(i.css("font-size",t*c+"px"),i.css("line-height",e*o+"px"),s)&&(i.css("height",e*o+"px"),i.css("width",e*o+"px")),a&&(a.css("font-size",t*r+"px"),a.css("line-height",e*o+"px"))}u.addClass("bida-item-badge"),Ct.isDefinedAndNotNull(b.title)&&(t+=1),Ct.isDefinedAndNotNull(b.icon)&&(t+=1),Ct.isDefinedAndNotNull(b.value)&&(t+=1),0<t&&(o/=t,d/=t),Ct.isDefinedAndNotNull(b.title)?((f=Dt("<div></div>")).addClass("bida-item-badge-text"),(n=Dt("<span></span>")).css("color",b.titleColor||e),E=St(b.title,p,m,pt),n.html(E),f.append(n),u.append(f)):(c+=l/2,r+=l/3),Ct.isDefinedAndNotNull(b.icon)?((E=Dt("<div></div>")).addClass("bida-item-badge-icon"),i=Dt("<span></span>"),Ct.isDefinedAndNotNull(b.icon)&&"fa-"===b.icon.substr(0,"fa-".length)?(i.addClass("fa "+b.icon),i.css("color",b.iconColor||e)):(Ct.isDefinedAndNotNull(b.iconText)&&(f=St(b.iconText,p,m,pt),i.html(f)),Ct.isDefinedAndNotNull(b.icon)&&(s=!0,i.css("background-image","url("+b.icon+")"),i.addClass("bida-item-badge-icon-image"))),E.append(i),u.append(E)):(l+=c/3,r+=c/3),Ct.isDefinedAndNotNull(b.value)?((f=Dt("<div></div>")).addClass("bida-item-badge-text-value"),(a=Dt("<span></span>")).css("color",b.valueColor||e),p=St(b.value,p,m,pt),a.html(p),f.append(a),u.append(f)):(l+=r/3,c+=r/2),Ct.isDefinedAndNotNull(b.link)&&(u.css("cursor","pointer"),u.on("click",function(){Ct.link(b.link,b.linkTarget)})),Dt(g).append(u),je(),ht.on("resize",function(){je()})}break;case"list":{Pe=D;c=k;var Ue=x.itemData;var Je=C;var Ge=h;var Ye=v;vt.debug.info({fct:Ct.featureDetails.name+" - drawList",pItemSel:Pe,pItemHeight:c,pItemData:Ue,pDefaultConfig:Je,pOversize:Ge,pIsSafeItem:Ye,featureDetails:Ct.featureDetails});let e=Dt("<div></div>"),s=(e.addClass("bida-item-list-div"),Dt("<ul></ul>"));function qe(s,l){Dt.each(l,function(e,t){var i,n,a,o=Dt("<li></li>"),r=(o.addClass("bida-item-list-item"),Dt("<div></div>")),e=(r.addClass("list-item-content"),e<l.length-1&&r.css("border-bottom","1px solid #eeeeee"),(Ct.isDefinedAndNotNull(t.icon)||Ct.isDefinedAndNotNull(t.iconText))&&((i=Dt("<div></div>")).addClass("listItem-content-icon-div"),n=Dt("<span></span>"),t.icon&&"fa-"===t.icon.substr(0,"fa-".length)?(n.addClass("fa "+t.icon),n.css("background",t.iconBackColor||"hsl("+23*e%350+", 79%, 45%)")):(Ct.isDefinedAndNotNull(t.iconText)&&(e=St(t.iconText,Je,Ye,pt),(a=Dt("<span></span>")).addClass("list-item-content-icon-text"),a.html(e),n.append(a)),Ct.isDefinedAndNotNull(t.icon)&&n.css("background-image","url("+t.icon+")"),n.css("background-color",t.iconBackColor)),n.addClass("list-item-content-icon"),n.css("color",t.iconColor||"white"),i.append(n),r.append(i)),Dt("<div></div>"));e.addClass("list-item-content-text"),Ct.isDefinedAndNotNull(t.icon)&&e.css("width","calc(100% - 55px)"),Ct.isDefinedAndNotNull(t.title)&&((a=Dt("<span></span>")).addClass("list-item-title"),a.addClass("truncate-text"),n=St(t.title,Je,Ye,pt),a.html(n),e.append(a)),Ct.isDefinedAndNotNull(t.text)&&((i=Dt("<span></span>")).addClass("list-item-text"),n=St(t.text,Je,Ye,pt),i.html(n),e.append(i)),r.append(e),o.append(r),Ct.isDefinedAndNotNull(t.link)?((a=Dt("<a></a>")).addClass("bida-a"),a.attr("href",t.link),a.append(o),Ct.isDefinedAndNotNull(t.linkTarget)&&a.attr("target",t.linkTarget),s.append(a)):s.append(o)})}s.addClass("bida-item-list");let i=[],t=(Dt.each(Ue,function(e,t){Ct.isDefinedAndNotNull(t.group)||i.push(t)}),Ct.groupObjectArray(Ue,"group"));vt.debug.info({fct:Ct.featureDetails.name+" - drawList",noGroupsArr:i,groupsArr:t,featureDetails:Ct.featureDetails}),qe(s,i),Dt.each(t,function(e,t){var i=Dt("<li></li>");i.addClass("bida-item-list-item-group");let n="#f1f1f1",a=(t[0].groupBackColor&&(n=t[0].groupBackColor),"inherit");t[0].groupColor&&(a=t[0].groupColor);var o=Dt("<div></div>"),r=(o.addClass("list-group-content"),o.css("border-left","3px solid "+n),Dt("<span></span>")),e=(r.addClass("list-group-content-title"),St(e,Je,Ye,pt)),e=(r.css("background",n),r.css("color",a),r.html(e),o.append(r),i.append(o),Dt("<ul></ul>"));e.addClass("bida-item-list-grouped"),qe(e,t),o.append(e),s.append(i)}),e.append(s),Dt(Pe).append(e),!0!==Ge&&(e.css("height",c),yt(e))}break;case"table":if(-1<Dt.inArray("table",C.features)){Ue=D;Ge=k;var y=x.itemData;var u=C;var $e=h;var Ve=v;vt.debug.info({fct:Ct.featureDetails.name+" - drawTable",pItemSel:Ue,pItemHeight:Ge,pItemData:y,pDefaultConfig:u,pOversize:$e,pIsSafeItem:Ve,featureDetails:Ct.featureDetails});let e=Dt("<div></div>"),a=(e.addClass("bida-item-table-div"),Dt("<table></table>"));a.addClass("bida-item-table"),Ct.isDefinedAndNotNull(y.header)&&0<y.header.length&&Dt.each(y.header,function(e,t){var i;Ct.isDefinedAndNotNull(t.text)&&((i=Dt("<th></th>")).addClass("bida-item-table-header"),i.css("background-color",t.background||u.table.header.background),i.css("text-align",t.textAlign||u.table.header.textAlign),i.css("color",t.color||u.table.header.color),i.css("border",t.border||u.table.header.border),t=St(t.text,u,Ve,pt),i.html(t),a.append(i))}),Ct.isDefinedAndNotNull(y.data)&&0<y.data.length&&Dt.each(y.data,function(e,t){let n=Dt("<tr></tr>");n.addClass("bida-item-table-row"),e%2==0?(n.addClass("bida-item-table-row-even"),n.css("background",u.table.evenRow.background),n.css("text-align",u.table.evenRow.textAlign),n.css("color",u.table.evenRow.color),n.css("border-bottom",u.table.evenRow.borderBottom)):(n.addClass("bida-item-table-row-odd"),n.css("background",u.table.oddRow.background),n.css("text-align",u.table.oddRow.textAlign),n.css("color",u.table.oddRow.color),n.css("border-bottom",u.table.oddRow.borderBottom)),Dt.each(t,function(e,t){var i;Ct.isDefinedAndNotNull(t.text)&&((i=Dt("<td></td>")).addClass("bida-item-table-cell"),i.css("background",t.background||u.table.cells.background),i.css("text-align",t.textAlign||u.table.cells.textAlign),i.css("color",t.color||u.table.cells.color),i.css("border",t.border||u.table.cells.border),t=St(t.text,u,Ve,pt),i.html(t),n.append(i))}),a.append(n)}),e.append(a),Dt(Ue).append(e),!0!==$e&&(e.css("height",Ge),yt(e))}else Ct.errorMessage.show(D,C.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Tables is not activaed.",featureDetails:Ct.featureDetails});break;case"map":if(-1<Dt.inArray("map",C.features)){var Qe,Xe,U=D,J=k,Ze=x.itemData,G=I,Y=C,Ke=v;vt.debug.info({fct:Ct.featureDetails.name+" - drawD3Map",pItemSel:U,pItemHeight:J,pItemData:Ze,pItemConfig:G,pDefaultConfig:Y,pIsSafeItem:Ke,featureDetails:Ct.featureDetails});try{let o=d3,e=Dt(U),n=wt(G.tourEnabled,Y.mapOptions.tour.enabled,!0),r=wt(G.tourSpeed,Y.mapOptions.tour.speed)/2e3,s=wt(G.tourStart,Y.mapOptions.tour.start),l=wt(G.circlesShadows,Y.mapOptions.circles.shadows,!0),d=wt(G.circlesRadius,Y.mapOptions.circles.radius),c=wt(G.circlesColor,Y.mapOptions.circles.color),u=wt(G.circlesOpacity,Y.mapOptions.circles.opacity),p=wt(G.circlesOpacityHover,Y.mapOptions.circles.opacityHover),t=wt(G.mapCenterLongitude,Y.mapOptions.map.centerLongitude),i=wt(G.mapCenterLatitude,Y.mapOptions.map.centerLatitude),a=wt(G.mapInitialZoom,Y.mapOptions.map.initialZoom),R=wt(G.mapZoomEnabled,Y.mapOptions.map.zoomEnabled,!0),H=wt(G.mapColor,Y.mapOptions.map.color),P=wt(G.mapStroke,Y.mapOptions.map.stroke),W=wt(G.mapStrokeWidth,Y.mapOptions.map.strokeWidth),f=wt(G.mapShadows,Y.mapOptions.map.shadows,!0),h=Dt(U).attr("id")+"-shadow",m=Dt(U).attr("id")+"-ocean",g=Dt(U).attr("id")+"-highlight",b=Dt(U).attr("id")+"-shading",F="url(#"+m+")",B="url(#"+g+")",j="url(#"+b+")",y,v,D,x,C,k,w,T,S,N=wt(G.tourShadowEffect,Y.mapOptions.tour.shadowEffect,!0),A=(n||(N=!1),function(){return e.width()}),I=function(){return[A()/2,J/2]},E=o.select(U).append("svg").attr("class","bida-map-svg").attr("width",A()).attr("height",J);(f||l)&&(Tt(E,h,2,2,1),x="url(#"+h+")");let M,L=o.now(),_=0,O=(S=(n?o.geoOrthographic().scale(J/2.5+20):o.geoNaturalEarth1().center([t,i]).scale(J/2.5*a)).translate(I()),o.geoPath().projection(S)),z=function(e){vt.debug.info({fct:Ct.featureDetails.name+" - drawD3Map",geoJSONData:e,featureDetails:Ct.featureDetails});let i=E.append("g");var t;function a(){w.attr("d",O(e)),N&&(y.attr("cx",A()/2).attr("cy",J/2).attr("r",S.scale()),v.attr("cx",A()/2).attr("cy",J/2).attr("r",S.scale()),D.attr("cx",A()/2).attr("cy",J/2).attr("r",S.scale())),T.attr("transform",function(e){return"translate("+S([e.longitude,e.latitude])+")"}).attr("r",function(e){if(n&&1.57<o.geoDistance([e.longitude,e.latitude],S.invert(I())))return 0;return wt(e.radius,d)})}if(N&&((t=E.append("defs").append("radialGradient").attr("id",m).attr("cx","75%").attr("cy","25%")).append("stop").attr("offset","5%").attr("stop-color","#fff"),t.append("stop").attr("offset","100%").attr("stop-color","rgb(240,240,240)"),(t=E.append("defs").append("radialGradient").attr("id",g).attr("cx","75%").attr("cy","25%")).append("stop").attr("offset","5%").attr("stop-color","rgb(250,250,250)").attr("stop-opacity","0.3"),t.append("stop").attr("offset","100%").attr("stop-color","rgb(230,230,230)").attr("stop-opacity","0.15"),(t=E.append("defs").append("radialGradient").attr("id",b).attr("cx","55%").attr("cy","45%")).append("stop").attr("offset","30%").attr("stop-color","#fff").attr("stop-opacity","0"),t.append("stop").attr("offset","100%").attr("stop-color","rgb(220,220,220)").attr("stop-opacity","0.3"),y=i.append("circle").attr("cx",A()/2).attr("cy",J/2).attr("r",S.scale()).style("fill",F)),f&&(C=x),w=i.append("path").attr("d",O(e)).attr("class","bida-map-path").style("filter",C).style("stroke",P).style("stroke-width",W).style("fill",H),N&&(v=i.append("circle").attr("cx",A()/2).attr("cy",J/2).attr("r",S.scale()).style("fill",B),D=i.append("circle").attr("cx",A()/2).attr("cy",J/2).attr("r",S.scale()).style("fill",j)),l&&(k=x),T=i.selectAll(".bida-map-circle").data(Ze).enter().append("circle").filter(function(e){return Ct.isDefinedAndNotNull(e.radius)?0<e.radius:0<d}).attr("class","bida-map-circle").style("filter",k).attr("fill",function(e){return e.color||c}).style("opacity",u).on("mouseover",function(e,t){Ct.isDefinedAndNotNull(t.link)&&Dt(this).css("cursor","pointer"),Ct.isDefinedAndNotNull(t.tooltip)&&(t=St(t.tooltip,Y,Ke,pt),Ct.tooltip.show(t)),Dt(this).css("opacity",p)}).on("mousemove",function(e,t){Ct.isDefinedAndNotNull(t.tooltip)&&Ct.tooltip.setPosition(e)}).on("mouseout",function(){Ct.tooltip.hide()}).on("click",function(e,t){Ct.isDefinedAndNotNull(t.link)&&Ct.link(t.link,t.linkTarget)}).attr("transform",function(e){return"translate("+S([e.longitude,e.latitude])+")"}).attr("r",function(e){return wt(e.radius,d)}),n){let e=0,t=-1,i,n=("left"===(G.tourDirection||Y.mapOptions.tour.direction)&&(t=1),function(){(e+=1)%60==0&&(0===Dt(U).length&&M.stop(),e=0),e%3==0&&(i=o.now()-L,S.rotate([(r*i+s)*t,-10,0]),a())});M=o.timer(n),gt.d3Timer.push(M),E.on("mouseover",function(){_=o.now()-L,M.stop()}),E.on("mouseout",function(){L=o.now()-_,M.restart(n)}),document.addEventListener("visibilitychange",function(){document.hidden?M.stop():M.restart(n)})}else if(R){let t=o.zoom().scaleExtent([1,8]).on("zoom",function(e){i.attr("transform",e.transform)});E.call(t),E.on("contextmenu",function(e){e.preventDefault(),E.call(t.transform,o.zoomIdentity.scale(1))})}ht.on("resize",function(){E.attr("width",A()),E.attr("height",J),S.translate(I()),a()})};n?mt.tour?z(mt.tour):(Qe=ft+"world-tour.json",Dt.getJSON(Qe,function(e){mt.tour=e,z(mt.tour)})):mt.zoom?z(mt.zoom):(Xe=ft+"world-zoom.json",Dt.getJSON(Xe,function(e){mt.zoom=e,z(mt.zoom)}))}catch(e){Dt(U).empty(),Ct.errorMessage.show(U,Y.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - drawD3Map",msg:"Error while try to render clock",err:e,featureDetails:Ct.featureDetails})}}else Ct.errorMessage.show(D,C.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Maps is not activaed.",featureDetails:Ct.featureDetails});break;case"clock":if(-1<Dt.inArray("clock",C.features)){var q=D,et=k,$=x.itemData,V=I,Q=C;vt.debug.info({fct:Ct.featureDetails.name+" - drawClock",pItemSel:q,pItemHeight:et,pItemData:$,pItemConfig:V,pDefaultConfig:Q,featureDetails:Ct.featureDetails});try{let a=d3,e=Dt(q),o=Dt(q).attr("id")+"-clock",r=Dt(q).attr("id")+"-shadow",s="#"+o,F=Dt(q).attr("id")+"-clockhands",l=.0174532925,d=wt(V.secondLabel,Q.clockOptions.second.label,!0),c=wt(V.circleWidth,Q.clockOptions.circle.width),u=new Date,p,f=0,h=wt(V.shadows,Q.clockOptions.shadows,!0),m,g,b,y,v,D,x,C,k,w,T,S,N,A,I,B,E,M,L,_,j,O,z,R,U,H=(c<=0&&(h=!1),function(){return e.width()}),P=function(){return Math.floor(et/2)-2};if(Ct.isDefinedAndNotNull($)&&Ct.isDefinedAndNotNull($.startDate))try{var tt=Date.parse($.startDate);f=tt-u}catch(e){vt.debug.error({fct:Ct.featureDetails.name+" - drawClock",msg:"Error while try to parse clock date: itemData has to be an iso date. The local time will be used.",err:e,featureDetails:Ct.featureDetails})}let W=function(e){let t="";var i;return Ct.isDefinedAndNotNull(e)&&(i=vt.locale&&vt.locale.getLanguage?vt.locale.getLanguage():void 0,t=(t=e.replace("#date#",kt(u))).replace("#time#",u.toLocaleTimeString(i)),t=Ct.cutString(t,15)),t},t=function(){var e=d?1.05:1.2;z=Math.min(H()/2,P()*e-c/3),_=a.scaleLinear().range([0,330]).domain([0,11]),j=a.scaleLinear().range([0,354]).domain([0,59]),O=a.scaleLinear().range([0,354]).domain([0,59]),m=.35*z,g=.55*z,b=.7*z,y=.7*z,v=.6*z,D=.1*z,x=.51*z,U=.75*z,I=.835*z+c/3,k=Math.max(Math.floor(.12*z),12),w=Math.max(Math.floor(.1*z),9),C=k/2.15,B=w/2.15,N=Math.floor(.13*z),S=.3*z,T=-.3*z+N,A=.03*z*wt(V.handsCoverSize,Q.clockOptions.hands.coverSize),R=[{type:"hour",value:0,length:-m,scale:_},{type:"minute",value:0,length:-g,scale:j},{type:"second",value:0,length:-b,scale:O,balance:30}];function t(){(u=new Date).setMilliseconds(u.getMilliseconds()+f),R[0].value=u.getHours()%12+u.getMinutes()/60,R[1].value=u.getMinutes(),R[2].value=u.getSeconds()}function i(){gt.innerItemsIntervals&&gt.innerItemsIntervals[s]&&clearInterval(gt.innerItemsIntervals[s])}function n(){gt.innerItemsIntervals[s]=setInterval(function(){var e;0===Dt(s).length?clearInterval(gt.innerItemsIntervals[s]):(t(),L&&L.selectAll("line").data(R).attr("transform",function(e){return"rotate("+e.scale(e.value)+")"}),M&&(Ct.isDefinedAndNotNull($)&&Ct.isDefinedAndNotNull($.label)&&(e=W($.label),M.selectAll(".bida-clock-label").text(e)),Ct.isDefinedAndNotNull($))&&Ct.isDefinedAndNotNull($.label2)&&(e=W($.label2),M.selectAll(".bida-clock-label2").text(e)))},1e3)}t(),(E=E||a.select(q).append("svg").attr("id",o).attr("class","bida-clock-svg")).attr("width",H()).attr("height",2*P()),M||(M=E.append("g").attr("transform","translate("+H()/2+","+P()+")"),h&&(Tt(E,r,2,2,1),p="url(#"+r+")"),M.append("g").append("circle").attr("class","bida-clock-circle").style("filter",p).style("stroke",wt(V.circleColor,Q.clockOptions.circle.color)).style("stroke-width",c+"px").style("fill",wt(V.circleFillColor,Q.clockOptions.circle.fillColor)),M.selectAll(".bida-clock-second-tick").data(a.range(0,60)).enter().append("line").attr("class","bida-clock-second-tick").attr("x1",0).attr("x2",0),M.selectAll(".bida-clock-hour-tick").data(a.range(0,12)).enter().append("line").attr("class","bida-clock-hour-tick").attr("x1",0).attr("x2",0),M.selectAll(".bida-clock-hour-label").data(a.range(3,13,3)).enter().append("text").attr("class","bida-clock-hour-label").attr("text-anchor","middle"),M.append("text").attr("x",0).attr("class","bida-clock-label").attr("text-anchor","middle"),M.append("text").attr("x",0).attr("class","bida-clock-label2").attr("text-anchor","middle"),d&&M.selectAll(".bida-clock-second-label").data(a.range(5,61,5)).enter().append("text").attr("class","bida-clock-second-label").attr("text-anchor","middle")),M.attr("transform","translate("+H()/2+","+P()+")"),M.selectAll(".bida-clock-circle").attr("x",0).attr("y",0).attr("r",U),M.selectAll(".bida-clock-second-tick").attr("y1",y).attr("y2",y+-10).attr("transform",function(e){return"rotate("+O(e)+")"}).style("stroke",wt(V.secondTickColor,Q.clockOptions.second.tickColor)),M.selectAll(".bida-clock-hour-tick").attr("y1",v).attr("y2",v+D).attr("transform",function(e){return"rotate("+_(e)+")"}).style("stroke",wt(V.hourTickColor,Q.clockOptions.hour.tickColor)),M.selectAll(".bida-clock-hour-label").attr("x",function(e){return x*Math.sin(_(e)*l)}).attr("y",function(e){return-x*Math.cos(_(e)*l)+C}).text(function(e){return e}).style("font-size",k+"px").style("fill",wt(V.hourLabelColor,Q.clockOptions.hour.labelColor)),Ct.isDefinedAndNotNull(d)&&M.selectAll(".bida-clock-second-label").attr("x",function(e){return I*Math.sin(O(e)*l)}).attr("y",function(e){return-I*Math.cos(O(e)*l)+B}).text(function(e){return e}).style("font-size",w+"px").style("fill",wt(V.secondLabelColor,Q.clockOptions.second.labelColor)),Ct.isDefinedAndNotNull($)&&Ct.isDefinedAndNotNull($.label)&&(e=W($.label),M.selectAll(".bida-clock-label").text(e).attr("y",T).style("font-size",N+"px").style("fill",wt(V.labelColor,Q.clockOptions.label.labelColor))),Ct.isDefinedAndNotNull($)&&Ct.isDefinedAndNotNull($.label2)&&(e=W($.label2),M.selectAll(".bida-clock-label2").text(e).attr("y",S).style("font-size",N+"px").style("fill",wt(V.labelColor2,Q.clockOptions.label.labelColor2))),L||(L=M.append("g").attr("id",F),M.append("g").append("circle").attr("class","bida-clock-hands-cover"),L.selectAll("line").data(R).enter().append("line")),M.selectAll(".bida-clock-hands-cover").attr("x",0).attr("y",0).attr("r",A).style("fill",wt(V.handCoverFillColor,Q.clockOptions.hands.coverFillColor)).style("stroke",wt(V.handCoverStrokeColor,Q.clockOptions.hands.coverStrokeColor)),L.selectAll("line").data(R).attr("class",function(e){return"bida-clock-"+e.type+"-hand"}).attr("x1",0).attr("y1",function(e){return e.balance||0}).attr("x2",0).attr("y2",function(e){return e.length}).attr("transform",function(e){return"rotate("+e.scale(e.value)+")"}).style("stroke",wt(V.handColor,Q.clockOptions.hands.color));i(),n(),document.addEventListener("visibilitychange",function(){(document.hidden?i:n)()})};t(),ht.on("resize",function(){t()})}catch(e){Dt(q).empty(),Ct.errorMessage.show(q,Q.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - drawClock",msg:"Error while try to render clock",err:e,featureDetails:Ct.featureDetails})}}else Ct.errorMessage.show(D,C.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Analogue Clocks is not activaed.",featureDetails:Ct.featureDetails});break;case"calendar":if(-1<Dt.inArray("calendar",C.features)){y=D;$e=k;var w=x.itemData;var T=I;var S=C;var it=h;var nt=v;vt.debug.info({fct:Ct.featureDetails.name+" - drawCalendar",pItemSel:y,pItemHeight:$e,pItemData:w,pItemConfig:T,pDefaultConfig:S,pOversize:it,pIsSafeItem:nt,featureDetails:Ct.featureDetails});let e=Dt(y),t=e.attr("id")+"-calendar",i=Dt("<div></div>"),n=(i.addClass("bida-calendar"),i.attr("id",t),e.append(i),wt(T.eventLimitPerDay,S.calendarOptions.eventLimitPerDay)),a=wt(T.displayTime,S.calendarOptions.displayTime,!0),o=wt(T.hours12,S.calendarOptions.hours12,!0),r=wt(T.timeGridStartTime,S.calendarOptions.timeGridStartTime),s=wt(T.viewType,S.calendarOptions.viewType),l=vt.locale&&vt.locale.getLanguage?vt.locale.getLanguage():void 0,d=wt(T.stickyHeaderDates,S.calendarOptions.stickyHeaderDates),c=("false"===(d="true"===d?!0:d)&&(d=!1),o||"en"!==l||(l="en-bz"),{month:"2-digit",year:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:o,locale:l}),u=(["dayGridMonth","dayGridWeek","timeGridWeek","listWeek","listMonth","listDay"].indexOf(s)<0&&(s="dayGridMonth"),FullCalendar),p=document.getElementById(t),f=new u.Calendar(p,{height:$e,events:w,displayEventTime:a,initialView:s,eventDisplay:"block",stickyHeaderDates:d,eventMouseEnter:function(e){e.event&&e.event._def&&(t=e.event._def).extendedProps&&t.extendedProps.link&&Dt(e.el).css("cursor","pointer");var t=Dt("<div></div>"),i=(t.addClass("bida-calendar-event-tt"),Dt("<b></b>")),n=(i.addClass("bida-calendar-event-tt-title"),St(e.event.title,S,nt,pt)),n=(Ct.isDefinedAndNotNull(n)&&(i.append(n),t.append(i),t.append("<br>")),Dt("<div></div>")),i=(n.addClass("bida-calendar-event-tt-subtitle"),Dt("<span></span>")),i=(i.addClass("fa fa-clock-o"),i.addClass("bida-calendar-event-tt-icon"),n.append(i),Dt("<span></span>"));i.addClass("bida-calendar-event-tt-date"),i.append(" "),i.append(u.formatDate(e.event.start,c)),Ct.isDefinedAndNotNull(e.event.end)&&(i.append(" - "),i.append(u.formatDate(e.event.end,c))),n.append(i),t.append(n),Ct.isDefinedAndNotNull(e.event.extendedProps.details)&&(i=St(e.event.extendedProps.details,S,nt,pt),Ct.isDefinedAndNotNull(i))&&((n=Dt("<div></div>")).addClass("bida-calendar-event-tt-content"),n.append(i),t.append(n)),Ct.tooltip.show(t),Ct.tooltip.setPosition(e.jsEvent)},eventMouseLeave:function(){Ct.tooltip.hide()},eventClick:function(e){e.jsEvent.preventDefault(),e.event&&e.event._def&&((e=e.event._def).extendedProps&&e.extendedProps.link?Ct.link(e.extendedProps.link,e.extendedProps.linkTarget):e.extendedProps?Ct.link(e.url,e.extendedProps.linkTarget):Ct.link(e.url)),Ct.tooltip.hide()},dayMaxEventRows:n,eventContent:function(e){return{html:St(e.event.title,S,nt,pt)}},allDaySlot:!1,nowIndicator:!0,views:{dayGrid:{}},eventTimeFormat:{hour:c.hour,minute:c.minute,hour12:c.hour12},scrollTime:r,slotLabelFormat:{hour:c.hour,minute:c.minute,hour12:c.hour12}});f.setOption("locale",l),f.changeView(s),f.render(),!0!==it&&(i.css("height",$e),i.addClass("bida-item-div-overflow"),yt(i)),ht.on("resize",function(){f.render()})}else Ct.errorMessage.show(D,C.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Calendar is not activaed.",featureDetails:Ct.featureDetails});break;case"note":if(-1<Dt.inArray("note",C.features)){var at=x.itemID;var ot=D;T=k;w=x.itemData;it=I;var rt=C;var st=h;var lt=v;vt.debug.info({fct:Ct.featureDetails.name+" - drawNoteEditor",pItemID:at,pItemSel:ot,pItemHeight:T,pItemData:w,pItemConfig:it,pDefaultConfig:rt,pOversize:st,pIsSafeItem:lt,featureDetails:Ct.featureDetails});let e=Dt(ot),t=e.attr("id")+"-note",n=Dt("<div></div>"),i=(n.addClass("bida-note"),n.attr("id",t),n.css("height",T),e.append(n),t+"-save");function dt(){Dt("#"+i).parent().addClass("pell-button-disabled")}let a=[];a.push(`<select class="pell-button-c-select" onchange="$('#${t}').trigger('colorchange', this.value );">`),["#000","#f77272","#f7f772","#8af772","#72aef7","#c672f7"].forEach(function(e){a.push(`<option value="${e}" style="color:${e};">&#9632;</option>`)}),a.push("</select>"),xt.init({element:document.getElementById(t),onChange:function(){Dt("#"+i).parent().removeClass("pell-button-disabled")},defaultParagraphSeparator:"p",styleWithCSS:!1,classes:{actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},actions:[{name:"Save",icon:'<i id="'+i+'" class="fa fa-save-as pell-button-c"></i>',title:"Save",result:function(){var e=n.find(".pell-content");Ct.loader.start(ot),dt();let t=e.html();var e=Ct.splitString2Array(t),i=rt.items2Submit;vt.server.plugin(ut,{pageItems:i,x01:"noteUpload",x02:at,f01:e},{dataType:"text",success:function(){Ct.loader.stop(ot),ht.trigger("shortnotesaved",{itemID:at,itemSel:ot,clob:t}),vt.debug.info({fct:Ct.featureDetails.name+" - drawNoteEditor",msg:"Upload successful.",featureDetails:Ct.featureDetails})},error:function(e,t,i){Ct.loader.stop(ot),vt.message.clearErrors(),vt.message.showErrors([{type:"error",location:["page"],message:rt.errorMessage,unsafe:!1}]),vt.debug.info({fct:Ct.featureDetails.name+" - drawNoteEditor",msg:"Error while try to upload NoteEditor Content",jqXHR:e,textStatus:t,errorThrown:i,featureDetails:Ct.featureDetails})}})}},{name:"Undo",icon:'<i class="fa fa-undo pell-button-c"></i>',title:"Undo",result:function(){xt.exec("undo",!0)}},{name:"Redo",icon:'<i class="fa fa-repeat pell-button-c"></i>',title:"Redo",result:function(){xt.exec("redo",!0)}},{name:"bold",icon:'<i class="fa fa-bold pell-button-c"></i>',title:"Bold"},{name:"italic",icon:'<i class="fa fa-italic pell-button-c"></i>',title:"Italic"},{name:"underline",icon:'<i class="fa fa-underline pell-button-c"></i>',title:"Underline"},{name:"strikethrough",icon:'<i class="fa fa-strikethrough pell-button-c"></i>',title:"Strikethrough"},{name:"heading1",icon:'<i class="fa fa-header pell-button-c"><sub>1</sub></i>',title:"Heading 1"},{name:"heading2",icon:'<i class="fa fa-header pell-button-c"><sub>2</sub></i>',title:"Heading 2"},{name:"paragraph",icon:'<i class="fa fa-paragraph pell-button-c"></i>'},{name:"olist",icon:'<i class="fa fa-list-ol pell-button-c"></i>',title:"Ordered List"},{name:"ulist",icon:'<i class="fa fa-list-ul pell-button-c"></i>',title:"Unordered List"},{name:"checkbox",icon:'<i class="fa fa-check-square-o pell-button-c"></i>',title:"checkbox",result:function(){xt.exec("insertHTML",`<div><i class="fa fa-square-o" onmousedown="$(this).toggleClass(['fa-check-square-o', 'fa-square-o']);"> </i></div>`)}},{name:"resetformat",icon:'<i class="fa fa-eraser pell-button-c"></i>',title:"Remove Format",result:function(){xt.exec("removeFormat",!0)}},{name:"highlight",icon:a.join(""),title:"Highlight",result:function(){}}]}),n.on("colorchange",function(e,t){"#000"===t?xt.exec("hiliteColor","#fff"):xt.exec("hiliteColor",t)});let o;function ct(){var e=n.find(".pell-actionbar").height();r.css("height",n.height()-e)}o=St(o=w&&"object"==typeof w?w.text:w,rt,lt,pt);let r=n.find(".pell-content");r.html(o),ct(),dt(),n.find(".pell-button").removeAttr("title"),ht.on("resize",function(){ct()})}else Ct.errorMessage.show(D,C.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Editor is not activaed.",featureDetails:Ct.featureDetails});break;default:Ct.errorMessage.show(D,C.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - drawItemRegionContent",msg:"itemType not found (html, card, list, map, table, clock, calendar, calendarheatmap)",featureDetails:Ct.featureDetails})}else Ct.noDataMessage.show(D,C.noDataMessage);Ct.isDefinedAndNotNull(x.subText2)&&((_=Dt(D).find(".bida-item-subtext-2")).appendTo(D),_.addClass("bida-item-subtext-2-fin"))}else Ct.errorMessage.show(D,C.errorMessage),vt.debug.error({fct:Ct.featureDetails.name+" - drawItemRegionContent",msg:"itemType is missing in JSON",featureDetails:Ct.featureDetails})}function yt(e){let t=Dt(e);t.addClass("bida-item-div-overflow"),t.on("scroll",function(){t.scrollTop()+t.innerHeight()>=t[0].scrollHeight?t.addClass("bida-item-div-overflow-hidden"):t.removeClass("bida-item-div-overflow-hidden")});var e=t.innerHeight(),i=t[0].scrollHeight;vt.debug.info({fct:Ct.featureDetails.name+" - overFlowStyling",innerHeight:e,scrollHeight:i,featureDetails:Ct.featureDetails}),i<=e&&0!==i&&t.addClass("bida-item-div-overflow-hidden")}}}};