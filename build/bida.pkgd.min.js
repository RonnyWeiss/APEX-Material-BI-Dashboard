!function(e,i){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("jquery")):e.jQueryBridget=i(e,e.jQuery)}(window,function(t,e){"use strict";var i=Array.prototype.slice,n=t.console,u=void 0===n?function(){}:function(t){n.error(t)};function a(l,d,c){(c=c||e||t.jQuery)&&(d.prototype.option||(d.prototype.option=function(t){c.isPlainObject(t)&&(this.options=c.extend(!0,this.options,t))}),c.fn[l]=function(t){if("string"!=typeof t)return s=t,this.each(function(t,e){var i=c.data(e,l);i?(i.option(s),i._init()):(i=new d(e,s),c.data(e,l,i))}),this;var n,a,o,r,s,e=i.call(arguments,1);return a=e,r="$()."+l+'("'+(n=t)+'")',(t=this).each(function(t,e){var i=c.data(e,l);i?(e=i[n])&&"_"!=n.charAt(0)?(i=e.apply(i,a),o=void 0===o?i:o):u(r+" is not a valid method"):u(l+" not initialized. Cannot call methods, i.e. "+r)}),void 0!==o?o:t},o(c))}function o(t){!t||t&&t.bridget||(t.bridget=a)}return o(e||t.jQuery),a}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},t=i[t]=i[t]||[];return-1==t.indexOf(e)&&t.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){t=this._events&&this._events[t];if(t&&t.length){e=t.indexOf(e);return-1!=e&&t.splice(e,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],a=0;a<i.length;a++){var o=i[a];n&&n[o]&&(this.off(t,o),delete n[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function p(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],m=h.length;function g(t){t=getComputedStyle(t);return t||e("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}var b,v=!1;function y(t){if(v||(v=!0,(f=document.createElement("div")).style.width="200px",f.style.padding="1px 2px 3px 4px",f.style.borderStyle="solid",f.style.borderWidth="1px 2px 3px 4px",f.style.boxSizing="border-box",(u=document.body||document.documentElement).appendChild(f),c=g(f),b=200==Math.round(p(c.width)),y.isBoxSizeOuter=b,u.removeChild(f)),(t="string"==typeof t?document.querySelector(t):t)&&"object"==typeof t&&t.nodeType){var e=g(t);if("none"==e.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<m;e++)t[h[e]]=0;return t}();var i={};i.width=t.offsetWidth,i.height=t.offsetHeight;for(var n=i.isBorderBox="border-box"==e.boxSizing,a=0;a<m;a++){var o=h[a],r=e[o],r=parseFloat(r);i[o]=isNaN(r)?0:r}var s=i.paddingLeft+i.paddingRight,l=i.paddingTop+i.paddingBottom,d=i.marginLeft+i.marginRight,c=i.marginTop+i.marginBottom,u=i.borderLeftWidth+i.borderRightWidth,f=i.borderTopWidth+i.borderBottomWidth,t=n&&b,n=p(e.width);!1!==n&&(i.width=n+(t?0:s+u));n=p(e.height);return!1!==n&&(i.height=n+(t?0:l+f)),i.innerWidth=i.width-(s+u),i.innerHeight=i.height-(l+f),i.outerWidth=i.width+d,i.outerHeight=i.height+c,i}}return y}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var i=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(t,e){return t[i](e)}}),function(e,i){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("desandro-matches-selector")):e.fizzyUIUtils=i(e,e.matchesSelector)}(window,function(i,o){var l={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},e=Array.prototype.slice;l.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?e.call(t):[t]},l.removeFrom=function(t,e){e=t.indexOf(e);-1!=e&&t.splice(e,1)},l.getParent=function(t,e){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,o(t,e))return t},l.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},l.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.filterFindElements=function(t,n){t=l.makeArray(t);var a=[];return t.forEach(function(t){if(t instanceof HTMLElement)if(n){o(t,n)&&a.push(t);for(var e=t.querySelectorAll(n),i=0;i<e.length;i++)a.push(e[i])}else a.push(t)}),a},l.debounceMethod=function(t,e,n){n=n||100;var a=t.prototype[e],o=e+"Timeout";t.prototype[e]=function(){var t=this[o];clearTimeout(t);var e=arguments,i=this;this[o]=setTimeout(function(){a.apply(i,e),delete i[o]},n)}},l.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},l.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var d=i.console;return l.htmlInit=function(r,s){l.docReady(function(){var t=l.toDashed(s),n="data-"+t,e=document.querySelectorAll("["+n+"]"),t=document.querySelectorAll(".js-"+t),t=l.makeArray(e).concat(l.makeArray(t)),a=n+"-options",o=i.jQuery;t.forEach(function(e){var t=e.getAttribute(n)||e.getAttribute(a);try{i=t&&JSON.parse(t)}catch(t){return void(d&&d.error("Error parsing "+n+" on "+e.className+": "+t))}var i=new r(e,i);o&&o.data(e,s,i)})})},l}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){"use strict";var i=document.documentElement.style,n="string"==typeof i.transition?"transition":"WebkitTransition",a="string"==typeof i.transform?"transform":"WebkitTransform",o={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[n],r={transform:a,transition:n,transitionDuration:n+"Duration",transitionProperty:n+"Property",transitionDelay:n+"Delay"};function s(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}t=s.prototype=Object.create(t.prototype);t.constructor=s,t._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},t.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},t.getSize=function(){this.size=e(this.element)},t.css=function(t){var e,i=this.element.style;for(e in t)i[r[e]||e]=t[e]},t.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],a=t[i?"top":"bottom"],o=parseFloat(n),r=parseFloat(a),t=this.layout.size;-1!=n.indexOf("%")&&(o=o/100*t.width),-1!=a.indexOf("%")&&(r=r/100*t.height),o=isNaN(o)?0:o,r=isNaN(r)?0:r,o-=e?t.paddingLeft:t.paddingRight,r-=i?t.paddingTop:t.paddingBottom,this.position.x=o,this.position.y=r},t.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),a=i?"right":"left",o=this.position.x+t[i?"paddingLeft":"paddingRight"];e[i?"left":"right"]=this.getXValue(o),e[a]="";a=n?"bottom":"top",t=this.position.y+t[n?"paddingTop":"paddingBottom"];e[n?"top":"bottom"]=this.getYValue(t),e[a]="",this.css(e),this.emitEvent("layout",[this])},t.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},t.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},t._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,a=t==this.position.x&&e==this.position.y;this.setPosition(t,e),!a||this.isTransitioning?((a={}).transform=this.getTranslate(t-i,e-n),this.transition({to:a,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})):this.layoutPosition()},t.getTranslate=function(t,e){return"translate3d("+(t=this.layout._getOption("originLeft")?t:-t)+"px, "+(e=this.layout._getOption("originTop")?e:-e)+"px, 0)"},t.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},t.moveTo=t._transitionTo,t.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},t._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},t.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e,i=this._transn;for(e in t.onTransitionEnd)i.onEnd[e]=t.onTransitionEnd[e];for(e in t.to)i.ingProperties[e]=!0,t.isCleaning&&(i.clean[e]=!0);t.from&&(this.css(t.from),this.element.offsetHeight,0),this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var l="opacity,"+a.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()});t.enableTransition=function(){var t;this.isTransitioning||(t=this.layout.options.transitionDuration,this.css({transitionProperty:l,transitionDuration:t="number"==typeof t?t+"ms":t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(o,this,!1))},t.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},t.onotransitionend=function(t){this.ontransitionend(t)};var d={"-webkit-transform":"transform"};t.ontransitionend=function(t){var e,i;t.target===this.element&&(e=this._transn,i=d[t.propertyName]||t.propertyName,delete e.ingProperties[i],function(t){for(var e in t)return;return 1}(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd&&(e.onEnd[i].call(this),delete e.onEnd[i]),this.emitEvent("transitionEnd",[this]))},t.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(o,this,!1),this.isTransitioning=!1},t._removeStyles=function(t){var e,i={};for(e in t)i[e]="";this.css(i)};var c={transitionProperty:"",transitionDuration:"",transitionDelay:""};return t.removeTransitionStyles=function(){this.css(c)},t.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},t.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},t.remove=function(){n&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()},t.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},t.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},t.getHideRevealTransitionEndProperty=function(t){var e,t=this.layout.options[t];if(t.opacity)return"opacity";for(e in t)return e},t.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},t.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},t.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},s}),function(a,o){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(t,e,i,n){return o(a,t,e,i,n)}):"object"==typeof module&&module.exports?module.exports=o(a,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):a.Outlayer=o(a,a.EvEmitter,a.getSize,a.fizzyUIUtils,a.Outlayer.Item)}(window,function(t,e,a,n,o){"use strict";function i(){}var r=t.console,s=t.jQuery,l=0,d={};function c(t,e){var i=n.getQueryElement(t);i?(this.element=i,s&&(this.$element=s(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e),e=++l,this.element.outlayerGUID=e,(d[e]=this)._create(),this._getOption("initLayout")&&this.layout()):r&&r.error("Bad element for "+this.constructor.namespace+": "+(i||t))}c.namespace="outlayer",c.Item=o,c.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var u=c.prototype;function f(t){function e(){t.apply(this,arguments)}return(e.prototype=Object.create(t.prototype)).constructor=e}n.extend(u,e.prototype),u.option=function(t){n.extend(this.options,t)},u._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},c.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},u._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},u.reloadItems=function(){this.items=this._itemize(this.element.children)},u._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],a=0;a<e.length;a++){var o=new i(e[a],this);n.push(o)}return n},u._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},u.getItemElements=function(){return this.items.map(function(t){return t.element})},u.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),t=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},u._init=u.layout,u._resetLayout=function(){this.getSize()},u.getSize=function(){this.size=a(this.element)},u._getMeasurement=function(t,e){var i,n=this.options[t];n?("string"==typeof n?i=this.element.querySelector(n):n instanceof HTMLElement&&(i=n),this[t]=i?a(i)[e]:n):this[t]=0},u.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},u._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},u._layoutItems=function(t,i){var n;this._emitCompleteOnItems("layout",t),t&&t.length&&(n=[],t.forEach(function(t){var e=this._getItemLayoutPosition(t);e.item=t,e.isInstant=i||t.isLayoutInstant,n.push(e)},this),this._processLayoutQueue(n))},u._getItemLayoutPosition=function(){return{x:0,y:0}},u._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},u.updateStagger=function(){var t=this.options.stagger;if(null!=t)return this.stagger=function(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),t=e&&e[1],e=e&&e[2];if(!t.length)return 0;t=parseFloat(t);e=p[e]||1;return t*e}(t),this.stagger;this.stagger=0},u._positionItem=function(t,e,i,n,a){n?t.goTo(e,i):(t.stagger(a*this.stagger),t.moveTo(e,i))},u._postLayout=function(){this.resizeContainer()},u.resizeContainer=function(){var t;!this._getOption("resizeContainer")||(t=this._getContainerSize())&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))},u._getContainerSize=i,u._setContainerMeasure=function(t,e){var i;void 0!==t&&((i=this.size).isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px")},u._emitCompleteOnItems=function(e,t){var i=this;function n(){i.dispatchEvent(e+"Complete",null,[t])}var a,o=t.length;function r(){++a==o&&n()}t&&o?(a=0,t.forEach(function(t){t.once(e,r)})):n()},u.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;this.emitEvent(t,n),s&&(this.$element=this.$element||s(this.element),e?((e=s.Event(e)).type=t,this.$element.trigger(e,i)):this.$element.trigger(t,i))},u.ignore=function(t){t=this.getItem(t);t&&(t.isIgnored=!0)},u.unignore=function(t){t=this.getItem(t);t&&delete t.isIgnored},u.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},u.unstamp=function(t){(t=this._find(t))&&t.forEach(function(t){n.removeFrom(this.stamps,t),this.unignore(t)},this)},u._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n.makeArray(t)},u._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},u._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},u._manageStamp=i,u._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,t=a(t);return{left:e.left-i.left-t.marginLeft,top:e.top-i.top-t.marginTop,right:i.right-e.right-t.marginRight,bottom:i.bottom-e.bottom-t.marginBottom}},u.handleEvent=n.handleEvent,u.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},u.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},u.onresize=function(){this.resize()},n.debounceMethod(c,"onresize",100),u.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},u.needsResizeLayout=function(){var t=a(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},u.addItems=function(t){t=this._itemize(t);return t.length&&(this.items=this.items.concat(t)),t},u.appended=function(t){t=this.addItems(t);t.length&&(this.layoutItems(t,!0),this.reveal(t))},u.prepended=function(t){var e=this._itemize(t);e.length&&(t=this.items.slice(0),this.items=e.concat(t),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(t))},u.reveal=function(t){var i;this._emitCompleteOnItems("reveal",t),t&&t.length&&(i=this.updateStagger(),t.forEach(function(t,e){t.stagger(e*i),t.reveal()}))},u.hide=function(t){var i;this._emitCompleteOnItems("hide",t),t&&t.length&&(i=this.updateStagger(),t.forEach(function(t,e){t.stagger(e*i),t.hide()}))},u.revealItemElements=function(t){t=this.getItems(t);this.reveal(t)},u.hideItemElements=function(t){t=this.getItems(t);this.hide(t)},u.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},u.getItems=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){t=this.getItem(t);t&&e.push(t)},this),e},u.remove=function(t){t=this.getItems(t);this._emitCompleteOnItems("remove",t),t&&t.length&&t.forEach(function(t){t.remove(),n.removeFrom(this.items,t)},this)},u.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();t=this.element.outlayerGUID;delete d[t],delete this.element.outlayerGUID,s&&s.removeData(this.element,this.constructor.namespace)},c.data=function(t){t=(t=n.getQueryElement(t))&&t.outlayerGUID;return t&&d[t]},c.create=function(t,e){var i=f(c);return i.defaults=n.extend({},c.defaults),n.extend(i.defaults,e),i.compatOptions=n.extend({},c.compatOptions),i.namespace=t,i.data=c.data,i.Item=f(o),n.htmlInit(i,t),s&&s.bridget&&s.bridget(t,i),i};var p={ms:1,s:1e3};return c.Item=o,c}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,s){var e=t.create("masonry");e.compatOptions.fitWidth="isFitWidth";t=e.prototype;return t._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},t.measureColumns=function(){this.getContainerWidth(),this.columnWidth||(i=(e=this.items[0])&&e.element,this.columnWidth=i&&s(i).outerWidth||this.containerWidth);var t=this.columnWidth+=this.gutter,e=this.containerWidth+this.gutter,i=e/t,t=t-e%t,i=Math[t&&t<1?"round":"floor"](i);this.cols=Math.max(i,1)},t.getContainerWidth=function(){var t=this._getOption("fitWidth")?this.element.parentNode:this.element,t=s(t);this.containerWidth=t&&t.innerWidth},t._getItemLayoutPosition=function(t){t.getSize();for(var e=t.size.outerWidth%this.columnWidth,i=Math[e&&e<1?"round":"ceil"](t.size.outerWidth/this.columnWidth),i=Math.min(i,this.cols),n=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](i,t),e={x:this.columnWidth*n.col,y:n.y},a=n.y+t.size.outerHeight,o=i+n.col,r=n.col;r<o;r++)this.colYs[r]=a;return e},t._getTopColPosition=function(t){var e=this._getTopColGroup(t),t=Math.min.apply(Math,e);return{col:e.indexOf(t),y:t}},t._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;n<i;n++)e[n]=this._getColGroupY(n,t);return e},t._getColGroupY=function(t,e){if(e<2)return this.colYs[t];e=this.colYs.slice(t,t+e);return Math.max.apply(Math,e)},t._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols,i=1<t&&i+t>this.cols?0:i,e=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=e?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},t._manageStamp=function(t){var e=s(t),i=this._getElementOffset(t),n=this._getOption("originLeft")?i.left:i.right,t=n+e.outerWidth,n=Math.floor(n/this.columnWidth),n=Math.max(0,n),a=Math.floor(t/this.columnWidth);a-=t%this.columnWidth?0:1;for(var a=Math.min(this.cols-1,a),o=(this._getOption("originTop")?i.top:i.bottom)+e.outerHeight,r=n;r<=a;r++)this.colYs[r]=Math.max(o,this.colYs[r])},t._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},t._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},t.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},e}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.pell={})}(this,function(t){"use strict";function r(t,e,i){return t.addEventListener(e,i)}function s(t,e){return t.appendChild(e)}function l(t){return document.createElement(t)}function e(t){return document.queryCommandState(t)}function d(t){return document.execCommand(t,!1,1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)}function i(e){var t=e.actions?e.actions.map(function(t){return"string"==typeof t?p[t]:p[t.name]?c({},p[t.name],t):t}):Object.keys(p).map(function(t){return p[t]}),n=c({},h,e.classes),i=e[u]||"div",a=l("div");a.className=n.actionbar,s(e.element,a);var o=e.element.content=l("div");return o.contentEditable=!0,o.className=n.content,o.oninput=function(t){t=t.target.firstChild;t&&3===t.nodeType?d(f,"<"+i+">"):"<br>"===o.innerHTML&&(o.innerHTML=""),e.onChange(o.innerHTML)},o.onkeydown=function(t){"Enter"===t.key&&"blockquote"===(t=f,document.queryCommandValue(t))&&setTimeout(function(){return d(f,"<"+i+">")},0)},s(e.element,o),t.forEach(function(t){var e,i=l("button");i.className=n.button,i.innerHTML=t.icon,i.title=t.title,i.setAttribute("type","button"),i.onclick=function(){return t.result()&&o.focus()},t.state&&(r(o,"keyup",e=function(){return i.classList[t.state()?"add":"remove"](n.selected)}),r(o,"mouseup",e),r(i,"click",e)),s(a,i)}),e.styleWithCSS&&d("styleWithCSS"),d(u,i),e.element}var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i,n=arguments[e];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u="defaultParagraphSeparator",f="formatBlock",p={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return e("bold")},result:function(){return d("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return e("italic")},result:function(){return d("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return e("underline")},result:function(){return d("underline")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return e("strikeThrough")},result:function(){return d("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return d(f,"<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return d(f,"<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return d(f,"<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return d(f,"<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return d("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return d("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return d(f,"<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return d("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var t=window.prompt("Enter the link URL");t&&d("createLink",t)}},image:{icon:"&#128247;",title:"Image",result:function(){var t=window.prompt("Enter the image URL");t&&d("insertImage",t)}}},h={actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},n={exec:d,init:i};t.exec=d,t.init=i,t.default=n,Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).DOMPurify=e()}(this,function(){"use strict";var n,a=Object.hasOwnProperty,o=Object.setPrototypeOf,r=Object.isFrozen,s=Object.getPrototypeOf,l=Object.getOwnPropertyDescriptor,Nt=Object.freeze,t=Object.seal,d=Object.create,e="undefined"!=typeof Reflect&&Reflect,c=(c=e.apply)||function(t,e,i){return t.apply(e,i)},Nt=Nt||function(t){return t},t=t||function(t){return t},u=(u=e.construct)||function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(e))))},St=f(Array.prototype.forEach),Mt=f(Array.prototype.pop),Ot=f(Array.prototype.push),Et=f(String.prototype.toLowerCase),zt=f(String.prototype.match),Lt=f(String.prototype.replace),_t=f(String.prototype.indexOf),Rt=f(String.prototype.trim),Ht=f(RegExp.prototype.test),Wt=(n=TypeError,function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return u(n,e)});function f(a){return function(t){for(var e=arguments.length,i=Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return c(a,t,i)}}function jt(t,e){o&&o(t,null);for(var i=e.length;i--;){var n,a=e[i];"string"!=typeof a||(n=Et(a))!==a&&(r(e)||(e[i]=n),a=n),t[a]=!0}return t}function Bt(t){var e=d(null),i=void 0;for(i in t)c(a,t,[i])&&(e[i]=t[i]);return e}function Ft(t,e){for(;null!==t;){var i=l(t,e);if(i){if(i.get)return f(i.get);if("function"==typeof i.value)return f(i.value)}t=s(t)}return function(t){return console.warn("fallback value for",t),null}}var Pt=Nt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ut=Nt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Gt=Nt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),qt=Nt(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Yt=Nt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Jt=Nt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Vt=Nt(["#text"]),Qt=Nt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),$t=Nt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Xt=Nt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Zt=Nt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Kt=t(/\{\{[\s\S]*|[\s\S]*\}\}/gm),te=t(/<%[\s\S]*|[\s\S]*%>/gm),ee=t(/^data-[\-\w.\u00B7-\uFFFF]/),ie=t(/^aria-[\-\w]+$/),ne=t(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ae=t(/^(?:\w+script|data):/i),oe=t(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function se(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var le=function(){return"undefined"==typeof window?null:window},de=function(t,e){if("object"!==(void 0===t?"undefined":re(t))||"function"!=typeof t.createPolicy)return null;var i=null,n="data-tt-policy-suffix",i="dompurify"+((i=e.currentScript&&e.currentScript.hasAttribute(n)?e.currentScript.getAttribute(n):i)?"#"+i:"");try{return t.createPolicy(i,{createHTML:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};return function e(t){function c(t){return e(t)}var s=0<arguments.length&&void 0!==t?t:le();if(c.version="2.2.9",c.removed=[],!s||!s.document||9!==s.document.nodeType)return c.isSupported=!1,c;var l=s.document,a=s.document,d=s.DocumentFragment,i=s.HTMLTemplateElement,u=s.Node,r=s.Element,n=s.NodeFilter,o=s.NamedNodeMap,f=void 0===o?s.NamedNodeMap||s.MozNamedAttrMap:o,p=s.Text,h=s.Comment,m=s.DOMParser,t=s.trustedTypes,o=r.prototype,g=Ft(o,"cloneNode"),b=Ft(o,"nextSibling"),v=Ft(o,"childNodes"),y=Ft(o,"parentNode");"function"!=typeof i||(i=a.createElement("template")).content&&i.content.ownerDocument&&(a=i.content.ownerDocument);var D=de(t,l),x=D&&Z?D.createHTML(""):"",w=a.implementation,C=a.createNodeIterator,k=a.createDocumentFragment,I=l.importNode,t={};try{t=Bt(a).documentMode?a.documentMode:{}}catch(t){}var T={};c.isSupported="function"==typeof y&&w&&void 0!==w.createHTMLDocument&&9!==t;function A(t){ft&&ft===t||(t=Bt(t=t&&"object"===(void 0===t?"undefined":re(t))?t:{}),R="ALLOWED_TAGS"in t?jt({},t.ALLOWED_TAGS):H,W="ALLOWED_ATTR"in t?jt({},t.ALLOWED_ATTR):j,ot="ADD_URI_SAFE_ATTR"in t?jt(Bt(rt),t.ADD_URI_SAFE_ATTR):rt,nt="ADD_DATA_URI_TAGS"in t?jt(Bt(at),t.ADD_DATA_URI_TAGS):at,B="FORBID_TAGS"in t?jt({},t.FORBID_TAGS):{},F="FORBID_ATTR"in t?jt({},t.FORBID_ATTR):{},N="USE_PROFILES"in t&&t.USE_PROFILES,P=!1!==t.ALLOW_ARIA_ATTR,U=!1!==t.ALLOW_DATA_ATTR,G=t.ALLOW_UNKNOWN_PROTOCOLS||!1,q=t.SAFE_FOR_TEMPLATES||!1,Y=t.WHOLE_DOCUMENT||!1,Q=t.RETURN_DOM||!1,$=t.RETURN_DOM_FRAGMENT||!1,X=!1!==t.RETURN_DOM_IMPORT,Z=t.RETURN_TRUSTED_TYPE||!1,V=t.FORCE_BODY||!1,K=!1!==t.SANITIZE_DOM,tt=!1!==t.KEEP_CONTENT,et=t.IN_PLACE||!1,_=t.ALLOWED_URI_REGEXP||_,ct=t.NAMESPACE||dt,q&&(U=!1),$&&(Q=!0),N&&(R=jt({},[].concat(se(Vt))),W=[],!0===N.html&&(jt(R,Pt),jt(W,Qt)),!0===N.svg&&(jt(R,Ut),jt(W,$t),jt(W,Zt)),!0===N.svgFilters&&(jt(R,Gt),jt(W,$t),jt(W,Zt)),!0===N.mathMl&&(jt(R,Yt),jt(W,Xt),jt(W,Zt))),t.ADD_TAGS&&jt(R=R===H?Bt(R):R,t.ADD_TAGS),t.ADD_ATTR&&jt(W=W===j?Bt(W):W,t.ADD_ATTR),t.ADD_URI_SAFE_ATTR&&jt(ot,t.ADD_URI_SAFE_ATTR),tt&&(R["#text"]=!0),Y&&jt(R,["html","head","body"]),R.table&&(jt(R,["tbody"]),delete B.tbody),Nt&&Nt(t),ft=t)}var N,S=Kt,M=te,O=ee,E=ie,z=ae,L=oe,_=ne,R=null,H=jt({},[].concat(se(Pt),se(Ut),se(Gt),se(Yt),se(Vt))),W=null,j=jt({},[].concat(se(Qt),se($t),se(Xt),se(Zt))),B=null,F=null,P=!0,U=!0,G=!1,q=!1,Y=!1,J=!1,V=!1,Q=!1,$=!1,X=!0,Z=!1,K=!0,tt=!0,et=!1,it=jt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),nt=null,at=jt({},["audio","video","img","source","image","track"]),ot=null,rt=jt({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),st="http://www.w3.org/1998/Math/MathML",lt="http://www.w3.org/2000/svg",dt="http://www.w3.org/1999/xhtml",ct=dt,ut=!1,ft=null,pt=a.createElement("form"),ht=jt({},["mi","mo","mn","ms","mtext"]),mt=jt({},["foreignobject","desc","title","annotation-xml"]),gt=jt({},Ut);jt(gt,Gt),jt(gt,qt);var bt=jt({},Yt);jt(bt,Jt);function vt(e){Ot(c.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=x}catch(t){e.remove()}}}function yt(t,e){try{Ot(c.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){Ot(c.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!W[t])if(Q||$)try{vt(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}}function Dt(t){var e=void 0,i=void 0;V?t="<remove></remove>"+t:i=(n=zt(t,/^[\r\n\t ]+/))&&n[0];var n=D?D.createHTML(t):t;if(ct===dt)try{e=(new m).parseFromString(n,"text/html")}catch(t){}if(!e||!e.documentElement){e=w.createDocument(ct,"template",null);try{e.documentElement.innerHTML=ut?"":n}catch(t){}}return n=e.body||e.documentElement,t&&i&&n.insertBefore(a.createTextNode(i),n.childNodes[0]||null),Y?e.documentElement:n}function xt(t){return C.call(t.ownerDocument||t,t,n.SHOW_ELEMENT|n.SHOW_COMMENT|n.SHOW_TEXT,null,!1)}function wt(t){return"object"===(void 0===u?"undefined":re(u))?t instanceof u:t&&"object"===(void 0===t?"undefined":re(t))&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}function Ct(t,e,i){T[t]&&St(T[t],function(t){t.call(c,e,i,ft)})}function kt(t){var e;if(Ct("beforeSanitizeElements",t,null),!((i=t)instanceof p||i instanceof h||"string"==typeof i.nodeName&&"string"==typeof i.textContent&&"function"==typeof i.removeChild&&i.attributes instanceof f&&"function"==typeof i.removeAttribute&&"function"==typeof i.setAttribute&&"string"==typeof i.namespaceURI&&"function"==typeof i.insertBefore))return vt(t),1;if(zt(t.nodeName,/[\u0080-\uFFFF]/))return vt(t),1;var i=Et(t.nodeName);if(Ct("uponSanitizeElement",t,{tagName:i,allowedTags:R}),!wt(t.firstElementChild)&&(!wt(t.content)||!wt(t.content.firstElementChild))&&Ht(/<[/\w]/g,t.innerHTML)&&Ht(/<[/\w]/g,t.textContent))return vt(t),1;if(R[i]&&!B[i])return t instanceof r&&!function(t){var e=y(t);e&&e.tagName||(e={namespaceURI:dt,tagName:"template"});var i=Et(t.tagName),n=Et(e.tagName);return t.namespaceURI===lt?e.namespaceURI===dt?"svg"===i:e.namespaceURI===st?"svg"===i&&("annotation-xml"===n||ht[n]):Boolean(gt[i]):t.namespaceURI===st?e.namespaceURI===dt?"math"===i:e.namespaceURI===lt?"math"===i&&mt[n]:Boolean(bt[i]):t.namespaceURI===dt&&((e.namespaceURI!==lt||mt[n])&&((e.namespaceURI!==st||ht[n])&&(n=jt({},["title","style","font","a","script"]),!bt[i]&&(n[i]||!gt[i]))))}(t)||("noscript"===i||"noembed"===i)&&Ht(/<\/no(script|embed)/i,t.innerHTML)?(vt(t),1):(q&&3===t.nodeType&&(e=t.textContent,e=Lt(e,S," "),e=Lt(e,M," "),t.textContent!==e&&(Ot(c.removed,{element:t.cloneNode()}),t.textContent=e)),Ct("afterSanitizeElements",t,null),0);if(tt&&!it[i]){var n=y(t)||t.parentNode,a=v(t)||t.childNodes;if(a&&n)for(var o=a.length-1;0<=o;--o)n.insertBefore(g(a[o],!0),b(t))}return vt(t),1}function It(t,e,i){if(K&&("id"===e||"name"===e)&&(i in a||i in pt))return!1;if(!(U&&Ht(O,e)||P&&Ht(E,e))){if(!W[e]||F[e])return!1;if(!ot[e]&&!Ht(_,Lt(i,L,""))&&("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==_t(i,"data:")||!nt[t])&&(!G||Ht(z,Lt(i,L,"")))&&i)return!1}return!0}function Tt(t){var e=void 0,i=void 0,n=void 0;Ct("beforeSanitizeAttributes",t,null);var a=t.attributes;if(a){for(var o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:W},n=a.length;n--;){var r=(e=a[n]).name,s=e.namespaceURI,i=Rt(e.value),l=Et(r);if(o.attrName=l,o.attrValue=i,o.keepAttr=!0,o.forceKeepAttr=void 0,Ct("uponSanitizeAttribute",t,o),i=o.attrValue,!o.forceKeepAttr&&(yt(r,t),o.keepAttr))if(Ht(/\/>/i,i))yt(r,t);else{q&&(i=Lt(i,S," "),i=Lt(i,M," "));var d=t.nodeName.toLowerCase();if(It(d,l,i))try{s?t.setAttributeNS(s,r,i):t.setAttribute(r,i),Mt(c.removed)}catch(t){}}}Ct("afterSanitizeAttributes",t,null)}}function At(t){var e,i=xt(t);for(Ct("beforeSanitizeShadowDOM",t,null);e=i.nextNode();)Ct("uponSanitizeShadowNode",e,null),kt(e)||(e.content instanceof d&&At(e.content),Tt(e));Ct("afterSanitizeShadowDOM",t,null)}return c.sanitize=function(t,e){var i,n=void 0,a=void 0,o=void 0;if("string"!=typeof(t=(ut=!t)?"\x3c!--\x3e":t)&&!wt(t)){if("function"!=typeof t.toString)throw Wt("toString is not a function");if("string"!=typeof(t=t.toString()))throw Wt("dirty is not a string, aborting")}if(!c.isSupported){if("object"===re(s.toStaticHTML)||"function"==typeof s.toStaticHTML){if("string"==typeof t)return s.toStaticHTML(t);if(wt(t))return s.toStaticHTML(t.outerHTML)}return t}if(J||A(e),c.removed=[],"string"==typeof t&&(et=!1),!et)if(t instanceof u)1===(e=(n=Dt("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===e.nodeName||"HTML"===e.nodeName?n=e:n.appendChild(e);else{if(!Q&&!q&&!Y&&-1===t.indexOf("<"))return D&&Z?D.createHTML(t):t;if(!(n=Dt(t)))return Q?null:x}n&&V&&vt(n.firstChild);for(var r=xt(et?t:n);i=r.nextNode();)3===i.nodeType&&i===a||kt(i)||(i.content instanceof d&&At(i.content),Tt(i),a=i);if(a=null,et)return t;if(Q){if($)for(o=k.call(n.ownerDocument);n.firstChild;)o.appendChild(n.firstChild);else o=n;return o=X?I.call(l,o,!0):o}return t=Y?n.outerHTML:n.innerHTML,q&&(t=Lt(t,S," "),t=Lt(t,M," ")),D&&Z?D.createHTML(t):t},c.setConfig=function(t){A(t),J=!0},c.clearConfig=function(){ft=null,J=!1},c.isValidAttribute=function(t,e,i){return ft||A({}),t=Et(t),e=Et(e),It(t,e,i)},c.addHook=function(t,e){"function"==typeof e&&(T[t]=T[t]||[],Ot(T[t],e))},c.removeHook=function(t){T[t]&&Mt(T[t])},c.removeHooks=function(t){T[t]&&(T[t]=[])},c.removeAllHooks=function(){T={}},c}()});var apexBIDashBoard=function(Ft,Pt){"use strict";var Ut={featureDetails:{name:"Material-BI-Dashboard",scriptVersion:"1.0.0.17",utilVersion:"1.4",url:"https://github.com/RonnyWeiss",url2:"https://linktr.ee/ronny.weiss",license:"CC BY-ND 4.0 License"},isDefinedAndNotNull:function(t){return null!=t&&""!=t},groupObjectArray:function(t,n){return t&&Array.isArray(t)?t.reduce(function(t,e){var i=e[n];return i&&(t[i="â€‹"+i]=t[i]||[]).push(e),t},{}):[]},link:function(t,e){if(!e)return window.parent.location.href=t;window.open(t,"_blank")},tooltip:{show:function(t,e,i){try{var n;0==Pt("#dynToolTip").length?(n=Pt("<div></div>").attr("id","dynToolTip").css("max-width","400px").css("position","absolute").css("top","0px").css("left","0px").css("z-index","2000").css("background-color","rgba(240, 240, 240, 1)").css("padding","10px").css("display","block").css("top","0").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto"),e&&n.css("background-color",e),i&&n.css("max-width",i),Pt("body").append(n)):Pt("#dynToolTip").css("visibility","visible"),Pt("#dynToolTip").html(t),Pt("#dynToolTip").find("*").css("max-width","100%").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto").css("white-space","normal"),Pt("#dynToolTip").find("img").css("object-fit","contain").css("object-position","50% 0%")}catch(t){Ft.debug.error({fct:"utils.js",msg:"Error while try to show tooltip",err:t})}},setPosition:function(t){Pt("#dynToolTip").position({my:"left+6 top+6",of:t,collision:"flipfit"})},hide:function(){Pt("#dynToolTip").css("visibility","hidden")},remove:function(){Pt("#dynToolTip").remove()}},escapeHTML:function(t){if(null===t)return null;if(void 0!==t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(t){}return Ft.util.escapeHTML(String(t))}},loader:{start:function(t,e){e&&Pt(t).css("min-height","100px"),Ft.util.showSpinner(Pt(t))},stop:function(t,e){e&&Pt(t).css("min-height",""),Pt(t+" > .u-Processing").remove(),Pt(t+" > .ct-loader").remove()}},splitString2Array:function(t){if(null!=t&&""!=t&&0<t.length){if(Ft&&Ft.server&&Ft.server.chunk)return Ft.server.chunk(t);var e,i=[];if(8e3<t.length){for(i=[],e=0;e<t.length;)i.push(t.substr(e,8e3)),e+=8e3;return i}return i.push(t),i}return[]},jsonSaveExtend:function(e,i){var n={},t={};if("string"==typeof i)try{t=JSON.parse(i)}catch(t){Ft.debug.error({fct:Ut.featureDetails.name+" - util.js",msg:"Error while try to parse targetConfig. Please check your Config JSON. Standard Config will be used.",err:t,targetConfig:i})}else t=Pt.extend(!0,{},i);try{n=Pt.extend(!0,{},e,t)}catch(t){n=Pt.extend(!0,{},e),Ft.debug.error({fct:Ut.featureDetails.name+" - util.js",msg:"Error while try to merge 2 JSONs into standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used.",err:t,finalConfig:n})}return n},printDOMMessage:{show:function(t,e,i,n){var a,o,r,s;150<=Pt(t).height()?(o=Pt("<div></div>").css("margin","12px").css("text-align","center").css("padding","10px 0").addClass("dominfomessagediv"),a=Pt("<div></div>"),r=Pt("<span></span>").addClass("fa").addClass(i||"fa-info-circle-o").addClass("fa-2x").css("height","32px").css("width","32px").css("margin-bottom","16px").css("color",n||"#D0D0D0"),a.append(r),s=Pt("<span></span>").text(e).css("display","block").css("color","#707070").css("text-overflow","ellipsis").css("overflow","hidden").css("white-space","nowrap").css("font-size","12px"),o.append(a).append(s)):(o=Pt("<div></div>").css("margin","10px").css("text-align","center").addClass("dominfomessagediv"),r=Pt("<span></span>").addClass("fa").addClass(i||"fa-info-circle-o").css("font-size","22px").css("line-height","26px").css("margin-right","5px").css("color",n||"#D0D0D0"),s=Pt("<span></span>").text(e).css("color","#707070").css("text-overflow","ellipsis").css("overflow","hidden").css("white-space","nowrap").css("font-size","12px").css("line-height","20px"),o.append(r).append(s)),Pt(t).append(o)},hide:function(t){Pt(t).children(".dominfomessagediv").remove()}},noDataMessage:{show:function(t,e){Ut.printDOMMessage.show(t,e,"fa-search")},hide:function(t){Ut.printDOMMessage.hide(t)}},errorMessage:{show:function(t,e){Ut.printDOMMessage.show(t,e,"fa-exclamation-triangle","#FFCB3D")},hide:function(t){Ut.printDOMMessage.hide(t)}},cutString:function(e,t){try{return!(t<0)&&e.length>t?e.substring(0,t-3)+"...":e}catch(t){return e}},isBetween:function(t,e,i){i=i||0;return e-i<=t&&t<=e+i}};function Gt(t,e,i){return i?void 0!==t&&null!=t?1==t||"true"===t:e:Ut.isDefinedAndNotNull(t)?t:e}function nt(t,e,i,n,a){e=t.append("defs").append("filter").attr("id",e);e.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",a).attr("result","blur"),e.append("feOffset").attr("in","blur").attr("dx",n).attr("dy",i).attr("result","offsetBlur"),e.append("feFlood").attr("in","offsetBlur").attr("flood-color","#000").attr("flood-opacity","0.26").attr("result","offsetColor"),e.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("operator","in").attr("result","offsetBlur");e=e.append("feMerge");e.append("feMergeNode").attr("in","offsetBlur"),e.append("feMergeNode").attr("in","SourceGraphic")}function qt(t,e,i,n){return!1!==n?Ut.escapeHTML(t):!0!==i&&-1<Pt.inArray("sanitizer",e.features)&&!0!==i?DOMPurify.sanitize(t,e.purifyOptions):t}return{initialize:function(f,u,g,t,e,i,p,n,a,o,r,Wt,s,et,l,d,c,h){Ft.debug.info({fct:Ut.featureDetails.name+" - initialize",arguments:{pRegionID:f,pRegionIDRefresh:u,pAjaxID:g,pNoDataMsg:t,pErrMsg:e,pDefaultConfigJSON:i,pLoadingMethod:p,pFeatures:n,pChartConfigJSON:a,pItems2Submit:o,pItems2SubmitImg:r,pRequireHTMLEscape:Wt,pPurifyOptions:s,pMapURL:et,pMapOptions:l,pTableConfigJSON:d,pClockOptions:c,pCalendarOptions:h},featureDetails:Ut.featureDetails});var m,b,v="#"+f,y=Pt(v),D="#"+u,it={},jt={},x=0;jt.defTime=500;var Bt=5,w=10,C=10,k=0;if(f&&0<y.length){y.addClass(f),Ut.loader.start(D);var I,T={itemSelector:"."+f+"-item",columnWidth:"."+f+"-sizer",horizontalOrder:!1,initLayout:!0,percentPosition:!0,transitionDuration:0,gutter:0};Ut.isDefinedAndNotNull(n)&&(I=n.split(":"));var A,N,S,M,O,E,z={},n={};(z=Ut.jsonSaveExtend({footprint:!0,isSortable:!1,colSpan:12,height:400,refresh:0,backColor:"transparent",color:"inherit",optionsLink:{backColor:"transparent",color:"inherit",icon:"fa-link"},optionsLinkTop:{backColor:"transparent",color:"inherit",icon:"fa-link"},title:{backColor:"transparent",color:"inherit",icon:null}},i)).features=[],I&&0<I.length&&(z.features=I),-1<Pt.inArray("charts",z.features)?(A=Ut.jsonSaveExtend({axisLabelPosition:"inner3",background:null,chartTitle:null,gauge:{min:0,max:null,type:"single",width:null,arcMinWidth:null,fullCircle:!1,title:null},grid:{x:!0,y:!0},legend:{position:"right",show:!0},line:{step:"step"},padding:{bottom:null,left:null,right:null,top:null},rotateAxis:!1,showDataLabels:!1,showDataPoints:!0,showAbsoluteValues:!1,tooltip:{grouped:!0,show:!0},transitionDuration:200,x:{axisHeight:null,label:"x Axis",timeFormat:"%Y-%m-%dT%H:%M:%S",type:"category",tick:{cutAfter:30,maxNumber:25,multiline:!1,rotation:60,autoRotate:!0,timeFormat:"%y-%m-%d %H:%M",fit:!0}},y:{label:"y Axis 1",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},y2:{label:"y Axis 2",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},zoom:{enabled:!0,type:"scroll",rescale:!1}},a),z.d3chart=A):z.d3chart=null,-1<Pt.inArray("table",z.features)?(N=Ut.jsonSaveExtend({header:{background:"white",textAlign:"left",color:"inherit",border:"1px solid rgba(240, 240, 240, 1)"},cells:{background:"transparent",textAlign:"left",color:"inherit",border:"1px solid rgba(240, 240, 240, 1)"},evenRow:{background:"white",textAlign:"left",color:"inherit",borderBottom:"1px solid rgba(240, 240, 240, 1)"},oddRow:{background:"rgb(240,240,240)",textAlign:"left",color:"inherit",borderBottom:"1px solid rgba(240, 240, 240, 1)"}},d),z.table=N):z.table=null,-1<Pt.inArray("sanitizer",z.features)?(S=Ut.jsonSaveExtend({ALLOWED_ATTR:["accesskey","align","alt","always","autocomplete","autoplay","border","cellpadding","cellspacing","charset","class","dir","height","href","id","lang","name","rel","required","src","style","summary","tabindex","target","title","type","value","width"],ALLOWED_TAGS:["a","address","b","blockquote","br","caption","code","dd","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","label","li","nl","ol","p","pre","s","span","strike","strong","sub","sup","table","tbody","td","th","thead","tr","u","ul"]},s),z.purifyOptions=S):z.purifyOptions=null,-1<Pt.inArray("map",z.features)?(M=Ut.jsonSaveExtend({tour:{enabled:!0,direction:"right",speed:2,start:-30,shadowEffect:!0},circles:{color:"rgb(97, 159, 209)",radius:5,opacity:.8,opacityHover:.65,shadows:!1},map:{stroke:"#303030",strokeWidth:"0.5px",color:"#eee",centerLongitude:0,centerLatitude:0,initialZoom:1,zoomEnabled:!0,shadows:!0}},l),z.mapOptions=M):z.mapOptions=null,-1<Pt.inArray("clock",z.features)?(O=Ut.jsonSaveExtend({shadows:!1,label:{labelColor:"#303030",labelColor2:"#303030"},hour:{labelColor:"#303030",tickColor:"#999"},second:{label:!1,labelColor:"#707070",tickColor:"#ccc"},hands:{color:"#303030",coverFillColor:"white",coverStrokeColor:"#999",coverSize:2},circle:{color:"#ccc",width:5,fillColor:"#eeeeee"}},c),z.clockOptions=O):z.clockOptions=null,-1<Pt.inArray("calendar",z.features)?(n=Ut.jsonSaveExtend({eventLimitPerDay:2,viewType:"dayGridMonth",displayTime:!0,hours12:!1,timeGridStartTime:"06:00:00"},h),z.calendarOptions=n):z.calendarOptions=null,z.noDataMessage=t,z.errorMessage=e,z.items2Submit=o,z.items2SubmitImg=r,Ft.debug.info({fct:Ut.featureDetails.name+" - initialize",finalConfigJSON:z,featureDetails:Ut.featureDetails}),Pt(document).on("scroll touchmove",function(){x=Pt(document).scrollTop()}),L(0,z);try{u?Pt(D).bind("apexrefresh",function(){Ft.debug.info({fct:Ut.featureDetails.name+" - initialize",msg:"Refresh event was fired",featureDetails:Ut.featureDetails}),L(0,z,!0)}):Ft.debug.error({fct:Ut.featureDetails.name+" - initialize",msg:"Can't bind refresh event because Refresh Region ID is missing",featureDetails:Ut.featureDetails})}catch(t){Ft.debug.error({fct:Ut.featureDetails.name+" - initialize",msg:"Can't bind refresh event on",err:t,featureDetails:Ut.featureDetails})}0<z.refresh&&(E=setInterval(function(){0===Pt(y).length?clearInterval(E):(Ft.debug.info({fct:Ut.featureDetails.name+" - initialize",msg:"Refresh by time was fired",featureDetails:Ut.featureDetails}),L(0,z,!0))},1e3*z.refresh))}else Ft.debug.error({fct:Ut.featureDetails.name+" - initialize",msg:"Can't find pRegionID: "+f,featureDetails:Ut.featureDetails});function L(t,e,i){i&&(Ut.loader.start(D),k++);var n=e.items2Submit;Ft.server.plugin(g,{pageItems:n,x01:"items"},{success:function(t){!function(t,n){Ft.debug.info({fct:Ut.featureDetails.name+" - drawGridItems",ajaxResponse:t,featureDetails:Ut.featureDetails});var e="."+f;function i(){m&&m.destroy(),m=new Masonry(e,T)}jt.outerItemIntervals&&0<jt.outerItemIntervals.length&&Pt.each(jt.outerItemIntervals,function(t,e){clearInterval(e)});jt.outerItemIntervals=[],jt.d3Timer&&0<jt.d3Timer.length&&Pt.each(jt.d3Timer,function(t,e){e.stop()});jt.d3Timer=[],jt.innerItemsIntervals&&Pt.each(jt.innerItemsIntervals,function(t,e){clearInterval(e)});jt.innerItemsIntervals={},y.empty();var a,o,r=Pt("<div></div>");{var s;r.addClass("bida-container-sizer"),r.addClass(f+"-sizer"),y.append(r),t.items&&0<t.items.length?(y.removeClass("bida-container-nodat"),Pt.each(t.items,function(t,e){var i=n.colSpan;!function(t,e,i,n,a){var o=Ut.jsonSaveExtend(null,n),r=f+"--"+t,s="#"+r,l=(n.height||a.height)-C,d=Pt("<div></div>");d.attr("id",r),d.attr("item-id",n.itemID),d.addClass("bida-container-item"),d.addClass(f+"-item"),d.addClass("bida-container-item--width"+e),d.css("min-height",l),d.css("background",n.backColor||a.backColor),d.css("color",n.color||a.color),Ut.isDefinedAndNotNull(n.itemID)&&(d.attr("item-id",n.itemID),d.addClass(u+"--"+n.itemID));i.append(d),_(t,l,s,o,a);o=Gt(n.isAsync,!1,!0);{var c;"A"===p&&o&&(Pt(d).on("itemrefresh",function(){n.itemData=null,_(t,l,s,n,a,!0)}),0<n.refresh&&(c=setInterval(function(){0===Pt(s).length?clearInterval(c):(n.itemData=null,_(t,l,s,n,a,!0))},1e3*n.refresh),jt.outerItemIntervals.push(c)))}}(t,i=e.colSpan||i,y,e,n)}),n.footprint&&function(t){var e=Pt("<div></div>");e.css("position","absolute"),e.css("margin","-5px"),e.css("bottom","0px"),e.css("right","10px"),e.css("font-size","9px"),e.css("color","rgb(0,0,0,0.3)"),e.css("line-height","9px");var i=Pt("<i></i>");i.addClass("fa"),i.addClass("fa-heart"),i.css("font-size","9px"),i.css("color","inherit"),i.css("opacity","0.3"),i.css("line-height","10px");var n=Pt("<a></a>");n.attr("href","https://linktr.ee/ronny.weiss"),n.attr("target","_blank"),n.css("color","inherit"),n.append(i);var a=Pt("<i></i>");a.addClass("fa"),a.addClass("fa-apex"),a.css("font-size","9px"),a.css("color","inherit"),a.css("opacity","0.3"),a.css("line-height","10px"),(i=Pt("<a></a>")).attr("href","https://apex.oracle.com"),i.attr("target","_blank"),i.css("color","inherit"),i.append(a),e.append("Build with "),e.append(n),e.append(" for "),e.append(i),Pt(t).append(e)}(y),i(),s={delay:50,zIndex:10,items:".bida-container-item",grid:[10,10],tolerance:"pointer",start:function(t,e){a||(a=Pt(e.item).clone(),Pt("body").append(a)),Pt(e.item).hide(),a.fadeIn(),a.css("opacity","0.5"),a.css("filter","grayscale(100%)")},sort:function(t,e){a.css("left",e.offset.left),a.css("top",e.offset.top)},change:function(t,e){y.find(".ui-sortable-placeholder").each(function(t,e){Pt(e).css("visibility","visible")}),Pt(e.item).css("left",e.position.left),Pt(e.item).css("top",e.position.top),i()},stop:function(t,e){a.remove(),a="",Pt(e.item).show(),i()},update:function(t,e){var i=[];y.find(".bida-container-item").each(function(t,e){e=Pt(e).attr("item-id");i.push(e)}),Ft.debug.info({fct:Ut.featureDetails.name+" - drawGridItems",sortInfo:i,featureDetails:Ut.featureDetails}),y.trigger("sortorder",i.join(":"))}},n.isSortable&&(o=y.sortable(s)),Pt(D).on("sortableOn",function(){Ft.debug.info({fct:Ut.featureDetails.name+" - drawGridItems",msg:"sortable on by trigger",featureDetails:Ut.featureDetails}),o||y.sortable(s),y.sortable("enable")}),Pt(D).on("sortableOff",function(){Ft.debug.info({fct:Ut.featureDetails.name+" - drawGridItems",msg:"sortable off by trigger",featureDetails:Ut.featureDetails}),y.sortable("disable")})):(y.addClass("bida-container-nodat"),Ut.noDataMessage.show(y,n.noDataMessage))}Ut.loader.stop(D),y.trigger("rendered"),Ft.debug.info({fct:Ut.featureDetails.name+" - drawGridItems",msg:"Material BI Dashboard rendering finished",featureDetails:Ut.featureDetails})}(t,e),i&&y.trigger("refreshed")},error:function(t){t=t,Pt(v).empty(),Pt(v).addClass("bida-container-nodat"),Ut.errorMessage.show(v,e.errorMessage),Ut.loader.stop(D),t.responseText&&Ft.debug.error({fct:Ut.featureDetails.name+" - getData",msg:t.responseText,featureDetails:Ut.featureDetails}),i&&y.trigger("refreshed")},dataType:"json"})}function _(n,t,a,o,r,e){var s=Pt(a),l=t,i=100;function d(){m&&(m.layout(),Pt(document).scrollTop(x))}function c(){function t(){b=setInterval(function(){var t,e;0===Pt(y).length?clearInterval(b):Pt(y).is(":visible")&&(t=document.getElementById(f).scrollHeight,e=Pt(y).height(),Ut.isBetween(e,t,w)||(Ft.debug.info({moudule:"checkMasonrySize",msg:"Masonry has resize problem",featureDetails:Ut.featureDetails,scrollHeight:t,innerHeight:e}),d()))},jt.defTime)}function e(){b&&clearInterval(b)}b||(e(),t(),document.addEventListener("visibilitychange",function(){(document.hidden?e:t)()}))}function u(){Ut.loader.stop(a),setTimeout(function(){Ut.loader.stop(a)},i)}t=Gt(o.isAsync,!1,!0);e||"A"===p&&t?Ut.isDefinedAndNotNull(o.itemID)?(t=r.items2Submit,setTimeout(function(){Ut.loader.start(a)},i),Ft.server.plugin(g,{pageItems:t,x01:"itemData",x02:o.itemID,x04:k},{success:function(t,e,i){Ft.debug.info({fct:Ut.featureDetails.name+" - prepareItemContent",asyncAjaxReference:k,pData:t,featureDetails:Ut.featureDetails}),i.getResponseHeader("ajax-reference")==k?(i=t,i=Ut.jsonSaveExtend(o,i),s.empty(),Ut.isDefinedAndNotNull(i.itemID)&&(s.attr("item-id",i.itemID),s.addClass(i.itemID)),l=(i.height||r.height)-C,s.css("min-height",l),H(n,a,l,i,r),u(),d(),c()):Ft.debug.info({fct:Ut.featureDetails.name+" - prepareItemContent",msg:"Expired Async AJAX Call returned.",pData:t,featureDetails:Ut.featureDetails})},error:function(t){t=t,s.empty(),t.status&&404==t.status?Ut.noDataMessage.show(a,r.noDataMessage):(Ut.errorMessage.show(a,r.errorMessage),Ft.debug.error({msg:"Error occured in PL/SQL Block for async Loading of Data",data:t,featureDetails:Ut.featureDetails})),u(),d(),c()},dataType:"json"})):(s.empty(),Ut.errorMessage.show(a,r.errorMessage),Ft.debug.error({fct:Ut.featureDetails.name+" - prepareItemContent",msg:"itemID missing in JSON for async load!",featureDetails:Ut.featureDetails})):(H(n,a,l,o,r),d(),c())}function R(t,e,i,n,a){Ft.debug.info({fct:Ut.featureDetails.name+" - drawSubText",pPosition:t,pParent:e,pText:i,pDefaultConfig:n,pIsSafeItem:a,featureDetails:Ut.featureDetails});var o="bida-item-subtext-"+t,r=Pt("<div></div>"),s=Pt(e).find("."+o);(r=s[0]?s:r).addClass(o);o=Pt("<span></span>");o.addClass("bida-item-subtext-text"),o.addClass("bida-item-subtext-text-"+t),o.addClass("truncate-text");a=qt(i,n,a,Wt);o.html(a),r.html(o),r.attr("title",o.text()),Pt(e).append(r)}function H(t,e,i,n,a){var o,r,s,l,d=Pt(e),c=n.itemConfig||{};Ut.isDefinedAndNotNull(n.optionsLink)&&((s=Pt("<a></a>")).addClass("bida-item-options-link"),s.attr("href",n.optionsLink),s.css("background-color",n.optionsLinkBackColor||a.optionsLink.backColor),r="fa-",o=Pt("<i></i>"),l=n.optionsLinkIcon||a.optionsLink.icon,Ut.isDefinedAndNotNull(l)&&l.substr(0,r.length)===r?(o.addClass("fa"),o.addClass(l),o.css("color",n.optionsLinkColor||a.optionsLink.color)):o.css("background-image","url("+l+")"),o.addClass("bida-item-options-link-icon"),s.append(o),d.append(s)),Ut.isDefinedAndNotNull(n.optionsLinkTop)&&((f=Pt("<a></a>")).addClass("bida-item-options-link-top"),f.attr("href",n.optionsLinkTop),f.css("background-color",n.optionsLinkTopBackColor||a.optionsLinkTop.backColor),r="fa-",s=Pt("<i></i>"),l=n.optionsLinkTopIcon||a.optionsLinkTop.icon,Ut.isDefinedAndNotNull(l)&&l.substr(0,r.length)===r?(s.addClass("fa"),s.addClass(l),s.css("color",n.optionsLinkTopColor||a.optionsLinkTop.color)):s.css("background-image","url("+l+")"),s.addClass("bida-item-options-link-icon"),f.append(s),d.append(f));var u,f=Gt(n.isMarked,!1,!0);if(d.removeClass("bida-container-item-marked"),f&&d.addClass("bida-container-item-marked"),Ut.isDefinedAndNotNull(n.itemType)){var p=!1;Ut.isDefinedAndNotNull(n.oversize)&&(p=Gt(n.oversize,!1,!0));var h=!1;Ut.isDefinedAndNotNull(n.noSanitize)&&(h=Gt(n.noSanitize,!1,!0));var m=i;if(Ut.isDefinedAndNotNull(n.title)&&function(t,e,i,n,a,o,r,s){Ft.debug.info({fct:Ut.featureDetails.name+" - drawItemTitle",pText:e,pBackColor:i,pColor:n,pParent:t,pIcon:a,pIconColor:o,pDefaultConfig:r,pIsSafeItem:s,featureDetails:Ut.featureDetails});var l="bida-item-title",d=Pt("<div></div>"),c=Pt(t).find("."+l);(d=c[0]?c:d).addClass(l),d.css("background",i||r.title.backColor),d.css("color",n||r.title.color),(n=Pt("<span></span>")).addClass("bida-item-title-text"),n.addClass("truncate-text"),s=qt(e,r,s,Wt),n.html(s),n.attr("title",n.text()),d.html(n),a=a||r.title.icon,o=o||r.title.iconColor,Ut.isDefinedAndNotNull(a)&&(r=Pt("<i></i>"),"fa-"===a.substr(0,"fa-".length)?(r.addClass("fa"),r.addClass(a),r.css("color",o)):r.css("background-image","url("+a+")"),r.addClass("bida-item-title-icon"),n.prepend(r)),Pt(t).prepend(d)}(e,n.title,n.titleBackColor,n.titleColor,n.titleIcon,n.titleIconColor,a,h),Ut.isDefinedAndNotNull(n.subText1)&&R(1,e,n.subText1,a,h),Ut.isDefinedAndNotNull(n.subText2)&&R(2,e,n.subText2,a,h),u=i,Pt(i=e).children(".bida-item-title").each(function(){u=Math.floor(u-Pt(this).height())-1}),Pt(i).children(".bida-item-subtext-1").each(function(){u=Math.floor(u-Pt(this).height())-1}),Pt(i).children(".bida-item-subtext-2").each(function(){u=Math.floor(u-Pt(this).height())-1}),m=u,Ut.isDefinedAndNotNull(n.itemData)||"calendar"===n.itemType||"note"===n.itemType||"clock"===n.itemType)switch(Ft.debug.info({fct:Ut.featureDetails.name+" - drawItemRegionContent",msg:"Render Item "+n.itemType+"("+n.title+")",featureDetails:Ut.featureDetails}),n.itemType){case"chart":-1<Pt.inArray("charts",a.features)?n.itemData?function(r,t,e,i,s,a){Ft.debug.info({fct:Ut.featureDetails.name+" - drawChart",pItemSel:r,pItemHeight:t,pConfigData:e,pValuesData:i,pDefaultConfig:s,pIsSafeItem:a,featureDetails:Ut.featureDetails});var n,o,l=["pie","donut","gauge"],d=!1,c=!1,u=!1;function f(t,n){try{return t.sort(function(t,e){var i=d3.timeParse(n),t=i(t.x),e=i(e.x);return new Date(t).getTime()-new Date(e).getTime()})}catch(t){Ft.debug.error({fct:Ut.featureDetails.name+" - drawChart",msg:"Error while try sort JSON Array by Time Value",err:t,featureDetails:Ut.featureDetails})}}try{var p=!1,h=Gt(e.chartTitle,s.d3chart.chartTitle||"").toString(),m=Gt(e.background,s.d3chart.background),g=null;Ut.isDefinedAndNotNull(m)&&(g={color:m});var b=Gt(e.lineStep,s.d3chart.line.step),v=Gt(e.gaugeMin,s.d3chart.gauge.min),y=Gt(e.gaugeMax,s.d3chart.gauge.max),D=Gt(e.gaugeType,s.d3chart.gauge.type),x=Gt(e.gaugeWidth,s.d3chart.gauge.width),w=Gt(e.gaugeArcMinWidth,s.d3chart.gauge.arcMinWidth),C=Gt(e.gaugeFullCircle,s.d3chart.gauge.fullCircle,!0),k=Gt(e.gaugeTitle,s.d3chart.gauge.title||"").toString(),I=Gt(e.gridX,s.d3chart.grid.x,!0),T=Gt(e.gridY,s.d3chart.grid.y,!0),A=Gt(e.xAxisHeight,s.d3chart.x.axisHeight),N=Gt(e.legendShow,s.d3chart.legend.show,!0),S=Gt(e.legendPosition,s.d3chart.legend.position),M=Ut.jsonSaveExtend(null,s.d3chart.padding);Ut.isDefinedAndNotNull(e.paddingBottom)&&(M.bottom=e.paddingBottom),Ut.isDefinedAndNotNull(e.paddingLeft)&&(M.left=e.paddingLeft),Ut.isDefinedAndNotNull(e.paddingRight)&&(M.right=e.paddingRight),Ut.isDefinedAndNotNull(e.paddingTop)&&(M.top=e.paddingTop);var O,E=Gt(e.rotateAxis,s.d3chart.rotateAxis,!0),z=Gt(e.axisLabelPosition,s.d3chart.axisLabelPosition),L=null,_=null;switch(z){case"inner1":L="inner-left",_="inner-bottom";break;case"inner2":L="inner-center",_="inner-middle";break;case"inner3":L="inner-right",_="inner-top";break;case"outer1":L="outer-left",_="outer-bottom";break;case"outer2":L="outer-center",_="outer-middle";break;case"outer3":L="outer-right",_="outer-top"}E&&(O=L,L=_,_=O);var R=Gt(e.tooltipShow,s.d3chart.tooltip.show,!0),H=Gt(e.tooltipGrouped,s.d3chart.tooltip.grouped,!0),W=Gt(e.transitionDuration||s.d3chart.transitionDuration),j=Gt(e.xShow,s.d3chart.x.show,!0),B=Gt(e.xLabel,s.d3chart.x.label||"").toString(),F=Gt(e.xType,s.d3chart.x.type),P=null,U=null,G=Gt(e.xTickCutAfter,s.d3chart.x.tick.cutAfter),q=Gt(e.xTickMaxNumber,s.d3chart.x.tick.maxNumber),Y=Gt(e.xTickRotation,s.d3chart.x.tick.rotation),J=Gt(e.xTickMultiline,s.d3chart.x.tick.multiline,!0),V=Gt(e.xTickFit,s.d3chart.x.tick.fit,!0),Q=Gt(e.xTickAutoRotate,s.d3chart.x.tick.autoRotate,!0),$=null;"category"!=F&&"timeseries"!=F||(U="x"),"timeseries"==F&&(P=Gt(e.xTimeFormat,s.d3chart.x.timeFormat),$=Gt(e.xTickTimeFormat,s.d3chart.x.tick.timeFormat),f(i,P)),"category"==F&&($=function(t,e){return Ut.cutString(e,G)});var X=Gt(e.yLabel,s.d3chart.y.label||"").toString(),Z=Gt(e.yLog,s.d3chart.y.log,!0),K=null;Z&&(K="log");var tt=e.yMin||s.d3chart.y.min,et=e.yMax||s.d3chart.y.max,it=e.yTickMaxNumber||s.d3chart.y.tick.maxNumber,nt=e.yUnit||s.d3chart.y.unit,at=!1,ot=Gt(e.y2Label,s.d3chart.y2.label||"").toString(),rt=Gt(e.y2Log,s.d3chart.y2.log,!0),st=null;rt&&(st="log");var lt=Gt(e.y2Min,s.d3chart.y2.min),dt=Gt(e.y2Max,s.d3chart.y2.max),ct=Gt(e.y2TickMaxNumber,s.d3chart.y2.tick.maxNumber),ut=Gt(e.y2Unit,s.d3chart.y2.unit),ft=Gt(e.zoomEnabled,s.d3chart.zoom.enabled,!0),pt=Gt(e.zoomType,s.d3chart.zoom.type),ht=!1;!ft||"scroll"==pt?ht=!1:"subchart"==pt?ft=!(ht=!0):"drag"==pt&&(ht=!(ft=!0));var mt,gt,bt=Gt(e.zoomRescale,s.d3chart.zoom.rescale,!0),vt=[],yt=[],Dt=[],xt={},wt={},Ct={},kt={},It={},Tt=0,At=Ut.groupObjectArray(i,"seriesID");if(At){"category"!=F&&"timeseries"!=F||(yt.push("x"),mt=Ut.groupObjectArray(i,"x"),gt=Object.keys(mt),Pt.each(gt,function(t,e){yt.push(Gt(e.replace("â€‹",""),null))})),vt.push(yt),Pt.each(At,function(t,e){var i,a,n,o;Tt++,e[0]&&e[0].seriesID?(i=e[0],a=escape(i.seriesID),xt[a]=i.color,wt[a]=i.type,0<=l.indexOf(i.type)&&(ft=!1),"gauge"===i.type&&(d=!0),"pie"===i.type&&(c=!0),"donut"===i.type&&(u=!0),Ut.isDefinedAndNotNull(i.tooltip)&&(p=!0),Ct[a]=i.yAxis||"y",Ut.isDefinedAndNotNull(i.groupID)&&(n=escape(i.groupID.toString()),It[n]||(It[n]=[]),It[n].push(a)),"y2"==i.yAxis&&(at=!0),kt[a]=Gt(i.label,a),(o=[]).push(a),"category"==F||"timeseries"==F?Pt.each(mt,function(t,e){var i=null,n=null;Pt.each(e,function(t,e){escape(e.seriesID)==a&&(i=e.y,e.z&&(n=e.z))}),null!==n?o.push({y:i,z:n}):o.push(i)}):Pt.each(e,function(t,e){var i=Gt(e.y,null);e.z?(e=e.z,o.push({y:i,z:e})):o.push(i)}),vt.push(o)):(Ut.errorMessage.show(r,s.errorMessage),Ft.debug.error({fct:Ut.featureDetails.name+" - drawChart",msg:"No seriesID found in seriesID Cursor",featureDetails:Ut.featureDetails}))}),Pt.each(It,function(t,e){Dt.push(e)});var Nt=Gt(e.showDataLabels,s.d3chart.showDataLabels,!0);c||u?Nt={colors:"white"}:d&&(Nt={colors:"single"===D&&1<Tt?"white":"inherit"});var St=Gt(e.showDataPoints,s.d3chart.showDataPoints,!0);Gt(e.showAbsoluteValues,s.d3chart.showAbsoluteValues)&&(n=function(t,e,i){return t+nt}),p&&(o=function(t){var n=Pt("<div></div>");return n.addClass("bb-tooltip"),n.addClass("bida-chart-tooltip-custome"),Pt.each(t,function(t,e){var i="â€‹"+unescape(e.id),e=e.index;At[i]&&(1===At[i].length&&(e=0),At[i][e]&&Ut.isDefinedAndNotNull(At[i][e].tooltip)&&(e=qt(At[i][e].tooltip,s,a,Wt),n.append(e),n.append("<br>")))}),n[0].outerHTML});try{var Mt=r+"bbc",Ot=Mt.replace("#",""),Et=Pt("<div></div>");Et.attr("id",Ot),Pt(r).append(Et);var zt={bindto:Mt,background:g,title:{text:h},size:{height:t},data:{x:U,xFormat:P,columns:vt,types:wt,groups:Dt,colors:xt,labels:Nt,axes:Ct,names:kt,onclick:function(t){var e;e=t,t="â€‹"+unescape(e.id),e=e.index,At[t]&&(1===At[t].length&&(e=0),At[t][e]&&At[t][e].link&&Ut.link(At[t][e].link))}},pie:{label:{format:n,threshold:.05}},donut:{label:{format:n,threshold:.05}},line:{step:{type:b}},gauge:{label:{format:n,threshold:"single"===D?.05:null},fullCircle:C,min:v,max:y,type:D,width:x,title:k,arc:{minWidth:w}},radar:{direction:{clockwise:!0}},subchart:{show:ht},zoom:{type:pt,enabled:ft,rescale:bt},transition:{duration:W},legend:{show:N,position:S},tooltip:{show:R,grouped:H,contents:o},grid:{x:{show:I},y:{show:T}},point:{show:St},axis:{rotated:E,x:{show:j,label:{text:B,position:L},type:F,tick:{culling:{max:q},autorotate:Q,rotate:Y,multiline:J,format:$,fit:V},height:A},y:{label:{text:X,position:_},type:K,max:et,min:tt,tick:{culling:{max:it},format:function(t){return t+nt}}},y2:{show:at,label:{text:ot,position:_},type:st,max:dt,min:lt,tick:{culling:{max:ct},format:function(t){return t+ut}}}},padding:M};Ft.debug.info({fct:Ut.featureDetails.name+" - drawChart",finalChartData:zt,featureDetails:Ut.featureDetails});var Lt=bb.generate(zt);function _t(){!document.hidden&&Et.is(":visible")&&Lt.resize({height:t})}function Rt(){jt.innerItemsIntervals&&jt.innerItemsIntervals[r]&&clearInterval(jt.innerItemsIntervals[r])}function Ht(){jt.innerItemsIntervals[r]=setInterval(function(){0===Pt(r).length?clearInterval(jt.innerItemsIntervals[r]):Et.is(":visible")&&(Ut.isBetween(Et.width(),Et.find("svg").width(),Bt)||(Ft.debug.info({fct:Ut.featureDetails.name+" - drawChart",msg:"Chart has resize problem",featureDetails:Ut.featureDetails}),_t()))},jt.defTime)}ft&&Pt(Mt).contextmenu(function(t){t.preventDefault(),Lt.unzoom()}),Pt(window).resize(function(){_t()}),Rt(),Ht(),document.addEventListener("visibilitychange",function(){(document.hidden?Rt:Ht)()})}catch(t){Pt(r).empty(),Ut.errorMessage.show(r,s.errorMessage),Ft.debug.error({fct:Ut.featureDetails.name+" - drawChart",msg:"Error while try to render chart",err:t,featureDetails:Ut.featureDetails})}}else Ut.noDataMessage.show(r,s.noDataMessage)}catch(t){Pt(r).empty(),Ut.errorMessage.show(r,s.errorMessage),Ft.debug.error({fct:Ut.featureDetails.name+" - drawChart",msg:"Error while prepare data for chart",err:t,featureDetails:Ut.featureDetails})}}(e,m,c,n.itemData,a,h):(Ut.errorMessage.show(e,a.errorMessage),Ft.debug.error({fct:Ut.featureDetails.name+" - drawItemRegionContent",msg:"itemData is missing in JSON",featureDetails:Ut.featureDetails})):(Ut.errorMessage.show(e,a.errorMessage),Ft.debug.info({fct:Ut.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Charts is not activated.",featureDetails:Ut.featureDetails}));break;case"html":!function(i,t,n,a,o,e,r){Ft.debug.info({fct:Ut.featureDetails.name+" - drawHTML",pItemSel:i,pItemHeight:t,pItemData:n,pDefaultConfig:o,pOversize:e,pIsSafeItem:r,featureDetails:Ut.featureDetails});var s,l=Pt("<div></div>");function d(t){var e=qt(t,o,r,Wt);Ft.debug.info({fct:Ut.featureDetails.name+" - drawHTML",submodule:"renderHTML",pContent:t,contentAfterEscapeOrSanitize:e,featureDetails:Ut.featureDetails}),l.html(e),-1<Pt.inArray("inlineimagesdownload",o.features)&&(e=l.find('img[alt*="aih#"]'),Pt.each(e,function(t,e){var i,n=e.title;(n=n||e.alt.split("aih##")[1])&&(Ft.debug.info({fct:Ut.featureDetails.name+" - drawHTML",pItemID:a,pk:n,featureDetails:Ut.featureDetails}),i=o.items2SubmitImg,i=Ft.server.pluginUrl(g,{x01:"imageDownload",x02:a,x03:n,pageItems:i}),e.src=i,Pt(e).addClass("bida-item-urte-img"))})),l.find("*").css("max-width","100%").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto").css("white-space","normal"),l.find("img").css("object-fit","contain").css("object-position","50% 0%")}{function c(){function t(){s=setTimeout(function(){u++,Pt(l).fadeOut("slow",function(){c(),Pt(l).fadeIn("slow")})},1e3*e)}var e;u>n.length-1?u=0:u<0&&(u=n.length-1),n[u]&&(d(n[u].html),(e=n[u].duration)&&0<e&&(Pt(i).hover(function(){clearTimeout(s)}),Pt(i).mouseleave(function(){t()}),t()))}var u,f,p;l.addClass("bida-item-html"),n&&"object"==typeof n&&1<n.length?(u=0,(p=Pt("<div></div>")).addClass("bida-item-html-slide-lc"),p.on("click",function(){u--,clearTimeout(s),Pt(l).fadeOut("fast",function(){c(),Pt(l).fadeIn("fast")})}),(f=Pt("<span></span>")).addClass("fa fa-chevron-left fa-lg"),f.addClass("bida-item-html-slide-lc-s"),p.append(f),Pt(i).append(p),(f=Pt("<div></div>")).addClass("bida-item-html-slide-rc"),f.on("click",function(){u++,clearTimeout(s),Pt(l).fadeOut("fast",function(){c(),Pt(l).fadeIn("fast")})}),(p=Pt("<span></span>")).addClass("fa fa-chevron-right fa-lg"),p.addClass("bida-item-html-slide-rc-s"),f.append(p),Pt(i).append(f),c()):n&&"object"==typeof n&&1===n.length?Ut.isDefinedAndNotNull(n[0].html)&&""!==n[0].html?d(n[0].html):Ut.noDataMessage.show(l,o.noDataMessage):Ut.isDefinedAndNotNull(n)&&""!==n?d(n):Ut.noDataMessage.show(l,o.noDataMessage)}Pt(i).append(l),!0!==e&&(l.css("height",t),W(l))}(e,m,n.itemData,n.itemID,a,p,h);break;case"card":!function(t,e,i,n,a,o,r){Ft.debug.info({fct:Ut.featureDetails.name+" - drawCard",pIndex:t,pItemHeight:e,pItemSel:i,pItemData:n,pDefaultConfig:a,pOversize:o,pIsSafeItem:r,featureDetails:Ut.featureDetails});var s=Pt("<div></div>");s.addClass("bida-item-card");var l=Pt("<div></div>");{var d,c;l.addClass("card-content"),(Ut.isDefinedAndNotNull(n.icon)||Ut.isDefinedAndNotNull(n.iconText))&&((u=Pt("<div></div>")).addClass("card-content-icon-div"),d=Pt("<span></span>"),Ut.isDefinedAndNotNull(n.icon)&&"fa-"===n.icon.substr(0,"fa-".length)?(d.addClass("fa "+n.icon),c="linear-gradient(60deg, hsl("+23*t%350+", 79%, 45%), hsl("+23*t%350+", 60%, 45%))",d.css("background",n.iconBackColor||c)):(Ut.isDefinedAndNotNull(n.iconText)&&(t=qt(n.iconText,a,r,Wt),(c=Pt("<span></span>")).addClass("card-content-icon-text"),c.html(t),d.append(c)),Ut.isDefinedAndNotNull(n.icon)&&d.css("background-image","url("+n.icon+")"),d.css("background-color",n.iconBackColor)),d.addClass("card-content-icon"),d.css("color",n.iconColor||"white"),u.append(d),l.append(u))}var u=Pt("<div></div>");u.addClass("card-title-div"),Ut.isDefinedAndNotNull(n.icon)&&u.css("width","calc(100% - 55px)");Ut.isDefinedAndNotNull(n.value)&&((p=Pt("<p></p>")).addClass("card-title"),p.addClass("truncate-text"),f=qt(n.value,a,r,Wt),p.html(f),u.append(p));{var f,p;Ut.isDefinedAndNotNull(n.valueSmall)&&(Ut.isDefinedAndNotNull(n.value)&&p.css("line-height","30px"),(f=Pt("<p></p>")).addClass("card-sub-title"),p=qt(n.valueSmall,a,r,Wt),f.html(p),u.append(f))}l.append(u),s.append(l),Ut.isDefinedAndNotNull(n.footer)&&((h=Pt("<div></div>")).addClass("bida-card-footer"),l=Pt("<div></div>"),(l=Pt("<div></div>")).addClass("stats"),r=qt(n.footer,a,r,Wt),l.html(r),h.append(l),s.append(h));{var h;Ut.isDefinedAndNotNull(n.link)?((h=Pt("<a></a>")).addClass("bida-a"),h.attr("href",n.link),h.append(s),Pt(i).append(h),!0!==o&&(h.css("height",e),W(h))):(Pt(i).append(s),!0!==o&&(s.css("height",e),W(s)))}}(t,m,e,n.itemData,a,p,h);break;case"badge":!function(t,i,e,n,a,o){Ft.debug.info({fct:Ut.featureDetails.name+" - drawBadges",pIndex:t,pItemHeight:i,pItemSel:e,pItemData:n,pDefaultConfig:a,pIsSafeItem:o,featureDetails:Ut.featureDetails});var r=!1,s=.98,l=.15,d=.28,c=.28,u=c-l,f=0,t="linear-gradient(60deg, hsl("+23*t%350+", 79%, 45%), hsl("+23*t%350+", 60%, 45%))",p=Pt("<div></div>");p.addClass("bida-item-badge"),Ut.isDefinedAndNotNull(n.title)&&f++;Ut.isDefinedAndNotNull(n.icon)&&f++;Ut.isDefinedAndNotNull(n.value)&&f++;0<f&&(s/=f,u/=f);{var h;Ut.isDefinedAndNotNull(n.title)?((g=Pt("<div></div>")).addClass("bida-item-badge-text"),(h=Pt("<span></span>")).css("color",n.titleColor||t),f=qt(n.title,a,o,Wt),h.html(f),g.append(h),p.append(g)):(d+=l/2,c+=l/3)}{var m,g;Ut.isDefinedAndNotNull(n.icon)?((b=Pt("<div></div>")).addClass("bida-item-badge-icon"),m=Pt("<span></span>"),Ut.isDefinedAndNotNull(n.icon)&&"fa-"===n.icon.substr(0,"fa-".length)?(m.addClass("fa "+n.icon),m.css("color",n.iconColor||t)):(Ut.isDefinedAndNotNull(n.iconText)&&(g=qt(n.iconText,a,o,Wt),m.html(g)),Ut.isDefinedAndNotNull(n.icon)&&(r=!0,m.css("background-image","url("+n.icon+")"),m.addClass("bida-item-badge-icon-image"))),b.append(m),p.append(b)):(l+=d/3,c+=d/3)}{var b,v;Ut.isDefinedAndNotNull(n.value)?((b=Pt("<div></div>")).addClass("bida-item-badge-text-value"),(v=Pt("<span></span>")).css("color",n.valueColor||t),o=qt(n.value,a,o,Wt),v.html(o),b.append(v),p.append(b)):(l+=c/3,d+=c/2)}Ut.isDefinedAndNotNull(n.link)&&(p.css("cursor","pointer"),p.on("click",function(){Ut.link(n.link)}));function y(){var t=i,e=Math.min(t,p.width());h&&(h.css("font-size",e*l+"px"),h.css("line-height",t*(s-u)+"px")),m&&(m.css("font-size",e*d+"px"),m.css("line-height",t*s+"px"),r&&(m.css("height",t*s+"px"),m.css("width",t*s+"px"))),v&&(v.css("font-size",e*c+"px"),v.css("line-height",t*s+"px"))}Pt(e).append(p),y(),Pt(window).resize(function(){y()});var D=p.width();function x(){jt.innerItemsIntervals&&jt.innerItemsIntervals[e]&&clearInterval(jt.innerItemsIntervals[e])}function w(){jt.innerItemsIntervals[e]=setInterval(function(){0===Pt(e).length?clearInterval(jt.innerItemsIntervals[e]):p.is(":visible")&&(Ut.isBetween(p.width(),D,Bt)||(D=p.width(),y()))},100)}x(),w(),document.addEventListener("visibilitychange",function(){(document.hidden?x:w)()})}(t,m,e,n.itemData,a,h);break;case"list":!function(t,e,i,u,n,f){Ft.debug.info({fct:Ut.featureDetails.name+" - drawList",pItemSel:t,pItemHeight:e,pItemData:i,pDefaultConfig:u,pOversize:n,pIsSafeItem:f,featureDetails:Ut.featureDetails});var a=Pt("<div></div>");a.addClass("bida-item-list-div");var s=Pt("<ul></ul>");function l(d,c){Pt.each(c,function(t,e){var i=Pt("<li></li>");i.addClass("bida-item-list-item");var n,a,o=Pt("<div></div>");o.addClass("list-item-content"),t<c.length-1&&o.css("border-bottom","1px solid #eeeeee"),(Ut.isDefinedAndNotNull(e.icon)||Ut.isDefinedAndNotNull(e.iconText))&&((l=Pt("<div></div>")).addClass("listItem-content-icon-div"),n=Pt("<span></span>"),e.icon&&"fa-"===e.icon.substr(0,"fa-".length)?(n.addClass("fa "+e.icon),n.css("background",e.iconBackColor||"linear-gradient(60deg, hsl("+23*t%350+", 79%, 45%), hsl("+23*t%350+", 60%, 45%))")):(Ut.isDefinedAndNotNull(e.iconText)&&(a=qt(e.iconText,u,f,Wt),(t=Pt("<span></span>")).addClass("list-item-content-icon-text"),t.html(a),n.append(t)),Ut.isDefinedAndNotNull(e.icon)&&n.css("background-image","url("+e.icon+")"),n.css("background-color",e.iconBackColor)),n.addClass("list-item-content-icon"),n.css("color",e.iconColor||"white"),l.append(n),o.append(l));var r,s,l=Pt("<div></div>");l.addClass("list-item-content-text"),Ut.isDefinedAndNotNull(e.icon)&&l.css("width","calc(100% - 55px)"),Ut.isDefinedAndNotNull(e.title)&&((s=Pt("<span></span>")).addClass("list-item-title"),s.addClass("truncate-text"),r=qt(e.title,u,f,Wt),s.html(r),l.append(s)),Ut.isDefinedAndNotNull(e.text)&&((r=Pt("<span></span>")).addClass("list-item-text"),s=qt(e.text,u,f,Wt),r.html(s),l.append(r)),o.append(l),i.append(o),Ut.isDefinedAndNotNull(e.link)?((o=Pt("<a></a>")).addClass("bida-a"),o.attr("href",e.link),o.append(i),d.append(o)):d.append(i)})}s.addClass("bida-item-list");var o=[];Pt.each(i,function(t,e){Ut.isDefinedAndNotNull(e.group)||o.push(e)});i=Ut.groupObjectArray(i,"group");Ft.debug.info({fct:Ut.featureDetails.name+" - drawList",noGroupsArr:o,groupsArr:i,featureDetails:Ut.featureDetails}),l(s,o),Pt.each(i,function(t,e){var i=Pt("<li></li>");i.addClass("bida-item-list-item-group");var n="#f1f1f1";e[0].groupBackColor&&(n=e[0].groupBackColor);var a="inherit";e[0].groupColor&&(a=e[0].groupColor);var o=Pt("<div></div>");o.addClass("list-group-content"),o.css("border-left","3px solid "+n);var r=Pt("<span></span>");r.addClass("list-group-content-title");t=qt(t,u,f,Wt);r.css("background",n),r.css("color",a),r.html(t),o.append(r),i.append(o);r=Pt("<ul></ul>");r.addClass("bida-item-list-grouped"),l(r,e),o.append(r),s.append(i)}),a.append(s),Pt(t).append(a),!0!==n&&(a.css("height",e),W(a))}(e,m,n.itemData,a,p,h);break;case"table":-1<Pt.inArray("table",a.features)?function(t,e,i,a,n,o){Ft.debug.info({fct:Ut.featureDetails.name+" - drawTable",pItemSel:t,pItemHeight:e,pItemData:i,pDefaultConfig:a,pOversize:n,pIsSafeItem:o,featureDetails:Ut.featureDetails});var r=Pt("<div></div>");r.addClass("bida-item-table-div");var s=Pt("<table></table>");s.addClass("bida-item-table"),Ut.isDefinedAndNotNull(i.header)&&0<i.header.length&&Pt.each(i.header,function(t,e){var i;Ut.isDefinedAndNotNull(e.text)&&((i=Pt("<th></th>")).addClass("bida-item-table-header"),i.css("background-color",e.background||a.table.header.background),i.css("text-align",e.textAlign||a.table.header.textAlign),i.css("color",e.color||a.table.header.color),i.css("border",e.border||a.table.header.border),e=qt(e.text,a,o,Wt),i.html(e),s.append(i))});Ut.isDefinedAndNotNull(i.data)&&0<i.data.length&&Pt.each(i.data,function(t,e){var n=Pt("<tr></tr>");n.addClass("bida-item-table-row"),t%2==0?(n.addClass("bida-item-table-row-even"),n.css("background",a.table.evenRow.background),n.css("text-align",a.table.evenRow.textAlign),n.css("color",a.table.evenRow.color),n.css("border-bottom",a.table.evenRow.borderBottom)):(n.addClass("bida-item-table-row-odd"),n.css("background",a.table.oddRow.background),n.css("text-align",a.table.oddRow.textAlign),n.css("color",a.table.oddRow.color),n.css("border-bottom",a.table.oddRow.borderBottom)),Pt.each(e,function(t,e){var i;Ut.isDefinedAndNotNull(e.text)&&((i=Pt("<td></td>")).addClass("bida-item-table-cell"),i.css("background",e.background||a.table.cells.background),i.css("text-align",e.textAlign||a.table.cells.textAlign),i.css("color",e.color||a.table.cells.color),i.css("border",e.border||a.table.cells.border),e=qt(e.text,a,o,Wt),i.html(e),n.append(i))}),s.append(n)});r.append(s),Pt(t).append(r),!0!==n&&(r.css("height",e),W(r))}(e,m,n.itemData,a,p,h):(Ut.errorMessage.show(e,a.errorMessage),Ft.debug.error({fct:Ut.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Tables is not activaed.",featureDetails:Ut.featureDetails}));break;case"map":-1<Pt.inArray("map",a.features)?function(f,p,h,m,g,b){Ft.debug.info({fct:Ut.featureDetails.name+" - drawD3Map",pItemSel:f,pItemHeight:p,pItemData:h,pItemConfig:m,pDefaultConfig:g,pIsSafeItem:b,featureDetails:Ut.featureDetails});try{var v,y,D,x,w,C,k,I,T,A,N,S,M,O,E,z=Pt(f),L=Gt(m.tourEnabled,g.mapOptions.tour.enabled,!0),_=Gt(m.tourSpeed,g.mapOptions.tour.speed)/2e3,R=Gt(m.tourStart,g.mapOptions.tour.start),H=Gt(m.circlesShadows,g.mapOptions.circles.shadows,!0),W=Gt(m.circlesRadius,g.mapOptions.circles.radius),j=Gt(m.circlesColor,g.mapOptions.circles.color),B=Gt(m.circlesOpacity,g.mapOptions.circles.opacity),F=Gt(m.circlesOpacityHover,g.mapOptions.circles.opacityHover),P=Gt(m.tourShadowEffect,g.mapOptions.tour.shadowEffect,!0),t=Gt(m.mapCenterLongitude,g.mapOptions.map.centerLongitude),e=Gt(m.mapCenterLatitude,g.mapOptions.map.centerLatitude),i=Gt(m.mapInitialZoom,g.mapOptions.map.initialZoom),U=Gt(m.mapZoomEnabled,g.mapOptions.map.zoomEnabled,!0),G=Gt(m.mapColor,g.mapOptions.map.color),q=Gt(m.mapStroke,g.mapOptions.map.stroke),Y=Gt(m.mapStrokeWidth,g.mapOptions.map.strokeWidth),J=Gt(m.mapShadows,g.mapOptions.map.shadows,!0),n=Pt(f).attr("id")+"-shadow";function V(){return z.width()}function Q(){return[V()/2,p/2]}(P=!L?!1:P)&&(k=Pt(f).attr("id")+"-ocean",I=Pt(f).attr("id")+"-highlight",T=Pt(f).attr("id")+"-shading",A="url(#"+k+")",N="url(#"+I+")",S="url(#"+T+")");var $,X,Z,K=d3.select(f).append("svg").attr("class","bida-map-svg").attr("width",V()).attr("height",p);(J||H)&&(nt(K,n,2,2,1),v="url(#"+n+")"),C=L?(X=d3.now(),Z=0,d3.geoOrthographic().scale(p/2.5+20).translate(Q())):d3.geoNaturalEarth1().center([t,e]).scale(p/2.5*i).translate(Q());var a,tt=d3.geoPath().projection(C);function o(t){Ft.debug.info({fct:Ut.featureDetails.name+" - drawD3Map",geoJSONData:t,featureDetails:Ut.featureDetails});var e,i=K.append("g");P&&((e=K.append("defs").append("radialGradient").attr("id",k).attr("cx","75%").attr("cy","25%")).append("stop").attr("offset","5%").attr("stop-color","#fff"),e.append("stop").attr("offset","100%").attr("stop-color","rgb(240,240,240)"),(e=K.append("defs").append("radialGradient").attr("id",I).attr("cx","75%").attr("cy","25%")).append("stop").attr("offset","5%").attr("stop-color","rgb(250,250,250)").attr("stop-opacity","0.3"),e.append("stop").attr("offset","100%").attr("stop-color","rgb(230,230,230)").attr("stop-opacity","0.15"),(e=K.append("defs").append("radialGradient").attr("id",T).attr("cx","55%").attr("cy","45%")).append("stop").attr("offset","30%").attr("stop-color","#fff").attr("stop-opacity","0"),e.append("stop").attr("offset","100%").attr("stop-color","rgb(220,220,220)").attr("stop-opacity","0.3"),M=i.append("circle").attr("cx",V()/2).attr("cy",p/2).attr("r",C.scale()).style("fill",A)),J&&(y=v),x=i.append("path").attr("d",tt(t)).attr("class","bida-map-path").style("filter",y).style("stroke",q).style("stroke-width",Y).style("fill",G),P&&(O=i.append("circle").attr("cx",V()/2).attr("cy",p/2).attr("r",C.scale()).style("fill",N),E=i.append("circle").attr("cx",V()/2).attr("cy",p/2).attr("r",C.scale()).style("fill",S)),H&&(D=v),w=i.selectAll(".bida-map-circle").data(h).enter().append("circle").filter(function(t){return Ut.isDefinedAndNotNull(t.radius)?0<t.radius:0<W}).attr("class","bida-map-circle").style("filter",D).attr("fill",function(t){return t.color||j}).style("opacity",B).on("mouseover",function(t,e){Ut.isDefinedAndNotNull(e.link)&&Pt(this).css("cursor","pointer"),Ut.isDefinedAndNotNull(e.tooltip)&&(e=qt(e.tooltip,g,b,Wt),Ut.tooltip.show(e)),Pt(this).css("opacity",F)}).on("mousemove",function(t,e){Ut.isDefinedAndNotNull(e.tooltip)&&Ut.tooltip.setPosition(t)}).on("mouseout",function(){Ut.tooltip.hide()}).on("click",function(t,e){Ut.isDefinedAndNotNull(e.link)&&Ut.link(e.link)}).attr("transform",function(t){return"translate("+C([t.longitude,t.latitude])+")"}).attr("r",function(t){return Gt(t.radius,W)});var n,a,o,r;function s(){x.attr("d",tt(t)),P&&(M.attr("cx",V()/2).attr("cy",p/2).attr("r",C.scale()),O.attr("cx",V()/2).attr("cy",p/2).attr("r",C.scale()),E.attr("cx",V()/2).attr("cy",p/2).attr("r",C.scale())),w.attr("transform",function(t){return"translate("+C([t.longitude,t.latitude])+")"}).attr("r",function(t){if(L&&1.57<d3.geoDistance([t.longitude,t.latitude],C.invert(Q())))return 0;return Gt(t.radius,W)})}function l(){++n%60==0&&(0===Pt(f).length&&$.stop(),n=0),n%3==0&&(o=d3.now()-X,C.rotate([(_*o+R)*a,-10,0]),s())}function d(){!document.hidden&&z.is(":visible")&&(C.translate(Q()),s(),K.attr("width",V()),K.attr("height",p))}function c(){jt.innerItemsIntervals&&jt.innerItemsIntervals[f]&&clearInterval(jt.innerItemsIntervals[f])}function u(){jt.innerItemsIntervals[f]=setInterval(function(){0===Pt(f).length?clearInterval(jt.innerItemsIntervals[f]):Ut.isBetween(z.width(),z.find("svg").width(),Bt)||(Ft.debug.info({fct:Ut.featureDetails.name+" - drawD3Map",msg:"Map has resize problem",featureDetails:Ut.featureDetails}),d())},jt.defTime)}L?(n=0,a=-1,"left"===(m.tourDirection||g.mapOptions.tour.direction)&&(a=1),$=d3.timer(l),jt.d3Timer.push($),K.on("mouseover",function(){Z=d3.now()-X,$.stop()}),K.on("mouseout",function(){X=d3.now()-Z,$.restart(l)}),document.addEventListener("visibilitychange",function(){document.hidden?$.stop():$.restart(l)})):U&&(r=d3.zoom().scaleExtent([1,8]).on("zoom",function(t,e){i.attr("transform",t.transform)}),K.call(r),K.on("contextmenu",function(t){t.preventDefault(),K.call(r.transform,d3.zoomIdentity.scale(1))})),Pt(window).resize(function(){d()}),c(),u(),document.addEventListener("visibilitychange",function(){(document.hidden?c:u)()})}L?it.tour?o(it.tour):(a=et+"world-tour.json",Pt.getJSON(a,function(t){it.tour=t,o(it.tour)})):it.zoom?o(it.zoom):(a=et+"world-zoom.json",Pt.getJSON(a,function(t){it.zoom=t,o(it.zoom)}))}catch(t){Pt(f).empty(),Ut.errorMessage.show(f,g.errorMessage),Ft.debug.error({fct:Ut.featureDetails.name+" - drawD3Map",msg:"Error while try to render clock",err:t,featureDetails:Ut.featureDetails})}}(e,m,n.itemData,c,a,h):(Ut.errorMessage.show(e,a.errorMessage),Ft.debug.error({fct:Ut.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Maps is not activaed.",featureDetails:Ut.featureDetails}));break;case"clock":-1<Pt.inArray("clock",a.features)?function(i,t,n,a,o){Ft.debug.info({fct:Ut.featureDetails.name+" - drawClock",pItemSel:i,pItemHeight:t,pItemData:n,pItemConfig:a,pDefaultConfig:o,featureDetails:Ut.featureDetails});try{var r,s,l,d,c,u,f,p,h,m,g,b,v,y,D,x,w,C,k,I,T,A,N,S,M,O,e=Pt(i),E=Pt(i).attr("id")+"-clock",z=Pt(i).attr("id")+"-shadow",L="#"+E,_=Pt(i).attr("id")+"-clockhands",R=.0174532925,H=30,W=-10,j=0,B=new Date,F=Gt(a.secondLabel,o.clockOptions.second.label,!0),P=Gt(a.shadows,o.clockOptions.shadows,!0),U=Gt(a.circleWidth,o.clockOptions.circle.width);function G(){return e.width()}function q(){return Math.floor(t/2)-2}if(U<=0&&(P=!1),Ut.isDefinedAndNotNull(n)&&Ut.isDefinedAndNotNull(n.startDate))try{var Y=Date.parse(n.startDate);j=Y-B}catch(t){Ft.debug.error({fct:Ut.featureDetails.name+" - drawClock",msg:"Error while try to parse clock date: itemData has to be an iso date. The local time will be used.",err:t,featureDetails:Ut.featureDetails})}function J(t){var e,i="";return Ut.isDefinedAndNotNull(t)&&(e=Ft.locale.getLanguage(),i=(i=t.replace("#date#",B.toLocaleDateString(e))).replace("#time#",B.toLocaleTimeString(e)),i=Ut.cutString(i,15)),i}function V(){var t,e=F?1.05:1.2;N=Math.min(G()/2,q()*e-U/3),I=d3.scaleLinear().range([0,330]).domain([0,11]),T=d3.scaleLinear().range([0,354]).domain([0,59]),A=d3.scaleLinear().range([0,354]).domain([0,59]),r=.35*N,s=.55*N,d=l=.7*N,c=.6*N,u=.1*N,f=.51*N,M=.75*N,D=.835*N+U/3,h=Math.max(Math.floor(.12*N),12),m=Math.max(Math.floor(.1*N),9),p=h/2.15,x=m/2.15,v=Math.floor(.13*N),b=.3*N,g=-.3*N+v,y=.03*N*Gt(a.handsCoverSize,o.clockOptions.hands.coverSize),S=[{type:"hour",value:0,length:-r,scale:I},{type:"minute",value:0,length:-s,scale:T},{type:"second",value:0,length:-l,scale:A,balance:H}],Z(),(w=w||d3.select(i).append("svg").attr("id",E).attr("class","bida-clock-svg")).attr("width",G()).attr("height",2*q()),C||(C=w.append("g").attr("transform","translate("+G()/2+","+q()+")"),P&&(nt(w,z,2,2,1),O="url(#"+z+")"),C.append("g").append("circle").attr("class","bida-clock-circle").style("filter",O).style("stroke",Gt(a.circleColor,o.clockOptions.circle.color)).style("stroke-width",U+"px").style("fill",Gt(a.circleFillColor,o.clockOptions.circle.fillColor)),C.selectAll(".bida-clock-second-tick").data(d3.range(0,60)).enter().append("line").attr("class","bida-clock-second-tick").attr("x1",0).attr("x2",0),C.selectAll(".bida-clock-hour-tick").data(d3.range(0,12)).enter().append("line").attr("class","bida-clock-hour-tick").attr("x1",0).attr("x2",0),C.selectAll(".bida-clock-hour-label").data(d3.range(3,13,3)).enter().append("text").attr("class","bida-clock-hour-label").attr("text-anchor","middle"),C.append("text").attr("x",0).attr("class","bida-clock-label").attr("text-anchor","middle"),C.append("text").attr("x",0).attr("class","bida-clock-label2").attr("text-anchor","middle"),F&&C.selectAll(".bida-clock-second-label").data(d3.range(5,61,5)).enter().append("text").attr("class","bida-clock-second-label").attr("text-anchor","middle")),C.attr("transform","translate("+G()/2+","+q()+")"),C.selectAll(".bida-clock-circle").attr("x",0).attr("y",0).attr("r",M),C.selectAll(".bida-clock-second-tick").attr("y1",d).attr("y2",d+W).attr("transform",function(t){return"rotate("+A(t)+")"}).style("stroke",Gt(a.secondTickColor,o.clockOptions.second.tickColor)),C.selectAll(".bida-clock-hour-tick").attr("y1",c).attr("y2",c+u).attr("transform",function(t){return"rotate("+I(t)+")"}).style("stroke",Gt(a.hourTickColor,o.clockOptions.hour.tickColor)),C.selectAll(".bida-clock-hour-label").attr("x",function(t){return f*Math.sin(I(t)*R)}).attr("y",function(t){return-f*Math.cos(I(t)*R)+p}).text(function(t){return t}).style("font-size",h+"px").style("fill",Gt(a.hourLabelColor,o.clockOptions.hour.labelColor)),Ut.isDefinedAndNotNull(F)&&C.selectAll(".bida-clock-second-label").attr("x",function(t){return D*Math.sin(A(t)*R)}).attr("y",function(t){return-D*Math.cos(A(t)*R)+x}).text(function(t){return t}).style("font-size",m+"px").style("fill",Gt(a.secondLabelColor,o.clockOptions.second.labelColor)),Ut.isDefinedAndNotNull(n)&&Ut.isDefinedAndNotNull(n.label)&&(t=J(n.label),C.selectAll(".bida-clock-label").text(t).attr("y",g).style("font-size",v+"px").style("fill",Gt(a.labelColor,o.clockOptions.label.labelColor))),Ut.isDefinedAndNotNull(n)&&Ut.isDefinedAndNotNull(n.label2)&&(t=J(n.label2),C.selectAll(".bida-clock-label2").text(t).attr("y",b).style("font-size",v+"px").style("fill",Gt(a.labelColor2,o.clockOptions.label.labelColor2))),k||(k=C.append("g").attr("id",_),C.append("g").append("circle").attr("class","bida-clock-hands-cover"),k.selectAll("line").data(S).enter().append("line")),C.selectAll(".bida-clock-hands-cover").attr("x",0).attr("y",0).attr("r",y).style("fill",Gt(a.handCoverFillColor,o.clockOptions.hands.coverFillColor)).style("stroke",Gt(a.handCoverStrokeColor,o.clockOptions.hands.coverStrokeColor)),k.selectAll("line").data(S).attr("class",function(t){return"bida-clock-"+t.type+"-hand"}).attr("x1",0).attr("y1",function(t){return t.balance||0}).attr("x2",0).attr("y2",function(t){return t.length}).attr("transform",function(t){return"rotate("+t.scale(t.value)+")"}).style("stroke",Gt(a.handColor,o.clockOptions.hands.color))}function Q(){!document.hidden&&e.is(":visible")&&V()}function $(){jt.innerItemsIntervals&&jt.innerItemsIntervals[i]&&clearInterval(jt.innerItemsIntervals[i])}function X(){jt.innerItemsIntervals[i]=setInterval(function(){0===Pt(i).length?clearInterval(jt.innerItemsIntervals[i]):Ut.isBetween(e.width(),e.find("svg").width(),Bt)||(Ft.debug.info({fct:Ut.featureDetails.name+" - drawClock",msg:"Clock has resize problem",featureDetails:Ut.featureDetails}),Q())},jt.defTime)}function Z(){(B=new Date).setMilliseconds(B.getMilliseconds()+j),S[0].value=B.getHours()%12+B.getMinutes()/60,S[1].value=B.getMinutes(),S[2].value=B.getSeconds()}function K(){jt.innerItemsIntervals&&jt.innerItemsIntervals[L]&&clearInterval(jt.innerItemsIntervals[L])}function tt(){jt.innerItemsIntervals[L]=setInterval(function(){var t;0===Pt(L).length?clearInterval(jt.innerItemsIntervals[L]):(Z(),k&&k.selectAll("line").data(S).attr("transform",function(t){return"rotate("+t.scale(t.value)+")"}),C&&(Ut.isDefinedAndNotNull(n)&&Ut.isDefinedAndNotNull(n.label)&&(t=J(n.label),C.selectAll(".bida-clock-label").text(t)),Ut.isDefinedAndNotNull(n)&&Ut.isDefinedAndNotNull(n.label2)&&(t=J(n.label2),C.selectAll(".bida-clock-label2").text(t))))},1e3)}V(),Pt(window).resize(function(){Q()}),$(),X(),document.addEventListener("visibilitychange",function(){(document.hidden?$:X)()}),K(),tt(),document.addEventListener("visibilitychange",function(){(document.hidden?K:tt)()})}catch(t){Pt(i).empty(),Ut.errorMessage.show(i,o.errorMessage),Ft.debug.error({fct:Ut.featureDetails.name+" - drawClock",msg:"Error while try to render clock",err:t,featureDetails:Ut.featureDetails})}}(e,m,n.itemData,c,a):(Ut.errorMessage.show(e,a.errorMessage),Ft.debug.error({fct:Ut.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Analogue Clocks is not activaed.",featureDetails:Ut.featureDetails}));break;case"calendar":-1<Pt.inArray("calendar",a.features)?function(t,e,i,n,a,o,r){Ft.debug.info({fct:Ut.featureDetails.name+" - drawCalendar",pItemSel:t,pItemHeight:e,pItemData:i,pItemConfig:n,pDefaultConfig:a,pOversize:o,pIsSafeItem:r,featureDetails:Ut.featureDetails});var s=Pt(t),l=s.attr("id")+"-calendar",d=Ft.locale.getLanguage(),c=Pt("<div></div>");c.addClass("bida-calendar"),c.attr("id",l),s.append(c);var u=Gt(n.eventLimitPerDay,a.calendarOptions.eventLimitPerDay),f=Gt(n.displayTime,a.calendarOptions.displayTime,!0),t=Gt(n.viewType,a.calendarOptions.viewType),s=Gt(n.hours12,a.calendarOptions.hours12,!0),n=Gt(n.timeGridStartTime,a.calendarOptions.timeGridStartTime);s||"en"!=d||(d="en-bz");var p={month:"2-digit",year:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:s,locale:d};["dayGridMonth","dayGridWeek","timeGridWeek","listWeek","listMonth","listDay"].indexOf(t)<0&&(t="dayGridMonth");l=document.getElementById(l),n=new FullCalendar.Calendar(l,{height:e,events:i,displayEventTime:f,initialView:t,eventDisplay:"block",eventMouseEnter:function(t){var e=Pt("<div></div>");e.addClass("bida-calendar-event-tt");var i=Pt("<b></b>");i.addClass("bida-calendar-event-tt-title");var n=qt(t.event.title,a,r,Wt);Ut.isDefinedAndNotNull(n)&&(i.append(n),e.append(i),e.append("<br>"));n=Pt("<div></div>");n.addClass("bida-calendar-event-tt-subtitle");i=Pt("<span></span>");i.addClass("fa fa-clock-o"),i.addClass("bida-calendar-event-tt-icon"),n.append(i);i=Pt("<span></span>");i.addClass("bida-calendar-event-tt-date"),i.append(" "),i.append(FullCalendar.formatDate(t.event.start,p)),Ut.isDefinedAndNotNull(t.event.end)&&(i.append(" - "),i.append(FullCalendar.formatDate(t.event.end,p))),n.append(i),e.append(n),Ut.isDefinedAndNotNull(t.event.extendedProps.details)&&(i=qt(t.event.extendedProps.details,a,r,Wt),Ut.isDefinedAndNotNull(i)&&((n=Pt("<div></div>")).addClass("bida-calendar-event-tt-content"),n.append(i),e.append(n))),Ut.tooltip.show(e),Ut.tooltip.setPosition(t.jsEvent)},eventMouseLeave:function(){Ut.tooltip.hide()},eventClick:function(){Ut.tooltip.hide()},dayMaxEventRows:u,eventDidMount:function(t){var e=qt(t.event.title,a,r,Wt);Pt(t.el).find(".fc-event-title").html(e),Pt(t.el).find(".fc-list-event-title").find("a").html(e)},allDaySlot:!1,nowIndicator:!0,views:{dayGrid:{}},eventTimeFormat:{hour:p.hour,minute:p.minute,hour12:p.hour12},scrollTime:n,slotLabelFormat:{hour:p.hour,minute:p.minute,hour12:p.hour12}});n.setOption("locale",d),n.changeView(t),n.render(),!0!==o&&(c.css("height",e),c.addClass("bida-item-div-overflow"),W(c))}(e,m,n.itemData,c,a,p,h):(Ut.errorMessage.show(e,a.errorMessage),Ft.debug.error({fct:Ut.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Calendar is not activaed.",featureDetails:Ut.featureDetails}));break;case"note":-1<Pt.inArray("note",a.features)?function(n,a,t,e,i,o,r,s){Ft.debug.info({fct:Ut.featureDetails.name+" - drawNoteEditor",pItemID:n,pItemSel:a,pItemHeight:t,pItemData:e,pItemConfig:i,pDefaultConfig:o,pOversize:r,pIsSafeItem:s,featureDetails:Ut.featureDetails});var i=Pt(a),r=i.attr("id")+"-note",l=Pt("<div></div>");l.addClass("bida-note"),l.attr("id",r),l.css("height",t),i.append(l);var d=r+"-save";function c(){Pt("#"+d).parent().addClass("pell-button-disabled")}pell.init({element:document.getElementById(r),onChange:function(t){Pt("#"+d).parent().removeClass("pell-button-disabled")},defaultParagraphSeparator:"p",styleWithCSS:!1,classes:{actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},actions:[{name:"Save",icon:'<i id="'+d+'" class="fa fa-save-as pell-button-c"></i>',title:"Save",result:function(){var t=l.find(".pell-content");Ut.loader.start(a),c();var e=t.html(),i=Ut.splitString2Array(e),t=o.items2Submit;Ft.server.plugin(g,{pageItems:t,x01:"noteUpload",x02:n,f01:i},{dataType:"text",success:function(t){Ut.loader.stop(a),y.trigger("shortnotesaved",{itemID:n,itemSel:a,clob:e}),Ft.debug.info({fct:Ut.featureDetails.name+" - drawNoteEditor",msg:"Upload successful.",featureDetails:Ut.featureDetails})},error:function(t,e,i){Ut.loader.stop(a),Ft.message.clearErrors(),Ft.message.showErrors([{type:"error",location:["page"],message:o.errorMessage,unsafe:!1}]),Ft.debug.info({fct:Ut.featureDetails.name+" - drawNoteEditor",msg:"Error while try to upload NoteEditor Content",jqXHR:t,textStatus:e,errorThrown:i,featureDetails:Ut.featureDetails})}})}},{name:"bold",icon:'<i class="fa fa-bold pell-button-c"></i>',title:"Bold"},{name:"italic",icon:'<i class="fa fa-italic pell-button-c"></i>',title:"Italic"},{name:"underline",icon:'<i class="fa fa-underline pell-button-c"></i>',title:"Underline"},{name:"strikethrough",icon:'<i class="fa fa-strikethrough pell-button-c"></i>',title:"Strikethrough"},{name:"heading1",icon:'<i class="fa fa-header pell-button-c"><sub>1</sub></i>',title:"Heading 1"},{name:"heading2",icon:'<i class="fa fa-header pell-button-c"><sub>2</sub></i>',title:"Heading 2"},{name:"paragraph",icon:'<i class="fa fa-paragraph pell-button-c"></i>'},{name:"olist",icon:'<i class="fa fa-list-ol pell-button-c"></i>',title:"Ordered List"},{name:"ulist",icon:'<i class="fa fa-list-ul pell-button-c"></i>',title:"Unordered List"}]}),r=e&&"object"==typeof e?e.text:e;r=qt(r,o,s,Wt);e=l.find(".pell-content"),s=l.find(".pell-actionbar").height();e.html(r),e.css("height",l.height()-s),c(),l.find(".pell-button").removeAttr("title")}(n.itemID,e,m,n.itemData,c,a,p,h):(Ut.errorMessage.show(e,a.errorMessage),Ft.debug.error({fct:Ut.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Editor is not activaed.",featureDetails:Ut.featureDetails}));break;default:Ut.errorMessage.show(e,a.errorMessage),Ft.debug.error({fct:Ut.featureDetails.name+" - drawItemRegionContent",msg:"itemType not found (html, card, list, map, table, clock, calendar)",featureDetails:Ut.featureDetails})}else Ut.noDataMessage.show(e,a.noDataMessage);Ut.isDefinedAndNotNull(n.subText2)&&((i=Pt(e).find(".bida-item-subtext-2")).appendTo(e),i.addClass("bida-item-subtext-2-fin"))}else Ut.errorMessage.show(e,a.errorMessage),Ft.debug.error({fct:Ut.featureDetails.name+" - drawItemRegionContent",msg:"itemType is missing in JSON",featureDetails:Ut.featureDetails})}function W(t){var e=Pt(t);e.addClass("bida-item-div-overflow"),e.on("scroll",function(){e.scrollTop()+e.innerHeight()>=e[0].scrollHeight?e.addClass("bida-item-div-overflow-hidden"):e.removeClass("bida-item-div-overflow-hidden")});var i=e.innerHeight(),t=e[0].scrollHeight;Ft.debug.info({fct:Ut.featureDetails.name+" - overFlowStyling",innerHeight:i,scrollHeight:t,featureDetails:Ut.featureDetails}),t<=i&&0!==t&&e.addClass("bida-item-div-overflow-hidden")}}}};