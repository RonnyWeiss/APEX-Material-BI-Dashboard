!function(e,i){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("jquery")):e.jQueryBridget=i(e,e.jQuery)}(window,function(t,e){"use strict";var i=Array.prototype.slice,n=t.console,u=void 0===n?function(){}:function(t){n.error(t)};function o(l,c,d){(d=d||e||t.jQuery)&&(c.prototype.option||(c.prototype.option=function(t){d.isPlainObject(t)&&(this.options=d.extend(!0,this.options,t))}),d.fn[l]=function(t){if("string"!=typeof t)return s=t,this.each(function(t,e){var i=d.data(e,l);i?(i.option(s),i._init()):(i=new c(e,s),d.data(e,l,i))}),this;var n,o,a,r,s,e=i.call(arguments,1);return o=e,r="$()."+l+'("'+(n=t)+'")',(t=this).each(function(t,e){var i=d.data(e,l);i?(e=i[n])&&"_"!=n.charAt(0)?(i=e.apply(i,o),a=void 0===a?i:a):u(r+" is not a valid method"):u(l+" not initialized. Cannot call methods, i.e. "+r)}),void 0!==a?a:t},a(d))}function a(t){!t||t&&t.bridget||(t.bridget=o)}return a(e||t.jQuery),o}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},t=i[t]=i[t]||[];return-1==t.indexOf(e)&&t.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){t=this._events&&this._events[t];if(t&&t.length){e=t.indexOf(e);return-1!=e&&t.splice(e,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],o=0;o<i.length;o++){var a=i[o];n&&n[a]&&(this.off(t,a),delete n[a]),a.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function p(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],m=h.length;function g(t){t=getComputedStyle(t);return t||e("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}var b,y=!1;function v(t){if(y||(y=!0,(f=document.createElement("div")).style.width="200px",f.style.padding="1px 2px 3px 4px",f.style.borderStyle="solid",f.style.borderWidth="1px 2px 3px 4px",f.style.boxSizing="border-box",(u=document.body||document.documentElement).appendChild(f),d=g(f),b=200==Math.round(p(d.width)),v.isBoxSizeOuter=b,u.removeChild(f)),(t="string"==typeof t?document.querySelector(t):t)&&"object"==typeof t&&t.nodeType){var e=g(t);if("none"==e.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<m;e++)t[h[e]]=0;return t}();var i={};i.width=t.offsetWidth,i.height=t.offsetHeight;for(var n=i.isBorderBox="border-box"==e.boxSizing,o=0;o<m;o++){var a=h[o],r=e[a],r=parseFloat(r);i[a]=isNaN(r)?0:r}var s=i.paddingLeft+i.paddingRight,l=i.paddingTop+i.paddingBottom,c=i.marginLeft+i.marginRight,d=i.marginTop+i.marginBottom,u=i.borderLeftWidth+i.borderRightWidth,f=i.borderTopWidth+i.borderBottomWidth,t=n&&b,n=p(e.width);!1!==n&&(i.width=n+(t?0:s+u));n=p(e.height);return!1!==n&&(i.height=n+(t?0:l+f)),i.innerWidth=i.width-(s+u),i.innerHeight=i.height-(l+f),i.outerWidth=i.width+c,i.outerHeight=i.height+d,i}}return v}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var i=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(t,e){return t[i](e)}}),function(e,i){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("desandro-matches-selector")):e.fizzyUIUtils=i(e,e.matchesSelector)}(window,function(i,a){var l={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},e=Array.prototype.slice;l.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?e.call(t):[t]},l.removeFrom=function(t,e){e=t.indexOf(e);-1!=e&&t.splice(e,1)},l.getParent=function(t,e){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,a(t,e))return t},l.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},l.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.filterFindElements=function(t,n){t=l.makeArray(t);var o=[];return t.forEach(function(t){if(t instanceof HTMLElement)if(n){a(t,n)&&o.push(t);for(var e=t.querySelectorAll(n),i=0;i<e.length;i++)o.push(e[i])}else o.push(t)}),o},l.debounceMethod=function(t,e,n){n=n||100;var o=t.prototype[e],a=e+"Timeout";t.prototype[e]=function(){var t=this[a];clearTimeout(t);var e=arguments,i=this;this[a]=setTimeout(function(){o.apply(i,e),delete i[a]},n)}},l.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},l.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var c=i.console;return l.htmlInit=function(r,s){l.docReady(function(){var t=l.toDashed(s),n="data-"+t,e=document.querySelectorAll("["+n+"]"),t=document.querySelectorAll(".js-"+t),t=l.makeArray(e).concat(l.makeArray(t)),o=n+"-options",a=i.jQuery;t.forEach(function(e){var t=e.getAttribute(n)||e.getAttribute(o);try{i=t&&JSON.parse(t)}catch(t){return void(c&&c.error("Error parsing "+n+" on "+e.className+": "+t))}var i=new r(e,i);a&&a.data(e,s,i)})})},l}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){"use strict";var i=document.documentElement.style,n="string"==typeof i.transition?"transition":"WebkitTransition",o="string"==typeof i.transform?"transform":"WebkitTransform",a={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[n],r={transform:o,transition:n,transitionDuration:n+"Duration",transitionProperty:n+"Property",transitionDelay:n+"Delay"};function s(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}t=s.prototype=Object.create(t.prototype);t.constructor=s,t._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},t.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},t.getSize=function(){this.size=e(this.element)},t.css=function(t){var e,i=this.element.style;for(e in t)i[r[e]||e]=t[e]},t.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],o=t[i?"top":"bottom"],a=parseFloat(n),r=parseFloat(o),t=this.layout.size;-1!=n.indexOf("%")&&(a=a/100*t.width),-1!=o.indexOf("%")&&(r=r/100*t.height),a=isNaN(a)?0:a,r=isNaN(r)?0:r,a-=e?t.paddingLeft:t.paddingRight,r-=i?t.paddingTop:t.paddingBottom,this.position.x=a,this.position.y=r},t.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),o=i?"right":"left",a=this.position.x+t[i?"paddingLeft":"paddingRight"];e[i?"left":"right"]=this.getXValue(a),e[o]="";o=n?"bottom":"top",t=this.position.y+t[n?"paddingTop":"paddingBottom"];e[n?"top":"bottom"]=this.getYValue(t),e[o]="",this.css(e),this.emitEvent("layout",[this])},t.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},t.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},t._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=t==this.position.x&&e==this.position.y;this.setPosition(t,e),!o||this.isTransitioning?((o={}).transform=this.getTranslate(t-i,e-n),this.transition({to:o,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})):this.layoutPosition()},t.getTranslate=function(t,e){return"translate3d("+(t=this.layout._getOption("originLeft")?t:-t)+"px, "+(e=this.layout._getOption("originTop")?e:-e)+"px, 0)"},t.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},t.moveTo=t._transitionTo,t.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},t._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},t.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e,i=this._transn;for(e in t.onTransitionEnd)i.onEnd[e]=t.onTransitionEnd[e];for(e in t.to)i.ingProperties[e]=!0,t.isCleaning&&(i.clean[e]=!0);t.from&&(this.css(t.from),this.element.offsetHeight,0),this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var l="opacity,"+o.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()});t.enableTransition=function(){var t;this.isTransitioning||(t=this.layout.options.transitionDuration,this.css({transitionProperty:l,transitionDuration:t="number"==typeof t?t+"ms":t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(a,this,!1))},t.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},t.onotransitionend=function(t){this.ontransitionend(t)};var c={"-webkit-transform":"transform"};t.ontransitionend=function(t){var e,i;t.target===this.element&&(e=this._transn,i=c[t.propertyName]||t.propertyName,delete e.ingProperties[i],function(t){for(var e in t)return;return 1}(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd&&(e.onEnd[i].call(this),delete e.onEnd[i]),this.emitEvent("transitionEnd",[this]))},t.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(a,this,!1),this.isTransitioning=!1},t._removeStyles=function(t){var e,i={};for(e in t)i[e]="";this.css(i)};var d={transitionProperty:"",transitionDuration:"",transitionDelay:""};return t.removeTransitionStyles=function(){this.css(d)},t.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},t.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},t.remove=function(){n&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()},t.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},t.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},t.getHideRevealTransitionEndProperty=function(t){var e,t=this.layout.options[t];if(t.opacity)return"opacity";for(e in t)return e},t.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},t.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},t.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},s}),function(o,a){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(t,e,i,n){return a(o,t,e,i,n)}):"object"==typeof module&&module.exports?module.exports=a(o,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):o.Outlayer=a(o,o.EvEmitter,o.getSize,o.fizzyUIUtils,o.Outlayer.Item)}(window,function(t,e,o,n,a){"use strict";function i(){}var r=t.console,s=t.jQuery,l=0,c={};function d(t,e){var i=n.getQueryElement(t);i?(this.element=i,s&&(this.$element=s(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e),e=++l,this.element.outlayerGUID=e,(c[e]=this)._create(),this._getOption("initLayout")&&this.layout()):r&&r.error("Bad element for "+this.constructor.namespace+": "+(i||t))}d.namespace="outlayer",d.Item=a,d.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var u=d.prototype;function f(t){function e(){t.apply(this,arguments)}return(e.prototype=Object.create(t.prototype)).constructor=e}n.extend(u,e.prototype),u.option=function(t){n.extend(this.options,t)},u._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},d.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},u._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},u.reloadItems=function(){this.items=this._itemize(this.element.children)},u._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],o=0;o<e.length;o++){var a=new i(e[o],this);n.push(a)}return n},u._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},u.getItemElements=function(){return this.items.map(function(t){return t.element})},u.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),t=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},u._init=u.layout,u._resetLayout=function(){this.getSize()},u.getSize=function(){this.size=o(this.element)},u._getMeasurement=function(t,e){var i,n=this.options[t];n?("string"==typeof n?i=this.element.querySelector(n):n instanceof HTMLElement&&(i=n),this[t]=i?o(i)[e]:n):this[t]=0},u.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},u._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},u._layoutItems=function(t,i){var n;this._emitCompleteOnItems("layout",t),t&&t.length&&(n=[],t.forEach(function(t){var e=this._getItemLayoutPosition(t);e.item=t,e.isInstant=i||t.isLayoutInstant,n.push(e)},this),this._processLayoutQueue(n))},u._getItemLayoutPosition=function(){return{x:0,y:0}},u._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},u.updateStagger=function(){var t=this.options.stagger;if(null!=t)return this.stagger=function(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),t=e&&e[1],e=e&&e[2];if(!t.length)return 0;t=parseFloat(t);e=p[e]||1;return t*e}(t),this.stagger;this.stagger=0},u._positionItem=function(t,e,i,n,o){n?t.goTo(e,i):(t.stagger(o*this.stagger),t.moveTo(e,i))},u._postLayout=function(){this.resizeContainer()},u.resizeContainer=function(){var t;!this._getOption("resizeContainer")||(t=this._getContainerSize())&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))},u._getContainerSize=i,u._setContainerMeasure=function(t,e){var i;void 0!==t&&((i=this.size).isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px")},u._emitCompleteOnItems=function(e,t){var i=this;function n(){i.dispatchEvent(e+"Complete",null,[t])}var o,a=t.length;function r(){++o==a&&n()}t&&a?(o=0,t.forEach(function(t){t.once(e,r)})):n()},u.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;this.emitEvent(t,n),s&&(this.$element=this.$element||s(this.element),e?((e=s.Event(e)).type=t,this.$element.trigger(e,i)):this.$element.trigger(t,i))},u.ignore=function(t){t=this.getItem(t);t&&(t.isIgnored=!0)},u.unignore=function(t){t=this.getItem(t);t&&delete t.isIgnored},u.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},u.unstamp=function(t){(t=this._find(t))&&t.forEach(function(t){n.removeFrom(this.stamps,t),this.unignore(t)},this)},u._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n.makeArray(t)},u._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},u._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},u._manageStamp=i,u._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,t=o(t);return{left:e.left-i.left-t.marginLeft,top:e.top-i.top-t.marginTop,right:i.right-e.right-t.marginRight,bottom:i.bottom-e.bottom-t.marginBottom}},u.handleEvent=n.handleEvent,u.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},u.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},u.onresize=function(){this.resize()},n.debounceMethod(d,"onresize",100),u.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},u.needsResizeLayout=function(){var t=o(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},u.addItems=function(t){t=this._itemize(t);return t.length&&(this.items=this.items.concat(t)),t},u.appended=function(t){t=this.addItems(t);t.length&&(this.layoutItems(t,!0),this.reveal(t))},u.prepended=function(t){var e=this._itemize(t);e.length&&(t=this.items.slice(0),this.items=e.concat(t),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(t))},u.reveal=function(t){var i;this._emitCompleteOnItems("reveal",t),t&&t.length&&(i=this.updateStagger(),t.forEach(function(t,e){t.stagger(e*i),t.reveal()}))},u.hide=function(t){var i;this._emitCompleteOnItems("hide",t),t&&t.length&&(i=this.updateStagger(),t.forEach(function(t,e){t.stagger(e*i),t.hide()}))},u.revealItemElements=function(t){t=this.getItems(t);this.reveal(t)},u.hideItemElements=function(t){t=this.getItems(t);this.hide(t)},u.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},u.getItems=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){t=this.getItem(t);t&&e.push(t)},this),e},u.remove=function(t){t=this.getItems(t);this._emitCompleteOnItems("remove",t),t&&t.length&&t.forEach(function(t){t.remove(),n.removeFrom(this.items,t)},this)},u.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();t=this.element.outlayerGUID;delete c[t],delete this.element.outlayerGUID,s&&s.removeData(this.element,this.constructor.namespace)},d.data=function(t){t=(t=n.getQueryElement(t))&&t.outlayerGUID;return t&&c[t]},d.create=function(t,e){var i=f(d);return i.defaults=n.extend({},d.defaults),n.extend(i.defaults,e),i.compatOptions=n.extend({},d.compatOptions),i.namespace=t,i.data=d.data,i.Item=f(a),n.htmlInit(i,t),s&&s.bridget&&s.bridget(t,i),i};var p={ms:1,s:1e3};return d.Item=a,d}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,s){var e=t.create("masonry");e.compatOptions.fitWidth="isFitWidth";t=e.prototype;return t._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},t.measureColumns=function(){this.getContainerWidth(),this.columnWidth||(i=(e=this.items[0])&&e.element,this.columnWidth=i&&s(i).outerWidth||this.containerWidth);var t=this.columnWidth+=this.gutter,e=this.containerWidth+this.gutter,i=e/t,t=t-e%t,i=Math[t&&t<1?"round":"floor"](i);this.cols=Math.max(i,1)},t.getContainerWidth=function(){var t=this._getOption("fitWidth")?this.element.parentNode:this.element,t=s(t);this.containerWidth=t&&t.innerWidth},t._getItemLayoutPosition=function(t){t.getSize();for(var e=t.size.outerWidth%this.columnWidth,i=Math[e&&e<1?"round":"ceil"](t.size.outerWidth/this.columnWidth),i=Math.min(i,this.cols),n=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](i,t),e={x:this.columnWidth*n.col,y:n.y},o=n.y+t.size.outerHeight,a=i+n.col,r=n.col;r<a;r++)this.colYs[r]=o;return e},t._getTopColPosition=function(t){var e=this._getTopColGroup(t),t=Math.min.apply(Math,e);return{col:e.indexOf(t),y:t}},t._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;n<i;n++)e[n]=this._getColGroupY(n,t);return e},t._getColGroupY=function(t,e){if(e<2)return this.colYs[t];e=this.colYs.slice(t,t+e);return Math.max.apply(Math,e)},t._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols,i=1<t&&i+t>this.cols?0:i,e=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=e?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},t._manageStamp=function(t){var e=s(t),i=this._getElementOffset(t),n=this._getOption("originLeft")?i.left:i.right,t=n+e.outerWidth,n=Math.floor(n/this.columnWidth),n=Math.max(0,n),o=Math.floor(t/this.columnWidth);o-=t%this.columnWidth?0:1;for(var o=Math.min(this.cols-1,o),a=(this._getOption("originTop")?i.top:i.bottom)+e.outerHeight,r=n;r<=o;r++)this.colYs[r]=Math.max(a,this.colYs[r])},t._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},t._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},t.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},e}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.pell={})}(this,function(t){"use strict";function r(t,e,i){return t.addEventListener(e,i)}function s(t,e){return t.appendChild(e)}function l(t){return document.createElement(t)}function e(t){return document.queryCommandState(t)}function c(t){return document.execCommand(t,!1,1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)}function i(e){var t=e.actions?e.actions.map(function(t){return"string"==typeof t?p[t]:p[t.name]?d({},p[t.name],t):t}):Object.keys(p).map(function(t){return p[t]}),n=d({},h,e.classes),i=e[u]||"div",o=l("div");o.className=n.actionbar,s(e.element,o);var a=e.element.content=l("div");return a.contentEditable=!0,a.className=n.content,a.oninput=function(t){t=t.target.firstChild;t&&3===t.nodeType?c(f,"<"+i+">"):"<br>"===a.innerHTML&&(a.innerHTML=""),e.onChange(a.innerHTML)},a.onkeydown=function(t){"Enter"===t.key&&"blockquote"===(t=f,document.queryCommandValue(t))&&setTimeout(function(){return c(f,"<"+i+">")},0)},s(e.element,a),t.forEach(function(t){var e,i=l("button");i.className=n.button,i.innerHTML=t.icon,i.title=t.title,i.setAttribute("type","button"),i.onclick=function(){return t.result()&&a.focus()},t.state&&(r(a,"keyup",e=function(){return i.classList[t.state()?"add":"remove"](n.selected)}),r(a,"mouseup",e),r(i,"click",e)),s(o,i)}),e.styleWithCSS&&c("styleWithCSS"),c(u,i),e.element}var d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i,n=arguments[e];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u="defaultParagraphSeparator",f="formatBlock",p={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return e("bold")},result:function(){return c("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return e("italic")},result:function(){return c("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return e("underline")},result:function(){return c("underline")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return e("strikeThrough")},result:function(){return c("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return c(f,"<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return c(f,"<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return c(f,"<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return c(f,"<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return c("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return c("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return c(f,"<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return c("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var t=window.prompt("Enter the link URL");t&&c("createLink",t)}},image:{icon:"&#128247;",title:"Image",result:function(){var t=window.prompt("Enter the image URL");t&&c("insertImage",t)}}},h={actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},n={exec:c,init:i};t.exec=c,t.init=i,t.default=n,Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).DOMPurify=e()}(this,function(){"use strict";const{entries:Ft,setPrototypeOf:r,isFrozen:s,getPrototypeOf:n,getOwnPropertyDescriptor:o}=Object;let{freeze:Bt,seal:t,create:$t}=Object,{apply:a,construct:l}="undefined"!=typeof Reflect&&Reflect;Bt=Bt||function(t){return t},t=t||function(t){return t},a=a||function(t,e,i){return t.apply(e,i)},l=l||function(t,e){return new t(...e)};const jt=d(Array.prototype.forEach),Ut=d(Array.prototype.pop),Jt=d(Array.prototype.push),Gt=d(String.prototype.toLowerCase),Yt=d(String.prototype.toString),qt=d(String.prototype.match),Vt=d(String.prototype.replace),Qt=d(String.prototype.indexOf),Xt=d(String.prototype.trim),Zt=d(RegExp.prototype.test),Kt=(c=TypeError,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return l(c,e)});var c;function d(o){return function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return a(o,t,i)}}function te(e,i,t){let n=2<arguments.length&&void 0!==t?t:Gt;r&&r(e,null);let o=i.length;for(;o--;){let t=i[o];var a;"string"!=typeof t||(a=n(t))!==t&&(s(i)||(i[o]=a),t=a),e[t]=!0}return e}function ee(t){const e=$t(null);for(var[i,n]of Ft(t))e[i]=n;return e}function ie(t,e){for(;null!==t;){var i=o(t,e);if(i){if(i.get)return d(i.get);if("function"==typeof i.value)return d(i.value)}t=n(t)}return function(t){return console.warn("fallback value for",t),null}}const ne=Bt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),oe=Bt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ae=Bt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),re=Bt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),se=Bt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),le=Bt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ce=Bt(["#text"]),de=Bt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ue=Bt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),fe=Bt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),pe=Bt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]);var e=t(/\{\{[\w\W]*|[\w\W]*\}\}/gm),i=t(/<%[\w\W]*|[\w\W]*%>/gm),u=t(/\${[\w\W]*}/gm),f=t(/^data-[\-\w.\u00B7-\uFFFF]/),p=t(/^aria-[\-\w]+$/);const he=t(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i);var h=t(/^(?:\w+script|data):/i),m=t(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);const me=t(/^html$/i);var ge=Object.freeze({__proto__:null,MUSTACHE_EXPR:e,ERB_EXPR:i,TMPLIT_EXPR:u,DATA_ATTR:f,ARIA_ATTR:p,IS_ALLOWED_URI:he,IS_SCRIPT_OR_DATA:h,ATTR_WHITESPACE:m,DOCTYPE_NAME:me});const be=function(){return"undefined"==typeof window?null:window},ye=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let i=null;var n="data-tt-policy-suffix";e&&e.hasAttribute(n)&&(i=e.getAttribute(n));n="dompurify"+(i?"#"+i:"");try{return t.createPolicy(n,{createHTML(t){return t},createScriptURL(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+n+" could not be created."),null}};return function e(t){t=0<arguments.length&&void 0!==t?t:be();const c=t=>e(t);if(c.version="3.0.5",c.removed=[],!t||!t.document||9!==t.document.nodeType)return c.isSupported=!1,c;let{document:a}=t;const s=a,i=s.currentScript,{DocumentFragment:l,HTMLTemplateElement:n,Node:d,Element:r,NodeFilter:o,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:h}=t;t=r.prototype;const m=ie(t,"cloneNode"),g=ie(t,"nextSibling"),b=ie(t,"childNodes"),y=ie(t,"parentNode");"function"!=typeof n||(t=a.createElement("template")).content&&t.content.ownerDocument&&(a=t.content.ownerDocument);let v,D="";const{implementation:x,createNodeIterator:C,createDocumentFragment:k,getElementsByTagName:w}=a,{importNode:T}=s;let S={};c.isSupported="function"==typeof Ft&&"function"==typeof y&&x&&void 0!==x.createHTMLDocument;const{MUSTACHE_EXPR:N,ERB_EXPR:A,TMPLIT_EXPR:I,DATA_ATTR:E,ARIA_ATTR:M,IS_SCRIPT_OR_DATA:L,ATTR_WHITESPACE:_}=ge;let{IS_ALLOWED_URI:O}=ge,z=null;const R=te({},[...ne,...oe,...ae,...se,...ce]);let H=null;const P=te({},[...de,...ue,...fe,...pe]);let W=Object.seal($t(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),F=null,B=null,$=!0,j=!0,U=!1,J=!0,G=!1,Y=!1,q=!1,V=!1,Q=!1,X=!1,Z=!1,K=!0,tt=!1;let et=!0,it=!1,nt,ot=null;const at=te({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let rt=null;const st=te({},["audio","video","img","source","image","track"]);let lt=null;const ct=te({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),dt="http://www.w3.org/1998/Math/MathML",ut="http://www.w3.org/2000/svg",ft="http://www.w3.org/1999/xhtml";let pt=ft,ht=!1,mt=null;const gt=te({},[dt,ut,ft],Yt);let bt=null;const yt=["application/xhtml+xml","text/html"];let vt=null,Dt=null;const xt=a.createElement("form"),Ct=function(t){return t instanceof RegExp||t instanceof Function},kt=function(){let t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!Dt||Dt!==t){if(t&&"object"==typeof t||(t={}),t=ee(t),bt=-1===yt.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,vt="application/xhtml+xml"===bt?Yt:Gt,z="ALLOWED_TAGS"in t?te({},t.ALLOWED_TAGS,vt):R,H="ALLOWED_ATTR"in t?te({},t.ALLOWED_ATTR,vt):P,mt="ALLOWED_NAMESPACES"in t?te({},t.ALLOWED_NAMESPACES,Yt):gt,lt="ADD_URI_SAFE_ATTR"in t?te(ee(ct),t.ADD_URI_SAFE_ATTR,vt):ct,rt="ADD_DATA_URI_TAGS"in t?te(ee(st),t.ADD_DATA_URI_TAGS,vt):st,ot="FORBID_CONTENTS"in t?te({},t.FORBID_CONTENTS,vt):at,F="FORBID_TAGS"in t?te({},t.FORBID_TAGS,vt):{},B="FORBID_ATTR"in t?te({},t.FORBID_ATTR,vt):{},nt="USE_PROFILES"in t&&t.USE_PROFILES,$=!1!==t.ALLOW_ARIA_ATTR,j=!1!==t.ALLOW_DATA_ATTR,U=t.ALLOW_UNKNOWN_PROTOCOLS||!1,J=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,G=t.SAFE_FOR_TEMPLATES||!1,Y=t.WHOLE_DOCUMENT||!1,Q=t.RETURN_DOM||!1,X=t.RETURN_DOM_FRAGMENT||!1,Z=t.RETURN_TRUSTED_TYPE||!1,V=t.FORCE_BODY||!1,K=!1!==t.SANITIZE_DOM,tt=t.SANITIZE_NAMED_PROPS||!1,et=!1!==t.KEEP_CONTENT,it=t.IN_PLACE||!1,O=t.ALLOWED_URI_REGEXP||he,pt=t.NAMESPACE||ft,W=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&Ct(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&Ct(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(W.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),G&&(j=!1),X&&(Q=!0),nt&&(z=te({},[...ce]),H=[],!0===nt.html&&(te(z,ne),te(H,de)),!0===nt.svg&&(te(z,oe),te(H,ue),te(H,pe)),!0===nt.svgFilters&&(te(z,ae),te(H,ue),te(H,pe)),!0===nt.mathMl&&(te(z,se),te(H,fe),te(H,pe))),t.ADD_TAGS&&(z===R&&(z=ee(z)),te(z,t.ADD_TAGS,vt)),t.ADD_ATTR&&(H===P&&(H=ee(H)),te(H,t.ADD_ATTR,vt)),t.ADD_URI_SAFE_ATTR&&te(lt,t.ADD_URI_SAFE_ATTR,vt),t.FORBID_CONTENTS&&(ot===at&&(ot=ee(ot)),te(ot,t.FORBID_CONTENTS,vt)),et&&(z["#text"]=!0),Y&&te(z,["html","head","body"]),z.table&&(te(z,["tbody"]),delete F.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw Kt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw Kt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=t.TRUSTED_TYPES_POLICY,D=v.createHTML("")}else void 0===v&&(v=ye(h,i)),null!==v&&"string"==typeof D&&(D=v.createHTML(""));Bt&&Bt(t),Dt=t}},wt=te({},["mi","mo","mn","ms","mtext"]),Tt=te({},["foreignobject","desc","title","annotation-xml"]),St=te({},["title","style","font","a","script"]),Nt=te({},oe);te(Nt,ae),te(Nt,re);const At=te({},se);te(At,le);const It=function(e){Jt(c.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},Et=function(t,e){try{Jt(c.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){Jt(c.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!H[t])if(Q||X)try{It(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},Mt=function(t){let e=null,i=null;V?t="<remove></remove>"+t:(n=qt(t,/^[\r\n\t ]+/),i=n&&n[0]),"application/xhtml+xml"===bt&&pt===ft&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var n=v?v.createHTML(t):t;if(pt===ft)try{e=(new p).parseFromString(n,bt)}catch(t){}if(!e||!e.documentElement){e=x.createDocument(pt,"template",null);try{e.documentElement.innerHTML=ht?D:n}catch(t){}}const o=e.body||e.documentElement;return t&&i&&o.insertBefore(a.createTextNode(i),o.childNodes[0]||null),pt===ft?w.call(e,Y?"html":"body")[0]:Y?e.documentElement:o},Lt=function(t){return C.call(t.ownerDocument||t,t,o.SHOW_ELEMENT|o.SHOW_COMMENT|o.SHOW_TEXT,null)},_t=function(t){return"function"==typeof d&&t instanceof d},Ot=function(t,e,i){S[t]&&jt(S[t],t=>{t.call(c,e,i,Dt)})},zt=function(e){let i=null;if(Ot("beforeSanitizeElements",e,null),(t=e)instanceof f&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof u)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes))return It(e),!0;var t=vt(e.nodeName);if(Ot("uponSanitizeElement",e,{tagName:t,allowedTags:z}),e.hasChildNodes()&&!_t(e.firstElementChild)&&Zt(/<[/\w]/g,e.innerHTML)&&Zt(/<[/\w]/g,e.textContent))return It(e),!0;if(z[t]&&!F[t])return e instanceof r&&!function(t){let e=y(t);e&&e.tagName||(e={namespaceURI:pt,tagName:"template"});var i=Gt(t.tagName),n=Gt(e.tagName);return mt[t.namespaceURI]&&(t.namespaceURI===ut?e.namespaceURI===ft?"svg"===i:e.namespaceURI===dt?"svg"===i&&("annotation-xml"===n||wt[n]):Boolean(Nt[i]):t.namespaceURI===dt?e.namespaceURI===ft?"math"===i:e.namespaceURI===ut?"math"===i&&Tt[n]:Boolean(At[i]):t.namespaceURI===ft?(e.namespaceURI!==ut||Tt[n])&&(e.namespaceURI!==dt||wt[n])&&!At[i]&&(St[i]||!Nt[i]):"application/xhtml+xml"===bt&&mt[t.namespaceURI])}(e)||("noscript"===t||"noembed"===t||"noframes"===t)&&Zt(/<\/no(script|embed|frames)/i,e.innerHTML)?(It(e),!0):(G&&3===e.nodeType&&(i=e.textContent,jt([N,A,I],t=>{i=Vt(i,t," ")}),e.textContent!==i&&(Jt(c.removed,{element:e.cloneNode()}),e.textContent=i)),Ot("afterSanitizeElements",e,null),!1);if(!F[t]&&Ht(t)){if(W.tagNameCheck instanceof RegExp&&Zt(W.tagNameCheck,t))return!1;if(W.tagNameCheck instanceof Function&&W.tagNameCheck(t))return!1}if(et&&!ot[t]){const o=y(e)||e.parentNode;var n=b(e)||e.childNodes;if(n&&o)for(let t=n.length-1;0<=t;--t)o.insertBefore(m(n[t],!0),g(e))}return It(e),!0},Rt=function(t,e,i){if(K&&("id"===e||"name"===e)&&(i in a||i in xt))return!1;if((!j||B[e]||!Zt(E,e))&&(!$||!Zt(M,e)))if(!H[e]||B[e]){if(!(Ht(t)&&(W.tagNameCheck instanceof RegExp&&Zt(W.tagNameCheck,t)||W.tagNameCheck instanceof Function&&W.tagNameCheck(t))&&(W.attributeNameCheck instanceof RegExp&&Zt(W.attributeNameCheck,e)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(e))||"is"===e&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&Zt(W.tagNameCheck,i)||W.tagNameCheck instanceof Function&&W.tagNameCheck(i))))return!1}else if(!lt[e]&&!Zt(O,Vt(i,_,""))&&("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==Qt(i,"data:")||!rt[t])&&(!U||Zt(L,Vt(i,_,"")))&&i)return!1;return!0},Ht=function(t){return 0<t.indexOf("-")},Pt=function(i){Ot("beforeSanitizeAttributes",i,null);var{attributes:n}=i;if(n){const l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H};let t=n.length;for(;t--;){var{name:o,namespaceURI:a,value:r}=n[t],s=vt(o);let e="value"===o?r:Xt(r);if(l.attrName=s,l.attrValue=e,l.keepAttr=!0,l.forceKeepAttr=void 0,Ot("uponSanitizeAttribute",i,l),e=l.attrValue,!l.forceKeepAttr&&(Et(o,i),l.keepAttr))if(J||!Zt(/\/>/i,e)){if(G&&jt([N,A,I],t=>{e=Vt(e,t," ")}),r=vt(i.nodeName),Rt(r,s,e)){if(!tt||"id"!==s&&"name"!==s||(Et(o,i),e="user-content-"+e),v&&"object"==typeof h&&"function"==typeof h.getAttributeType&&!a)switch(h.getAttributeType(r,s)){case"TrustedHTML":e=v.createHTML(e);break;case"TrustedScriptURL":e=v.createScriptURL(e)}try{a?i.setAttributeNS(a,o,e):i.setAttribute(o,e),Ut(c.removed)}catch(t){}}}else Et(o,i)}Ot("afterSanitizeAttributes",i,null)}},Wt=function t(e){var i;const n=Lt(e);for(Ot("beforeSanitizeShadowDOM",e,null);i=n.nextNode();)Ot("uponSanitizeShadowNode",i,null),zt(i)||(i.content instanceof l&&t(i.content),Pt(i));Ot("afterSanitizeShadowDOM",e,null)};return c.sanitize=function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};let n=null,o=null;if(ht=!t,"string"!=typeof(t=ht?"\x3c!--\x3e":t)&&!_t(t)){if("function"!=typeof t.toString)throw Kt("toString is not a function");if("string"!=typeof(t=t.toString()))throw Kt("dirty is not a string, aborting")}if(!c.isSupported)return t;if(q||kt(i),c.removed=[],"string"==typeof t&&(it=!1),it){if(t.nodeName&&(i=vt(t.nodeName),!z[i]||F[i]))throw Kt("root node is forbidden and cannot be sanitized in-place")}else if(t instanceof d)n=Mt("\x3c!----\x3e"),1===(i=n.ownerDocument.importNode(t,!0)).nodeType&&"BODY"===i.nodeName||"HTML"===i.nodeName?n=i:n.appendChild(i);else{if(!Q&&!G&&!Y&&-1===t.indexOf("<"))return v&&Z?v.createHTML(t):t;if(n=Mt(t),!n)return Q?null:Z?D:""}n&&V&&It(n.firstChild);const a=Lt(it?t:n);for(;e=a.nextNode();)zt(e)||(e.content instanceof l&&Wt(e.content),Pt(e));if(it)return t;if(Q){if(X)for(o=k.call(n.ownerDocument);n.firstChild;)o.appendChild(n.firstChild);else o=n;return(H.shadowroot||H.shadowrootmode)&&(o=T.call(s,o,!0)),o}let r=Y?n.outerHTML:n.innerHTML;return Y&&z["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&Zt(me,n.ownerDocument.doctype.name)&&(r="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+r),G&&jt([N,A,I],t=>{r=Vt(r,t," ")}),v&&Z?v.createHTML(r):r},c.setConfig=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};kt(t),q=!0},c.clearConfig=function(){Dt=null,q=!1},c.isValidAttribute=function(t,e,i){return Dt||kt({}),t=vt(t),e=vt(e),Rt(t,e,i)},c.addHook=function(t,e){"function"==typeof e&&(S[t]=S[t]||[],Jt(S[t],e))},c.removeHook=function(t){if(S[t])return Ut(S[t])},c.removeHooks=function(t){S[t]&&(S[t]=[])},c.removeAllHooks=function(){S={}},c}()});const apexBIDashBoard=function(Ht,Pt,o,n,B){"use strict";const Wt={featureDetails:{name:"Material-BI-Dashboard",scriptVersion:"23.10.09",utilVersion:"22.11.28",url:"https://github.com/RonnyWeiss",url2:"https://linktr.ee/ronny.weiss",license:"MIT License"},isDefinedAndNotNull:function(t){return null!=t&&""!==t},debounce:function(e,i=50){let n;return(...t)=>{clearTimeout(n),n=setTimeout(function(){e.apply(this,t)},i)}},groupObjectArray:function(t,n){return t&&Array.isArray(t)?t.reduce(function(t,e){var i=e[n];return i&&(t[i="​"+i]=t[i]||[]).push(e),t},{}):[]},link:function(t,e="_parent"){null!=t&&""!==t&&window.open(t,e)},tooltip:{show:function(t,e,i){try{if(0===Pt("#dynToolTip").length){const n=Pt("<div></div>").attr("id","dynToolTip").css("color","#111").css("max-width","400px").css("position","absolute").css("top","0px").css("left","0px").css("z-index","2000").css("background-color","rgba(240, 240, 240, 1)").css("padding","10px").css("display","block").css("top","0").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto");e&&n.css("background-color",e),i&&n.css("max-width",i),Pt("body").append(n)}else Pt("#dynToolTip").css("visibility","visible");Pt("#dynToolTip").html(t),Pt("#dynToolTip").find("*").css("max-width","100%").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto").css("white-space","normal"),Pt("#dynToolTip").find("img").css("object-fit","contain").css("object-position","50% 0%")}catch(t){Ht.debug.error({module:"utils.js",msg:"Error while try to show tooltip",err:t})}},setPosition:function(t){Pt("#dynToolTip").position({my:"left+6 top+6",of:t,collision:"flipfit"})},hide:function(){Pt("#dynToolTip").css("visibility","hidden")},remove:function(){Pt("#dynToolTip").remove()}},escapeHTML:function(t){if(null===t)return null;if(void 0!==t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(t){}return Ht.util.escapeHTML(String(t))}},loader:{start:function(t,e){e&&Pt(t).css("min-height","100px"),Ht.util.showSpinner(Pt(t))},stop:function(t,e){e&&Pt(t).css("min-height",""),Pt(t+" > .u-Processing").remove(),Pt(t+" > .ct-loader").remove()}},splitString2Array:function(i){if(null!=i&&""!==i&&0<i.length){if(Ht&&Ht.server&&Ht.server.chunk)return Ht.server.chunk(i);{let t,e=[];if(8e3<i.length){for(e=[],t=0;t<i.length;)e.push(i.substr(t,8e3)),t+=8e3;return e}return e.push(i),e}}return[]},jsonSaveExtend:function(e,i){let n={},t={};if("string"==typeof i)try{t=JSON.parse(i)}catch(t){Ht.debug.error({module:"util.js",msg:"Error while try to parse targetConfig. Please check your Config JSON. Standard Config will be used.",err:t,targetConfig:i})}else t=Pt.extend(!0,{},i);try{n=Pt.extend(!0,{},e,t)}catch(t){n=Pt.extend(!0,{},e),Ht.debug.error({module:"util.js",msg:"Error while try to merge 2 JSONs into standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used.",err:t,finalConfig:n})}return n},printDOMMessage:{show:function(t,e,i,n){const o=Pt("<div>");if(150<=Pt(t).height()){const r=Pt("<div></div>");var a=Pt("<span></span>").addClass("fa").addClass(i||"fa-info-circle-o").addClass("fa-2x").css("height","32px").css("width","32px").css("margin-bottom","16px").css("color",n||"#D0D0D0");r.append(a);a=Pt("<span></span>").text(e).css("display","block").css("color","#707070").css("text-overflow","ellipsis").css("overflow","hidden").css("white-space","nowrap").css("font-size","12px");o.css("margin","12px").css("text-align","center").css("padding","10px 0").addClass("dominfomessagediv").append(r).append(a)}else{n=Pt("<span></span>").addClass("fa").addClass(i||"fa-info-circle-o").css("font-size","22px").css("line-height","26px").css("margin-right","5px").css("color",n||"#D0D0D0"),e=Pt("<span></span>").text(e).css("color","#707070").css("text-overflow","ellipsis").css("overflow","hidden").css("white-space","nowrap").css("font-size","12px").css("line-height","20px");o.css("margin","10px").css("text-align","center").addClass("dominfomessagediv").append(n).append(e)}Pt(t).append(o)},hide:function(t){Pt(t).children(".dominfomessagediv").remove()}},noDataMessage:{show:function(t,e){Wt.printDOMMessage.show(t,e,"fa-search")},hide:function(t){Wt.printDOMMessage.hide(t)}},errorMessage:{show:function(t,e){Wt.printDOMMessage.show(t,e,"fa-exclamation-triangle","#FFCB3D")},hide:function(t){Wt.printDOMMessage.hide(t)}},cutString:function(e,t){try{return!(t<0)&&e.length>t?e.substring(0,t-3)+"...":e}catch(t){return e}},isBetween:function(t,e,i){i=i||0;return e-i<=t&&t<=e+i}};function V(t){const e=new Date(t);if(Ht.date&&"function"==typeof Ht.date.format)return Ht.date.format(e);t=Ht.locale&&Ht.locale.getLanguage?Ht.locale.getLanguage():void 0;return e.toLocaleDateString(t)}function Ft(t,e,i){return i?void 0!==t&&null!=t?1===t||"true"===t:e:Wt.isDefinedAndNotNull(t)?t:e}function tt(t,e,i,n,o){const a=t.append("defs"),r=a.append("filter").attr("id",e);r.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",o).attr("result","blur"),r.append("feOffset").attr("in","blur").attr("dx",n).attr("dy",i).attr("result","offsetBlur"),r.append("feFlood").attr("in","offsetBlur").attr("flood-color","#000").attr("flood-opacity","0.26").attr("result","offsetColor"),r.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("operator","in").attr("result","offsetBlur");const s=r.append("feMerge");s.append("feMergeNode").attr("in","offsetBlur"),s.append("feMergeNode").attr("in","SourceGraphic")}function Bt(t,e,i,n){return!1!==n?Wt.escapeHTML(t):!0!==i&&-1<Pt.inArray("sanitizer",e.features)&&!0!==i?o.sanitize(t,e.purifyOptions):t}return{initialize:function(u,f,b,l,c,d,p,h,m,g,y,zt,v,X,D,x,C,k){Ht.debug.info({fct:`${Wt.featureDetails.name} - initialize`,arguments:{pRegionID:u,pRegionIDRefresh:f,pAjaxID:b,pNoDataMsg:l,pErrMsg:c,pDefaultConfigJSON:d,pLoadingMethod:p,pFeatures:h,pChartConfigJSON:m,pItems2Submit:g,pItems2SubmitImg:y,pRequireHTMLEscape:zt,pPurifyOptions:v,pMapURL:X,pMapOptions:D,pTableConfigJSON:x,pClockOptions:C,pCalendarOptions:k},featureDetails:Wt.featureDetails});const o="#"+u,Rt=Pt(o),w="#"+f,T=10,a=u+"-sizer";let i,Z={},K={},S=0,N=0;const A={initMasonry:function(){i&&i.destroy();var t="."+u,e={itemSelector:"."+u+"-item",columnWidth:"."+a,horizontalOrder:!1,initLayout:!0,percentPosition:!0,transitionDuration:0,gutter:0};i=new n(t,e)},resizeMasonry:function(){i&&(i.layout(),Pt(document).scrollTop(S))}};if(u&&0<Rt.length){Rt.addClass(u),Wt.loader.start(w);var I={footprint:!0,isSortable:!1,colSpan:12,height:400,refresh:0,backColor:"transparent",color:"inherit",boxShadow:"0px 0px 6px 0.32px rgba(0, 0, 0, 0.26)",optionsLink:{backColor:"transparent",color:"inherit",icon:"fa-link"},optionsLinkTop:{backColor:"transparent",color:"inherit",icon:"fa-link"},title:{backColor:"transparent",color:"inherit",icon:null}},E={header:{background:"white",textAlign:"left",color:"inherit",border:"1px solid rgba(240, 240, 240, 1)"},cells:{background:"transparent",textAlign:"left",color:"inherit",border:"1px solid rgba(240, 240, 240, 1)"},evenRow:{background:"white",textAlign:"left",color:"inherit",borderBottom:"1px solid rgba(240, 240, 240, 1)"},oddRow:{background:"rgb(240,240,240)",textAlign:"left",color:"inherit",borderBottom:"1px solid rgba(240, 240, 240, 1)"}},M={tour:{enabled:!0,direction:"right",speed:2,start:-30,shadowEffect:!0},circles:{color:"rgb(97, 159, 209)",radius:5,opacity:.8,opacityHover:.65,shadows:!1},map:{stroke:"#303030",strokeWidth:"0.5px",color:"#eee",centerLongitude:0,centerLatitude:0,initialZoom:1,zoomEnabled:!0,shadows:!0}},L={axisLabelPosition:"inner3",background:null,chartTitle:null,gauge:{min:0,max:null,type:"single",width:null,arcMinWidth:null,fullCircle:!1,title:null,axisLabels:!0},grid:{x:!0,y:!0},legend:{position:"right",show:!0},line:{step:"step"},padding:{bottom:null,left:null,right:null,top:null},rotateAxis:!1,showDataLabels:!1,showDataPoints:!0,showAbsoluteValues:!1,threshold:.05,tooltip:{grouped:!0,show:!0},transitionDuration:200,x:{axisHeight:null,label:"x Axis",timeFormat:"%Y-%m-%dT%H:%M:%S",type:"category",tick:{cutAfter:30,maxNumber:25,multiline:!1,rotation:60,autoRotate:!0,timeFormat:"%y-%m-%d %H:%M",fit:!0}},y:{label:"y Axis 1",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},y2:{label:"y Axis 2",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},zoom:{enabled:!0,type:"scroll",rescale:!1}},_={ALLOWED_ATTR:["accesskey","align","alt","always","autocomplete","autoplay","border","cellpadding","cellspacing","charset","class","colspan","dir","height","href","id","lang","name","rel","required","rowspan","src","style","summary","tabindex","target","title","type","value","width"],ALLOWED_TAGS:["a","address","b","blockquote","br","caption","code","dd","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","label","li","nl","ol","p","pre","s","span","strike","strong","sub","sup","table","tbody","td","th","thead","tr","u","ul"]},O={shadows:!1,label:{labelColor:"#303030",labelColor2:"#303030"},hour:{labelColor:"#303030",tickColor:"#999"},second:{label:!1,labelColor:"#707070",tickColor:"#ccc"},hands:{color:"#303030",coverFillColor:"white",coverStrokeColor:"#999",coverSize:2},circle:{color:"#ccc",width:5,fillColor:"#eeeeee"}},z={eventLimitPerDay:2,viewType:"dayGridMonth",displayTime:!0,hours12:!1,timeGridStartTime:"06:00:00",stickyHeaderDates:"auto"};let t;Wt.isDefinedAndNotNull(h)&&(t=h.split(":"));let e={},i={},n={},o={},a={},r={},s={};e=Wt.jsonSaveExtend(I,d),e.features=[],t&&0<t.length&&(e.features=t),-1<Pt.inArray("charts",e.features)?(i=Wt.jsonSaveExtend(L,m),e.d3JSchart=i):e.d3JSchart=null,-1<Pt.inArray("table",e.features)?(n=Wt.jsonSaveExtend(E,x),e.table=n):e.table=null,-1<Pt.inArray("sanitizer",e.features)?(o=Wt.jsonSaveExtend(_,v),e.purifyOptions=o):e.purifyOptions=null,-1<Pt.inArray("map",e.features)?(a=Wt.jsonSaveExtend(M,D),e.mapOptions=a):e.mapOptions=null,-1<Pt.inArray("clock",e.features)?(r=Wt.jsonSaveExtend(O,C),e.clockOptions=r):e.clockOptions=null,-1<Pt.inArray("calendar",e.features)?(s=Wt.jsonSaveExtend(z,k),e.calendarOptions=s):e.calendarOptions=null,e.noDataMessage=l,e.errorMessage=c,e.items2Submit=g,e.items2SubmitImg=y,Ht.debug.info({fct:`${Wt.featureDetails.name} - initialize`,finalConfigJSON:e,featureDetails:Wt.featureDetails}),Pt(document).on("scroll touchmove",function(){S=Pt(document).scrollTop()}),R(0,e);try{f?Pt(w).bind("apexrefresh",function(){Ht.debug.info({fct:`${Wt.featureDetails.name} - initialize`,msg:"Refresh event was fired",featureDetails:Wt.featureDetails}),R(0,e,!0)}):Ht.debug.error({fct:`${Wt.featureDetails.name} - initialize`,msg:"Can't bind refresh event because Refresh Region ID is missing",featureDetails:Wt.featureDetails})}catch(t){Ht.debug.error({fct:`${Wt.featureDetails.name} - initialize`,msg:"Can't bind refresh event on",err:t,featureDetails:Wt.featureDetails})}if(0<e.refresh){let t=setInterval(function(){0===Pt(Rt).length?clearInterval(t):(Ht.debug.info({fct:`${Wt.featureDetails.name} - initialize`,msg:"Refresh by time was fired",featureDetails:Wt.featureDetails}),R(0,e,!0))},1e3*e.refresh)}}else Ht.debug.error({fct:`${Wt.featureDetails.name} - initialize`,msg:"Can't find pRegionID: "+u,featureDetails:Wt.featureDetails});function R(t,e,i){i&&(Wt.loader.start(w),N+=1);var n=e.items2Submit;Ht.server.plugin(b,{pageItems:n,x01:"items"},{success:function(t){!function(e,n){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawGridItems`,ajaxResponse:e,featureDetails:Wt.featureDetails}),Rt.empty();const t=Pt("<div></div>").addClass("bida-container-sizer").addClass(a).attr("id",a);Rt.append(t);const i=new ResizeObserver(Wt.debounce(function(){!document.hidden&&t.is(":visible")&&Rt.trigger("resize")}));Rt.on("resize",function(){A.resizeMasonry()}),i.observe(t[0]),K.outerItemIntervals&&0<K.outerItemIntervals.length&&Pt.each(K.outerItemIntervals,function(t,e){clearInterval(e)});K.outerItemIntervals=[],K.innerItemsIntervals&&Pt.each(K.innerItemsIntervals,function(t,e){clearInterval(e)});K.innerItemsIntervals={},K.d3Timer&&0<K.d3Timer.length&&Pt.each(K.d3Timer,function(t,e){e.stop()});if(K.d3Timer=[],e.items&&0<e.items.length){Rt.removeClass("bida-container-nodat"),Pt.each(e.items,function(t,e){let i=n.colSpan;e.colSpan&&(i=e.colSpan),function(t,e,i,n,o){const a=Wt.jsonSaveExtend(null,n),r=u+"--"+t,s="#"+r,l=(n.height||o.height)-T,c=Pt("<div></div>");c.attr("id",r),c.attr("item-id",n.itemID),c.addClass("bida-container-item"),c.addClass(u+"-item"),c.addClass("bida-container-item--width"+e),c.css("min-height",l),c.css("background",n.backColor||o.backColor),c.css("color",n.color||o.color),c.css("box-shadow",n.boxShadow||o.boxShadow),Wt.isDefinedAndNotNull(n.itemID)&&(c.attr("item-id",n.itemID),c.addClass(f+"--"+n.itemID));i.append(c),H(t,l,s,a,o);i=Ft(n.isAsync,!1,!0);if("A"===p&&i&&(Pt(c).on("itemrefresh",function(){n.itemData=null,H(t,l,s,n,o,!0)}),0<n.refresh)){const d=setInterval(function(){0===Pt(s).length?clearInterval(d):(n.itemData=null,H(t,l,s,n,o,!0))},1e3*n.refresh);K.outerItemIntervals.push(d)}}(t,i,Rt,e,n)}),n.footprint&&function(t){const e=Pt("<div></div>");e.css("position","absolute"),e.css("margin","-5px"),e.css("bottom","0px"),e.css("right","10px"),e.css("font-size","9px"),e.css("color","rgb(0,0,0,0.3)"),e.css("line-height","9px");const i=Pt("<i></i>");i.addClass("fa"),i.addClass("fa-heart"),i.css("font-size","9px"),i.css("color","inherit"),i.css("opacity","0.3"),i.css("line-height","10px");const n=Pt("<a></a>");n.attr("href","https://linktr.ee/ronny.weiss"),n.attr("target","_blank"),n.css("color","inherit"),n.append(i);const o=Pt("<i></i>");o.addClass("fa"),o.addClass("fa-apex"),o.css("font-size","9px"),o.css("color","inherit"),o.css("opacity","0.3"),o.css("line-height","10px");const a=Pt("<a></a>");a.attr("href","https://apex.oracle.com"),a.attr("target","_blank"),a.css("color","inherit"),a.append(o),e.append("Build with "),e.append(n),e.append(" for "),e.append(a),Pt(t).append(e)}(Rt),A.initMasonry();let i;const o={delay:50,zIndex:10,items:".bida-container-item",grid:[10,10],tolerance:"pointer",start:function(t,e){i||(i=Pt(e.item).clone(),Pt("body").append(i)),Pt(e.item).hide(),i.fadeIn(),i.css("opacity","0.5"),i.css("filter","grayscale(100%)")},sort:function(t,e){i.css("left",e.offset.left),i.css("top",e.offset.top)},change:function(t,e){Rt.find(".ui-sortable-placeholder").each(function(t,e){Pt(e).css("visibility","visible")}),Pt(e.item).css("left",e.position.left),Pt(e.item).css("top",e.position.top),A.initMasonry()},stop:function(t,e){i.remove(),i="",Pt(e.item).show(),A.initMasonry()},update:function(){const i=[];Rt.find(".bida-container-item").each(function(t,e){e=Pt(e).attr("item-id");i.push(e)}),Ht.debug.info({fct:`${Wt.featureDetails.name} - drawGridItems`,sortInfo:i,featureDetails:Wt.featureDetails}),Rt.trigger("sortorder",i.join(":"))}};let t;n.isSortable&&(t=Rt.sortable(o)),Pt(w).on("sortableOn",function(){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawGridItems`,msg:"sortable on by trigger",featureDetails:Wt.featureDetails}),t||Rt.sortable(o),Rt.sortable("enable")}),Pt(w).on("sortableOff",function(){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawGridItems`,msg:"sortable off by trigger",featureDetails:Wt.featureDetails}),Rt.sortable("disable")})}else Rt.addClass("bida-container-nodat"),Wt.noDataMessage.show(Rt,n.noDataMessage);Wt.loader.stop(w),Rt.trigger("rendered"),Ht.debug.info({fct:`${Wt.featureDetails.name} - drawGridItems`,msg:"Material BI Dashboard rendering finished",featureDetails:Wt.featureDetails})}(t,e),i&&Rt.trigger("refreshed")},error:function(t){t=t,Pt(o).empty(),Pt(o).addClass("bida-container-nodat"),Wt.errorMessage.show(o,e.errorMessage),Wt.loader.stop(w),t.responseText&&Ht.debug.error({fct:`${Wt.featureDetails.name} - getData`,msg:t.responseText,featureDetails:Wt.featureDetails}),i&&Rt.trigger("refreshed")},dataType:"json"})}function H(n,t,o,a,r,e){const s=Pt(o);let l=t;function c(){Wt.loader.stop(o),setTimeout(function(){Wt.loader.stop(o)},100)}t=Ft(a.isAsync,!1,!0);if(e||"A"===p&&t)if(Wt.isDefinedAndNotNull(a.itemID)){t=r.items2Submit;setTimeout(function(){Wt.loader.start(o)},100),Ht.server.plugin(b,{pageItems:t,x01:"itemData",x02:a.itemID,x04:N},{success:function(t,e,i){Ht.debug.info({fct:`${Wt.featureDetails.name} - prepareItemContent`,asyncAjaxReference:N,pData:t,featureDetails:Wt.featureDetails}),parseInt(i.getResponseHeader("ajax-reference"),10)===N?function(t){t=Wt.jsonSaveExtend(a,t);s.empty(),Wt.isDefinedAndNotNull(t.itemID)&&s.attr("item-id",t.itemID),l=(t.height||r.height)-T,s.css("min-height",l),W(n,o,l,t,r),c(),A.resizeMasonry()}(t):Ht.debug.info({fct:`${Wt.featureDetails.name} - prepareItemContent`,msg:"Expired Async AJAX Call returned.",pData:t,featureDetails:Wt.featureDetails})},error:function(t){t=t,s.empty(),t.status&&404===t.status?Wt.noDataMessage.show(o,r.noDataMessage):(Wt.errorMessage.show(o,r.errorMessage),Ht.debug.error({msg:"Error occured in PL/SQL Block for async Loading of Data",data:t,featureDetails:Wt.featureDetails})),c(),A.resizeMasonry()},dataType:"json"})}else s.empty(),Wt.errorMessage.show(o,r.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - prepareItemContent`,msg:"itemID missing in JSON for async load!",featureDetails:Wt.featureDetails});else W(n,o,l,a,r),A.resizeMasonry()}function P(t,e,i,n,o){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawSubText`,pPosition:t,pParent:e,pText:i,pDefaultConfig:n,pIsSafeItem:o,featureDetails:Wt.featureDetails});var a="bida-item-subtext-"+t,r=Pt(e).find("."+a);let s=Pt("<div></div>");r[0]&&(s=r),s.addClass(a);const l=Pt("<span></span>");l.addClass("bida-item-subtext-text"),l.addClass("bida-item-subtext-text-"+t),l.addClass("truncate-text");o=Bt(i,n,o,zt);l.html(o),s.html(l),s.attr("title",l.text()),Pt(e).append(s)}function W(i,n,o,a,r){const t=Pt(n),e="fa-";let s;if(s=a.itemConfig||{},Wt.isDefinedAndNotNull(a.optionsLink)){const d=Pt("<a></a>");d.addClass("bida-item-options-link"),d.attr("href",a.optionsLink),d.css("background-color",a.optionsLinkBackColor||r.optionsLink.backColor);const u=a.optionsLinkIcon||r.optionsLink.icon,f=Pt("<i></i>");Wt.isDefinedAndNotNull(u)&&u.substr(0,e.length)===e?(f.addClass("fa"),f.addClass(u),f.css("color",a.optionsLinkColor||r.optionsLink.color)):f.css("background-image","url("+u+")"),f.addClass("bida-item-options-link-icon"),d.append(f),t.append(d)}if(Wt.isDefinedAndNotNull(a.optionsLinkTop)){const p=Pt("<a></a>");p.addClass("bida-item-options-link-top"),p.attr("href",a.optionsLinkTop),p.css("background-color",a.optionsLinkTopBackColor||r.optionsLinkTop.backColor);const h=a.optionsLinkTopIcon||r.optionsLinkTop.icon,m=Pt("<i></i>");Wt.isDefinedAndNotNull(h)&&h.substr(0,e.length)===e?(m.addClass("fa"),m.addClass(h),m.css("color",a.optionsLinkTopColor||r.optionsLinkTop.color)):m.css("background-image","url("+h+")"),m.addClass("bida-item-options-link-icon"),p.append(m),t.append(p)}var l=Ft(a.isMarked,!1,!0);if(t.removeClass("bida-container-item-marked"),l&&t.addClass("bida-container-item-marked"),Wt.isDefinedAndNotNull(a.itemType)){let t=!1;Wt.isDefinedAndNotNull(a.oversize)&&(t=Ft(a.oversize,!1,!0));let e=!1;Wt.isDefinedAndNotNull(a.noSanitize)&&(e=Ft(a.noSanitize,!1,!0));var c;if(Wt.isDefinedAndNotNull(a.title)&&function(t,e,i,n,o,a,r,s){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawItemTitle`,pText:e,pBackColor:i,pColor:n,pParent:t,pIcon:o,pIconColor:a,pDefaultConfig:r,pIsSafeItem:s,featureDetails:Wt.featureDetails});var l="bida-item-title",c=Pt(t).find("."+l);let d=Pt("<div></div>");c[0]&&(d=c),d.addClass(l),d.css("background",i||r.title.backColor),d.css("color",n||r.title.color);const u=Pt("<span></span>");u.addClass("bida-item-title-text"),u.addClass("truncate-text"),s=Bt(e,r,s,zt),u.html(s),u.attr("title",u.text()),d.html(u);const f=o||r.title.icon,p=a||r.title.iconColor;if(Wt.isDefinedAndNotNull(f)){const h=Pt("<i></i>");"fa-"===f.substr(0,"fa-".length)?(h.addClass("fa"),h.addClass(f),h.css("color",p)):h.css("background-image","url("+f+")"),h.addClass("bida-item-title-icon"),u.prepend(h)}Pt(t).prepend(d)}(n,a.title,a.titleBackColor,a.titleColor,a.titleIcon,a.titleIconColor,r,e),Wt.isDefinedAndNotNull(a.subText1)&&P(1,n,a.subText1,r,e),Wt.isDefinedAndNotNull(a.subText2)&&P(2,n,a.subText2,r,e),c=function(t,e){let i=e;return Pt(t).children(".bida-item-title").each(function(){i=Math.floor(i-Pt(this).height())-1}),Pt(t).children(".bida-item-subtext-1").each(function(){i=Math.floor(i-Pt(this).height())-1}),Pt(t).children(".bida-item-subtext-2").each(function(){i=Math.floor(i-Pt(this).height())-1}),i}(n,o),Wt.isDefinedAndNotNull(a.itemData)||"calendar"===a.itemType||"note"===a.itemType||"clock"===a.itemType)switch(Ht.debug.info({fct:`${Wt.featureDetails.name} - drawItemRegionContent`,msg:"Render Item "+a.itemType+"("+a.title+")",featureDetails:Wt.featureDetails}),a.itemType){case"chart":-1<Pt.inArray("charts",r.features)?a.itemData?function(b,y,v,t,D,x){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawChart`,pItemSel:b,pItemHeight:y,pConfigData:v,pValuesData:t,pDefaultConfig:D,pIsSafeItem:x,featureDetails:Wt.featureDetails});const r=d3,C=["pie","donut","gauge"],k=Wt.groupObjectArray(t,"seriesID");let w=!1,T=!1,S=!1;function e(t,a){try{return t.sort(function(t,e){const i=r.timeParse(a),n=i(t.x),o=i(e.x);return new Date(n).getTime()-new Date(o).getTime()})}catch(t){Ht.debug.error({fct:`${Wt.featureDetails.name} - drawChart`,msg:"Error while try sort JSON Array by Time Value",err:t,featureDetails:Wt.featureDetails})}}try{var N=Ft(v.chartTitle,D.d3JSchart.chartTitle||"").toString(),i=Ft(v.background,D.d3JSchart.background);let n=null,r=!1;Wt.isDefinedAndNotNull(i)&&(n={color:i});var A=Ft(v.lineStep,D.d3JSchart.line.step);const K=Ft(v.gaugeMin,D.d3JSchart.gauge.min),tt=Ft(v.gaugeMax,D.d3JSchart.gauge.max),et=Ft(v.gaugeType,D.d3JSchart.gauge.type),it=Ft(v.gaugeWidth,D.d3JSchart.gauge.width),nt=Ft(v.gaugeArcMinWidth,D.d3JSchart.gauge.arcMinWidth),ot=Ft(v.gaugeFullCircle,D.d3JSchart.gauge.fullCircle,!0),at=Ft(v.gaugeAxisLabels,D.d3JSchart.gauge.axisLabels,!0),rt=Ft(v.gaugeTitle,D.d3JSchart.gauge.title||"").toString();var I=Ft(v.gridX,D.d3JSchart.grid.x,!0),E=Ft(v.gridY,D.d3JSchart.grid.y,!0),M=Ft(v.xAxisHeight,D.d3JSchart.x.axisHeight),L=Ft(v.legendShow,D.d3JSchart.legend.show,!0),_=Ft(v.legendPosition,D.d3JSchart.legend.position);const st=Wt.jsonSaveExtend(null,D.d3JSchart.padding);Wt.isDefinedAndNotNull(v.paddingBottom)&&(st.bottom=v.paddingBottom),Wt.isDefinedAndNotNull(v.paddingLeft)&&(st.left=v.paddingLeft),Wt.isDefinedAndNotNull(v.paddingRight)&&(st.right=v.paddingRight),Wt.isDefinedAndNotNull(v.paddingTop)&&(st.top=v.paddingTop);var O,z=Ft(v.rotateAxis,D.d3JSchart.rotateAxis,!0),R=Ft(v.axisLabelPosition,D.d3JSchart.axisLabelPosition);let o=null,a=null;switch(R){case"inner1":o="inner-left",a="inner-bottom";break;case"inner2":o="inner-center",a="inner-middle";break;case"inner3":o="inner-right",a="inner-top";break;case"outer1":o="outer-left",a="outer-bottom";break;case"outer2":o="outer-center",a="outer-middle";break;case"outer3":o="outer-right",a="outer-top"}z&&(O=o,o=a,a=O);var H=Ft(v.tooltipShow,D.d3JSchart.tooltip.show,!0),P=Ft(v.tooltipGrouped,D.d3JSchart.tooltip.grouped,!0),W=Ft(v.transitionDuration||D.d3JSchart.transitionDuration),F=Ft(v.xShow,D.d3JSchart.x.show,!0),B=Ft(v.xLabel,D.d3JSchart.x.label||"").toString();let s=Ft(v.xType,D.d3JSchart.x.type),l=null,c=null;const lt=Ft(v.xTickCutAfter,D.d3JSchart.x.tick.cutAfter),ct=Ft(v.xTickMaxNumber,D.d3JSchart.x.tick.maxNumber),dt=Ft(v.xTickRotation,D.d3JSchart.x.tick.rotation),ut=Ft(v.xTickMultiline,D.d3JSchart.x.tick.multiline,!0),ft=Ft(v.xTickFit,D.d3JSchart.x.tick.fit,!0),pt=Ft(v.xTickAutoRotate,D.d3JSchart.x.tick.autoRotate,!0);let d=null;"category"!==s&&"timeseries"!==s||(c="x"),"timeseries"===s&&(l=Ft(v.xTimeFormat,D.d3JSchart.x.timeFormat),d=Ft(v.xTickTimeFormat,D.d3JSchart.x.tick.timeFormat),e(t,l)),"category"===s&&(d=function(t,e){return Wt.cutString(e,lt)});var $=Ft(v.yLabel,D.d3JSchart.y.label||"").toString(),j=Ft(v.yLog,D.d3JSchart.y.log,!0);let u=null;j&&(u="log");const ht=v.yMin||D.d3JSchart.y.min,mt=v.yMax||D.d3JSchart.y.max,gt=v.yTickMaxNumber||D.d3JSchart.y.tick.maxNumber,bt=v.yUnit||D.d3JSchart.y.unit;var U=Ft(v.y2Label,D.d3JSchart.y2.label||"").toString(),J=Ft(v.y2Log,D.d3JSchart.y2.log,!0);let f=null,p=!1;J&&(f="log");const yt=Ft(v.y2Min,D.d3JSchart.y2.min),vt=Ft(v.y2Max,D.d3JSchart.y2.max),Dt=Ft(v.y2TickMaxNumber,D.d3JSchart.y2.tick.maxNumber),xt=Ft(v.y2Unit,D.d3JSchart.y2.unit);var G=Ft(v.zoomType,D.d3JSchart.zoom.type);let h=!1,m=Ft(v.zoomEnabled,D.d3JSchart.zoom.enabled,!0);var Y=Ft(v.threshold,D.d3JSchart.threshold);!m||"scroll"===G?h=!1:"subchart"===G?(h=!0,m=!1):"drag"===G&&(m=!0,h=!1);var q,V=Ft(v.zoomRescale,D.d3JSchart.zoom.rescale,!0);const Ct=[],kt=[],wt=[],Tt={},St={},Nt={},At={},It={},Et=Wt.groupObjectArray(t,"x");let g=0;if(k){"category"!==s&&"timeseries"!==s||(kt.push("x"),q=Object.keys(Et),Pt.each(q,function(t,e){kt.push(Ft(e.replace("​",""),null))})),Ct.push(kt),Pt.each(k,function(t,e){let i;if(g+=1,e[0]&&e[0].seriesID){i=e[0];const o=escape(i.seriesID);var n;Tt[o]=i.color,St[o]=i.type,0<=C.indexOf(i.type)&&(m=!1),"gauge"===i.type&&(w=!0),"pie"===i.type&&(T=!0),"donut"===i.type&&(S=!0),Wt.isDefinedAndNotNull(i.tooltip)&&(r=!0),Nt[o]=i.yAxis||"y",Wt.isDefinedAndNotNull(i.groupID)&&(n=escape(i.groupID.toString()),It[n]||(It[n]=[]),It[n].push(o)),"y2"===i.yAxis&&(p=!0),At[o]=Ft(i.label,o);const a=[];a.push(o),"category"===s||"timeseries"===s?Pt.each(Et,function(t,e){let i=null,n=null;Pt.each(e,function(t,e){escape(e.seriesID)===o&&(i=e.y,e.z&&(n=e.z))}),null!==n?a.push({y:i,z:n}):a.push(i)}):Pt.each(e,function(t,e){var i=Ft(e.y,null);e.z?(e=e.z,a.push({y:i,z:e})):a.push(i)}),Ct.push(a)}else Wt.errorMessage.show(b,D.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - drawChart`,msg:"No seriesID found in seriesID Cursor",featureDetails:Wt.featureDetails})}),Pt.each(It,function(t,e){wt.push(e)});let t=Ft(v.showDataLabels,D.d3JSchart.showDataLabels,!0);T||S?t={colors:"white"}:w&&(t={colors:"single"===et&&1<g?"white":null});var Q=Ft(v.showDataPoints,D.d3JSchart.showDataPoints,!0),X=Ft(v.showAbsoluteValues,D.d3JSchart.showAbsoluteValues);let e;X&&(e=function(t){return t+bt});let i;r&&(i=function(t){const r=Pt("<div></div>");return r.addClass("bb-tooltip"),r.addClass("bida-chart-tooltip-custome"),Pt.each(t,function(t,e){var i="​"+unescape(e.id),n=k[i],i=e.index;if(n&&n[i]&&Wt.isDefinedAndNotNull(n[i].tooltip)&&Wt.isDefinedAndNotNull(e.value)){const o=Pt("<div>"),a=Bt(n[i].tooltip,D,x,zt);o.append(a),r.append(o)}}),r[0].outerHTML});try{const Mt=b+"bbc",Lt=Mt.replace("#",""),_t=Pt("<div></div>");_t.attr("id",Lt),Pt(b).append(_t);var Z={bindto:Mt,background:n,title:{text:N},size:{height:y},data:{x:c,xFormat:l,columns:Ct,types:St,groups:wt,colors:Tt,labels:t,axes:Nt,names:At,onclick:function(t){!function(t){var e="​"+unescape(t.id);let i=t.index;k[e]&&(1===k[e].length&&(i=0),k[e][i]&&k[e][i].link&&Wt.link(k[e][i].link,k[e][i].linkTarget))}(t)}},pie:{label:{format:e,threshold:Y}},donut:{label:{format:e,threshold:Y}},line:{step:{type:A}},gauge:{label:{format:e,threshold:Y,extents:function(t){return at?t:null}},fullCircle:ot,min:K,max:tt,type:et,width:it,title:rt,arc:{minWidth:nt}},radar:{direction:{clockwise:!0}},subchart:{show:h},zoom:{type:G,enabled:m,rescale:V},transition:{duration:W},legend:{show:L,position:_},tooltip:{show:H,grouped:P,contents:i},grid:{x:{show:I},y:{show:E}},point:{show:Q},axis:{rotated:z,x:{show:F,label:{text:B,position:o},type:s,tick:{culling:{max:ct},autorotate:pt,rotate:dt,multiline:ut,format:d,fit:ft},height:M},y:{label:{text:$,position:a},type:u,max:mt,min:ht,tick:{culling:{max:gt},format:function(t){return t+bt}}},y2:{show:p,label:{text:U,position:a},type:f,max:vt,min:yt,tick:{culling:{max:Dt},format:function(t){return t+xt}}}},padding:st};Ht.debug.info({fct:`${Wt.featureDetails.name} - drawChart`,finalChartData:Z,featureDetails:Wt.featureDetails});const Ot=bb.generate(Z);m&&Pt(Mt).contextmenu(function(t){t.preventDefault(),Ot.unzoom()}),Rt.on("resize",function(){Ot.resize({height:y})})}catch(t){Pt(b).empty(),Wt.errorMessage.show(b,D.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - drawChart`,msg:"Error while try to render chart",err:t,featureDetails:Wt.featureDetails})}}else Wt.noDataMessage.show(b,D.noDataMessage)}catch(t){Pt(b).empty(),Wt.errorMessage.show(b,D.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - drawChart`,msg:"Error while prepare data for chart",err:t,featureDetails:Wt.featureDetails})}}(n,c,s,a.itemData,r,e):(Wt.errorMessage.show(n,r.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - drawItemRegionContent`,msg:"itemData is missing in JSON",featureDetails:Wt.featureDetails})):(Wt.errorMessage.show(n,r.errorMessage),Ht.debug.info({fct:`${Wt.featureDetails.name} - drawItemRegionContent`,msg:"Feature - Charts is not activated.",featureDetails:Wt.featureDetails}));break;case"calendarheatmap":-1<Pt.inArray("calendarheatmap",r.features)?a.itemData?function(t,o,e,i,l,c){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawCalendarHeatmap`,pItemSel:t,pItemHeight:o,pConfigData:e,pValuesData:i,featureDetails:Wt.featureDetails});let n="sunday",a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];"function"==typeof Ht.locale.getSettings&&Ht.locale.getSettings().calendar&&Ht.locale.getSettings().calendar.startOfWeek&&(r=Ht.locale.getAbbrevMonthNames(),a=Ht.locale.getAbbrevDayNames(),n=Ht.locale.getSettings().calendar.startOfWeek);const d=d3,u=new Map,f=Pt(t),s=f.attr("id")+"-cheatmap",p="#"+s,h=new Date,m="#efefef",g=h.getMonth(),b=new Date(h.getFullYear()-1,g+1,1),y=new Date(h.getFullYear(),g+1,1),v=r.slice(g+1),D=r.slice(0,g+1),x=v.concat(D);let C=!1,k=d.timeSunday;"monday"===n&&(C=!0,k=d.timeMonday);i.forEach(t=>{t.date&&u.set(t.date.substr(0,10),t)});const w=Pt("<div>");w.attr("id",s),w.css("height",o),f.append(w);const T=function(){w.empty();const t=f.width(),r=t/53-40/53,s=o/7-20/7;let e=4;t<=640?e=2:t<=450&&(e=1);const i=d.select(p).selectAll("svg").data(d.range(h.getFullYear(),h.getFullYear()+1)).enter().append("svg").attr("viewBox",`0 0 ${t} ${o}`).attr("width","100%").attr("height","100%").attr("class","bida-calendar-heatmap-calendar").append("g").attr("transform",`translate(${(t-53*r)/2+10}, 15)`);i.append("g").attr("fill",m).attr("stroke","transparent").attr("stroke-width","0.1px").selectAll("rect").data(d.timeDays(b,y)).enter().append("rect").attr("rx",3).attr("ry",3).attr("class","bida-calendar-heatmap-day").attr("width",r-e).attr("height",s-e).attr("transform",`translate(${e/3}, ${e/3})`).attr("x",function(t){return k.count(b,t)*r+e/4}).attr("y",function(t){return C?(t.getDay()+6)%7*s+e/4:t.getDay()*s}).datum(d.timeFormat("%Y-%m-%d")).attr("fill",function(t){t=u.get(t);if(t)return t.color||m});var n=w.find(".bida-calendar-heatmap-day");Pt.each(n,function(){const t=Pt(this)[0];t.hasAttribute("fill")&&d.select(t).on("mouseover",function(t,e){e=u.get(e);if(e){const i=Pt("<div>"),n=Pt("<div>"),o=Pt("<div>");i.addClass("bida-calendar-heatmap-tt");const a=Pt("<b>");a.text(`${V(e.date)}: `);const r=Pt("<span>");r.text(e.value),n.append(a),n.append(r),i.append(n),Wt.isDefinedAndNotNull(e.tooltip)&&(e=Bt(e.tooltip,l,c,zt),o.html(e),i.append(o)),Wt.tooltip.show(i[0].outerHTML)}}).on("mouseout",function(){Wt.tooltip.hide()}).on("mousemove",function(t){Wt.tooltip.setPosition(t)}).on("click",function(t,e){e=u.get(e);e&&Wt.isDefinedAndNotNull(e.link)&&Wt.link(e.link,e.linkTarget)})}),i.append("g").attr("fill","none").attr("stroke","#aaa").attr("stroke-width","1px").selectAll("path").data(d.timeMonths(b,y)).enter().append("path").attr("class","bida-calendar-heatmap-month").attr("d",function(t){const e=new Date(t.getFullYear(),t.getMonth()+1,0),i=C?(t.getDay()+6)%7:t.getDay(),n=k.count(b,t),o=C?(e.getDay()+6)%7:e.getDay(),a=k.count(b,e);return`M${(n+1)*r}, ${i*s}H${n*r}V${7*s}H${a*r}V${(o+1)*s}H${(a+1)*r}V0H${(n+1)*r}Z`});n=d.scaleBand().domain(x).range([0,t-40]),n=d.axisTop(n).tickSize(0);i.append("g").call(n).selectAll("path").attr("stroke","transparent");n=d.scaleBand().domain(a).range([0,o-20]),n=d.axisLeft(n).tickSize(0);i.append("g").call(n).selectAll("path").attr("stroke","transparent")};T(),Rt.on("resize",function(){T()})}(n,c,s,a.itemData,r,e):(Wt.errorMessage.show(n,r.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - drawItemRegionContent`,msg:"itemData is missing in JSON",featureDetails:Wt.featureDetails})):(Wt.errorMessage.show(n,r.errorMessage),Ht.debug.info({fct:`${Wt.featureDetails.name} - drawItemRegionContent`,msg:"Feature - Calendar Heatmap is not activated.",featureDetails:Wt.featureDetails}));break;case"html":!function(o,t,a,r,s,e,i){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawHTML`,pItemSel:o,pItemHeight:t,pItemData:a,pDefaultConfig:s,pOversize:e,pIsSafeItem:i,featureDetails:Wt.featureDetails});const l=Pt("<div></div>");function c(t){var e=Bt(t,s,i,zt);Ht.debug.info({fct:`${Wt.featureDetails.name} - drawHTML`,submodule:"renderHTML",pContent:t,contentAfterEscapeOrSanitize:e,featureDetails:Wt.featureDetails}),l.html(e),-1<Pt.inArray("inlineimagesdownload",s.features)&&(e=l.find('img[alt*="aih#"]'),Pt.each(e,function(t,e){let i=e.title;var n;i=i||e.alt.split("aih##")[1],i&&(Ht.debug.info({fct:`${Wt.featureDetails.name} - drawHTML`,pItemID:r,pk:i,featureDetails:Wt.featureDetails}),n=s.items2SubmitImg,n=Ht.server.pluginUrl(b,{x01:"imageDownload",x02:r,x03:i,pageItems:n}),e.src=n,Pt(e).addClass("bida-item-urte-img"))})),l.find("*").css("max-width","100%").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto").css("white-space","normal"),l.find("img").css("object-fit","contain").css("object-position","50% 0%")}if(l.addClass("bida-item-html"),a&&"object"==typeof a&&1<a.length){let i=0,n;const d=function(){if(i>a.length-1?i=0:i<0&&(i=a.length-1),a[i]){c(a[i].html);const t=a[i].duration;if(t&&0<t){const e=function(){n=setTimeout(function(){i+=1,Pt(l).fadeOut("slow",function(){d(),Pt(l).fadeIn("slow")})},1e3*t)};Pt(o).hover(function(){clearTimeout(n)}),Pt(o).mouseleave(function(){e()}),e()}}},u=Pt("<div></div>");u.addClass("bida-item-html-slide-lc"),u.on("click",function(){--i,clearTimeout(n),Pt(l).fadeOut("fast",function(){d(),Pt(l).fadeIn("fast")})});const f=Pt("<span></span>");f.addClass("fa fa-chevron-left fa-lg"),f.addClass("bida-item-html-slide-lc-s"),u.append(f),Pt(o).append(u);const p=Pt("<div></div>");p.addClass("bida-item-html-slide-rc"),p.on("click",function(){i+=1,clearTimeout(n),Pt(l).fadeOut("fast",function(){d(),Pt(l).fadeIn("fast")})});const h=Pt("<span></span>");h.addClass("fa fa-chevron-right fa-lg"),h.addClass("bida-item-html-slide-rc-s"),p.append(h),Pt(o).append(p),d()}else a&&"object"==typeof a&&1===a.length?Wt.isDefinedAndNotNull(a[0].html)&&""!==a[0].html?c(a[0].html):Wt.noDataMessage.show(l,s.noDataMessage):Wt.isDefinedAndNotNull(a)&&""!==a?c(a):Wt.noDataMessage.show(l,s.noDataMessage);Pt(o).append(l),!0!==e&&(l.css("height",t),F(l))}(n,c,a.itemData,a.itemID,r,t,e);break;case"card":!function(t,e,i,n,o,a,r){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawCard`,pIndex:t,pItemHeight:e,pItemSel:i,pItemData:n,pDefaultConfig:o,pOversize:a,pIsSafeItem:r,featureDetails:Wt.featureDetails});const s=Pt("<div></div>");s.addClass("bida-item-card");const l=Pt("<div></div>");if(l.addClass("card-content"),Wt.isDefinedAndNotNull(n.icon)||Wt.isDefinedAndNotNull(n.iconText)){const p=Pt("<div></div>");p.addClass("card-content-icon-div");const h=Pt("<span></span>");if(Wt.isDefinedAndNotNull(n.icon)&&"fa-"===n.icon.substr(0,"fa-".length)){h.addClass("fa "+n.icon);var c="hsl("+23*t%350+", 79%, 45%)";h.css("background",n.iconBackColor||c)}else{if(Wt.isDefinedAndNotNull(n.iconText)){c=Bt(n.iconText,o,r,zt);const m=Pt("<span></span>");m.addClass("card-content-icon-text"),m.html(c),h.append(m)}Wt.isDefinedAndNotNull(n.icon)&&h.css("background-image","url("+n.icon+")"),h.css("background-color",n.iconBackColor)}h.addClass("card-content-icon"),h.css("color",n.iconColor||"white"),p.append(h),l.append(p)}const d=Pt("<div></div>");d.addClass("card-title-div"),Wt.isDefinedAndNotNull(n.icon)&&d.css("width","calc(100% - 55px)");let u;Wt.isDefinedAndNotNull(n.value)&&(u=Pt("<p></p>"),u.addClass("card-title"),u.addClass("truncate-text"),f=Bt(n.value,o,r,zt),u.html(f),d.append(u));if(Wt.isDefinedAndNotNull(n.valueSmall)){Wt.isDefinedAndNotNull(n.value)&&u.css("line-height","30px");const g=Pt("<p></p>");g.addClass("card-sub-title");var f=Bt(n.valueSmall,o,r,zt);g.html(f),d.append(g)}if(l.append(d),s.append(l),Wt.isDefinedAndNotNull(n.footer)){const b=Pt("<div></div>");b.addClass("bida-card-footer");const y=Pt("<div></div>");y.addClass("stats");r=Bt(n.footer,o,r,zt);y.html(r),b.append(y),s.append(b)}if(Wt.isDefinedAndNotNull(n.link)){const v=Pt("<a></a>");v.addClass("bida-a"),v.attr("href",n.link),Wt.isDefinedAndNotNull(n.linkTarget)&&v.attr("target",n.linkTarget),v.append(s),Pt(i).append(v),!0!==a&&(v.css("height",e),F(v))}else Pt(i).append(s),!0!==a&&(s.css("height",e),F(s))}(i,c,n,a.itemData,r,t,e);break;case"badge":!function(t,i,e,n,o,a){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawBadges`,pIndex:t,pItemHeight:i,pItemSel:e,pItemData:n,pDefaultConfig:o,pIsSafeItem:a,featureDetails:Wt.featureDetails});t="hsl("+23*t%350+", 79%, 45%)";let r,s,l,c=0,d=.98,u=.28,f=!1,p=.15,h=u-p,m=.28;const g=Pt("<div></div>");g.addClass("bida-item-badge"),Wt.isDefinedAndNotNull(n.title)&&(c+=1);Wt.isDefinedAndNotNull(n.icon)&&(c+=1);Wt.isDefinedAndNotNull(n.value)&&(c+=1);0<c&&(d/=c,h/=c);if(Wt.isDefinedAndNotNull(n.title)){const v=Pt("<div></div>");v.addClass("bida-item-badge-text"),s=Pt("<span></span>"),s.css("color",n.titleColor||t);var b=Bt(n.title,o,a,zt);s.html(b),v.append(s),g.append(v)}else m+=p/2,u+=p/3;if(Wt.isDefinedAndNotNull(n.icon)){const D=Pt("<div></div>");D.addClass("bida-item-badge-icon"),r=Pt("<span></span>"),Wt.isDefinedAndNotNull(n.icon)&&"fa-"===n.icon.substr(0,"fa-".length)?(r.addClass("fa "+n.icon),r.css("color",n.iconColor||t)):(Wt.isDefinedAndNotNull(n.iconText)&&(b=Bt(n.iconText,o,a,zt),r.html(b)),Wt.isDefinedAndNotNull(n.icon)&&(f=!0,r.css("background-image","url("+n.icon+")"),r.addClass("bida-item-badge-icon-image"))),D.append(r),g.append(D)}else p+=m/3,u+=m/3;if(Wt.isDefinedAndNotNull(n.value)){const x=Pt("<div></div>");x.addClass("bida-item-badge-text-value"),l=Pt("<span></span>"),l.css("color",n.valueColor||t);a=Bt(n.value,o,a,zt);l.html(a),x.append(l),g.append(x)}else p+=u/3,m+=u/2;Wt.isDefinedAndNotNull(n.link)&&(g.css("cursor","pointer"),g.on("click",function(){Wt.link(n.link,n.linkTarget)}));function y(){var t=i,e=Math.min(t,g.width());s&&(s.css("font-size",e*p+"px"),s.css("line-height",t*(d-h)+"px")),r&&(r.css("font-size",e*m+"px"),r.css("line-height",t*d+"px"),f&&(r.css("height",t*d+"px"),r.css("width",t*d+"px"))),l&&(l.css("font-size",e*u+"px"),l.css("line-height",t*d+"px"))}Pt(e).append(g),y(),Rt.on("resize",function(){y()})}(i,c,n,a.itemData,r,e);break;case"list":!function(t,e,i,m,n,g){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawList`,pItemSel:t,pItemHeight:e,pItemData:i,pDefaultConfig:m,pOversize:n,pIsSafeItem:g,featureDetails:Wt.featureDetails});const o=Pt("<div></div>");o.addClass("bida-item-list-div");const l=Pt("<ul></ul>");function c(p,h){Pt.each(h,function(t,e){const i=Pt("<li></li>");i.addClass("bida-item-list-item");const n=Pt("<div></div>");if(n.addClass("list-item-content"),t<h.length-1&&n.css("border-bottom","1px solid #eeeeee"),Wt.isDefinedAndNotNull(e.icon)||Wt.isDefinedAndNotNull(e.iconText)){const r=Pt("<div></div>");r.addClass("listItem-content-icon-div");const s=Pt("<span></span>");if(e.icon&&"fa-"===e.icon.substr(0,"fa-".length))s.addClass("fa "+e.icon),s.css("background",e.iconBackColor||"hsl("+23*t%350+", 79%, 45%)");else{if(Wt.isDefinedAndNotNull(e.iconText)){const l=Bt(e.iconText,m,g,zt),c=Pt("<span></span>");c.addClass("list-item-content-icon-text"),c.html(l),s.append(c)}Wt.isDefinedAndNotNull(e.icon)&&s.css("background-image","url("+e.icon+")"),s.css("background-color",e.iconBackColor)}s.addClass("list-item-content-icon"),s.css("color",e.iconColor||"white"),r.append(s),n.append(r)}const o=Pt("<div></div>");if(o.addClass("list-item-content-text"),Wt.isDefinedAndNotNull(e.icon)&&o.css("width","calc(100% - 55px)"),Wt.isDefinedAndNotNull(e.title)){const d=Pt("<span></span>");d.addClass("list-item-title"),d.addClass("truncate-text");var a=Bt(e.title,m,g,zt);d.html(a),o.append(d)}if(Wt.isDefinedAndNotNull(e.text)){const u=Pt("<span></span>");u.addClass("list-item-text");a=Bt(e.text,m,g,zt);u.html(a),o.append(u)}if(n.append(o),i.append(n),Wt.isDefinedAndNotNull(e.link)){const f=Pt("<a></a>");f.addClass("bida-a"),f.attr("href",e.link),f.append(i),Wt.isDefinedAndNotNull(e.linkTarget)&&f.attr("target",e.linkTarget),p.append(f)}else p.append(i)})}l.addClass("bida-item-list");const a=[];Pt.each(i,function(t,e){Wt.isDefinedAndNotNull(e.group)||a.push(e)});i=Wt.groupObjectArray(i,"group");Ht.debug.info({fct:`${Wt.featureDetails.name} - drawList`,noGroupsArr:a,groupsArr:i,featureDetails:Wt.featureDetails}),c(l,a),Pt.each(i,function(t,e){const i=Pt("<li></li>");i.addClass("bida-item-list-item-group");let n="#f1f1f1";e[0].groupBackColor&&(n=e[0].groupBackColor);let o="inherit";e[0].groupColor&&(o=e[0].groupColor);const a=Pt("<div></div>");a.addClass("list-group-content"),a.css("border-left","3px solid "+n);const r=Pt("<span></span>");r.addClass("list-group-content-title");t=Bt(t,m,g,zt);r.css("background",n),r.css("color",o),r.html(t),a.append(r),i.append(a);const s=Pt("<ul></ul>");s.addClass("bida-item-list-grouped"),c(s,e),a.append(s),l.append(i)}),o.append(l),Pt(t).append(o),!0!==n&&(o.css("height",e),F(o))}(n,c,a.itemData,r,t,e);break;case"table":-1<Pt.inArray("table",r.features)?function(t,e,i,o,n,a){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawTable`,pItemSel:t,pItemHeight:e,pItemData:i,pDefaultConfig:o,pOversize:n,pIsSafeItem:a,featureDetails:Wt.featureDetails});const r=Pt("<div></div>");r.addClass("bida-item-table-div");const s=Pt("<table></table>");s.addClass("bida-item-table"),Wt.isDefinedAndNotNull(i.header)&&0<i.header.length&&Pt.each(i.header,function(t,e){if(Wt.isDefinedAndNotNull(e.text)){const i=Pt("<th></th>");i.addClass("bida-item-table-header"),i.css("background-color",e.background||o.table.header.background),i.css("text-align",e.textAlign||o.table.header.textAlign),i.css("color",e.color||o.table.header.color),i.css("border",e.border||o.table.header.border);e=Bt(e.text,o,a,zt);i.html(e),s.append(i)}});Wt.isDefinedAndNotNull(i.data)&&0<i.data.length&&Pt.each(i.data,function(t,e){const n=Pt("<tr></tr>");n.addClass("bida-item-table-row"),t%2==0?(n.addClass("bida-item-table-row-even"),n.css("background",o.table.evenRow.background),n.css("text-align",o.table.evenRow.textAlign),n.css("color",o.table.evenRow.color),n.css("border-bottom",o.table.evenRow.borderBottom)):(n.addClass("bida-item-table-row-odd"),n.css("background",o.table.oddRow.background),n.css("text-align",o.table.oddRow.textAlign),n.css("color",o.table.oddRow.color),n.css("border-bottom",o.table.oddRow.borderBottom)),Pt.each(e,function(t,e){if(Wt.isDefinedAndNotNull(e.text)){const i=Pt("<td></td>");i.addClass("bida-item-table-cell"),i.css("background",e.background||o.table.cells.background),i.css("text-align",e.textAlign||o.table.cells.textAlign),i.css("color",e.color||o.table.cells.color),i.css("border",e.border||o.table.cells.border);e=Bt(e.text,o,a,zt);i.html(e),n.append(i)}}),s.append(n)});r.append(s),Pt(t).append(r),!0!==n&&(r.css("height",e),F(r))}(n,c,a.itemData,r,t,e):(Wt.errorMessage.show(n,r.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - drawItemRegionContent`,msg:"Feature - Tables is not activaed.",featureDetails:Wt.featureDetails}));break;case"map":-1<Pt.inArray("map",r.features)?function(x,C,k,w,T,S){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawD3Map`,pItemSel:x,pItemHeight:C,pItemData:k,pItemConfig:w,pDefaultConfig:T,pIsSafeItem:S,featureDetails:Wt.featureDetails});try{const N=d3,i=Pt(x),A=Ft(w.tourEnabled,T.mapOptions.tour.enabled,!0),I=Ft(w.tourSpeed,T.mapOptions.tour.speed)/2e3,E=Ft(w.tourStart,T.mapOptions.tour.start),M=Ft(w.circlesShadows,T.mapOptions.circles.shadows,!0),L=Ft(w.circlesRadius,T.mapOptions.circles.radius),_=Ft(w.circlesColor,T.mapOptions.circles.color),O=Ft(w.circlesOpacity,T.mapOptions.circles.opacity),z=Ft(w.circlesOpacityHover,T.mapOptions.circles.opacityHover),n=Ft(w.mapCenterLongitude,T.mapOptions.map.centerLongitude),o=Ft(w.mapCenterLatitude,T.mapOptions.map.centerLatitude),a=Ft(w.mapInitialZoom,T.mapOptions.map.initialZoom),R=Ft(w.mapZoomEnabled,T.mapOptions.map.zoomEnabled,!0),H=Ft(w.mapColor,T.mapOptions.map.color),P=Ft(w.mapStroke,T.mapOptions.map.stroke),W=Ft(w.mapStrokeWidth,T.mapOptions.map.strokeWidth),F=Ft(w.mapShadows,T.mapOptions.map.shadows,!0),r=Pt(x).attr("id")+"-shadow",B=Pt(x).attr("id")+"-ocean",$=Pt(x).attr("id")+"-highlight",j=Pt(x).attr("id")+"-shading",U="url(#"+B+")",J="url(#"+$+")",G="url(#"+j+")";let l,c,d,u,f,p,h,m,g,b=Ft(w.tourShadowEffect,T.mapOptions.tour.shadowEffect,!0);A||(b=!1);const Y=function(){return i.width()},q=function(){return[Y()/2,C/2]},V=N.select(x).append("svg").attr("class","bida-map-svg").attr("width",Y()).attr("height",C);(F||M)&&(tt(V,r,2,2,1),u="url(#"+r+")");let y,v=N.now(),D=0;g=(A?N.geoOrthographic().scale(C/2.5+20):N.geoNaturalEarth1().center([n,o]).scale(C/2.5*a)).translate(q());const Q=N.geoPath().projection(g),s=function(t){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawD3Map`,geoJSONData:t,featureDetails:Wt.featureDetails});const e=V.append("g");if(b){const i=V.append("defs").append("radialGradient").attr("id",B).attr("cx","75%").attr("cy","25%");i.append("stop").attr("offset","5%").attr("stop-color","#fff"),i.append("stop").attr("offset","100%").attr("stop-color","rgb(240,240,240)");const o=V.append("defs").append("radialGradient").attr("id",$).attr("cx","75%").attr("cy","25%");o.append("stop").attr("offset","5%").attr("stop-color","rgb(250,250,250)").attr("stop-opacity","0.3"),o.append("stop").attr("offset","100%").attr("stop-color","rgb(230,230,230)").attr("stop-opacity","0.15");const a=V.append("defs").append("radialGradient").attr("id",j).attr("cx","55%").attr("cy","45%");a.append("stop").attr("offset","30%").attr("stop-color","#fff").attr("stop-opacity","0"),a.append("stop").attr("offset","100%").attr("stop-color","rgb(220,220,220)").attr("stop-opacity","0.3"),l=e.append("circle").attr("cx",Y()/2).attr("cy",C/2).attr("r",g.scale()).style("fill",U)}function n(){h.attr("d",Q(t)),b&&(l.attr("cx",Y()/2).attr("cy",C/2).attr("r",g.scale()),c.attr("cx",Y()/2).attr("cy",C/2).attr("r",g.scale()),d.attr("cx",Y()/2).attr("cy",C/2).attr("r",g.scale())),m.attr("transform",function(t){return"translate("+g([t.longitude,t.latitude])+")"}).attr("r",function(t){if(A&&1.57<N.geoDistance([t.longitude,t.latitude],g.invert(q())))return 0;return Ft(t.radius,L)})}if(F&&(f=u),h=e.append("path").attr("d",Q(t)).attr("class","bida-map-path").style("filter",f).style("stroke",P).style("stroke-width",W).style("fill",H),b&&(c=e.append("circle").attr("cx",Y()/2).attr("cy",C/2).attr("r",g.scale()).style("fill",J),d=e.append("circle").attr("cx",Y()/2).attr("cy",C/2).attr("r",g.scale()).style("fill",G)),M&&(p=u),m=e.selectAll(".bida-map-circle").data(k).enter().append("circle").filter(function(t){return Wt.isDefinedAndNotNull(t.radius)?0<t.radius:0<L}).attr("class","bida-map-circle").style("filter",p).attr("fill",function(t){return t.color||_}).style("opacity",O).on("mouseover",function(t,e){Wt.isDefinedAndNotNull(e.link)&&Pt(this).css("cursor","pointer"),Wt.isDefinedAndNotNull(e.tooltip)&&(e=Bt(e.tooltip,T,S,zt),Wt.tooltip.show(e)),Pt(this).css("opacity",z)}).on("mousemove",function(t,e){Wt.isDefinedAndNotNull(e.tooltip)&&Wt.tooltip.setPosition(t)}).on("mouseout",function(){Wt.tooltip.hide()}).on("click",function(t,e){Wt.isDefinedAndNotNull(e.link)&&Wt.link(e.link,e.linkTarget)}).attr("transform",function(t){return"translate("+g([t.longitude,t.latitude])+")"}).attr("r",function(t){return Ft(t.radius,L)}),A){let t=0,e=-1,i;"left"===(w.tourDirection||T.mapOptions.tour.direction)&&(e=1);const r=function(){t+=1,t%60==0&&(0===Pt(x).length&&y.stop(),t=0),t%3==0&&(i=N.now()-v,g.rotate([(I*i+E)*e,-10,0]),n())};y=N.timer(r),K.d3Timer.push(y),V.on("mouseover",function(){D=N.now()-v,y.stop()}),V.on("mouseout",function(){v=N.now()-D,y.restart(r)}),document.addEventListener("visibilitychange",function(){document.hidden?y.stop():y.restart(r)})}else if(R){const s=N.zoom().scaleExtent([1,8]).on("zoom",function(t){e.attr("transform",t.transform)});V.call(s),V.on("contextmenu",function(t){t.preventDefault(),V.call(s.transform,N.zoomIdentity.scale(1))})}Rt.on("resize",function(){V.attr("width",Y()),V.attr("height",C),g.translate(q()),n()})};var t,e;A?Z.tour?s(Z.tour):(t=X+"world-tour.json",Pt.getJSON(t,function(t){Z.tour=t,s(Z.tour)})):Z.zoom?s(Z.zoom):(e=X+"world-zoom.json",Pt.getJSON(e,function(t){Z.zoom=t,s(Z.zoom)}))}catch(t){Pt(x).empty(),Wt.errorMessage.show(x,T.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - drawD3Map`,msg:"Error while try to render clock",err:t,featureDetails:Wt.featureDetails})}}(n,c,a.itemData,s,r,e):(Wt.errorMessage.show(n,r.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - drawItemRegionContent`,msg:"Feature - Maps is not activaed.",featureDetails:Wt.featureDetails}));break;case"clock":-1<Pt.inArray("clock",r.features)?function(O,t,z,R,H){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawClock`,pItemSel:O,pItemHeight:t,pItemData:z,pItemConfig:R,pDefaultConfig:H,featureDetails:Wt.featureDetails});try{const P=d3,i=Pt(O),W=Pt(O).attr("id")+"-clock",F=Pt(O).attr("id")+"-shadow",B="#"+W,$=Pt(O).attr("id")+"-clockhands",j=.0174532925,U=Ft(R.secondLabel,H.clockOptions.second.label,!0),J=Ft(R.circleWidth,H.clockOptions.circle.width);let a=new Date,r,s=0,l=Ft(R.shadows,H.clockOptions.shadows,!0),c,d,u,f,p,h,m,g,b,y,v,D,x,C,k,w,T,S,N,A,I,E,M,L,_;J<=0&&(l=!1);const G=function(){return i.width()},Y=function(){return Math.floor(t/2)-2};if(Wt.isDefinedAndNotNull(z)&&Wt.isDefinedAndNotNull(z.startDate))try{var e=Date.parse(z.startDate);s=e-a}catch(t){Ht.debug.error({fct:`${Wt.featureDetails.name} - drawClock`,msg:"Error while try to parse clock date: itemData has to be an iso date. The local time will be used.",err:t,featureDetails:Wt.featureDetails})}const q=function(t){let e="";var i;return Wt.isDefinedAndNotNull(t)&&(i=Ht.locale&&Ht.locale.getLanguage?Ht.locale.getLanguage():void 0,e=t.replace("#date#",V(a)),e=e.replace("#time#",a.toLocaleTimeString(i)),e=Wt.cutString(e,15)),e},n=function(){var t,e=U?1.05:1.2;M=Math.min(G()/2,Y()*e-J/3),A=P.scaleLinear().range([0,330]).domain([0,11]),I=P.scaleLinear().range([0,354]).domain([0,59]),E=P.scaleLinear().range([0,354]).domain([0,59]),c=.35*M,d=.55*M,u=.7*M,f=.7*M,p=.6*M,h=.1*M,m=.51*M,_=.75*M,k=.835*M+J/3,b=Math.max(Math.floor(.12*M),12),y=Math.max(Math.floor(.1*M),9),g=b/2.15,w=y/2.15,x=Math.floor(.13*M),D=.3*M,v=-.3*M+x,C=.03*M*Ft(R.handsCoverSize,H.clockOptions.hands.coverSize),L=[{type:"hour",value:0,length:-c,scale:A},{type:"minute",value:0,length:-d,scale:I},{type:"second",value:0,length:-u,scale:E,balance:30}];const i=function(){a=new Date,a.setMilliseconds(a.getMilliseconds()+s),L[0].value=a.getHours()%12+a.getMinutes()/60,L[1].value=a.getMinutes(),L[2].value=a.getSeconds()};i(),T=T||P.select(O).append("svg").attr("id",W).attr("class","bida-clock-svg"),T.attr("width",G()).attr("height",2*Y()),S||(S=T.append("g").attr("transform","translate("+G()/2+","+Y()+")"),l&&(tt(T,F,2,2,1),r="url(#"+F+")"),S.append("g").append("circle").attr("class","bida-clock-circle").style("filter",r).style("stroke",Ft(R.circleColor,H.clockOptions.circle.color)).style("stroke-width",J+"px").style("fill",Ft(R.circleFillColor,H.clockOptions.circle.fillColor)),S.selectAll(".bida-clock-second-tick").data(P.range(0,60)).enter().append("line").attr("class","bida-clock-second-tick").attr("x1",0).attr("x2",0),S.selectAll(".bida-clock-hour-tick").data(P.range(0,12)).enter().append("line").attr("class","bida-clock-hour-tick").attr("x1",0).attr("x2",0),S.selectAll(".bida-clock-hour-label").data(P.range(3,13,3)).enter().append("text").attr("class","bida-clock-hour-label").attr("text-anchor","middle"),S.append("text").attr("x",0).attr("class","bida-clock-label").attr("text-anchor","middle"),S.append("text").attr("x",0).attr("class","bida-clock-label2").attr("text-anchor","middle"),U&&S.selectAll(".bida-clock-second-label").data(P.range(5,61,5)).enter().append("text").attr("class","bida-clock-second-label").attr("text-anchor","middle")),S.attr("transform","translate("+G()/2+","+Y()+")"),S.selectAll(".bida-clock-circle").attr("x",0).attr("y",0).attr("r",_),S.selectAll(".bida-clock-second-tick").attr("y1",f).attr("y2",f-10).attr("transform",function(t){return"rotate("+E(t)+")"}).style("stroke",Ft(R.secondTickColor,H.clockOptions.second.tickColor)),S.selectAll(".bida-clock-hour-tick").attr("y1",p).attr("y2",p+h).attr("transform",function(t){return"rotate("+A(t)+")"}).style("stroke",Ft(R.hourTickColor,H.clockOptions.hour.tickColor)),S.selectAll(".bida-clock-hour-label").attr("x",function(t){return m*Math.sin(A(t)*j)}).attr("y",function(t){return-m*Math.cos(A(t)*j)+g}).text(function(t){return t}).style("font-size",b+"px").style("fill",Ft(R.hourLabelColor,H.clockOptions.hour.labelColor)),Wt.isDefinedAndNotNull(U)&&S.selectAll(".bida-clock-second-label").attr("x",function(t){return k*Math.sin(E(t)*j)}).attr("y",function(t){return-k*Math.cos(E(t)*j)+w}).text(function(t){return t}).style("font-size",y+"px").style("fill",Ft(R.secondLabelColor,H.clockOptions.second.labelColor)),Wt.isDefinedAndNotNull(z)&&Wt.isDefinedAndNotNull(z.label)&&(t=q(z.label),S.selectAll(".bida-clock-label").text(t).attr("y",v).style("font-size",x+"px").style("fill",Ft(R.labelColor,H.clockOptions.label.labelColor))),Wt.isDefinedAndNotNull(z)&&Wt.isDefinedAndNotNull(z.label2)&&(t=q(z.label2),S.selectAll(".bida-clock-label2").text(t).attr("y",D).style("font-size",x+"px").style("fill",Ft(R.labelColor2,H.clockOptions.label.labelColor2))),N||(N=S.append("g").attr("id",$),S.append("g").append("circle").attr("class","bida-clock-hands-cover"),N.selectAll("line").data(L).enter().append("line")),S.selectAll(".bida-clock-hands-cover").attr("x",0).attr("y",0).attr("r",C).style("fill",Ft(R.handCoverFillColor,H.clockOptions.hands.coverFillColor)).style("stroke",Ft(R.handCoverStrokeColor,H.clockOptions.hands.coverStrokeColor)),N.selectAll("line").data(L).attr("class",function(t){return"bida-clock-"+t.type+"-hand"}).attr("x1",0).attr("y1",function(t){return t.balance||0}).attr("x2",0).attr("y2",function(t){return t.length}).attr("transform",function(t){return"rotate("+t.scale(t.value)+")"}).style("stroke",Ft(R.handColor,H.clockOptions.hands.color));const n=function(){K.innerItemsIntervals&&K.innerItemsIntervals[B]&&clearInterval(K.innerItemsIntervals[B])},o=function(){K.innerItemsIntervals[B]=setInterval(function(){var t;0===Pt(B).length?clearInterval(K.innerItemsIntervals[B]):(i(),N&&N.selectAll("line").data(L).attr("transform",function(t){return"rotate("+t.scale(t.value)+")"}),S&&(Wt.isDefinedAndNotNull(z)&&Wt.isDefinedAndNotNull(z.label)&&(t=q(z.label),S.selectAll(".bida-clock-label").text(t)),Wt.isDefinedAndNotNull(z)&&Wt.isDefinedAndNotNull(z.label2)&&(t=q(z.label2),S.selectAll(".bida-clock-label2").text(t))))},1e3)};n(),o(),document.addEventListener("visibilitychange",function(){(document.hidden?n:o)()})};n(),Rt.on("resize",function(){n()})}catch(t){Pt(O).empty(),Wt.errorMessage.show(O,H.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - drawClock`,msg:"Error while try to render clock",err:t,featureDetails:Wt.featureDetails})}}(n,c,a.itemData,s,r):(Wt.errorMessage.show(n,r.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - drawItemRegionContent`,msg:"Feature - Analogue Clocks is not activaed.",featureDetails:Wt.featureDetails}));break;case"calendar":-1<Pt.inArray("calendar",r.features)?function(t,e,i,n,l,o,c){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawCalendar`,pItemSel:t,pItemHeight:e,pItemData:i,pItemConfig:n,pDefaultConfig:l,pOversize:o,pIsSafeItem:c,featureDetails:Wt.featureDetails});const a=Pt(t),r=a.attr("id")+"-calendar",s=Pt("<div></div>");s.addClass("bida-calendar"),s.attr("id",r),a.append(s);var d=Ft(n.eventLimitPerDay,l.calendarOptions.eventLimitPerDay),u=Ft(n.displayTime,l.calendarOptions.displayTime,!0),f=Ft(n.hours12,l.calendarOptions.hours12,!0),t=Ft(n.timeGridStartTime,l.calendarOptions.timeGridStartTime);let p=Ft(n.viewType,l.calendarOptions.viewType),h=Ht.locale&&Ht.locale.getLanguage?Ht.locale.getLanguage():void 0,m=Ft(n.stickyHeaderDates,l.calendarOptions.stickyHeaderDates);"true"===m&&(m=!0);"false"===m&&(m=!1);f||"en"!==h||(h="en-bz");const g={month:"2-digit",year:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:f,locale:h};["dayGridMonth","dayGridWeek","timeGridWeek","listWeek","listMonth","listDay"].indexOf(p)<0&&(p="dayGridMonth");const b=FullCalendar,y=document.getElementById(r),v=new b.Calendar(y,{height:e,events:i,displayEventTime:u,initialView:p,eventDisplay:"block",stickyHeaderDates:m,eventMouseEnter:function(t){t.event&&t.event._def&&((n=t.event._def).extendedProps&&n.extendedProps.link&&Pt(t.el).css("cursor","pointer"));const e=Pt("<div></div>");e.addClass("bida-calendar-event-tt");const i=Pt("<b></b>");i.addClass("bida-calendar-event-tt-title");var n=Bt(t.event.title,l,c,zt);Wt.isDefinedAndNotNull(n)&&(i.append(n),e.append(i),e.append("<br>"));const o=Pt("<div></div>");o.addClass("bida-calendar-event-tt-subtitle");const a=Pt("<span></span>");a.addClass("fa fa-clock-o"),a.addClass("bida-calendar-event-tt-icon"),o.append(a);const r=Pt("<span></span>");if(r.addClass("bida-calendar-event-tt-date"),r.append(" "),r.append(b.formatDate(t.event.start,g)),Wt.isDefinedAndNotNull(t.event.end)&&(r.append(" - "),r.append(b.formatDate(t.event.end,g))),o.append(r),e.append(o),Wt.isDefinedAndNotNull(t.event.extendedProps.details)){n=Bt(t.event.extendedProps.details,l,c,zt);if(Wt.isDefinedAndNotNull(n)){const s=Pt("<div></div>");s.addClass("bida-calendar-event-tt-content"),s.append(n),e.append(s)}}Wt.tooltip.show(e),Wt.tooltip.setPosition(t.jsEvent)},eventMouseLeave:function(){Wt.tooltip.hide()},eventClick:function(t){t.jsEvent.preventDefault(),t.event&&t.event._def&&((t=t.event._def).extendedProps&&t.extendedProps.link?Wt.link(t.extendedProps.link,t.extendedProps.linkTarget):t.extendedProps?Wt.link(t.url,t.extendedProps.linkTarget):Wt.link(t.url)),Wt.tooltip.hide()},dayMaxEventRows:d,eventContent:function(t){return{html:Bt(t.event.title,l,c,zt)}},allDaySlot:!1,nowIndicator:!0,views:{dayGrid:{}},eventTimeFormat:{hour:g.hour,minute:g.minute,hour12:g.hour12},scrollTime:t,slotLabelFormat:{hour:g.hour,minute:g.minute,hour12:g.hour12}});v.setOption("locale",h),v.changeView(p),v.render(),!0!==o&&(s.css("height",e),s.addClass("bida-item-div-overflow"),F(s));Rt.on("resize",function(){v.render()})}(n,c,a.itemData,s,r,t,e):(Wt.errorMessage.show(n,r.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - drawItemRegionContent`,msg:"Feature - Calendar is not activaed.",featureDetails:Wt.featureDetails}));break;case"note":-1<Pt.inArray("note",r.features)?function(o,a,t,e,i,r,n,s){Ht.debug.info({fct:`${Wt.featureDetails.name} - drawNoteEditor`,pItemID:o,pItemSel:a,pItemHeight:t,pItemData:e,pItemConfig:i,pDefaultConfig:r,pOversize:n,pIsSafeItem:s,featureDetails:Wt.featureDetails});const l=Pt(a),c=l.attr("id")+"-note",d=Pt("<div></div>");d.addClass("bida-note"),d.attr("id",c),d.css("height",t),l.append(d);const u=c+"-save";function f(){Pt("#"+u).parent().addClass("pell-button-disabled")}const p=[];p.push(`<select class="pell-button-c-select" onchange="$('#${c}').trigger('colorchange', this.value );">`),["#000","#f77272","#f7f772","#8af772","#72aef7","#c672f7"].forEach(function(t){p.push(`<option value="${t}" style="color:${t};">&#9632;</option>`)}),p.push("</select>"),B.init({element:document.getElementById(c),onChange:function(){Pt("#"+u).parent().removeClass("pell-button-disabled")},defaultParagraphSeparator:"p",styleWithCSS:!1,classes:{actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},actions:[{name:"Save",icon:'<i id="'+u+'" class="fa fa-save-as pell-button-c"></i>',title:"Save",result:function(){const t=d.find(".pell-content");Wt.loader.start(a),f();const e=t.html();var i=Wt.splitString2Array(e),n=r.items2Submit;Ht.server.plugin(b,{pageItems:n,x01:"noteUpload",x02:o,f01:i},{dataType:"text",success:function(){Wt.loader.stop(a),Rt.trigger("shortnotesaved",{itemID:o,itemSel:a,clob:e}),Ht.debug.info({fct:`${Wt.featureDetails.name} - drawNoteEditor`,msg:"Upload successful.",featureDetails:Wt.featureDetails})},error:function(t,e,i){Wt.loader.stop(a),Ht.message.clearErrors(),Ht.message.showErrors([{type:"error",location:["page"],message:r.errorMessage,unsafe:!1}]),Ht.debug.info({fct:`${Wt.featureDetails.name} - drawNoteEditor`,msg:"Error while try to upload NoteEditor Content",jqXHR:t,textStatus:e,errorThrown:i,featureDetails:Wt.featureDetails})}})}},{name:"Undo",icon:'<i class="fa fa-undo pell-button-c"></i>',title:"Undo",result:function(){B.exec("undo",!0)}},{name:"Redo",icon:'<i class="fa fa-repeat pell-button-c"></i>',title:"Redo",result:function(){B.exec("redo",!0)}},{name:"bold",icon:'<i class="fa fa-bold pell-button-c"></i>',title:"Bold"},{name:"italic",icon:'<i class="fa fa-italic pell-button-c"></i>',title:"Italic"},{name:"underline",icon:'<i class="fa fa-underline pell-button-c"></i>',title:"Underline"},{name:"strikethrough",icon:'<i class="fa fa-strikethrough pell-button-c"></i>',title:"Strikethrough"},{name:"heading1",icon:'<i class="fa fa-header pell-button-c"><sub>1</sub></i>',title:"Heading 1"},{name:"heading2",icon:'<i class="fa fa-header pell-button-c"><sub>2</sub></i>',title:"Heading 2"},{name:"paragraph",icon:'<i class="fa fa-paragraph pell-button-c"></i>'},{name:"olist",icon:'<i class="fa fa-list-ol pell-button-c"></i>',title:"Ordered List"},{name:"ulist",icon:'<i class="fa fa-list-ul pell-button-c"></i>',title:"Unordered List"},{name:"checkbox",icon:'<i class="fa fa-check-square-o pell-button-c"></i>',title:"checkbox",result:function(){B.exec("insertHTML",`<div><i class="fa fa-square-o" onmousedown="$(this).toggleClass(['fa-check-square-o', 'fa-square-o']);"> </i></div>`)}},{name:"resetformat",icon:'<i class="fa fa-eraser pell-button-c"></i>',title:"Remove Format",result:function(){B.exec("removeFormat",!0)}},{name:"highlight",icon:p.join(""),title:"Highlight",result:function(){}}]}),d.on("colorchange",function(t,e){"#000"===e?B.exec("hiliteColor","#fff"):B.exec("hiliteColor",e)});let h;h=e&&"object"==typeof e?e.text:e;h=Bt(h,r,s,zt);const m=d.find(".pell-content"),g=function(){var t=d.find(".pell-actionbar").height();m.css("height",d.height()-t)};m.html(h),g(),f(),d.find(".pell-button").removeAttr("title"),Rt.on("resize",function(){g()})}(a.itemID,n,c,a.itemData,s,r,t,e):(Wt.errorMessage.show(n,r.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - drawItemRegionContent`,msg:"Feature - Editor is not activaed.",featureDetails:Wt.featureDetails}));break;default:Wt.errorMessage.show(n,r.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - drawItemRegionContent`,msg:"itemType not found (html, card, list, map, table, clock, calendar, calendarheatmap)",featureDetails:Wt.featureDetails})}else Wt.noDataMessage.show(n,r.noDataMessage);if(Wt.isDefinedAndNotNull(a.subText2)){const g=Pt(n).find(".bida-item-subtext-2");g.appendTo(n),g.addClass("bida-item-subtext-2-fin")}}else Wt.errorMessage.show(n,r.errorMessage),Ht.debug.error({fct:`${Wt.featureDetails.name} - drawItemRegionContent`,msg:"itemType is missing in JSON",featureDetails:Wt.featureDetails})}function F(t){const e=Pt(t);e.addClass("bida-item-div-overflow"),e.on("scroll",function(){e.scrollTop()+e.innerHeight()>=e[0].scrollHeight?e.addClass("bida-item-div-overflow-hidden"):e.removeClass("bida-item-div-overflow-hidden")});var i=e.innerHeight(),t=e[0].scrollHeight;Ht.debug.info({fct:`${Wt.featureDetails.name} - overFlowStyling`,innerHeight:i,scrollHeight:t,featureDetails:Wt.featureDetails}),t<=i&&0!==t&&e.addClass("bida-item-div-overflow-hidden")}}}};