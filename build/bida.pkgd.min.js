!function(t,i){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("jquery")):t.jQueryBridget=i(t,t.jQuery)}(window,function(e,t){"use strict";var i=Array.prototype.slice,n=e.console,u=void 0===n?function(){}:function(e){n.error(e)};function a(l,d,c){(c=c||t||e.jQuery)&&(d.prototype.option||(d.prototype.option=function(e){c.isPlainObject(e)&&(this.options=c.extend(!0,this.options,e))}),c.fn[l]=function(e){if("string"!=typeof e)return s=e,this.each(function(e,t){var i=c.data(t,l);i?(i.option(s),i._init()):(i=new d(t,s),c.data(t,l,i))}),this;var n,a,o,r,s,t=i.call(arguments,1);return a=t,r="$()."+l+'("'+(n=e)+'")',(e=this).each(function(e,t){var i=c.data(t,l);i?(t=i[n])&&"_"!=n.charAt(0)?(i=t.apply(i,a),o=void 0===o?i:o):u(r+" is not a valid method"):u(l+" not initialized. Cannot call methods, i.e. "+r)}),void 0!==o?o:e},o(c))}function o(e){!e||e&&e.bridget||(e.bridget=a)}return o(t||e.jQuery),a}),function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},e=i[e]=i[e]||[];return-1==e.indexOf(t)&&e.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{};return(i[e]=i[e]||{})[t]=!0,this}},t.off=function(e,t){e=this._events&&this._events[e];if(e&&e.length){t=e.indexOf(t);return-1!=t&&e.splice(t,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],a=0;a<i.length;a++){var o=i[a];n&&n[o]&&(this.off(e,o),delete n[o]),o.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"function"==typeof define&&define.amd?define("get-size/get-size",t):"object"==typeof module&&module.exports?module.exports=t():e.getSize=t()}(window,function(){"use strict";function p(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var t="undefined"==typeof console?function(){}:function(e){console.error(e)},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],m=h.length;function g(e){e=getComputedStyle(e);return e||t("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}var b,v=!1;function y(e){if(v||(v=!0,(f=document.createElement("div")).style.width="200px",f.style.padding="1px 2px 3px 4px",f.style.borderStyle="solid",f.style.borderWidth="1px 2px 3px 4px",f.style.boxSizing="border-box",(u=document.body||document.documentElement).appendChild(f),c=g(f),b=200==Math.round(p(c.width)),y.isBoxSizeOuter=b,u.removeChild(f)),(e="string"==typeof e?document.querySelector(e):e)&&"object"==typeof e&&e.nodeType){var t=g(e);if("none"==t.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<m;t++)e[h[t]]=0;return e}();var i={};i.width=e.offsetWidth,i.height=e.offsetHeight;for(var n=i.isBorderBox="border-box"==t.boxSizing,a=0;a<m;a++){var o=h[a],r=t[o],r=parseFloat(r);i[o]=isNaN(r)?0:r}var s=i.paddingLeft+i.paddingRight,l=i.paddingTop+i.paddingBottom,d=i.marginLeft+i.marginRight,c=i.marginTop+i.marginBottom,u=i.borderLeftWidth+i.borderRightWidth,f=i.borderTopWidth+i.borderBottomWidth,e=n&&b,n=p(t.width);!1!==n&&(i.width=n+(e?0:s+u));n=p(t.height);return!1!==n&&(i.height=n+(e?0:l+f)),i.innerWidth=i.width-(s+u),i.innerHeight=i.height-(l+f),i.outerWidth=i.width+d,i.outerHeight=i.height+c,i}}return y}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",t):"object"==typeof module&&module.exports?module.exports=t():e.matchesSelector=t()}(window,function(){"use strict";var i=function(){var e=window.Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],i=0;i<t.length;i++){var n=t[i]+"MatchesSelector";if(e[n])return n}}();return function(e,t){return e[i](t)}}),function(t,i){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("desandro-matches-selector")):t.fizzyUIUtils=i(t,t.matchesSelector)}(window,function(i,o){var l={extend:function(e,t){for(var i in t)e[i]=t[i];return e},modulo:function(e,t){return(e%t+t)%t}},t=Array.prototype.slice;l.makeArray=function(e){return Array.isArray(e)?e:null==e?[]:"object"==typeof e&&"number"==typeof e.length?t.call(e):[e]},l.removeFrom=function(e,t){t=e.indexOf(t);-1!=t&&e.splice(t,1)},l.getParent=function(e,t){for(;e.parentNode&&e!=document.body;)if(e=e.parentNode,o(e,t))return e},l.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},l.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},l.filterFindElements=function(e,n){e=l.makeArray(e);var a=[];return e.forEach(function(e){if(e instanceof HTMLElement)if(n){o(e,n)&&a.push(e);for(var t=e.querySelectorAll(n),i=0;i<t.length;i++)a.push(t[i])}else a.push(e)}),a},l.debounceMethod=function(e,t,n){n=n||100;var a=e.prototype[t],o=t+"Timeout";e.prototype[t]=function(){var e=this[o];clearTimeout(e);var t=arguments,i=this;this[o]=setTimeout(function(){a.apply(i,t),delete i[o]},n)}},l.docReady=function(e){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},l.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,i){return t+"-"+i}).toLowerCase()};var d=i.console;return l.htmlInit=function(r,s){l.docReady(function(){var e=l.toDashed(s),n="data-"+e,t=document.querySelectorAll("["+n+"]"),e=document.querySelectorAll(".js-"+e),e=l.makeArray(t).concat(l.makeArray(e)),a=n+"-options",o=i.jQuery;e.forEach(function(t){var e=t.getAttribute(n)||t.getAttribute(a);try{i=e&&JSON.parse(e)}catch(e){return void(d&&d.error("Error parsing "+n+" on "+t.className+": "+e))}var i=new r(t,i);o&&o.data(t,s,i)})})},l}),function(e,t){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],t):"object"==typeof module&&module.exports?module.exports=t(require("ev-emitter"),require("get-size")):(e.Outlayer={},e.Outlayer.Item=t(e.EvEmitter,e.getSize))}(window,function(e,t){"use strict";var i=document.documentElement.style,n="string"==typeof i.transition?"transition":"WebkitTransition",a="string"==typeof i.transform?"transform":"WebkitTransform",o={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[n],r={transform:a,transition:n,transitionDuration:n+"Duration",transitionProperty:n+"Property",transitionDelay:n+"Delay"};function s(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}e=s.prototype=Object.create(e.prototype);e.constructor=s,e._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},e.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},e.getSize=function(){this.size=t(this.element)},e.css=function(e){var t,i=this.element.style;for(t in e)i[r[t]||t]=e[t]},e.getPosition=function(){var e=getComputedStyle(this.element),t=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=e[t?"left":"right"],a=e[i?"top":"bottom"],o=parseFloat(n),r=parseFloat(a),e=this.layout.size;-1!=n.indexOf("%")&&(o=o/100*e.width),-1!=a.indexOf("%")&&(r=r/100*e.height),o=isNaN(o)?0:o,r=isNaN(r)?0:r,o-=t?e.paddingLeft:e.paddingRight,r-=i?e.paddingTop:e.paddingBottom,this.position.x=o,this.position.y=r},e.layoutPosition=function(){var e=this.layout.size,t={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),a=i?"right":"left",o=this.position.x+e[i?"paddingLeft":"paddingRight"];t[i?"left":"right"]=this.getXValue(o),t[a]="";a=n?"bottom":"top",e=this.position.y+e[n?"paddingTop":"paddingBottom"];t[n?"top":"bottom"]=this.getYValue(e),t[a]="",this.css(t),this.emitEvent("layout",[this])},e.getXValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?e/this.layout.size.width*100+"%":e+"px"},e.getYValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?e/this.layout.size.height*100+"%":e+"px"},e._transitionTo=function(e,t){this.getPosition();var i=this.position.x,n=this.position.y,a=e==this.position.x&&t==this.position.y;this.setPosition(e,t),!a||this.isTransitioning?((a={}).transform=this.getTranslate(e-i,t-n),this.transition({to:a,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})):this.layoutPosition()},e.getTranslate=function(e,t){return"translate3d("+(e=this.layout._getOption("originLeft")?e:-e)+"px, "+(t=this.layout._getOption("originTop")?t:-t)+"px, 0)"},e.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},e.moveTo=e._transitionTo,e.setPosition=function(e,t){this.position.x=parseFloat(e),this.position.y=parseFloat(t)},e._nonTransition=function(e){for(var t in this.css(e.to),e.isCleaning&&this._removeStyles(e.to),e.onTransitionEnd)e.onTransitionEnd[t].call(this)},e.transition=function(e){if(parseFloat(this.layout.options.transitionDuration)){var t,i=this._transn;for(t in e.onTransitionEnd)i.onEnd[t]=e.onTransitionEnd[t];for(t in e.to)i.ingProperties[t]=!0,e.isCleaning&&(i.clean[t]=!0);e.from&&(this.css(e.from),this.element.offsetHeight,0),this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0}else this._nonTransition(e)};var l="opacity,"+a.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()});e.enableTransition=function(){var e;this.isTransitioning||(e=this.layout.options.transitionDuration,this.css({transitionProperty:l,transitionDuration:e="number"==typeof e?e+"ms":e,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(o,this,!1))},e.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},e.onotransitionend=function(e){this.ontransitionend(e)};var d={"-webkit-transform":"transform"};e.ontransitionend=function(e){var t,i;e.target===this.element&&(t=this._transn,i=d[e.propertyName]||e.propertyName,delete t.ingProperties[i],function(e){for(var t in e)return;return 1}(t.ingProperties)&&this.disableTransition(),i in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[i]),i in t.onEnd&&(t.onEnd[i].call(this),delete t.onEnd[i]),this.emitEvent("transitionEnd",[this]))},e.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(o,this,!1),this.isTransitioning=!1},e._removeStyles=function(e){var t,i={};for(t in e)i[t]="";this.css(i)};var c={transitionProperty:"",transitionDuration:"",transitionDelay:""};return e.removeTransitionStyles=function(){this.css(c)},e.stagger=function(e){e=isNaN(e)?0:e,this.staggerDelay=e+"ms"},e.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},e.remove=function(){n&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()},e.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},e.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},e.getHideRevealTransitionEndProperty=function(e){var t,e=this.layout.options[e];if(e.opacity)return"opacity";for(t in e)return t},e.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},e.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},e.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},s}),function(a,o){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(e,t,i,n){return o(a,e,t,i,n)}):"object"==typeof module&&module.exports?module.exports=o(a,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):a.Outlayer=o(a,a.EvEmitter,a.getSize,a.fizzyUIUtils,a.Outlayer.Item)}(window,function(e,t,a,n,o){"use strict";function i(){}var r=e.console,s=e.jQuery,l=0,d={};function c(e,t){var i=n.getQueryElement(e);i?(this.element=i,s&&(this.$element=s(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(t),t=++l,this.element.outlayerGUID=t,(d[t]=this)._create(),this._getOption("initLayout")&&this.layout()):r&&r.error("Bad element for "+this.constructor.namespace+": "+(i||e))}c.namespace="outlayer",c.Item=o,c.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var u=c.prototype;function f(e){function t(){e.apply(this,arguments)}return(t.prototype=Object.create(e.prototype)).constructor=t}n.extend(u,t.prototype),u.option=function(e){n.extend(this.options,e)},u._getOption=function(e){var t=this.constructor.compatOptions[e];return t&&void 0!==this.options[t]?this.options[t]:this.options[e]},c.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},u._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},u.reloadItems=function(){this.items=this._itemize(this.element.children)},u._itemize=function(e){for(var t=this._filterFindItemElements(e),i=this.constructor.Item,n=[],a=0;a<t.length;a++){var o=new i(t[a],this);n.push(o)}return n},u._filterFindItemElements=function(e){return n.filterFindElements(e,this.options.itemSelector)},u.getItemElements=function(){return this.items.map(function(e){return e.element})},u.layout=function(){this._resetLayout(),this._manageStamps();var e=this._getOption("layoutInstant"),e=void 0!==e?e:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},u._init=u.layout,u._resetLayout=function(){this.getSize()},u.getSize=function(){this.size=a(this.element)},u._getMeasurement=function(e,t){var i,n=this.options[e];n?("string"==typeof n?i=this.element.querySelector(n):n instanceof HTMLElement&&(i=n),this[e]=i?a(i)[t]:n):this[e]=0},u.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},u._getItemsForLayout=function(e){return e.filter(function(e){return!e.isIgnored})},u._layoutItems=function(e,i){var n;this._emitCompleteOnItems("layout",e),e&&e.length&&(n=[],e.forEach(function(e){var t=this._getItemLayoutPosition(e);t.item=e,t.isInstant=i||e.isLayoutInstant,n.push(t)},this),this._processLayoutQueue(n))},u._getItemLayoutPosition=function(){return{x:0,y:0}},u._processLayoutQueue=function(e){this.updateStagger(),e.forEach(function(e,t){this._positionItem(e.item,e.x,e.y,e.isInstant,t)},this)},u.updateStagger=function(){var e=this.options.stagger;if(null!=e)return this.stagger=function(e){if("number"==typeof e)return e;var t=e.match(/(^\d*\.?\d*)(\w*)/),e=t&&t[1],t=t&&t[2];if(!e.length)return 0;e=parseFloat(e);t=p[t]||1;return e*t}(e),this.stagger;this.stagger=0},u._positionItem=function(e,t,i,n,a){n?e.goTo(t,i):(e.stagger(a*this.stagger),e.moveTo(t,i))},u._postLayout=function(){this.resizeContainer()},u.resizeContainer=function(){var e;!this._getOption("resizeContainer")||(e=this._getContainerSize())&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))},u._getContainerSize=i,u._setContainerMeasure=function(e,t){var i;void 0!==e&&((i=this.size).isBorderBox&&(e+=t?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px")},u._emitCompleteOnItems=function(t,e){var i=this;function n(){i.dispatchEvent(t+"Complete",null,[e])}var a,o=e.length;function r(){++a==o&&n()}e&&o?(a=0,e.forEach(function(e){e.once(t,r)})):n()},u.dispatchEvent=function(e,t,i){var n=t?[t].concat(i):i;this.emitEvent(e,n),s&&(this.$element=this.$element||s(this.element),t?((t=s.Event(t)).type=e,this.$element.trigger(t,i)):this.$element.trigger(e,i))},u.ignore=function(e){e=this.getItem(e);e&&(e.isIgnored=!0)},u.unignore=function(e){e=this.getItem(e);e&&delete e.isIgnored},u.stamp=function(e){(e=this._find(e))&&(this.stamps=this.stamps.concat(e),e.forEach(this.ignore,this))},u.unstamp=function(e){(e=this._find(e))&&e.forEach(function(e){n.removeFrom(this.stamps,e),this.unignore(e)},this)},u._find=function(e){if(e)return"string"==typeof e&&(e=this.element.querySelectorAll(e)),e=n.makeArray(e)},u._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},u._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},u._manageStamp=i,u._getElementOffset=function(e){var t=e.getBoundingClientRect(),i=this._boundingRect,e=a(e);return{left:t.left-i.left-e.marginLeft,top:t.top-i.top-e.marginTop,right:i.right-t.right-e.marginRight,bottom:i.bottom-t.bottom-e.marginBottom}},u.handleEvent=n.handleEvent,u.bindResize=function(){e.addEventListener("resize",this),this.isResizeBound=!0},u.unbindResize=function(){e.removeEventListener("resize",this),this.isResizeBound=!1},u.onresize=function(){this.resize()},n.debounceMethod(c,"onresize",100),u.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},u.needsResizeLayout=function(){var e=a(this.element);return this.size&&e&&e.innerWidth!==this.size.innerWidth},u.addItems=function(e){e=this._itemize(e);return e.length&&(this.items=this.items.concat(e)),e},u.appended=function(e){e=this.addItems(e);e.length&&(this.layoutItems(e,!0),this.reveal(e))},u.prepended=function(e){var t=this._itemize(e);t.length&&(e=this.items.slice(0),this.items=t.concat(e),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(e))},u.reveal=function(e){var i;this._emitCompleteOnItems("reveal",e),e&&e.length&&(i=this.updateStagger(),e.forEach(function(e,t){e.stagger(t*i),e.reveal()}))},u.hide=function(e){var i;this._emitCompleteOnItems("hide",e),e&&e.length&&(i=this.updateStagger(),e.forEach(function(e,t){e.stagger(t*i),e.hide()}))},u.revealItemElements=function(e){e=this.getItems(e);this.reveal(e)},u.hideItemElements=function(e){e=this.getItems(e);this.hide(e)},u.getItem=function(e){for(var t=0;t<this.items.length;t++){var i=this.items[t];if(i.element==e)return i}},u.getItems=function(e){e=n.makeArray(e);var t=[];return e.forEach(function(e){e=this.getItem(e);e&&t.push(e)},this),t},u.remove=function(e){e=this.getItems(e);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(e){e.remove(),n.removeFrom(this.items,e)},this)},u.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="",this.items.forEach(function(e){e.destroy()}),this.unbindResize();e=this.element.outlayerGUID;delete d[e],delete this.element.outlayerGUID,s&&s.removeData(this.element,this.constructor.namespace)},c.data=function(e){e=(e=n.getQueryElement(e))&&e.outlayerGUID;return e&&d[e]},c.create=function(e,t){var i=f(c);return i.defaults=n.extend({},c.defaults),n.extend(i.defaults,t),i.compatOptions=n.extend({},c.compatOptions),i.namespace=e,i.data=c.data,i.Item=f(o),n.htmlInit(i,e),s&&s.bridget&&s.bridget(e,i),i};var p={ms:1,s:1e3};return c.Item=o,c}),function(e,t){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],t):"object"==typeof module&&module.exports?module.exports=t(require("outlayer"),require("get-size")):e.Masonry=t(e.Outlayer,e.getSize)}(window,function(e,s){var t=e.create("masonry");t.compatOptions.fitWidth="isFitWidth";e=t.prototype;return e._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var e=0;e<this.cols;e++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},e.measureColumns=function(){this.getContainerWidth(),this.columnWidth||(i=(t=this.items[0])&&t.element,this.columnWidth=i&&s(i).outerWidth||this.containerWidth);var e=this.columnWidth+=this.gutter,t=this.containerWidth+this.gutter,i=t/e,e=e-t%e,i=Math[e&&e<1?"round":"floor"](i);this.cols=Math.max(i,1)},e.getContainerWidth=function(){var e=this._getOption("fitWidth")?this.element.parentNode:this.element,e=s(e);this.containerWidth=e&&e.innerWidth},e._getItemLayoutPosition=function(e){e.getSize();for(var t=e.size.outerWidth%this.columnWidth,i=Math[t&&t<1?"round":"ceil"](e.size.outerWidth/this.columnWidth),i=Math.min(i,this.cols),n=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](i,e),t={x:this.columnWidth*n.col,y:n.y},a=n.y+e.size.outerHeight,o=i+n.col,r=n.col;r<o;r++)this.colYs[r]=a;return t},e._getTopColPosition=function(e){var t=this._getTopColGroup(e),e=Math.min.apply(Math,t);return{col:t.indexOf(e),y:e}},e._getTopColGroup=function(e){if(e<2)return this.colYs;for(var t=[],i=this.cols+1-e,n=0;n<i;n++)t[n]=this._getColGroupY(n,e);return t},e._getColGroupY=function(e,t){if(t<2)return this.colYs[e];t=this.colYs.slice(e,e+t);return Math.max.apply(Math,t)},e._getHorizontalColPosition=function(e,t){var i=this.horizontalColIndex%this.cols,i=1<e&&i+e>this.cols?0:i,t=t.size.outerWidth&&t.size.outerHeight;return this.horizontalColIndex=t?i+e:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,e)}},e._manageStamp=function(e){var t=s(e),i=this._getElementOffset(e),n=this._getOption("originLeft")?i.left:i.right,e=n+t.outerWidth,n=Math.floor(n/this.columnWidth),n=Math.max(0,n),a=Math.floor(e/this.columnWidth);a-=e%this.columnWidth?0:1;for(var a=Math.min(this.cols-1,a),o=(this._getOption("originTop")?i.top:i.bottom)+t.outerHeight,r=n;r<=a;r++)this.colYs[r]=Math.max(o,this.colYs[r])},e._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this._getOption("fitWidth")&&(e.width=this._getContainerFitWidth()),e},e._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},e.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!=this.containerWidth},t}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.pell={})}(this,function(e){"use strict";function r(e,t,i){return e.addEventListener(t,i)}function s(e,t){return e.appendChild(t)}function l(e){return document.createElement(e)}function t(e){return document.queryCommandState(e)}function d(e){return document.execCommand(e,!1,1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)}function i(t){var e=t.actions?t.actions.map(function(e){return"string"==typeof e?p[e]:p[e.name]?c({},p[e.name],e):e}):Object.keys(p).map(function(e){return p[e]}),n=c({},h,t.classes),i=t[u]||"div",a=l("div");a.className=n.actionbar,s(t.element,a);var o=t.element.content=l("div");return o.contentEditable=!0,o.className=n.content,o.oninput=function(e){e=e.target.firstChild;e&&3===e.nodeType?d(f,"<"+i+">"):"<br>"===o.innerHTML&&(o.innerHTML=""),t.onChange(o.innerHTML)},o.onkeydown=function(e){"Enter"===e.key&&"blockquote"===(e=f,document.queryCommandValue(e))&&setTimeout(function(){return d(f,"<"+i+">")},0)},s(t.element,o),e.forEach(function(e){var t,i=l("button");i.className=n.button,i.innerHTML=e.icon,i.title=e.title,i.setAttribute("type","button"),i.onclick=function(){return e.result()&&o.focus()},e.state&&(r(o,"keyup",t=function(){return i.classList[e.state()?"add":"remove"](n.selected)}),r(o,"mouseup",t),r(i,"click",t)),s(a,i)}),t.styleWithCSS&&d("styleWithCSS"),d(u,i),t.element}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u="defaultParagraphSeparator",f="formatBlock",p={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return t("bold")},result:function(){return d("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return t("italic")},result:function(){return d("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return t("underline")},result:function(){return d("underline")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return t("strikeThrough")},result:function(){return d("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return d(f,"<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return d(f,"<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return d(f,"<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return d(f,"<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return d("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return d("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return d(f,"<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return d("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var e=window.prompt("Enter the link URL");e&&d("createLink",e)}},image:{icon:"&#128247;",title:"Image",result:function(){var e=window.prompt("Enter the image URL");e&&d("insertImage",e)}}},h={actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},n={exec:d,init:i};e.exec=d,e.init=i,e.default=n,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).DOMPurify=t()}(this,function(){"use strict";var n,a=Object.hasOwnProperty,o=Object.setPrototypeOf,r=Object.isFrozen,s=Object.getPrototypeOf,l=Object.getOwnPropertyDescriptor,ze=Object.freeze,e=Object.seal,d=Object.create,t="undefined"!=typeof Reflect&&Reflect,c=(c=t.apply)||function(e,t,i){return e.apply(t,i)},ze=ze||function(e){return e},e=e||function(e){return e},u=(u=t.construct)||function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(t))))},_e=f(Array.prototype.forEach),Re=f(Array.prototype.pop),He=f(Array.prototype.push),Be=f(String.prototype.toLowerCase),Fe=f(String.prototype.match),Pe=f(String.prototype.replace),We=f(String.prototype.indexOf),je=f(String.prototype.trim),Ue=f(RegExp.prototype.test),Ge=(n=TypeError,function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return u(n,t)});function f(a){return function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return c(a,e,i)}}function qe(e,t){o&&o(e,null);for(var i=t.length;i--;){var n,a=t[i];"string"!=typeof a||(n=Be(a))!==a&&(r(t)||(t[i]=n),a=n),e[a]=!0}return e}function Ye(e){var t=d(null),i=void 0;for(i in e)c(a,e,[i])&&(t[i]=e[i]);return t}function Je(e,t){for(;null!==e;){var i=l(e,t);if(i){if(i.get)return f(i.get);if("function"==typeof i.value)return f(i.value)}e=s(e)}return function(e){return console.warn("fallback value for",e),null}}var Ve=ze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Qe=ze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$e=ze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Xe=ze(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ze=ze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Ke=ze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),et=ze(["#text"]),tt=ze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),it=ze(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),nt=ze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),at=ze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ot=e(/\{\{[\s\S]*|[\s\S]*\}\}/gm),rt=e(/<%[\s\S]*|[\s\S]*%>/gm),st=e(/^data-[\-\w.\u00B7-\uFFFF]/),lt=e(/^aria-[\-\w]+$/),dt=e(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ct=e(/^(?:\w+script|data):/i),ut=e(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function pt(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var ht=function(){return"undefined"==typeof window?null:window},mt=function(e,t){if("object"!==(void 0===e?"undefined":ft(e))||"function"!=typeof e.createPolicy)return null;var i=null,n="data-tt-policy-suffix",i="dompurify"+((i=t.currentScript&&t.currentScript.hasAttribute(n)?t.currentScript.getAttribute(n):i)?"#"+i:"");try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};return function t(e){function c(e){return t(e)}var s=0<arguments.length&&void 0!==e?e:ht();if(c.version="2.3.4",c.removed=[],!s||!s.document||9!==s.document.nodeType)return c.isSupported=!1,c;var l=s.document,a=s.document,d=s.DocumentFragment,i=s.HTMLTemplateElement,u=s.Node,r=s.Element,n=s.NodeFilter,o=s.NamedNodeMap,f=void 0===o?s.NamedNodeMap||s.MozNamedAttrMap:o,p=s.HTMLFormElement,h=s.DOMParser,e=s.trustedTypes,o=r.prototype,m=Je(o,"cloneNode"),g=Je(o,"nextSibling"),b=Je(o,"childNodes"),v=Je(o,"parentNode");"function"!=typeof i||(i=a.createElement("template")).content&&i.content.ownerDocument&&(a=i.content.ownerDocument);var y=mt(e,l),D=y&&K?y.createHTML(""):"",x=a.implementation,w=a.createNodeIterator,C=a.createDocumentFragment,k=a.getElementsByTagName,I=l.importNode,e={};try{e=Ye(a).documentMode?a.documentMode:{}}catch(e){}var N={};c.isSupported="function"==typeof v&&x&&void 0!==x.createHTMLDocument&&9!==e;function T(e){return e instanceof RegExp||e instanceof Function}function A(e){be&&be===e||(e=Ye(e=e&&"object"===(void 0===e?"undefined":ft(e))?e:{}),H="ALLOWED_TAGS"in e?qe({},e.ALLOWED_TAGS):B,F="ALLOWED_ATTR"in e?qe({},e.ALLOWED_ATTR):P,se="ADD_URI_SAFE_ATTR"in e?qe(Ye(le),e.ADD_URI_SAFE_ATTR):le,oe="ADD_DATA_URI_TAGS"in e?qe(Ye(re),e.ADD_DATA_URI_TAGS):re,ne="FORBID_CONTENTS"in e?qe({},e.FORBID_CONTENTS):ae,j="FORBID_TAGS"in e?qe({},e.FORBID_TAGS):{},U="FORBID_ATTR"in e?qe({},e.FORBID_ATTR):{},S="USE_PROFILES"in e&&e.USE_PROFILES,G=!1!==e.ALLOW_ARIA_ATTR,q=!1!==e.ALLOW_DATA_ATTR,Y=e.ALLOW_UNKNOWN_PROTOCOLS||!1,J=e.SAFE_FOR_TEMPLATES||!1,V=e.WHOLE_DOCUMENT||!1,X=e.RETURN_DOM||!1,Z=e.RETURN_DOM_FRAGMENT||!1,K=e.RETURN_TRUSTED_TYPE||!1,$=e.FORCE_BODY||!1,ee=!1!==e.SANITIZE_DOM,te=!1!==e.KEEP_CONTENT,ie=e.IN_PLACE||!1,R=e.ALLOWED_URI_REGEXP||R,fe=e.NAMESPACE||ue,e.CUSTOM_ELEMENT_HANDLING&&T(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&T(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(W.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),he=-1===me.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,ge="application/xhtml+xml"===he?function(e){return e}:Be,J&&(q=!1),Z&&(X=!0),S&&(H=qe({},[].concat(pt(et))),F=[],!0===S.html&&(qe(H,Ve),qe(F,tt)),!0===S.svg&&(qe(H,Qe),qe(F,it),qe(F,at)),!0===S.svgFilters&&(qe(H,$e),qe(F,it),qe(F,at)),!0===S.mathMl&&(qe(H,Ze),qe(F,nt),qe(F,at))),e.ADD_TAGS&&qe(H=H===B?Ye(H):H,e.ADD_TAGS),e.ADD_ATTR&&qe(F=F===P?Ye(F):F,e.ADD_ATTR),e.ADD_URI_SAFE_ATTR&&qe(se,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&qe(ne=ne===ae?Ye(ne):ne,e.FORBID_CONTENTS),te&&(H["#text"]=!0),V&&qe(H,["html","head","body"]),H.table&&(qe(H,["tbody"]),delete j.tbody),ze&&ze(e),be=e)}var S,E=ot,M=rt,O=st,L=lt,z=ct,_=ut,R=dt,H=null,B=qe({},[].concat(pt(Ve),pt(Qe),pt($e),pt(Ze),pt(et))),F=null,P=qe({},[].concat(pt(tt),pt(it),pt(nt),pt(at))),W=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),j=null,U=null,G=!0,q=!0,Y=!1,J=!1,V=!1,Q=!1,$=!1,X=!1,Z=!1,K=!1,ee=!0,te=!0,ie=!1,ne=null,ae=qe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),oe=null,re=qe({},["audio","video","img","source","image","track"]),se=null,le=qe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),de="http://www.w3.org/1998/Math/MathML",ce="http://www.w3.org/2000/svg",ue="http://www.w3.org/1999/xhtml",fe=ue,pe=!1,he=void 0,me=["application/xhtml+xml","text/html"],ge=void 0,be=null,ve=a.createElement("form"),ye=qe({},["mi","mo","mn","ms","mtext"]),De=qe({},["foreignobject","desc","title","annotation-xml"]),xe=qe({},Qe);qe(xe,$e),qe(xe,Xe);var we=qe({},Ze);qe(we,Ke);function Ce(t){He(c.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=D}catch(e){t.remove()}}}function ke(e,t){try{He(c.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){He(c.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!F[e])if(X||Z)try{Ce(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}function Ie(e){var t=void 0,i=void 0;$?e="<remove></remove>"+e:i=(n=Fe(e,/^[\r\n\t ]+/))&&n[0],"application/xhtml+xml"===he&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var n=y?y.createHTML(e):e;if(fe===ue)try{t=(new h).parseFromString(n,he)}catch(e){}if(!t||!t.documentElement){t=x.createDocument(fe,"template",null);try{t.documentElement.innerHTML=pe?"":n}catch(e){}}return n=t.body||t.documentElement,e&&i&&n.insertBefore(a.createTextNode(i),n.childNodes[0]||null),fe===ue?k.call(t,V?"html":"body")[0]:V?t.documentElement:n}function Ne(e){return w.call(e.ownerDocument||e,e,n.SHOW_ELEMENT|n.SHOW_COMMENT|n.SHOW_TEXT,null,!1)}function Te(e){return"object"===(void 0===u?"undefined":ft(u))?e instanceof u:e&&"object"===(void 0===e?"undefined":ft(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function Ae(e,t,i){N[e]&&_e(N[e],function(e){e.call(c,t,i,be)})}function Se(e){var t;if(Ae("beforeSanitizeElements",e,null),(i=e)instanceof p&&("string"!=typeof i.nodeName||"string"!=typeof i.textContent||"function"!=typeof i.removeChild||!(i.attributes instanceof f)||"function"!=typeof i.removeAttribute||"function"!=typeof i.setAttribute||"string"!=typeof i.namespaceURI||"function"!=typeof i.insertBefore))return Ce(e),1;if(Fe(e.nodeName,/[\u0080-\uFFFF]/))return Ce(e),1;var i=ge(e.nodeName);if(Ae("uponSanitizeElement",e,{tagName:i,allowedTags:H}),!Te(e.firstElementChild)&&(!Te(e.content)||!Te(e.content.firstElementChild))&&Ue(/<[/\w]/g,e.innerHTML)&&Ue(/<[/\w]/g,e.textContent))return Ce(e),1;if("select"===i&&Ue(/<template/i,e.innerHTML))return Ce(e),1;if(H[i]&&!j[i])return e instanceof r&&!function(e){var t=v(e);t&&t.tagName||(t={namespaceURI:ue,tagName:"template"});var i=Be(e.tagName),n=Be(t.tagName);return e.namespaceURI===ce?t.namespaceURI===ue?"svg"===i:t.namespaceURI===de?"svg"===i&&("annotation-xml"===n||ye[n]):Boolean(xe[i]):e.namespaceURI===de?t.namespaceURI===ue?"math"===i:t.namespaceURI===ce?"math"===i&&De[n]:Boolean(we[i]):e.namespaceURI===ue&&((t.namespaceURI!==ce||De[n])&&((t.namespaceURI!==de||ye[n])&&(n=qe({},["title","style","font","a","script"]),!we[i]&&(n[i]||!xe[i]))))}(e)||("noscript"===i||"noembed"===i)&&Ue(/<\/no(script|embed)/i,e.innerHTML)?(Ce(e),1):(J&&3===e.nodeType&&(t=e.textContent,t=Pe(t,E," "),t=Pe(t,M," "),e.textContent!==t&&(He(c.removed,{element:e.cloneNode()}),e.textContent=t)),Ae("afterSanitizeElements",e,null),0);if(te&&!ne[i]){var n=v(e)||e.parentNode,a=b(e)||e.childNodes;if(a&&n)for(var o=a.length-1;0<=o;--o)n.insertBefore(m(a[o],!0),g(e))}if(!j[i]&&Le(i)){if(W.tagNameCheck instanceof RegExp&&Ue(W.tagNameCheck,i))return;if(W.tagNameCheck instanceof Function&&W.tagNameCheck(i))return}return Ce(e),1}function Ee(e,t,i){if(ee&&("id"===t||"name"===t)&&(i in a||i in ve))return!1;if((!q||U[t]||!Ue(O,t))&&(!G||!Ue(L,t)))if(!F[t]||U[t]){if(!(Le(e)&&(W.tagNameCheck instanceof RegExp&&Ue(W.tagNameCheck,e)||W.tagNameCheck instanceof Function&&W.tagNameCheck(e))&&(W.attributeNameCheck instanceof RegExp&&Ue(W.attributeNameCheck,t)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(t))||"is"===t&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&Ue(W.tagNameCheck,i)||W.tagNameCheck instanceof Function&&W.tagNameCheck(i))))return!1}else if(!se[t]&&!Ue(R,Pe(i,_,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==We(i,"data:")||!oe[e])&&(!Y||Ue(z,Pe(i,_,"")))&&i)return!1;return!0}function Me(e){var t=void 0,i=void 0,n=void 0;Ae("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){for(var o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:F},n=a.length;n--;){var r=(t=a[n]).name,s=t.namespaceURI,i=je(t.value),l=ge(r);if(o.attrName=l,o.attrValue=i,o.keepAttr=!0,o.forceKeepAttr=void 0,Ae("uponSanitizeAttribute",e,o),i=o.attrValue,!o.forceKeepAttr&&(ke(r,e),o.keepAttr))if(Ue(/\/>/i,i))ke(r,e);else{J&&(i=Pe(i,E," "),i=Pe(i,M," "));var d=ge(e.nodeName);if(Ee(d,l,i))try{s?e.setAttributeNS(s,r,i):e.setAttribute(r,i),Re(c.removed)}catch(e){}}}Ae("afterSanitizeAttributes",e,null)}}function Oe(e){var t,i=Ne(e);for(Ae("beforeSanitizeShadowDOM",e,null);t=i.nextNode();)Ae("uponSanitizeShadowNode",t,null),Se(t)||(t.content instanceof d&&Oe(t.content),Me(t));Ae("afterSanitizeShadowDOM",e,null)}var Le=function(e){return 0<e.indexOf("-")};return c.sanitize=function(e,t){var i,n=void 0,a=void 0,o=void 0;if("string"!=typeof(e=(pe=!e)?"\x3c!--\x3e":e)&&!Te(e)){if("function"!=typeof e.toString)throw Ge("toString is not a function");if("string"!=typeof(e=e.toString()))throw Ge("dirty is not a string, aborting")}if(!c.isSupported){if("object"===ft(s.toStaticHTML)||"function"==typeof s.toStaticHTML){if("string"==typeof e)return s.toStaticHTML(e);if(Te(e))return s.toStaticHTML(e.outerHTML)}return e}if(Q||A(t),c.removed=[],"string"==typeof e&&(ie=!1),!ie)if(e instanceof u)1===(t=(n=Ie("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===t.nodeName||"HTML"===t.nodeName?n=t:n.appendChild(t);else{if(!X&&!J&&!V&&-1===e.indexOf("<"))return y&&K?y.createHTML(e):e;if(!(n=Ie(e)))return X?null:D}n&&$&&Ce(n.firstChild);for(var r=Ne(ie?e:n);i=r.nextNode();)3===i.nodeType&&i===a||Se(i)||(i.content instanceof d&&Oe(i.content),Me(i),a=i);if(a=null,ie)return e;if(X){if(Z)for(o=C.call(n.ownerDocument);n.firstChild;)o.appendChild(n.firstChild);else o=n;return o=F.shadowroot?I.call(l,o,!0):o}return e=V?n.outerHTML:n.innerHTML,J&&(e=Pe(e,E," "),e=Pe(e,M," ")),y&&K?y.createHTML(e):e},c.setConfig=function(e){A(e),Q=!0},c.clearConfig=function(){be=null,Q=!1},c.isValidAttribute=function(e,t,i){return be||A({}),e=ge(e),t=ge(t),Ee(e,t,i)},c.addHook=function(e,t){"function"==typeof t&&(N[e]=N[e]||[],He(N[e],t))},c.removeHook=function(e){N[e]&&Re(N[e])},c.removeHooks=function(e){N[e]&&(N[e]=[])},c.removeAllHooks=function(){N={}},c}()});var apexBIDashBoard=function(je,Ue){"use strict";var Ge={featureDetails:{name:"Material-BI-Dashboard",scriptVersion:"1.0.0.26",utilVersion:"1.6",url:"https://github.com/RonnyWeiss",url2:"https://linktr.ee/ronny.weiss",license:"CC BY-ND 4.0 License"},isDefinedAndNotNull:function(e){return null!=e&&""!=e},groupObjectArray:function(e,n){return e&&Array.isArray(e)?e.reduce(function(e,t){var i=t[n];return i&&(e[i="​"+i]=e[i]||[]).push(t),e},{}):[]},link:function(e,t="_parent"){null!=e&&""!=e&&window.open(e,t)},tooltip:{show:function(e,t,i){try{var n;0==Ue("#dynToolTip").length?(n=Ue("<div></div>").attr("id","dynToolTip").css("max-width","400px").css("position","absolute").css("top","0px").css("left","0px").css("z-index","2000").css("background-color","rgba(240, 240, 240, 1)").css("padding","10px").css("display","block").css("top","0").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto"),t&&n.css("background-color",t),i&&n.css("max-width",i),Ue("body").append(n)):Ue("#dynToolTip").css("visibility","visible"),Ue("#dynToolTip").html(e),Ue("#dynToolTip").find("*").css("max-width","100%").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto").css("white-space","normal"),Ue("#dynToolTip").find("img").css("object-fit","contain").css("object-position","50% 0%")}catch(e){je.debug.error({fct:"utils.js",msg:"Error while try to show tooltip",err:e})}},setPosition:function(e){Ue("#dynToolTip").position({my:"left+6 top+6",of:e,collision:"flipfit"})},hide:function(){Ue("#dynToolTip").css("visibility","hidden")},remove:function(){Ue("#dynToolTip").remove()}},escapeHTML:function(e){if(null===e)return null;if(void 0!==e){if("object"==typeof e)try{e=JSON.stringify(e)}catch(e){}return je.util.escapeHTML(String(e))}},loader:{start:function(e,t){t&&Ue(e).css("min-height","100px"),je.util.showSpinner(Ue(e))},stop:function(e,t){t&&Ue(e).css("min-height",""),Ue(e+" > .u-Processing").remove(),Ue(e+" > .ct-loader").remove()}},splitString2Array:function(e){if(null!=e&&""!=e&&0<e.length){if(je&&je.server&&je.server.chunk)return je.server.chunk(e);var t,i=[];if(8e3<e.length){for(i=[],t=0;t<e.length;)i.push(e.substr(t,8e3)),t+=8e3;return i}return i.push(e),i}return[]},jsonSaveExtend:function(t,i){var n={},e={};if("string"==typeof i)try{e=JSON.parse(i)}catch(e){je.debug.error({fct:Ge.featureDetails.name+" - util.js",msg:"Error while try to parse targetConfig. Please check your Config JSON. Standard Config will be used.",err:e,targetConfig:i})}else e=Ue.extend(!0,{},i);try{n=Ue.extend(!0,{},t,e)}catch(e){n=Ue.extend(!0,{},t),je.debug.error({fct:Ge.featureDetails.name+" - util.js",msg:"Error while try to merge 2 JSONs into standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used.",err:e,finalConfig:n})}return n},printDOMMessage:{show:function(e,t,i,n){var a,o,r,s;150<=Ue(e).height()?(o=Ue("<div></div>").css("margin","12px").css("text-align","center").css("padding","10px 0").addClass("dominfomessagediv"),a=Ue("<div></div>"),r=Ue("<span></span>").addClass("fa").addClass(i||"fa-info-circle-o").addClass("fa-2x").css("height","32px").css("width","32px").css("margin-bottom","16px").css("color",n||"#D0D0D0"),a.append(r),s=Ue("<span></span>").text(t).css("display","block").css("color","#707070").css("text-overflow","ellipsis").css("overflow","hidden").css("white-space","nowrap").css("font-size","12px"),o.append(a).append(s)):(o=Ue("<div></div>").css("margin","10px").css("text-align","center").addClass("dominfomessagediv"),r=Ue("<span></span>").addClass("fa").addClass(i||"fa-info-circle-o").css("font-size","22px").css("line-height","26px").css("margin-right","5px").css("color",n||"#D0D0D0"),s=Ue("<span></span>").text(t).css("color","#707070").css("text-overflow","ellipsis").css("overflow","hidden").css("white-space","nowrap").css("font-size","12px").css("line-height","20px"),o.append(r).append(s)),Ue(e).append(o)},hide:function(e){Ue(e).children(".dominfomessagediv").remove()}},noDataMessage:{show:function(e,t){Ge.printDOMMessage.show(e,t,"fa-search")},hide:function(e){Ge.printDOMMessage.hide(e)}},errorMessage:{show:function(e,t){Ge.printDOMMessage.show(e,t,"fa-exclamation-triangle","#FFCB3D")},hide:function(e){Ge.printDOMMessage.hide(e)}},cutString:function(t,e){try{return!(e<0)&&t.length>e?t.substring(0,e-3)+"...":t}catch(e){return t}},isBetween:function(e,t,i){i=i||0;return t-i<=e&&e<=t+i}};function qe(e,t,i){return i?void 0!==e&&null!=e?1==e||"true"===e:t:Ge.isDefinedAndNotNull(e)?e:t}function ne(e,t,i,n,a){t=e.append("defs").append("filter").attr("id",t);t.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",a).attr("result","blur"),t.append("feOffset").attr("in","blur").attr("dx",n).attr("dy",i).attr("result","offsetBlur"),t.append("feFlood").attr("in","offsetBlur").attr("flood-color","#000").attr("flood-opacity","0.26").attr("result","offsetColor"),t.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("operator","in").attr("result","offsetBlur");t=t.append("feMerge");t.append("feMergeNode").attr("in","offsetBlur"),t.append("feMergeNode").attr("in","SourceGraphic")}function Ye(e,t,i,n){return!1!==n?Ge.escapeHTML(e):!0!==i&&-1<Ue.inArray("sanitizer",t.features)&&!0!==i?DOMPurify.sanitize(e,t.purifyOptions):e}return{initialize:function(f,u,g,e,t,i,p,n,a,o,r,Fe,s,te,l,d,c,h){je.debug.info({fct:Ge.featureDetails.name+" - initialize",arguments:{pRegionID:f,pRegionIDRefresh:u,pAjaxID:g,pNoDataMsg:e,pErrMsg:t,pDefaultConfigJSON:i,pLoadingMethod:p,pFeatures:n,pChartConfigJSON:a,pItems2Submit:o,pItems2SubmitImg:r,pRequireHTMLEscape:Fe,pPurifyOptions:s,pMapURL:te,pMapOptions:l,pTableConfigJSON:d,pClockOptions:c,pCalendarOptions:h},featureDetails:Ge.featureDetails});var m,b,v="#"+f,y=Ue(v),D="#"+u,ie={},Pe={},x=0;Pe.defTime=500;var We=5,w=10,C=10,k=0;if(f&&0<y.length){y.addClass(f),Ge.loader.start(D);var I,N={itemSelector:"."+f+"-item",columnWidth:"."+f+"-sizer",horizontalOrder:!1,initLayout:!0,percentPosition:!0,transitionDuration:0,gutter:0};Ge.isDefinedAndNotNull(n)&&(I=n.split(":"));var T,A,S,E,M,O,L={},n={};(L=Ge.jsonSaveExtend({footprint:!0,isSortable:!1,colSpan:12,height:400,refresh:0,backColor:"transparent",color:"inherit",optionsLink:{backColor:"transparent",color:"inherit",icon:"fa-link"},optionsLinkTop:{backColor:"transparent",color:"inherit",icon:"fa-link"},title:{backColor:"transparent",color:"inherit",icon:null}},i)).features=[],I&&0<I.length&&(L.features=I),-1<Ue.inArray("charts",L.features)?(T=Ge.jsonSaveExtend({axisLabelPosition:"inner3",background:null,chartTitle:null,gauge:{min:0,max:null,type:"single",width:null,arcMinWidth:null,fullCircle:!1,title:null},grid:{x:!0,y:!0},legend:{position:"right",show:!0},line:{step:"step"},padding:{bottom:null,left:null,right:null,top:null},rotateAxis:!1,showDataLabels:!1,showDataPoints:!0,showAbsoluteValues:!1,threshold:.05,tooltip:{grouped:!0,show:!0},transitionDuration:200,x:{axisHeight:null,label:"x Axis",timeFormat:"%Y-%m-%dT%H:%M:%S",type:"category",tick:{cutAfter:30,maxNumber:25,multiline:!1,rotation:60,autoRotate:!0,timeFormat:"%y-%m-%d %H:%M",fit:!0}},y:{label:"y Axis 1",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},y2:{label:"y Axis 2",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},zoom:{enabled:!0,type:"scroll",rescale:!1}},a),L.d3chart=T):L.d3chart=null,-1<Ue.inArray("table",L.features)?(A=Ge.jsonSaveExtend({header:{background:"white",textAlign:"left",color:"inherit",border:"1px solid rgba(240, 240, 240, 1)"},cells:{background:"transparent",textAlign:"left",color:"inherit",border:"1px solid rgba(240, 240, 240, 1)"},evenRow:{background:"white",textAlign:"left",color:"inherit",borderBottom:"1px solid rgba(240, 240, 240, 1)"},oddRow:{background:"rgb(240,240,240)",textAlign:"left",color:"inherit",borderBottom:"1px solid rgba(240, 240, 240, 1)"}},d),L.table=A):L.table=null,-1<Ue.inArray("sanitizer",L.features)?(S=Ge.jsonSaveExtend({ALLOWED_ATTR:["accesskey","align","alt","always","autocomplete","autoplay","border","cellpadding","cellspacing","charset","class","dir","height","href","id","lang","name","rel","required","src","style","summary","tabindex","target","title","type","value","width"],ALLOWED_TAGS:["a","address","b","blockquote","br","caption","code","dd","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","label","li","nl","ol","p","pre","s","span","strike","strong","sub","sup","table","tbody","td","th","thead","tr","u","ul"]},s),L.purifyOptions=S):L.purifyOptions=null,-1<Ue.inArray("map",L.features)?(E=Ge.jsonSaveExtend({tour:{enabled:!0,direction:"right",speed:2,start:-30,shadowEffect:!0},circles:{color:"rgb(97, 159, 209)",radius:5,opacity:.8,opacityHover:.65,shadows:!1},map:{stroke:"#303030",strokeWidth:"0.5px",color:"#eee",centerLongitude:0,centerLatitude:0,initialZoom:1,zoomEnabled:!0,shadows:!0}},l),L.mapOptions=E):L.mapOptions=null,-1<Ue.inArray("clock",L.features)?(M=Ge.jsonSaveExtend({shadows:!1,label:{labelColor:"#303030",labelColor2:"#303030"},hour:{labelColor:"#303030",tickColor:"#999"},second:{label:!1,labelColor:"#707070",tickColor:"#ccc"},hands:{color:"#303030",coverFillColor:"white",coverStrokeColor:"#999",coverSize:2},circle:{color:"#ccc",width:5,fillColor:"#eeeeee"}},c),L.clockOptions=M):L.clockOptions=null,-1<Ue.inArray("calendar",L.features)?(n=Ge.jsonSaveExtend({eventLimitPerDay:2,viewType:"dayGridMonth",displayTime:!0,hours12:!1,timeGridStartTime:"06:00:00"},h),L.calendarOptions=n):L.calendarOptions=null,L.noDataMessage=e,L.errorMessage=t,L.items2Submit=o,L.items2SubmitImg=r,je.debug.info({fct:Ge.featureDetails.name+" - initialize",finalConfigJSON:L,featureDetails:Ge.featureDetails}),Ue(document).on("scroll touchmove",function(){x=Ue(document).scrollTop()}),z(0,L);try{u?Ue(D).bind("apexrefresh",function(){je.debug.info({fct:Ge.featureDetails.name+" - initialize",msg:"Refresh event was fired",featureDetails:Ge.featureDetails}),z(0,L,!0)}):je.debug.error({fct:Ge.featureDetails.name+" - initialize",msg:"Can't bind refresh event because Refresh Region ID is missing",featureDetails:Ge.featureDetails})}catch(e){je.debug.error({fct:Ge.featureDetails.name+" - initialize",msg:"Can't bind refresh event on",err:e,featureDetails:Ge.featureDetails})}0<L.refresh&&(O=setInterval(function(){0===Ue(y).length?clearInterval(O):(je.debug.info({fct:Ge.featureDetails.name+" - initialize",msg:"Refresh by time was fired",featureDetails:Ge.featureDetails}),z(0,L,!0))},1e3*L.refresh))}else je.debug.error({fct:Ge.featureDetails.name+" - initialize",msg:"Can't find pRegionID: "+f,featureDetails:Ge.featureDetails});function z(e,t,i){i&&(Ge.loader.start(D),k++);var n=t.items2Submit;je.server.plugin(g,{pageItems:n,x01:"items"},{success:function(e){!function(e,n){je.debug.info({fct:Ge.featureDetails.name+" - drawGridItems",ajaxResponse:e,featureDetails:Ge.featureDetails});var t="."+f;function i(){m&&m.destroy(),m=new Masonry(t,N)}Pe.outerItemIntervals&&0<Pe.outerItemIntervals.length&&Ue.each(Pe.outerItemIntervals,function(e,t){clearInterval(t)});Pe.outerItemIntervals=[],Pe.d3Timer&&0<Pe.d3Timer.length&&Ue.each(Pe.d3Timer,function(e,t){t.stop()});Pe.d3Timer=[],Pe.innerItemsIntervals&&Ue.each(Pe.innerItemsIntervals,function(e,t){clearInterval(t)});Pe.innerItemsIntervals={},y.empty();var a,o,r=Ue("<div></div>");{var s;r.addClass("bida-container-sizer"),r.addClass(f+"-sizer"),y.append(r),e.items&&0<e.items.length?(y.removeClass("bida-container-nodat"),Ue.each(e.items,function(e,t){var i=n.colSpan;!function(e,t,i,n,a){var o=Ge.jsonSaveExtend(null,n),r=f+"--"+e,s="#"+r,l=(n.height||a.height)-C,d=Ue("<div></div>");d.attr("id",r),d.attr("item-id",n.itemID),d.addClass("bida-container-item"),d.addClass(f+"-item"),d.addClass("bida-container-item--width"+t),d.css("min-height",l),d.css("background",n.backColor||a.backColor),d.css("color",n.color||a.color),Ge.isDefinedAndNotNull(n.itemID)&&(d.attr("item-id",n.itemID),d.addClass(u+"--"+n.itemID));i.append(d),_(e,l,s,o,a);o=qe(n.isAsync,!1,!0);{var c;"A"===p&&o&&(Ue(d).on("itemrefresh",function(){n.itemData=null,_(e,l,s,n,a,!0)}),0<n.refresh&&(c=setInterval(function(){0===Ue(s).length?clearInterval(c):(n.itemData=null,_(e,l,s,n,a,!0))},1e3*n.refresh),Pe.outerItemIntervals.push(c)))}}(e,i=t.colSpan||i,y,t,n)}),n.footprint&&function(e){var t=Ue("<div></div>");t.css("position","absolute"),t.css("margin","-5px"),t.css("bottom","0px"),t.css("right","10px"),t.css("font-size","9px"),t.css("color","rgb(0,0,0,0.3)"),t.css("line-height","9px");var i=Ue("<i></i>");i.addClass("fa"),i.addClass("fa-heart"),i.css("font-size","9px"),i.css("color","inherit"),i.css("opacity","0.3"),i.css("line-height","10px");var n=Ue("<a></a>");n.attr("href","https://linktr.ee/ronny.weiss"),n.attr("target","_blank"),n.css("color","inherit"),n.append(i);var a=Ue("<i></i>");a.addClass("fa"),a.addClass("fa-apex"),a.css("font-size","9px"),a.css("color","inherit"),a.css("opacity","0.3"),a.css("line-height","10px"),(i=Ue("<a></a>")).attr("href","https://apex.oracle.com"),i.attr("target","_blank"),i.css("color","inherit"),i.append(a),t.append("Build with "),t.append(n),t.append(" for "),t.append(i),Ue(e).append(t)}(y),i(),s={delay:50,zIndex:10,items:".bida-container-item",grid:[10,10],tolerance:"pointer",start:function(e,t){a||(a=Ue(t.item).clone(),Ue("body").append(a)),Ue(t.item).hide(),a.fadeIn(),a.css("opacity","0.5"),a.css("filter","grayscale(100%)")},sort:function(e,t){a.css("left",t.offset.left),a.css("top",t.offset.top)},change:function(e,t){y.find(".ui-sortable-placeholder").each(function(e,t){Ue(t).css("visibility","visible")}),Ue(t.item).css("left",t.position.left),Ue(t.item).css("top",t.position.top),i()},stop:function(e,t){a.remove(),a="",Ue(t.item).show(),i()},update:function(e,t){var i=[];y.find(".bida-container-item").each(function(e,t){t=Ue(t).attr("item-id");i.push(t)}),je.debug.info({fct:Ge.featureDetails.name+" - drawGridItems",sortInfo:i,featureDetails:Ge.featureDetails}),y.trigger("sortorder",i.join(":"))}},n.isSortable&&(o=y.sortable(s)),Ue(D).on("sortableOn",function(){je.debug.info({fct:Ge.featureDetails.name+" - drawGridItems",msg:"sortable on by trigger",featureDetails:Ge.featureDetails}),o||y.sortable(s),y.sortable("enable")}),Ue(D).on("sortableOff",function(){je.debug.info({fct:Ge.featureDetails.name+" - drawGridItems",msg:"sortable off by trigger",featureDetails:Ge.featureDetails}),y.sortable("disable")})):(y.addClass("bida-container-nodat"),Ge.noDataMessage.show(y,n.noDataMessage))}Ge.loader.stop(D),y.trigger("rendered"),je.debug.info({fct:Ge.featureDetails.name+" - drawGridItems",msg:"Material BI Dashboard rendering finished",featureDetails:Ge.featureDetails})}(e,t),i&&y.trigger("refreshed")},error:function(e){e=e,Ue(v).empty(),Ue(v).addClass("bida-container-nodat"),Ge.errorMessage.show(v,t.errorMessage),Ge.loader.stop(D),e.responseText&&je.debug.error({fct:Ge.featureDetails.name+" - getData",msg:e.responseText,featureDetails:Ge.featureDetails}),i&&y.trigger("refreshed")},dataType:"json"})}function _(n,e,a,o,r,t){var s=Ue(a),l=e,i=100;function d(){m&&(m.layout(),Ue(document).scrollTop(x))}function c(){function e(){b=setInterval(function(){var e,t;0===Ue(y).length?clearInterval(b):Ue(y).is(":visible")&&(e=document.getElementById(f).scrollHeight,t=Ue(y).height(),Ge.isBetween(t,e,w)||(je.debug.info({moudule:"checkMasonrySize",msg:"Masonry has resize problem",featureDetails:Ge.featureDetails,scrollHeight:e,innerHeight:t}),d()))},Pe.defTime)}function t(){b&&clearInterval(b)}b||(t(),e(),document.addEventListener("visibilitychange",function(){(document.hidden?t:e)()}))}function u(){Ge.loader.stop(a),setTimeout(function(){Ge.loader.stop(a)},i)}e=qe(o.isAsync,!1,!0);t||"A"===p&&e?Ge.isDefinedAndNotNull(o.itemID)?(e=r.items2Submit,setTimeout(function(){Ge.loader.start(a)},i),je.server.plugin(g,{pageItems:e,x01:"itemData",x02:o.itemID,x04:k},{success:function(e,t,i){je.debug.info({fct:Ge.featureDetails.name+" - prepareItemContent",asyncAjaxReference:k,pData:e,featureDetails:Ge.featureDetails}),i.getResponseHeader("ajax-reference")==k?(i=e,i=Ge.jsonSaveExtend(o,i),s.empty(),Ge.isDefinedAndNotNull(i.itemID)&&s.attr("item-id",i.itemID),l=(i.height||r.height)-C,s.css("min-height",l),H(n,a,l,i,r),u(),d(),c()):je.debug.info({fct:Ge.featureDetails.name+" - prepareItemContent",msg:"Expired Async AJAX Call returned.",pData:e,featureDetails:Ge.featureDetails})},error:function(e){e=e,s.empty(),e.status&&404==e.status?Ge.noDataMessage.show(a,r.noDataMessage):(Ge.errorMessage.show(a,r.errorMessage),je.debug.error({msg:"Error occured in PL/SQL Block for async Loading of Data",data:e,featureDetails:Ge.featureDetails})),u(),d(),c()},dataType:"json"})):(s.empty(),Ge.errorMessage.show(a,r.errorMessage),je.debug.error({fct:Ge.featureDetails.name+" - prepareItemContent",msg:"itemID missing in JSON for async load!",featureDetails:Ge.featureDetails})):(H(n,a,l,o,r),d(),c())}function R(e,t,i,n,a){je.debug.info({fct:Ge.featureDetails.name+" - drawSubText",pPosition:e,pParent:t,pText:i,pDefaultConfig:n,pIsSafeItem:a,featureDetails:Ge.featureDetails});var o="bida-item-subtext-"+e,r=Ue("<div></div>"),s=Ue(t).find("."+o);(r=s[0]?s:r).addClass(o);o=Ue("<span></span>");o.addClass("bida-item-subtext-text"),o.addClass("bida-item-subtext-text-"+e),o.addClass("truncate-text");a=Ye(i,n,a,Fe);o.html(a),r.html(o),r.attr("title",o.text()),Ue(t).append(r)}function H(e,t,i,n,a){var o,r,s,l,d=Ue(t),c=n.itemConfig||{};Ge.isDefinedAndNotNull(n.optionsLink)&&((s=Ue("<a></a>")).addClass("bida-item-options-link"),s.attr("href",n.optionsLink),s.css("background-color",n.optionsLinkBackColor||a.optionsLink.backColor),r="fa-",o=Ue("<i></i>"),l=n.optionsLinkIcon||a.optionsLink.icon,Ge.isDefinedAndNotNull(l)&&l.substr(0,r.length)===r?(o.addClass("fa"),o.addClass(l),o.css("color",n.optionsLinkColor||a.optionsLink.color)):o.css("background-image","url("+l+")"),o.addClass("bida-item-options-link-icon"),s.append(o),d.append(s)),Ge.isDefinedAndNotNull(n.optionsLinkTop)&&((f=Ue("<a></a>")).addClass("bida-item-options-link-top"),f.attr("href",n.optionsLinkTop),f.css("background-color",n.optionsLinkTopBackColor||a.optionsLinkTop.backColor),r="fa-",s=Ue("<i></i>"),l=n.optionsLinkTopIcon||a.optionsLinkTop.icon,Ge.isDefinedAndNotNull(l)&&l.substr(0,r.length)===r?(s.addClass("fa"),s.addClass(l),s.css("color",n.optionsLinkTopColor||a.optionsLinkTop.color)):s.css("background-image","url("+l+")"),s.addClass("bida-item-options-link-icon"),f.append(s),d.append(f));var u,f=qe(n.isMarked,!1,!0);if(d.removeClass("bida-container-item-marked"),f&&d.addClass("bida-container-item-marked"),Ge.isDefinedAndNotNull(n.itemType)){var p=!1;Ge.isDefinedAndNotNull(n.oversize)&&(p=qe(n.oversize,!1,!0));var h=!1;Ge.isDefinedAndNotNull(n.noSanitize)&&(h=qe(n.noSanitize,!1,!0));var m=i;if(Ge.isDefinedAndNotNull(n.title)&&function(e,t,i,n,a,o,r,s){je.debug.info({fct:Ge.featureDetails.name+" - drawItemTitle",pText:t,pBackColor:i,pColor:n,pParent:e,pIcon:a,pIconColor:o,pDefaultConfig:r,pIsSafeItem:s,featureDetails:Ge.featureDetails});var l="bida-item-title",d=Ue("<div></div>"),c=Ue(e).find("."+l);(d=c[0]?c:d).addClass(l),d.css("background",i||r.title.backColor),d.css("color",n||r.title.color),(n=Ue("<span></span>")).addClass("bida-item-title-text"),n.addClass("truncate-text"),s=Ye(t,r,s,Fe),n.html(s),n.attr("title",n.text()),d.html(n),a=a||r.title.icon,o=o||r.title.iconColor,Ge.isDefinedAndNotNull(a)&&(r=Ue("<i></i>"),"fa-"===a.substr(0,"fa-".length)?(r.addClass("fa"),r.addClass(a),r.css("color",o)):r.css("background-image","url("+a+")"),r.addClass("bida-item-title-icon"),n.prepend(r)),Ue(e).prepend(d)}(t,n.title,n.titleBackColor,n.titleColor,n.titleIcon,n.titleIconColor,a,h),Ge.isDefinedAndNotNull(n.subText1)&&R(1,t,n.subText1,a,h),Ge.isDefinedAndNotNull(n.subText2)&&R(2,t,n.subText2,a,h),u=i,Ue(i=t).children(".bida-item-title").each(function(){u=Math.floor(u-Ue(this).height())-1}),Ue(i).children(".bida-item-subtext-1").each(function(){u=Math.floor(u-Ue(this).height())-1}),Ue(i).children(".bida-item-subtext-2").each(function(){u=Math.floor(u-Ue(this).height())-1}),m=u,Ge.isDefinedAndNotNull(n.itemData)||"calendar"===n.itemType||"note"===n.itemType||"clock"===n.itemType)switch(je.debug.info({fct:Ge.featureDetails.name+" - drawItemRegionContent",msg:"Render Item "+n.itemType+"("+n.title+")",featureDetails:Ge.featureDetails}),n.itemType){case"chart":-1<Ue.inArray("charts",a.features)?n.itemData?function(r,e,t,i,s,o){je.debug.info({fct:Ge.featureDetails.name+" - drawChart",pItemSel:r,pItemHeight:e,pConfigData:t,pValuesData:i,pDefaultConfig:s,pIsSafeItem:o,featureDetails:Ge.featureDetails});var n,a,l=["pie","donut","gauge"],d=!1,c=!1,u=!1;function f(e,n){try{return e.sort(function(e,t){var i=d3.timeParse(n),e=i(e.x),t=i(t.x);return new Date(e).getTime()-new Date(t).getTime()})}catch(e){je.debug.error({fct:Ge.featureDetails.name+" - drawChart",msg:"Error while try sort JSON Array by Time Value",err:e,featureDetails:Ge.featureDetails})}}try{var p=!1,h=qe(t.chartTitle,s.d3chart.chartTitle||"").toString(),m=qe(t.background,s.d3chart.background),g=null;Ge.isDefinedAndNotNull(m)&&(g={color:m});var b=qe(t.lineStep,s.d3chart.line.step),v=qe(t.gaugeMin,s.d3chart.gauge.min),y=qe(t.gaugeMax,s.d3chart.gauge.max),D=qe(t.gaugeType,s.d3chart.gauge.type),x=qe(t.gaugeWidth,s.d3chart.gauge.width),w=qe(t.gaugeArcMinWidth,s.d3chart.gauge.arcMinWidth),C=qe(t.gaugeFullCircle,s.d3chart.gauge.fullCircle,!0),k=qe(t.gaugeTitle,s.d3chart.gauge.title||"").toString(),I=qe(t.gridX,s.d3chart.grid.x,!0),N=qe(t.gridY,s.d3chart.grid.y,!0),T=qe(t.xAxisHeight,s.d3chart.x.axisHeight),A=qe(t.legendShow,s.d3chart.legend.show,!0),S=qe(t.legendPosition,s.d3chart.legend.position),E=Ge.jsonSaveExtend(null,s.d3chart.padding);Ge.isDefinedAndNotNull(t.paddingBottom)&&(E.bottom=t.paddingBottom),Ge.isDefinedAndNotNull(t.paddingLeft)&&(E.left=t.paddingLeft),Ge.isDefinedAndNotNull(t.paddingRight)&&(E.right=t.paddingRight),Ge.isDefinedAndNotNull(t.paddingTop)&&(E.top=t.paddingTop);var M,O=qe(t.rotateAxis,s.d3chart.rotateAxis,!0),L=qe(t.axisLabelPosition,s.d3chart.axisLabelPosition),z=null,_=null;switch(L){case"inner1":z="inner-left",_="inner-bottom";break;case"inner2":z="inner-center",_="inner-middle";break;case"inner3":z="inner-right",_="inner-top";break;case"outer1":z="outer-left",_="outer-bottom";break;case"outer2":z="outer-center",_="outer-middle";break;case"outer3":z="outer-right",_="outer-top"}O&&(M=z,z=_,_=M);var R=qe(t.tooltipShow,s.d3chart.tooltip.show,!0),H=qe(t.tooltipGrouped,s.d3chart.tooltip.grouped,!0),B=qe(t.transitionDuration||s.d3chart.transitionDuration),F=qe(t.xShow,s.d3chart.x.show,!0),P=qe(t.xLabel,s.d3chart.x.label||"").toString(),W=qe(t.xType,s.d3chart.x.type),j=null,U=null,G=qe(t.xTickCutAfter,s.d3chart.x.tick.cutAfter),q=qe(t.xTickMaxNumber,s.d3chart.x.tick.maxNumber),Y=qe(t.xTickRotation,s.d3chart.x.tick.rotation),J=qe(t.xTickMultiline,s.d3chart.x.tick.multiline,!0),V=qe(t.xTickFit,s.d3chart.x.tick.fit,!0),Q=qe(t.xTickAutoRotate,s.d3chart.x.tick.autoRotate,!0),$=null;"category"!=W&&"timeseries"!=W||(U="x"),"timeseries"==W&&(j=qe(t.xTimeFormat,s.d3chart.x.timeFormat),$=qe(t.xTickTimeFormat,s.d3chart.x.tick.timeFormat),f(i,j)),"category"==W&&($=function(e,t){return Ge.cutString(t,G)});var X=qe(t.yLabel,s.d3chart.y.label||"").toString(),Z=qe(t.yLog,s.d3chart.y.log,!0),K=null;Z&&(K="log");var ee=t.yMin||s.d3chart.y.min,te=t.yMax||s.d3chart.y.max,ie=t.yTickMaxNumber||s.d3chart.y.tick.maxNumber,ne=t.yUnit||s.d3chart.y.unit,ae=!1,oe=qe(t.y2Label,s.d3chart.y2.label||"").toString(),re=qe(t.y2Log,s.d3chart.y2.log,!0),se=null;re&&(se="log");var le=qe(t.y2Min,s.d3chart.y2.min),de=qe(t.y2Max,s.d3chart.y2.max),ce=qe(t.y2TickMaxNumber,s.d3chart.y2.tick.maxNumber),ue=qe(t.y2Unit,s.d3chart.y2.unit),fe=qe(t.zoomEnabled,s.d3chart.zoom.enabled,!0),pe=qe(t.zoomType,s.d3chart.zoom.type),he=!1,me=qe(t.threshold,s.d3chart.threshold);!fe||"scroll"==pe?he=!1:"subchart"==pe?fe=!(he=!0):"drag"==pe&&(he=!(fe=!0));var ge,be,ve=qe(t.zoomRescale,s.d3chart.zoom.rescale,!0),ye=[],De=[],xe=[],we={},Ce={},ke={},Ie={},Ne={},Te=0,Ae=Ge.groupObjectArray(i,"seriesID");if(Ae){"category"!=W&&"timeseries"!=W||(De.push("x"),ge=Ge.groupObjectArray(i,"x"),be=Object.keys(ge),Ue.each(be,function(e,t){De.push(qe(t.replace("​",""),null))})),ye.push(De),Ue.each(Ae,function(e,t){var i,a,n,o;Te++,t[0]&&t[0].seriesID?(i=t[0],a=escape(i.seriesID),we[a]=i.color,Ce[a]=i.type,0<=l.indexOf(i.type)&&(fe=!1),"gauge"===i.type&&(d=!0),"pie"===i.type&&(c=!0),"donut"===i.type&&(u=!0),Ge.isDefinedAndNotNull(i.tooltip)&&(p=!0),ke[a]=i.yAxis||"y",Ge.isDefinedAndNotNull(i.groupID)&&(n=escape(i.groupID.toString()),Ne[n]||(Ne[n]=[]),Ne[n].push(a)),"y2"==i.yAxis&&(ae=!0),Ie[a]=qe(i.label,a),(o=[]).push(a),"category"==W||"timeseries"==W?Ue.each(ge,function(e,t){var i=null,n=null;Ue.each(t,function(e,t){escape(t.seriesID)==a&&(i=t.y,t.z&&(n=t.z))}),null!==n?o.push({y:i,z:n}):o.push(i)}):Ue.each(t,function(e,t){var i=qe(t.y,null);t.z?(t=t.z,o.push({y:i,z:t})):o.push(i)}),ye.push(o)):(Ge.errorMessage.show(r,s.errorMessage),je.debug.error({fct:Ge.featureDetails.name+" - drawChart",msg:"No seriesID found in seriesID Cursor",featureDetails:Ge.featureDetails}))}),Ue.each(Ne,function(e,t){xe.push(t)});var Se=qe(t.showDataLabels,s.d3chart.showDataLabels,!0);c||u?Se={colors:"white"}:d&&(Se={colors:"single"===D&&1<Te?"white":"inherit"});var Ee=qe(t.showDataPoints,s.d3chart.showDataPoints,!0);qe(t.showAbsoluteValues,s.d3chart.showAbsoluteValues)&&(n=function(e,t,i){return e+ne}),p&&(a=function(e){var a=Ue("<div></div>");return a.addClass("bb-tooltip"),a.addClass("bida-chart-tooltip-custome"),Ue.each(e,function(e,t){var i="​"+unescape(t.id),n=t.index;Ae[i]&&(1===Ae[i].length&&(n=0),Ae[i][n]&&Ge.isDefinedAndNotNull(Ae[i][n].tooltip)&&(t=Ue("<div>"),n=Ye(Ae[i][n].tooltip,s,o,Fe),t.append(n),a.append(t)))}),a[0].outerHTML});try{var Me=r+"bbc",Oe=Me.replace("#",""),Le=Ue("<div></div>");Le.attr("id",Oe),Ue(r).append(Le);var ze={bindto:Me,background:g,title:{text:h},size:{height:e},data:{x:U,xFormat:j,columns:ye,types:Ce,groups:xe,colors:we,labels:Se,axes:ke,names:Ie,onclick:function(e){var t;t=e,e="​"+unescape(t.id),t=t.index,Ae[e]&&(1===Ae[e].length&&(t=0),Ae[e][t]&&Ae[e][t].link&&Ge.link(Ae[e][t].link,Ae[e][t].linkTarget))}},pie:{label:{format:n,threshold:me}},donut:{label:{format:n,threshold:me}},line:{step:{type:b}},gauge:{label:{format:n,threshold:me},fullCircle:C,min:v,max:y,type:D,width:x,title:k,arc:{minWidth:w}},radar:{direction:{clockwise:!0}},subchart:{show:he},zoom:{type:pe,enabled:fe,rescale:ve},transition:{duration:B},legend:{show:A,position:S},tooltip:{show:R,grouped:H,contents:a},grid:{x:{show:I},y:{show:N}},point:{show:Ee},axis:{rotated:O,x:{show:F,label:{text:P,position:z},type:W,tick:{culling:{max:q},autorotate:Q,rotate:Y,multiline:J,format:$,fit:V},height:T},y:{label:{text:X,position:_},type:K,max:te,min:ee,tick:{culling:{max:ie},format:function(e){return e+ne}}},y2:{show:ae,label:{text:oe,position:_},type:se,max:de,min:le,tick:{culling:{max:ce},format:function(e){return e+ue}}}},padding:E};je.debug.info({fct:Ge.featureDetails.name+" - drawChart",finalChartData:ze,featureDetails:Ge.featureDetails});var _e=bb.generate(ze);function Re(){!document.hidden&&Le.is(":visible")&&_e.resize({height:e})}function He(){Pe.innerItemsIntervals&&Pe.innerItemsIntervals[r]&&clearInterval(Pe.innerItemsIntervals[r])}function Be(){Pe.innerItemsIntervals[r]=setInterval(function(){0===Ue(r).length?clearInterval(Pe.innerItemsIntervals[r]):Le.is(":visible")&&(Ge.isBetween(Le.width(),Le.find("svg").width(),We)||(je.debug.info({fct:Ge.featureDetails.name+" - drawChart",msg:"Chart has resize problem",featureDetails:Ge.featureDetails}),Re()))},Pe.defTime)}fe&&Ue(Me).contextmenu(function(e){e.preventDefault(),_e.unzoom()}),Ue(window).resize(function(){Re()}),He(),Be(),document.addEventListener("visibilitychange",function(){(document.hidden?He:Be)()})}catch(e){Ue(r).empty(),Ge.errorMessage.show(r,s.errorMessage),je.debug.error({fct:Ge.featureDetails.name+" - drawChart",msg:"Error while try to render chart",err:e,featureDetails:Ge.featureDetails})}}else Ge.noDataMessage.show(r,s.noDataMessage)}catch(e){Ue(r).empty(),Ge.errorMessage.show(r,s.errorMessage),je.debug.error({fct:Ge.featureDetails.name+" - drawChart",msg:"Error while prepare data for chart",err:e,featureDetails:Ge.featureDetails})}}(t,m,c,n.itemData,a,h):(Ge.errorMessage.show(t,a.errorMessage),je.debug.error({fct:Ge.featureDetails.name+" - drawItemRegionContent",msg:"itemData is missing in JSON",featureDetails:Ge.featureDetails})):(Ge.errorMessage.show(t,a.errorMessage),je.debug.info({fct:Ge.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Charts is not activated.",featureDetails:Ge.featureDetails}));break;case"html":!function(i,e,n,a,o,t,r){je.debug.info({fct:Ge.featureDetails.name+" - drawHTML",pItemSel:i,pItemHeight:e,pItemData:n,pDefaultConfig:o,pOversize:t,pIsSafeItem:r,featureDetails:Ge.featureDetails});var s,l=Ue("<div></div>");function d(e){var t=Ye(e,o,r,Fe);je.debug.info({fct:Ge.featureDetails.name+" - drawHTML",submodule:"renderHTML",pContent:e,contentAfterEscapeOrSanitize:t,featureDetails:Ge.featureDetails}),l.html(t),-1<Ue.inArray("inlineimagesdownload",o.features)&&(t=l.find('img[alt*="aih#"]'),Ue.each(t,function(e,t){var i,n=t.title;(n=n||t.alt.split("aih##")[1])&&(je.debug.info({fct:Ge.featureDetails.name+" - drawHTML",pItemID:a,pk:n,featureDetails:Ge.featureDetails}),i=o.items2SubmitImg,i=je.server.pluginUrl(g,{x01:"imageDownload",x02:a,x03:n,pageItems:i}),t.src=i,Ue(t).addClass("bida-item-urte-img"))})),l.find("*").css("max-width","100%").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto").css("white-space","normal"),l.find("img").css("object-fit","contain").css("object-position","50% 0%")}{function c(){function e(){s=setTimeout(function(){u++,Ue(l).fadeOut("slow",function(){c(),Ue(l).fadeIn("slow")})},1e3*t)}var t;u>n.length-1?u=0:u<0&&(u=n.length-1),n[u]&&(d(n[u].html),(t=n[u].duration)&&0<t&&(Ue(i).hover(function(){clearTimeout(s)}),Ue(i).mouseleave(function(){e()}),e()))}var u,f,p;l.addClass("bida-item-html"),n&&"object"==typeof n&&1<n.length?(u=0,(p=Ue("<div></div>")).addClass("bida-item-html-slide-lc"),p.on("click",function(){u--,clearTimeout(s),Ue(l).fadeOut("fast",function(){c(),Ue(l).fadeIn("fast")})}),(f=Ue("<span></span>")).addClass("fa fa-chevron-left fa-lg"),f.addClass("bida-item-html-slide-lc-s"),p.append(f),Ue(i).append(p),(f=Ue("<div></div>")).addClass("bida-item-html-slide-rc"),f.on("click",function(){u++,clearTimeout(s),Ue(l).fadeOut("fast",function(){c(),Ue(l).fadeIn("fast")})}),(p=Ue("<span></span>")).addClass("fa fa-chevron-right fa-lg"),p.addClass("bida-item-html-slide-rc-s"),f.append(p),Ue(i).append(f),c()):n&&"object"==typeof n&&1===n.length?Ge.isDefinedAndNotNull(n[0].html)&&""!==n[0].html?d(n[0].html):Ge.noDataMessage.show(l,o.noDataMessage):Ge.isDefinedAndNotNull(n)&&""!==n?d(n):Ge.noDataMessage.show(l,o.noDataMessage)}Ue(i).append(l),!0!==t&&(l.css("height",e),B(l))}(t,m,n.itemData,n.itemID,a,p,h);break;case"card":!function(e,t,i,n,a,o,r){je.debug.info({fct:Ge.featureDetails.name+" - drawCard",pIndex:e,pItemHeight:t,pItemSel:i,pItemData:n,pDefaultConfig:a,pOversize:o,pIsSafeItem:r,featureDetails:Ge.featureDetails});var s=Ue("<div></div>");s.addClass("bida-item-card");var l=Ue("<div></div>");{var d,c;l.addClass("card-content"),(Ge.isDefinedAndNotNull(n.icon)||Ge.isDefinedAndNotNull(n.iconText))&&((u=Ue("<div></div>")).addClass("card-content-icon-div"),d=Ue("<span></span>"),Ge.isDefinedAndNotNull(n.icon)&&"fa-"===n.icon.substr(0,"fa-".length)?(d.addClass("fa "+n.icon),c="linear-gradient(60deg, hsl("+23*e%350+", 79%, 45%), hsl("+23*e%350+", 60%, 45%))",d.css("background",n.iconBackColor||c)):(Ge.isDefinedAndNotNull(n.iconText)&&(e=Ye(n.iconText,a,r,Fe),(c=Ue("<span></span>")).addClass("card-content-icon-text"),c.html(e),d.append(c)),Ge.isDefinedAndNotNull(n.icon)&&d.css("background-image","url("+n.icon+")"),d.css("background-color",n.iconBackColor)),d.addClass("card-content-icon"),d.css("color",n.iconColor||"white"),u.append(d),l.append(u))}var u=Ue("<div></div>");u.addClass("card-title-div"),Ge.isDefinedAndNotNull(n.icon)&&u.css("width","calc(100% - 55px)");Ge.isDefinedAndNotNull(n.value)&&((p=Ue("<p></p>")).addClass("card-title"),p.addClass("truncate-text"),f=Ye(n.value,a,r,Fe),p.html(f),u.append(p));{var f,p;Ge.isDefinedAndNotNull(n.valueSmall)&&(Ge.isDefinedAndNotNull(n.value)&&p.css("line-height","30px"),(f=Ue("<p></p>")).addClass("card-sub-title"),p=Ye(n.valueSmall,a,r,Fe),f.html(p),u.append(f))}l.append(u),s.append(l),Ge.isDefinedAndNotNull(n.footer)&&((h=Ue("<div></div>")).addClass("bida-card-footer"),l=Ue("<div></div>"),(l=Ue("<div></div>")).addClass("stats"),r=Ye(n.footer,a,r,Fe),l.html(r),h.append(l),s.append(h));{var h;Ge.isDefinedAndNotNull(n.link)?((h=Ue("<a></a>")).addClass("bida-a"),h.attr("href",n.link),Ge.isDefinedAndNotNull(n.linkTarget)&&h.attr("target",n.linkTarget),h.append(s),Ue(i).append(h),!0!==o&&(h.css("height",t),B(h))):(Ue(i).append(s),!0!==o&&(s.css("height",t),B(s)))}}(e,m,t,n.itemData,a,p,h);break;case"badge":!function(e,i,t,n,a,o){je.debug.info({fct:Ge.featureDetails.name+" - drawBadges",pIndex:e,pItemHeight:i,pItemSel:t,pItemData:n,pDefaultConfig:a,pIsSafeItem:o,featureDetails:Ge.featureDetails});var r=!1,s=.98,l=.15,d=.28,c=.28,u=c-l,f=0,e="linear-gradient(60deg, hsl("+23*e%350+", 79%, 45%), hsl("+23*e%350+", 60%, 45%))",p=Ue("<div></div>");p.addClass("bida-item-badge"),Ge.isDefinedAndNotNull(n.title)&&f++;Ge.isDefinedAndNotNull(n.icon)&&f++;Ge.isDefinedAndNotNull(n.value)&&f++;0<f&&(s/=f,u/=f);{var h;Ge.isDefinedAndNotNull(n.title)?((g=Ue("<div></div>")).addClass("bida-item-badge-text"),(h=Ue("<span></span>")).css("color",n.titleColor||e),f=Ye(n.title,a,o,Fe),h.html(f),g.append(h),p.append(g)):(d+=l/2,c+=l/3)}{var m,g;Ge.isDefinedAndNotNull(n.icon)?((b=Ue("<div></div>")).addClass("bida-item-badge-icon"),m=Ue("<span></span>"),Ge.isDefinedAndNotNull(n.icon)&&"fa-"===n.icon.substr(0,"fa-".length)?(m.addClass("fa "+n.icon),m.css("color",n.iconColor||e)):(Ge.isDefinedAndNotNull(n.iconText)&&(g=Ye(n.iconText,a,o,Fe),m.html(g)),Ge.isDefinedAndNotNull(n.icon)&&(r=!0,m.css("background-image","url("+n.icon+")"),m.addClass("bida-item-badge-icon-image"))),b.append(m),p.append(b)):(l+=d/3,c+=d/3)}{var b,v;Ge.isDefinedAndNotNull(n.value)?((b=Ue("<div></div>")).addClass("bida-item-badge-text-value"),(v=Ue("<span></span>")).css("color",n.valueColor||e),o=Ye(n.value,a,o,Fe),v.html(o),b.append(v),p.append(b)):(l+=c/3,d+=c/2)}Ge.isDefinedAndNotNull(n.link)&&(p.css("cursor","pointer"),p.on("click",function(){Ge.link(n.link,n.linkTarget)}));function y(){var e=i,t=Math.min(e,p.width());h&&(h.css("font-size",t*l+"px"),h.css("line-height",e*(s-u)+"px")),m&&(m.css("font-size",t*d+"px"),m.css("line-height",e*s+"px"),r&&(m.css("height",e*s+"px"),m.css("width",e*s+"px"))),v&&(v.css("font-size",t*c+"px"),v.css("line-height",e*s+"px"))}Ue(t).append(p),y(),Ue(window).resize(function(){y()});var D=p.width();function x(){Pe.innerItemsIntervals&&Pe.innerItemsIntervals[t]&&clearInterval(Pe.innerItemsIntervals[t])}function w(){Pe.innerItemsIntervals[t]=setInterval(function(){0===Ue(t).length?clearInterval(Pe.innerItemsIntervals[t]):p.is(":visible")&&(Ge.isBetween(p.width(),D,We)||(D=p.width(),y()))},100)}x(),w(),document.addEventListener("visibilitychange",function(){(document.hidden?x:w)()})}(e,m,t,n.itemData,a,h);break;case"list":!function(e,t,i,u,n,f){je.debug.info({fct:Ge.featureDetails.name+" - drawList",pItemSel:e,pItemHeight:t,pItemData:i,pDefaultConfig:u,pOversize:n,pIsSafeItem:f,featureDetails:Ge.featureDetails});var a=Ue("<div></div>");a.addClass("bida-item-list-div");var s=Ue("<ul></ul>");function l(d,c){Ue.each(c,function(e,t){var i=Ue("<li></li>");i.addClass("bida-item-list-item");var n,a,o=Ue("<div></div>");o.addClass("list-item-content"),e<c.length-1&&o.css("border-bottom","1px solid #eeeeee"),(Ge.isDefinedAndNotNull(t.icon)||Ge.isDefinedAndNotNull(t.iconText))&&((l=Ue("<div></div>")).addClass("listItem-content-icon-div"),n=Ue("<span></span>"),t.icon&&"fa-"===t.icon.substr(0,"fa-".length)?(n.addClass("fa "+t.icon),n.css("background",t.iconBackColor||"linear-gradient(60deg, hsl("+23*e%350+", 79%, 45%), hsl("+23*e%350+", 60%, 45%))")):(Ge.isDefinedAndNotNull(t.iconText)&&(a=Ye(t.iconText,u,f,Fe),(e=Ue("<span></span>")).addClass("list-item-content-icon-text"),e.html(a),n.append(e)),Ge.isDefinedAndNotNull(t.icon)&&n.css("background-image","url("+t.icon+")"),n.css("background-color",t.iconBackColor)),n.addClass("list-item-content-icon"),n.css("color",t.iconColor||"white"),l.append(n),o.append(l));var r,s,l=Ue("<div></div>");l.addClass("list-item-content-text"),Ge.isDefinedAndNotNull(t.icon)&&l.css("width","calc(100% - 55px)"),Ge.isDefinedAndNotNull(t.title)&&((s=Ue("<span></span>")).addClass("list-item-title"),s.addClass("truncate-text"),r=Ye(t.title,u,f,Fe),s.html(r),l.append(s)),Ge.isDefinedAndNotNull(t.text)&&((r=Ue("<span></span>")).addClass("list-item-text"),s=Ye(t.text,u,f,Fe),r.html(s),l.append(r)),o.append(l),i.append(o),Ge.isDefinedAndNotNull(t.link)?((o=Ue("<a></a>")).addClass("bida-a"),o.attr("href",t.link),o.append(i),Ge.isDefinedAndNotNull(t.linkTarget)&&o.attr("target",t.linkTarget),d.append(o)):d.append(i)})}s.addClass("bida-item-list");var o=[];Ue.each(i,function(e,t){Ge.isDefinedAndNotNull(t.group)||o.push(t)});i=Ge.groupObjectArray(i,"group");je.debug.info({fct:Ge.featureDetails.name+" - drawList",noGroupsArr:o,groupsArr:i,featureDetails:Ge.featureDetails}),l(s,o),Ue.each(i,function(e,t){var i=Ue("<li></li>");i.addClass("bida-item-list-item-group");var n="#f1f1f1";t[0].groupBackColor&&(n=t[0].groupBackColor);var a="inherit";t[0].groupColor&&(a=t[0].groupColor);var o=Ue("<div></div>");o.addClass("list-group-content"),o.css("border-left","3px solid "+n);var r=Ue("<span></span>");r.addClass("list-group-content-title");e=Ye(e,u,f,Fe);r.css("background",n),r.css("color",a),r.html(e),o.append(r),i.append(o);r=Ue("<ul></ul>");r.addClass("bida-item-list-grouped"),l(r,t),o.append(r),s.append(i)}),a.append(s),Ue(e).append(a),!0!==n&&(a.css("height",t),B(a))}(t,m,n.itemData,a,p,h);break;case"table":-1<Ue.inArray("table",a.features)?function(e,t,i,a,n,o){je.debug.info({fct:Ge.featureDetails.name+" - drawTable",pItemSel:e,pItemHeight:t,pItemData:i,pDefaultConfig:a,pOversize:n,pIsSafeItem:o,featureDetails:Ge.featureDetails});var r=Ue("<div></div>");r.addClass("bida-item-table-div");var s=Ue("<table></table>");s.addClass("bida-item-table"),Ge.isDefinedAndNotNull(i.header)&&0<i.header.length&&Ue.each(i.header,function(e,t){var i;Ge.isDefinedAndNotNull(t.text)&&((i=Ue("<th></th>")).addClass("bida-item-table-header"),i.css("background-color",t.background||a.table.header.background),i.css("text-align",t.textAlign||a.table.header.textAlign),i.css("color",t.color||a.table.header.color),i.css("border",t.border||a.table.header.border),t=Ye(t.text,a,o,Fe),i.html(t),s.append(i))});Ge.isDefinedAndNotNull(i.data)&&0<i.data.length&&Ue.each(i.data,function(e,t){var n=Ue("<tr></tr>");n.addClass("bida-item-table-row"),e%2==0?(n.addClass("bida-item-table-row-even"),n.css("background",a.table.evenRow.background),n.css("text-align",a.table.evenRow.textAlign),n.css("color",a.table.evenRow.color),n.css("border-bottom",a.table.evenRow.borderBottom)):(n.addClass("bida-item-table-row-odd"),n.css("background",a.table.oddRow.background),n.css("text-align",a.table.oddRow.textAlign),n.css("color",a.table.oddRow.color),n.css("border-bottom",a.table.oddRow.borderBottom)),Ue.each(t,function(e,t){var i;Ge.isDefinedAndNotNull(t.text)&&((i=Ue("<td></td>")).addClass("bida-item-table-cell"),i.css("background",t.background||a.table.cells.background),i.css("text-align",t.textAlign||a.table.cells.textAlign),i.css("color",t.color||a.table.cells.color),i.css("border",t.border||a.table.cells.border),t=Ye(t.text,a,o,Fe),i.html(t),n.append(i))}),s.append(n)});r.append(s),Ue(e).append(r),!0!==n&&(r.css("height",t),B(r))}(t,m,n.itemData,a,p,h):(Ge.errorMessage.show(t,a.errorMessage),je.debug.error({fct:Ge.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Tables is not activaed.",featureDetails:Ge.featureDetails}));break;case"map":-1<Ue.inArray("map",a.features)?function(f,p,h,m,g,b){je.debug.info({fct:Ge.featureDetails.name+" - drawD3Map",pItemSel:f,pItemHeight:p,pItemData:h,pItemConfig:m,pDefaultConfig:g,pIsSafeItem:b,featureDetails:Ge.featureDetails});try{var v,y,D,x,w,C,k,I,N,T,A,S,E,M,O,L=Ue(f),z=qe(m.tourEnabled,g.mapOptions.tour.enabled,!0),_=qe(m.tourSpeed,g.mapOptions.tour.speed)/2e3,R=qe(m.tourStart,g.mapOptions.tour.start),H=qe(m.circlesShadows,g.mapOptions.circles.shadows,!0),B=qe(m.circlesRadius,g.mapOptions.circles.radius),F=qe(m.circlesColor,g.mapOptions.circles.color),P=qe(m.circlesOpacity,g.mapOptions.circles.opacity),W=qe(m.circlesOpacityHover,g.mapOptions.circles.opacityHover),j=qe(m.tourShadowEffect,g.mapOptions.tour.shadowEffect,!0),e=qe(m.mapCenterLongitude,g.mapOptions.map.centerLongitude),t=qe(m.mapCenterLatitude,g.mapOptions.map.centerLatitude),i=qe(m.mapInitialZoom,g.mapOptions.map.initialZoom),U=qe(m.mapZoomEnabled,g.mapOptions.map.zoomEnabled,!0),G=qe(m.mapColor,g.mapOptions.map.color),q=qe(m.mapStroke,g.mapOptions.map.stroke),Y=qe(m.mapStrokeWidth,g.mapOptions.map.strokeWidth),J=qe(m.mapShadows,g.mapOptions.map.shadows,!0),n=Ue(f).attr("id")+"-shadow";function V(){return L.width()}function Q(){return[V()/2,p/2]}(j=!z?!1:j)&&(k=Ue(f).attr("id")+"-ocean",I=Ue(f).attr("id")+"-highlight",N=Ue(f).attr("id")+"-shading",T="url(#"+k+")",A="url(#"+I+")",S="url(#"+N+")");var $,X,Z,K=d3.select(f).append("svg").attr("class","bida-map-svg").attr("width",V()).attr("height",p);(J||H)&&(ne(K,n,2,2,1),v="url(#"+n+")"),C=z?(X=d3.now(),Z=0,d3.geoOrthographic().scale(p/2.5+20).translate(Q())):d3.geoNaturalEarth1().center([e,t]).scale(p/2.5*i).translate(Q());var a,ee=d3.geoPath().projection(C);function o(e){je.debug.info({fct:Ge.featureDetails.name+" - drawD3Map",geoJSONData:e,featureDetails:Ge.featureDetails});var t,i=K.append("g");j&&((t=K.append("defs").append("radialGradient").attr("id",k).attr("cx","75%").attr("cy","25%")).append("stop").attr("offset","5%").attr("stop-color","#fff"),t.append("stop").attr("offset","100%").attr("stop-color","rgb(240,240,240)"),(t=K.append("defs").append("radialGradient").attr("id",I).attr("cx","75%").attr("cy","25%")).append("stop").attr("offset","5%").attr("stop-color","rgb(250,250,250)").attr("stop-opacity","0.3"),t.append("stop").attr("offset","100%").attr("stop-color","rgb(230,230,230)").attr("stop-opacity","0.15"),(t=K.append("defs").append("radialGradient").attr("id",N).attr("cx","55%").attr("cy","45%")).append("stop").attr("offset","30%").attr("stop-color","#fff").attr("stop-opacity","0"),t.append("stop").attr("offset","100%").attr("stop-color","rgb(220,220,220)").attr("stop-opacity","0.3"),E=i.append("circle").attr("cx",V()/2).attr("cy",p/2).attr("r",C.scale()).style("fill",T)),J&&(y=v),x=i.append("path").attr("d",ee(e)).attr("class","bida-map-path").style("filter",y).style("stroke",q).style("stroke-width",Y).style("fill",G),j&&(M=i.append("circle").attr("cx",V()/2).attr("cy",p/2).attr("r",C.scale()).style("fill",A),O=i.append("circle").attr("cx",V()/2).attr("cy",p/2).attr("r",C.scale()).style("fill",S)),H&&(D=v),w=i.selectAll(".bida-map-circle").data(h).enter().append("circle").filter(function(e){return Ge.isDefinedAndNotNull(e.radius)?0<e.radius:0<B}).attr("class","bida-map-circle").style("filter",D).attr("fill",function(e){return e.color||F}).style("opacity",P).on("mouseover",function(e,t){Ge.isDefinedAndNotNull(t.link)&&Ue(this).css("cursor","pointer"),Ge.isDefinedAndNotNull(t.tooltip)&&(t=Ye(t.tooltip,g,b,Fe),Ge.tooltip.show(t)),Ue(this).css("opacity",W)}).on("mousemove",function(e,t){Ge.isDefinedAndNotNull(t.tooltip)&&Ge.tooltip.setPosition(e)}).on("mouseout",function(){Ge.tooltip.hide()}).on("click",function(e,t){Ge.isDefinedAndNotNull(t.link)&&Ge.link(t.link,t.linkTarget)}).attr("transform",function(e){return"translate("+C([e.longitude,e.latitude])+")"}).attr("r",function(e){return qe(e.radius,B)});var n,a,o,r;function s(){x.attr("d",ee(e)),j&&(E.attr("cx",V()/2).attr("cy",p/2).attr("r",C.scale()),M.attr("cx",V()/2).attr("cy",p/2).attr("r",C.scale()),O.attr("cx",V()/2).attr("cy",p/2).attr("r",C.scale())),w.attr("transform",function(e){return"translate("+C([e.longitude,e.latitude])+")"}).attr("r",function(e){if(z&&1.57<d3.geoDistance([e.longitude,e.latitude],C.invert(Q())))return 0;return qe(e.radius,B)})}function l(){++n%60==0&&(0===Ue(f).length&&$.stop(),n=0),n%3==0&&(o=d3.now()-X,C.rotate([(_*o+R)*a,-10,0]),s())}function d(){!document.hidden&&L.is(":visible")&&(C.translate(Q()),s(),K.attr("width",V()),K.attr("height",p))}function c(){Pe.innerItemsIntervals&&Pe.innerItemsIntervals[f]&&clearInterval(Pe.innerItemsIntervals[f])}function u(){Pe.innerItemsIntervals[f]=setInterval(function(){0===Ue(f).length?clearInterval(Pe.innerItemsIntervals[f]):Ge.isBetween(L.width(),L.find("svg").width(),We)||(je.debug.info({fct:Ge.featureDetails.name+" - drawD3Map",msg:"Map has resize problem",featureDetails:Ge.featureDetails}),d())},Pe.defTime)}z?(n=0,a=-1,"left"===(m.tourDirection||g.mapOptions.tour.direction)&&(a=1),$=d3.timer(l),Pe.d3Timer.push($),K.on("mouseover",function(){Z=d3.now()-X,$.stop()}),K.on("mouseout",function(){X=d3.now()-Z,$.restart(l)}),document.addEventListener("visibilitychange",function(){document.hidden?$.stop():$.restart(l)})):U&&(r=d3.zoom().scaleExtent([1,8]).on("zoom",function(e,t){i.attr("transform",e.transform)}),K.call(r),K.on("contextmenu",function(e){e.preventDefault(),K.call(r.transform,d3.zoomIdentity.scale(1))})),Ue(window).resize(function(){d()}),c(),u(),document.addEventListener("visibilitychange",function(){(document.hidden?c:u)()})}z?ie.tour?o(ie.tour):(a=te+"world-tour.json",Ue.getJSON(a,function(e){ie.tour=e,o(ie.tour)})):ie.zoom?o(ie.zoom):(a=te+"world-zoom.json",Ue.getJSON(a,function(e){ie.zoom=e,o(ie.zoom)}))}catch(e){Ue(f).empty(),Ge.errorMessage.show(f,g.errorMessage),je.debug.error({fct:Ge.featureDetails.name+" - drawD3Map",msg:"Error while try to render clock",err:e,featureDetails:Ge.featureDetails})}}(t,m,n.itemData,c,a,h):(Ge.errorMessage.show(t,a.errorMessage),je.debug.error({fct:Ge.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Maps is not activaed.",featureDetails:Ge.featureDetails}));break;case"clock":-1<Ue.inArray("clock",a.features)?function(i,e,n,a,o){je.debug.info({fct:Ge.featureDetails.name+" - drawClock",pItemSel:i,pItemHeight:e,pItemData:n,pItemConfig:a,pDefaultConfig:o,featureDetails:Ge.featureDetails});try{var r,s,l,d,c,u,f,p,h,m,g,b,v,y,D,x,w,C,k,I,N,T,A,S,E,M,t=Ue(i),O=Ue(i).attr("id")+"-clock",L=Ue(i).attr("id")+"-shadow",z="#"+O,_=Ue(i).attr("id")+"-clockhands",R=.0174532925,H=30,B=-10,F=0,P=new Date,W=qe(a.secondLabel,o.clockOptions.second.label,!0),j=qe(a.shadows,o.clockOptions.shadows,!0),U=qe(a.circleWidth,o.clockOptions.circle.width);function G(){return t.width()}function q(){return Math.floor(e/2)-2}if(U<=0&&(j=!1),Ge.isDefinedAndNotNull(n)&&Ge.isDefinedAndNotNull(n.startDate))try{var Y=Date.parse(n.startDate);F=Y-P}catch(e){je.debug.error({fct:Ge.featureDetails.name+" - drawClock",msg:"Error while try to parse clock date: itemData has to be an iso date. The local time will be used.",err:e,featureDetails:Ge.featureDetails})}function J(e){var t,i="";return Ge.isDefinedAndNotNull(e)&&(t=je.locale.getLanguage(),i=(i=e.replace("#date#",P.toLocaleDateString(t))).replace("#time#",P.toLocaleTimeString(t)),i=Ge.cutString(i,15)),i}function V(){var e,t=W?1.05:1.2;A=Math.min(G()/2,q()*t-U/3),I=d3.scaleLinear().range([0,330]).domain([0,11]),N=d3.scaleLinear().range([0,354]).domain([0,59]),T=d3.scaleLinear().range([0,354]).domain([0,59]),r=.35*A,s=.55*A,d=l=.7*A,c=.6*A,u=.1*A,f=.51*A,E=.75*A,D=.835*A+U/3,h=Math.max(Math.floor(.12*A),12),m=Math.max(Math.floor(.1*A),9),p=h/2.15,x=m/2.15,v=Math.floor(.13*A),b=.3*A,g=-.3*A+v,y=.03*A*qe(a.handsCoverSize,o.clockOptions.hands.coverSize),S=[{type:"hour",value:0,length:-r,scale:I},{type:"minute",value:0,length:-s,scale:N},{type:"second",value:0,length:-l,scale:T,balance:H}],Z(),(w=w||d3.select(i).append("svg").attr("id",O).attr("class","bida-clock-svg")).attr("width",G()).attr("height",2*q()),C||(C=w.append("g").attr("transform","translate("+G()/2+","+q()+")"),j&&(ne(w,L,2,2,1),M="url(#"+L+")"),C.append("g").append("circle").attr("class","bida-clock-circle").style("filter",M).style("stroke",qe(a.circleColor,o.clockOptions.circle.color)).style("stroke-width",U+"px").style("fill",qe(a.circleFillColor,o.clockOptions.circle.fillColor)),C.selectAll(".bida-clock-second-tick").data(d3.range(0,60)).enter().append("line").attr("class","bida-clock-second-tick").attr("x1",0).attr("x2",0),C.selectAll(".bida-clock-hour-tick").data(d3.range(0,12)).enter().append("line").attr("class","bida-clock-hour-tick").attr("x1",0).attr("x2",0),C.selectAll(".bida-clock-hour-label").data(d3.range(3,13,3)).enter().append("text").attr("class","bida-clock-hour-label").attr("text-anchor","middle"),C.append("text").attr("x",0).attr("class","bida-clock-label").attr("text-anchor","middle"),C.append("text").attr("x",0).attr("class","bida-clock-label2").attr("text-anchor","middle"),W&&C.selectAll(".bida-clock-second-label").data(d3.range(5,61,5)).enter().append("text").attr("class","bida-clock-second-label").attr("text-anchor","middle")),C.attr("transform","translate("+G()/2+","+q()+")"),C.selectAll(".bida-clock-circle").attr("x",0).attr("y",0).attr("r",E),C.selectAll(".bida-clock-second-tick").attr("y1",d).attr("y2",d+B).attr("transform",function(e){return"rotate("+T(e)+")"}).style("stroke",qe(a.secondTickColor,o.clockOptions.second.tickColor)),C.selectAll(".bida-clock-hour-tick").attr("y1",c).attr("y2",c+u).attr("transform",function(e){return"rotate("+I(e)+")"}).style("stroke",qe(a.hourTickColor,o.clockOptions.hour.tickColor)),C.selectAll(".bida-clock-hour-label").attr("x",function(e){return f*Math.sin(I(e)*R)}).attr("y",function(e){return-f*Math.cos(I(e)*R)+p}).text(function(e){return e}).style("font-size",h+"px").style("fill",qe(a.hourLabelColor,o.clockOptions.hour.labelColor)),Ge.isDefinedAndNotNull(W)&&C.selectAll(".bida-clock-second-label").attr("x",function(e){return D*Math.sin(T(e)*R)}).attr("y",function(e){return-D*Math.cos(T(e)*R)+x}).text(function(e){return e}).style("font-size",m+"px").style("fill",qe(a.secondLabelColor,o.clockOptions.second.labelColor)),Ge.isDefinedAndNotNull(n)&&Ge.isDefinedAndNotNull(n.label)&&(e=J(n.label),C.selectAll(".bida-clock-label").text(e).attr("y",g).style("font-size",v+"px").style("fill",qe(a.labelColor,o.clockOptions.label.labelColor))),Ge.isDefinedAndNotNull(n)&&Ge.isDefinedAndNotNull(n.label2)&&(e=J(n.label2),C.selectAll(".bida-clock-label2").text(e).attr("y",b).style("font-size",v+"px").style("fill",qe(a.labelColor2,o.clockOptions.label.labelColor2))),k||(k=C.append("g").attr("id",_),C.append("g").append("circle").attr("class","bida-clock-hands-cover"),k.selectAll("line").data(S).enter().append("line")),C.selectAll(".bida-clock-hands-cover").attr("x",0).attr("y",0).attr("r",y).style("fill",qe(a.handCoverFillColor,o.clockOptions.hands.coverFillColor)).style("stroke",qe(a.handCoverStrokeColor,o.clockOptions.hands.coverStrokeColor)),k.selectAll("line").data(S).attr("class",function(e){return"bida-clock-"+e.type+"-hand"}).attr("x1",0).attr("y1",function(e){return e.balance||0}).attr("x2",0).attr("y2",function(e){return e.length}).attr("transform",function(e){return"rotate("+e.scale(e.value)+")"}).style("stroke",qe(a.handColor,o.clockOptions.hands.color))}function Q(){!document.hidden&&t.is(":visible")&&V()}function $(){Pe.innerItemsIntervals&&Pe.innerItemsIntervals[i]&&clearInterval(Pe.innerItemsIntervals[i])}function X(){Pe.innerItemsIntervals[i]=setInterval(function(){0===Ue(i).length?clearInterval(Pe.innerItemsIntervals[i]):Ge.isBetween(t.width(),t.find("svg").width(),We)||(je.debug.info({fct:Ge.featureDetails.name+" - drawClock",msg:"Clock has resize problem",featureDetails:Ge.featureDetails}),Q())},Pe.defTime)}function Z(){(P=new Date).setMilliseconds(P.getMilliseconds()+F),S[0].value=P.getHours()%12+P.getMinutes()/60,S[1].value=P.getMinutes(),S[2].value=P.getSeconds()}function K(){Pe.innerItemsIntervals&&Pe.innerItemsIntervals[z]&&clearInterval(Pe.innerItemsIntervals[z])}function ee(){Pe.innerItemsIntervals[z]=setInterval(function(){var e;0===Ue(z).length?clearInterval(Pe.innerItemsIntervals[z]):(Z(),k&&k.selectAll("line").data(S).attr("transform",function(e){return"rotate("+e.scale(e.value)+")"}),C&&(Ge.isDefinedAndNotNull(n)&&Ge.isDefinedAndNotNull(n.label)&&(e=J(n.label),C.selectAll(".bida-clock-label").text(e)),Ge.isDefinedAndNotNull(n)&&Ge.isDefinedAndNotNull(n.label2)&&(e=J(n.label2),C.selectAll(".bida-clock-label2").text(e))))},1e3)}V(),Ue(window).resize(function(){Q()}),$(),X(),document.addEventListener("visibilitychange",function(){(document.hidden?$:X)()}),K(),ee(),document.addEventListener("visibilitychange",function(){(document.hidden?K:ee)()})}catch(e){Ue(i).empty(),Ge.errorMessage.show(i,o.errorMessage),je.debug.error({fct:Ge.featureDetails.name+" - drawClock",msg:"Error while try to render clock",err:e,featureDetails:Ge.featureDetails})}}(t,m,n.itemData,c,a):(Ge.errorMessage.show(t,a.errorMessage),je.debug.error({fct:Ge.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Analogue Clocks is not activaed.",featureDetails:Ge.featureDetails}));break;case"calendar":-1<Ue.inArray("calendar",a.features)?function(e,t,i,n,a,o,r){je.debug.info({fct:Ge.featureDetails.name+" - drawCalendar",pItemSel:e,pItemHeight:t,pItemData:i,pItemConfig:n,pDefaultConfig:a,pOversize:o,pIsSafeItem:r,featureDetails:Ge.featureDetails});var s=Ue(e),l=s.attr("id")+"-calendar",d=je.locale.getLanguage(),c=Ue("<div></div>");c.addClass("bida-calendar"),c.attr("id",l),s.append(c);var u=qe(n.eventLimitPerDay,a.calendarOptions.eventLimitPerDay),f=qe(n.displayTime,a.calendarOptions.displayTime,!0),e=qe(n.viewType,a.calendarOptions.viewType),s=qe(n.hours12,a.calendarOptions.hours12,!0),n=qe(n.timeGridStartTime,a.calendarOptions.timeGridStartTime);s||"en"!=d||(d="en-bz");var p={month:"2-digit",year:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:s,locale:d};["dayGridMonth","dayGridWeek","timeGridWeek","listWeek","listMonth","listDay"].indexOf(e)<0&&(e="dayGridMonth");l=document.getElementById(l),n=new FullCalendar.Calendar(l,{height:t,events:i,displayEventTime:f,initialView:e,eventDisplay:"block",eventMouseEnter:function(e){e.event&&e.event._def&&((n=e.event._def).extendedProps&&n.extendedProps.link&&Ue(e.el).css("cursor","pointer"));var t=Ue("<div></div>");t.addClass("bida-calendar-event-tt");var i=Ue("<b></b>");i.addClass("bida-calendar-event-tt-title");var n=Ye(e.event.title,a,r,Fe);Ge.isDefinedAndNotNull(n)&&(i.append(n),t.append(i),t.append("<br>"));n=Ue("<div></div>");n.addClass("bida-calendar-event-tt-subtitle");i=Ue("<span></span>");i.addClass("fa fa-clock-o"),i.addClass("bida-calendar-event-tt-icon"),n.append(i);i=Ue("<span></span>");i.addClass("bida-calendar-event-tt-date"),i.append(" "),i.append(FullCalendar.formatDate(e.event.start,p)),Ge.isDefinedAndNotNull(e.event.end)&&(i.append(" - "),i.append(FullCalendar.formatDate(e.event.end,p))),n.append(i),t.append(n),Ge.isDefinedAndNotNull(e.event.extendedProps.details)&&(i=Ye(e.event.extendedProps.details,a,r,Fe),Ge.isDefinedAndNotNull(i)&&((n=Ue("<div></div>")).addClass("bida-calendar-event-tt-content"),n.append(i),t.append(n))),Ge.tooltip.show(t),Ge.tooltip.setPosition(e.jsEvent)},eventMouseLeave:function(){Ge.tooltip.hide()},eventClick:function(e){e.jsEvent.preventDefault(),e.event&&e.event._def&&((e=e.event._def).extendedProps&&e.extendedProps.link?Ge.link(e.extendedProps.link,e.extendedProps.linkTarget):e.extendedProps?Ge.link(e.url,e.extendedProps.linkTarget):Ge.link(e.url)),Ge.tooltip.hide()},dayMaxEventRows:u,eventDidMount:function(e){var t=Ye(e.event.title,a,r,Fe);Ue(e.el).find(".fc-event-title").html(t),Ue(e.el).find(".fc-list-event-title").find("a").html(t)},allDaySlot:!1,nowIndicator:!0,views:{dayGrid:{}},eventTimeFormat:{hour:p.hour,minute:p.minute,hour12:p.hour12},scrollTime:n,slotLabelFormat:{hour:p.hour,minute:p.minute,hour12:p.hour12}});n.setOption("locale",d),n.changeView(e),n.render(),!0!==o&&(c.css("height",t),c.addClass("bida-item-div-overflow"),B(c))}(t,m,n.itemData,c,a,p,h):(Ge.errorMessage.show(t,a.errorMessage),je.debug.error({fct:Ge.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Calendar is not activaed.",featureDetails:Ge.featureDetails}));break;case"note":-1<Ue.inArray("note",a.features)?function(n,a,e,t,i,o,r,s){je.debug.info({fct:Ge.featureDetails.name+" - drawNoteEditor",pItemID:n,pItemSel:a,pItemHeight:e,pItemData:t,pItemConfig:i,pDefaultConfig:o,pOversize:r,pIsSafeItem:s,featureDetails:Ge.featureDetails});var i=Ue(a),r=i.attr("id")+"-note",l=Ue("<div></div>");l.addClass("bida-note"),l.attr("id",r),l.css("height",e),i.append(l);var d=r+"-save";function c(){Ue("#"+d).parent().addClass("pell-button-disabled")}pell.init({element:document.getElementById(r),onChange:function(e){Ue("#"+d).parent().removeClass("pell-button-disabled")},defaultParagraphSeparator:"p",styleWithCSS:!1,classes:{actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},actions:[{name:"Save",icon:'<i id="'+d+'" class="fa fa-save-as pell-button-c"></i>',title:"Save",result:function(){var e=l.find(".pell-content");Ge.loader.start(a),c();var t=e.html(),i=Ge.splitString2Array(t),e=o.items2Submit;je.server.plugin(g,{pageItems:e,x01:"noteUpload",x02:n,f01:i},{dataType:"text",success:function(e){Ge.loader.stop(a),y.trigger("shortnotesaved",{itemID:n,itemSel:a,clob:t}),je.debug.info({fct:Ge.featureDetails.name+" - drawNoteEditor",msg:"Upload successful.",featureDetails:Ge.featureDetails})},error:function(e,t,i){Ge.loader.stop(a),je.message.clearErrors(),je.message.showErrors([{type:"error",location:["page"],message:o.errorMessage,unsafe:!1}]),je.debug.info({fct:Ge.featureDetails.name+" - drawNoteEditor",msg:"Error while try to upload NoteEditor Content",jqXHR:e,textStatus:t,errorThrown:i,featureDetails:Ge.featureDetails})}})}},{name:"bold",icon:'<i class="fa fa-bold pell-button-c"></i>',title:"Bold"},{name:"italic",icon:'<i class="fa fa-italic pell-button-c"></i>',title:"Italic"},{name:"underline",icon:'<i class="fa fa-underline pell-button-c"></i>',title:"Underline"},{name:"strikethrough",icon:'<i class="fa fa-strikethrough pell-button-c"></i>',title:"Strikethrough"},{name:"heading1",icon:'<i class="fa fa-header pell-button-c"><sub>1</sub></i>',title:"Heading 1"},{name:"heading2",icon:'<i class="fa fa-header pell-button-c"><sub>2</sub></i>',title:"Heading 2"},{name:"paragraph",icon:'<i class="fa fa-paragraph pell-button-c"></i>'},{name:"olist",icon:'<i class="fa fa-list-ol pell-button-c"></i>',title:"Ordered List"},{name:"ulist",icon:'<i class="fa fa-list-ul pell-button-c"></i>',title:"Unordered List"}]}),r=t&&"object"==typeof t?t.text:t;r=Ye(r,o,s,Fe);t=l.find(".pell-content"),s=l.find(".pell-actionbar").height();t.html(r),t.css("height",l.height()-s),c(),l.find(".pell-button").removeAttr("title")}(n.itemID,t,m,n.itemData,c,a,p,h):(Ge.errorMessage.show(t,a.errorMessage),je.debug.error({fct:Ge.featureDetails.name+" - drawItemRegionContent",msg:"Feature - Editor is not activaed.",featureDetails:Ge.featureDetails}));break;default:Ge.errorMessage.show(t,a.errorMessage),je.debug.error({fct:Ge.featureDetails.name+" - drawItemRegionContent",msg:"itemType not found (html, card, list, map, table, clock, calendar)",featureDetails:Ge.featureDetails})}else Ge.noDataMessage.show(t,a.noDataMessage);Ge.isDefinedAndNotNull(n.subText2)&&((i=Ue(t).find(".bida-item-subtext-2")).appendTo(t),i.addClass("bida-item-subtext-2-fin"))}else Ge.errorMessage.show(t,a.errorMessage),je.debug.error({fct:Ge.featureDetails.name+" - drawItemRegionContent",msg:"itemType is missing in JSON",featureDetails:Ge.featureDetails})}function B(e){var t=Ue(e);t.addClass("bida-item-div-overflow"),t.on("scroll",function(){t.scrollTop()+t.innerHeight()>=t[0].scrollHeight?t.addClass("bida-item-div-overflow-hidden"):t.removeClass("bida-item-div-overflow-hidden")});var i=t.innerHeight(),e=t[0].scrollHeight;je.debug.info({fct:Ge.featureDetails.name+" - overFlowStyling",innerHeight:i,scrollHeight:e,featureDetails:Ge.featureDetails}),e<=i&&0!==e&&t.addClass("bida-item-div-overflow-hidden")}}}};