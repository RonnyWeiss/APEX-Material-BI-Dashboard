!function(e,i){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("jquery")):e.jQueryBridget=i(e,e.jQuery)}(window,function(t,e){"use strict";var i=Array.prototype.slice,n=t.console,u=void 0===n?function(){}:function(t){n.error(t)};function o(l,c,d){(d=d||e||t.jQuery)&&(c.prototype.option||(c.prototype.option=function(t){d.isPlainObject(t)&&(this.options=d.extend(!0,this.options,t))}),d.fn[l]=function(t){if("string"!=typeof t)return s=t,this.each(function(t,e){var i=d.data(e,l);i?(i.option(s),i._init()):(i=new c(e,s),d.data(e,l,i))}),this;var n,o,a,r,s,e=i.call(arguments,1);return o=e,r="$()."+l+'("'+(n=t)+'")',(t=this).each(function(t,e){var i=d.data(e,l);i?(e=i[n])&&"_"!=n.charAt(0)?(i=e.apply(i,o),a=void 0===a?i:a):u(r+" is not a valid method"):u(l+" not initialized. Cannot call methods, i.e. "+r)}),void 0!==a?a:t},a(d))}function a(t){!t||t&&t.bridget||(t.bridget=o)}return a(e||t.jQuery),o}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},t=i[t]=i[t]||[];return-1==t.indexOf(e)&&t.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){t=this._events&&this._events[t];if(t&&t.length){e=t.indexOf(e);return-1!=e&&t.splice(e,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],o=0;o<i.length;o++){var a=i[o];n&&n[a]&&(this.off(t,a),delete n[a]),a.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function p(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],m=h.length;function g(t){t=getComputedStyle(t);return t||e("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}var b,y=!1;function v(t){if(y||(y=!0,(f=document.createElement("div")).style.width="200px",f.style.padding="1px 2px 3px 4px",f.style.borderStyle="solid",f.style.borderWidth="1px 2px 3px 4px",f.style.boxSizing="border-box",(u=document.body||document.documentElement).appendChild(f),d=g(f),b=200==Math.round(p(d.width)),v.isBoxSizeOuter=b,u.removeChild(f)),(t="string"==typeof t?document.querySelector(t):t)&&"object"==typeof t&&t.nodeType){var e=g(t);if("none"==e.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<m;e++)t[h[e]]=0;return t}();var i={};i.width=t.offsetWidth,i.height=t.offsetHeight;for(var n=i.isBorderBox="border-box"==e.boxSizing,o=0;o<m;o++){var a=h[o],r=e[a],r=parseFloat(r);i[a]=isNaN(r)?0:r}var s=i.paddingLeft+i.paddingRight,l=i.paddingTop+i.paddingBottom,c=i.marginLeft+i.marginRight,d=i.marginTop+i.marginBottom,u=i.borderLeftWidth+i.borderRightWidth,f=i.borderTopWidth+i.borderBottomWidth,t=n&&b,n=p(e.width);!1!==n&&(i.width=n+(t?0:s+u));n=p(e.height);return!1!==n&&(i.height=n+(t?0:l+f)),i.innerWidth=i.width-(s+u),i.innerHeight=i.height-(l+f),i.outerWidth=i.width+c,i.outerHeight=i.height+d,i}}return v}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var i=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(t,e){return t[i](e)}}),function(e,i){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("desandro-matches-selector")):e.fizzyUIUtils=i(e,e.matchesSelector)}(window,function(i,a){var l={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},e=Array.prototype.slice;l.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?e.call(t):[t]},l.removeFrom=function(t,e){e=t.indexOf(e);-1!=e&&t.splice(e,1)},l.getParent=function(t,e){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,a(t,e))return t},l.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},l.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.filterFindElements=function(t,n){t=l.makeArray(t);var o=[];return t.forEach(function(t){if(t instanceof HTMLElement)if(n){a(t,n)&&o.push(t);for(var e=t.querySelectorAll(n),i=0;i<e.length;i++)o.push(e[i])}else o.push(t)}),o},l.debounceMethod=function(t,e,n){n=n||100;var o=t.prototype[e],a=e+"Timeout";t.prototype[e]=function(){var t=this[a];clearTimeout(t);var e=arguments,i=this;this[a]=setTimeout(function(){o.apply(i,e),delete i[a]},n)}},l.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},l.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var c=i.console;return l.htmlInit=function(r,s){l.docReady(function(){var t=l.toDashed(s),n="data-"+t,e=document.querySelectorAll("["+n+"]"),t=document.querySelectorAll(".js-"+t),t=l.makeArray(e).concat(l.makeArray(t)),o=n+"-options",a=i.jQuery;t.forEach(function(e){var t=e.getAttribute(n)||e.getAttribute(o);try{i=t&&JSON.parse(t)}catch(t){return void(c&&c.error("Error parsing "+n+" on "+e.className+": "+t))}var i=new r(e,i);a&&a.data(e,s,i)})})},l}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){"use strict";var i=document.documentElement.style,n="string"==typeof i.transition?"transition":"WebkitTransition",o="string"==typeof i.transform?"transform":"WebkitTransform",a={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[n],r={transform:o,transition:n,transitionDuration:n+"Duration",transitionProperty:n+"Property",transitionDelay:n+"Delay"};function s(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}t=s.prototype=Object.create(t.prototype);t.constructor=s,t._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},t.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},t.getSize=function(){this.size=e(this.element)},t.css=function(t){var e,i=this.element.style;for(e in t)i[r[e]||e]=t[e]},t.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],o=t[i?"top":"bottom"],a=parseFloat(n),r=parseFloat(o),t=this.layout.size;-1!=n.indexOf("%")&&(a=a/100*t.width),-1!=o.indexOf("%")&&(r=r/100*t.height),a=isNaN(a)?0:a,r=isNaN(r)?0:r,a-=e?t.paddingLeft:t.paddingRight,r-=i?t.paddingTop:t.paddingBottom,this.position.x=a,this.position.y=r},t.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),o=i?"right":"left",a=this.position.x+t[i?"paddingLeft":"paddingRight"];e[i?"left":"right"]=this.getXValue(a),e[o]="";o=n?"bottom":"top",t=this.position.y+t[n?"paddingTop":"paddingBottom"];e[n?"top":"bottom"]=this.getYValue(t),e[o]="",this.css(e),this.emitEvent("layout",[this])},t.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},t.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},t._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=t==this.position.x&&e==this.position.y;this.setPosition(t,e),!o||this.isTransitioning?((o={}).transform=this.getTranslate(t-i,e-n),this.transition({to:o,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})):this.layoutPosition()},t.getTranslate=function(t,e){return"translate3d("+(t=this.layout._getOption("originLeft")?t:-t)+"px, "+(e=this.layout._getOption("originTop")?e:-e)+"px, 0)"},t.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},t.moveTo=t._transitionTo,t.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},t._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},t.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e,i=this._transn;for(e in t.onTransitionEnd)i.onEnd[e]=t.onTransitionEnd[e];for(e in t.to)i.ingProperties[e]=!0,t.isCleaning&&(i.clean[e]=!0);t.from&&(this.css(t.from),this.element.offsetHeight,0),this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var l="opacity,"+o.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()});t.enableTransition=function(){var t;this.isTransitioning||(t=this.layout.options.transitionDuration,this.css({transitionProperty:l,transitionDuration:t="number"==typeof t?t+"ms":t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(a,this,!1))},t.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},t.onotransitionend=function(t){this.ontransitionend(t)};var c={"-webkit-transform":"transform"};t.ontransitionend=function(t){var e,i;t.target===this.element&&(e=this._transn,i=c[t.propertyName]||t.propertyName,delete e.ingProperties[i],function(t){for(var e in t)return;return 1}(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd&&(e.onEnd[i].call(this),delete e.onEnd[i]),this.emitEvent("transitionEnd",[this]))},t.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(a,this,!1),this.isTransitioning=!1},t._removeStyles=function(t){var e,i={};for(e in t)i[e]="";this.css(i)};var d={transitionProperty:"",transitionDuration:"",transitionDelay:""};return t.removeTransitionStyles=function(){this.css(d)},t.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},t.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},t.remove=function(){n&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()},t.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},t.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},t.getHideRevealTransitionEndProperty=function(t){var e,t=this.layout.options[t];if(t.opacity)return"opacity";for(e in t)return e},t.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},t.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},t.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},s}),function(o,a){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(t,e,i,n){return a(o,t,e,i,n)}):"object"==typeof module&&module.exports?module.exports=a(o,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):o.Outlayer=a(o,o.EvEmitter,o.getSize,o.fizzyUIUtils,o.Outlayer.Item)}(window,function(t,e,o,n,a){"use strict";function i(){}var r=t.console,s=t.jQuery,l=0,c={};function d(t,e){var i=n.getQueryElement(t);i?(this.element=i,s&&(this.$element=s(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e),e=++l,this.element.outlayerGUID=e,(c[e]=this)._create(),this._getOption("initLayout")&&this.layout()):r&&r.error("Bad element for "+this.constructor.namespace+": "+(i||t))}d.namespace="outlayer",d.Item=a,d.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var u=d.prototype;function f(t){function e(){t.apply(this,arguments)}return(e.prototype=Object.create(t.prototype)).constructor=e}n.extend(u,e.prototype),u.option=function(t){n.extend(this.options,t)},u._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},d.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},u._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},u.reloadItems=function(){this.items=this._itemize(this.element.children)},u._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],o=0;o<e.length;o++){var a=new i(e[o],this);n.push(a)}return n},u._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},u.getItemElements=function(){return this.items.map(function(t){return t.element})},u.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),t=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},u._init=u.layout,u._resetLayout=function(){this.getSize()},u.getSize=function(){this.size=o(this.element)},u._getMeasurement=function(t,e){var i,n=this.options[t];n?("string"==typeof n?i=this.element.querySelector(n):n instanceof HTMLElement&&(i=n),this[t]=i?o(i)[e]:n):this[t]=0},u.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},u._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},u._layoutItems=function(t,i){var n;this._emitCompleteOnItems("layout",t),t&&t.length&&(n=[],t.forEach(function(t){var e=this._getItemLayoutPosition(t);e.item=t,e.isInstant=i||t.isLayoutInstant,n.push(e)},this),this._processLayoutQueue(n))},u._getItemLayoutPosition=function(){return{x:0,y:0}},u._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},u.updateStagger=function(){var t=this.options.stagger;if(null!=t)return this.stagger=function(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),t=e&&e[1],e=e&&e[2];if(!t.length)return 0;t=parseFloat(t);e=p[e]||1;return t*e}(t),this.stagger;this.stagger=0},u._positionItem=function(t,e,i,n,o){n?t.goTo(e,i):(t.stagger(o*this.stagger),t.moveTo(e,i))},u._postLayout=function(){this.resizeContainer()},u.resizeContainer=function(){var t;!this._getOption("resizeContainer")||(t=this._getContainerSize())&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))},u._getContainerSize=i,u._setContainerMeasure=function(t,e){var i;void 0!==t&&((i=this.size).isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px")},u._emitCompleteOnItems=function(e,t){var i=this;function n(){i.dispatchEvent(e+"Complete",null,[t])}var o,a=t.length;function r(){++o==a&&n()}t&&a?(o=0,t.forEach(function(t){t.once(e,r)})):n()},u.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;this.emitEvent(t,n),s&&(this.$element=this.$element||s(this.element),e?((e=s.Event(e)).type=t,this.$element.trigger(e,i)):this.$element.trigger(t,i))},u.ignore=function(t){t=this.getItem(t);t&&(t.isIgnored=!0)},u.unignore=function(t){t=this.getItem(t);t&&delete t.isIgnored},u.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},u.unstamp=function(t){(t=this._find(t))&&t.forEach(function(t){n.removeFrom(this.stamps,t),this.unignore(t)},this)},u._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n.makeArray(t)},u._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},u._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},u._manageStamp=i,u._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,t=o(t);return{left:e.left-i.left-t.marginLeft,top:e.top-i.top-t.marginTop,right:i.right-e.right-t.marginRight,bottom:i.bottom-e.bottom-t.marginBottom}},u.handleEvent=n.handleEvent,u.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},u.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},u.onresize=function(){this.resize()},n.debounceMethod(d,"onresize",100),u.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},u.needsResizeLayout=function(){var t=o(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},u.addItems=function(t){t=this._itemize(t);return t.length&&(this.items=this.items.concat(t)),t},u.appended=function(t){t=this.addItems(t);t.length&&(this.layoutItems(t,!0),this.reveal(t))},u.prepended=function(t){var e=this._itemize(t);e.length&&(t=this.items.slice(0),this.items=e.concat(t),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(t))},u.reveal=function(t){var i;this._emitCompleteOnItems("reveal",t),t&&t.length&&(i=this.updateStagger(),t.forEach(function(t,e){t.stagger(e*i),t.reveal()}))},u.hide=function(t){var i;this._emitCompleteOnItems("hide",t),t&&t.length&&(i=this.updateStagger(),t.forEach(function(t,e){t.stagger(e*i),t.hide()}))},u.revealItemElements=function(t){t=this.getItems(t);this.reveal(t)},u.hideItemElements=function(t){t=this.getItems(t);this.hide(t)},u.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},u.getItems=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){t=this.getItem(t);t&&e.push(t)},this),e},u.remove=function(t){t=this.getItems(t);this._emitCompleteOnItems("remove",t),t&&t.length&&t.forEach(function(t){t.remove(),n.removeFrom(this.items,t)},this)},u.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();t=this.element.outlayerGUID;delete c[t],delete this.element.outlayerGUID,s&&s.removeData(this.element,this.constructor.namespace)},d.data=function(t){t=(t=n.getQueryElement(t))&&t.outlayerGUID;return t&&c[t]},d.create=function(t,e){var i=f(d);return i.defaults=n.extend({},d.defaults),n.extend(i.defaults,e),i.compatOptions=n.extend({},d.compatOptions),i.namespace=t,i.data=d.data,i.Item=f(a),n.htmlInit(i,t),s&&s.bridget&&s.bridget(t,i),i};var p={ms:1,s:1e3};return d.Item=a,d}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,s){var e=t.create("masonry");e.compatOptions.fitWidth="isFitWidth";t=e.prototype;return t._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},t.measureColumns=function(){this.getContainerWidth(),this.columnWidth||(i=(e=this.items[0])&&e.element,this.columnWidth=i&&s(i).outerWidth||this.containerWidth);var t=this.columnWidth+=this.gutter,e=this.containerWidth+this.gutter,i=e/t,t=t-e%t,i=Math[t&&t<1?"round":"floor"](i);this.cols=Math.max(i,1)},t.getContainerWidth=function(){var t=this._getOption("fitWidth")?this.element.parentNode:this.element,t=s(t);this.containerWidth=t&&t.innerWidth},t._getItemLayoutPosition=function(t){t.getSize();for(var e=t.size.outerWidth%this.columnWidth,i=Math[e&&e<1?"round":"ceil"](t.size.outerWidth/this.columnWidth),i=Math.min(i,this.cols),n=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](i,t),e={x:this.columnWidth*n.col,y:n.y},o=n.y+t.size.outerHeight,a=i+n.col,r=n.col;r<a;r++)this.colYs[r]=o;return e},t._getTopColPosition=function(t){var e=this._getTopColGroup(t),t=Math.min.apply(Math,e);return{col:e.indexOf(t),y:t}},t._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;n<i;n++)e[n]=this._getColGroupY(n,t);return e},t._getColGroupY=function(t,e){if(e<2)return this.colYs[t];e=this.colYs.slice(t,t+e);return Math.max.apply(Math,e)},t._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols,i=1<t&&i+t>this.cols?0:i,e=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=e?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},t._manageStamp=function(t){var e=s(t),i=this._getElementOffset(t),n=this._getOption("originLeft")?i.left:i.right,t=n+e.outerWidth,n=Math.floor(n/this.columnWidth),n=Math.max(0,n),o=Math.floor(t/this.columnWidth);o-=t%this.columnWidth?0:1;for(var o=Math.min(this.cols-1,o),a=(this._getOption("originTop")?i.top:i.bottom)+e.outerHeight,r=n;r<=o;r++)this.colYs[r]=Math.max(a,this.colYs[r])},t._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},t._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},t.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},e}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.pell={})}(this,function(t){"use strict";function r(t,e,i){return t.addEventListener(e,i)}function s(t,e){return t.appendChild(e)}function l(t){return document.createElement(t)}function e(t){return document.queryCommandState(t)}function c(t){return document.execCommand(t,!1,1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)}function i(e){var t=e.actions?e.actions.map(function(t){return"string"==typeof t?p[t]:p[t.name]?d({},p[t.name],t):t}):Object.keys(p).map(function(t){return p[t]}),n=d({},h,e.classes),i=e[u]||"div",o=l("div");o.className=n.actionbar,s(e.element,o);var a=e.element.content=l("div");return a.contentEditable=!0,a.className=n.content,a.oninput=function(t){t=t.target.firstChild;t&&3===t.nodeType?c(f,"<"+i+">"):"<br>"===a.innerHTML&&(a.innerHTML=""),e.onChange(a.innerHTML)},a.onkeydown=function(t){"Enter"===t.key&&"blockquote"===(t=f,document.queryCommandValue(t))&&setTimeout(function(){return c(f,"<"+i+">")},0)},s(e.element,a),t.forEach(function(t){var e,i=l("button");i.className=n.button,i.innerHTML=t.icon,i.title=t.title,i.setAttribute("type","button"),i.onclick=function(){return t.result()&&a.focus()},t.state&&(r(a,"keyup",e=function(){return i.classList[t.state()?"add":"remove"](n.selected)}),r(a,"mouseup",e),r(i,"click",e)),s(o,i)}),e.styleWithCSS&&c("styleWithCSS"),c(u,i),e.element}var d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i,n=arguments[e];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u="defaultParagraphSeparator",f="formatBlock",p={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return e("bold")},result:function(){return c("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return e("italic")},result:function(){return c("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return e("underline")},result:function(){return c("underline")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return e("strikeThrough")},result:function(){return c("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return c(f,"<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return c(f,"<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return c(f,"<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return c(f,"<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return c("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return c("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return c(f,"<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return c("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var t=window.prompt("Enter the link URL");t&&c("createLink",t)}},image:{icon:"&#128247;",title:"Image",result:function(){var t=window.prompt("Enter the image URL");t&&c("insertImage",t)}}},h={actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},n={exec:c,init:i};t.exec=c,t.init=i,t.default=n,Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).DOMPurify=e()}(this,function(){"use strict";const{entries:Ft,setPrototypeOf:t,isFrozen:r,getPrototypeOf:n,getOwnPropertyDescriptor:o}=Object;let{freeze:Bt,seal:e,create:a}=Object,{apply:s,construct:l}="undefined"!=typeof Reflect&&Reflect;s=s||function(t,e,i){return t.apply(e,i)},Bt=Bt||function(t){return t},e=e||function(t){return t},l=l||function(t,e){return new t(...e)};const jt=d(Array.prototype.forEach),$t=d(Array.prototype.pop),Ut=d(Array.prototype.push),Jt=d(String.prototype.toLowerCase),Gt=d(String.prototype.toString),Yt=d(String.prototype.match),qt=d(String.prototype.replace),Vt=d(String.prototype.indexOf),Qt=d(String.prototype.trim),Xt=d(RegExp.prototype.test),Zt=(c=TypeError,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return l(c,e)});var c;function d(o){return function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return s(o,t,i)}}function Kt(e,i,n){var o;n=null!==n&&void 0!==n?n:Jt,t&&t(e,null);let a=i.length;for(;a--;){let t=i[a];"string"!=typeof t||(o=n(t))!==t&&(r(i)||(i[a]=o),t=o),e[t]=!0}return e}function te(t){const e=a(null);for(var[i,n]of Ft(t))e[i]=n;return e}function ee(t,e){for(;null!==t;){var i=o(t,e);if(i){if(i.get)return d(i.get);if("function"==typeof i.value)return d(i.value)}t=n(t)}return function(t){return console.warn("fallback value for",t),null}}const ie=Bt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ne=Bt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),oe=Bt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ae=Bt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),re=Bt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),se=Bt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),le=Bt(["#text"]),ce=Bt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),de=Bt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ue=Bt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fe=Bt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]);var i=e(/\{\{[\w\W]*|[\w\W]*\}\}/gm),u=e(/<%[\w\W]*|[\w\W]*%>/gm),f=e(/\${[\w\W]*}/gm),p=e(/^data-[\-\w.\u00B7-\uFFFF]/),h=e(/^aria-[\-\w]+$/);const pe=e(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i);var m=e(/^(?:\w+script|data):/i),g=e(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);const he=e(/^html$/i);var me=Object.freeze({__proto__:null,MUSTACHE_EXPR:i,ERB_EXPR:u,TMPLIT_EXPR:f,DATA_ATTR:p,ARIA_ATTR:h,IS_ALLOWED_URI:pe,IS_SCRIPT_OR_DATA:m,ATTR_WHITESPACE:g,DOCTYPE_NAME:he});const ge=()=>"undefined"==typeof window?null:window,be=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let i=null;var n="data-tt-policy-suffix";e&&e.hasAttribute(n)&&(i=e.getAttribute(n));n="dompurify"+(i?"#"+i:"");try{return t.createPolicy(n,{createHTML(t){return t},createScriptURL(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+n+" could not be created."),null}};return function e(t){t=0<arguments.length&&void 0!==t?t:ge();const c=t=>e(t);if(c.version="3.0.3",c.removed=[],!t||!t.document||9!==t.document.nodeType)return c.isSupported=!1,c;const l=t.document,i=l.currentScript;let{document:a}=t;const{DocumentFragment:d,HTMLTemplateElement:n,Node:u,Element:r,NodeFilter:o,NamedNodeMap:s=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:h}=t;t=r.prototype;const m=ee(t,"cloneNode"),g=ee(t,"nextSibling"),b=ee(t,"childNodes"),y=ee(t,"parentNode");"function"!=typeof n||(t=a.createElement("template")).content&&t.content.ownerDocument&&(a=t.content.ownerDocument);let v,D="";const{implementation:x,createNodeIterator:C,createDocumentFragment:k,getElementsByTagName:w}=a,{importNode:T}=l;let S={};c.isSupported="function"==typeof Ft&&"function"==typeof y&&x&&void 0!==x.createHTMLDocument;const{MUSTACHE_EXPR:N,ERB_EXPR:A,TMPLIT_EXPR:I,DATA_ATTR:E,ARIA_ATTR:M,IS_SCRIPT_OR_DATA:_,ATTR_WHITESPACE:O}=me;let{IS_ALLOWED_URI:L}=me,z=null;const R=Kt({},[...ie,...ne,...oe,...re,...le]);let H=null;const P=Kt({},[...ce,...de,...ue,...fe]);let W=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),F=null,B=null,j=!0,$=!0,U=!1,J=!0,G=!1,Y=!1,q=!1,V=!1,Q=!1,X=!1,Z=!1,K=!0,tt=!1;let et=!0,it=!1,nt,ot=null;const at=Kt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let rt=null;const st=Kt({},["audio","video","img","source","image","track"]);let lt=null;const ct=Kt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),dt="http://www.w3.org/1998/Math/MathML",ut="http://www.w3.org/2000/svg",ft="http://www.w3.org/1999/xhtml";let pt=ft,ht=!1,mt=null;const gt=Kt({},[dt,ut,ft],Gt);let bt;const yt=["application/xhtml+xml","text/html"];let vt,Dt=null;const xt=a.createElement("form"),Ct=function(t){return t instanceof RegExp||t instanceof Function},kt=function(t){if(!Dt||Dt!==t){if(t=te(t=t&&"object"==typeof t?t:{}),bt=-1===yt.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,vt="application/xhtml+xml"===bt?Gt:Jt,z="ALLOWED_TAGS"in t?Kt({},t.ALLOWED_TAGS,vt):R,H="ALLOWED_ATTR"in t?Kt({},t.ALLOWED_ATTR,vt):P,mt="ALLOWED_NAMESPACES"in t?Kt({},t.ALLOWED_NAMESPACES,Gt):gt,lt="ADD_URI_SAFE_ATTR"in t?Kt(te(ct),t.ADD_URI_SAFE_ATTR,vt):ct,rt="ADD_DATA_URI_TAGS"in t?Kt(te(st),t.ADD_DATA_URI_TAGS,vt):st,ot="FORBID_CONTENTS"in t?Kt({},t.FORBID_CONTENTS,vt):at,F="FORBID_TAGS"in t?Kt({},t.FORBID_TAGS,vt):{},B="FORBID_ATTR"in t?Kt({},t.FORBID_ATTR,vt):{},nt="USE_PROFILES"in t&&t.USE_PROFILES,j=!1!==t.ALLOW_ARIA_ATTR,$=!1!==t.ALLOW_DATA_ATTR,U=t.ALLOW_UNKNOWN_PROTOCOLS||!1,J=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,G=t.SAFE_FOR_TEMPLATES||!1,Y=t.WHOLE_DOCUMENT||!1,Q=t.RETURN_DOM||!1,X=t.RETURN_DOM_FRAGMENT||!1,Z=t.RETURN_TRUSTED_TYPE||!1,V=t.FORCE_BODY||!1,K=!1!==t.SANITIZE_DOM,tt=t.SANITIZE_NAMED_PROPS||!1,et=!1!==t.KEEP_CONTENT,it=t.IN_PLACE||!1,L=t.ALLOWED_URI_REGEXP||pe,pt=t.NAMESPACE||ft,W=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&Ct(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&Ct(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(W.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),G&&($=!1),X&&(Q=!0),nt&&(z=Kt({},[...le]),H=[],!0===nt.html&&(Kt(z,ie),Kt(H,ce)),!0===nt.svg&&(Kt(z,ne),Kt(H,de),Kt(H,fe)),!0===nt.svgFilters&&(Kt(z,oe),Kt(H,de),Kt(H,fe)),!0===nt.mathMl&&(Kt(z,re),Kt(H,ue),Kt(H,fe))),t.ADD_TAGS&&(z===R&&(z=te(z)),Kt(z,t.ADD_TAGS,vt)),t.ADD_ATTR&&(H===P&&(H=te(H)),Kt(H,t.ADD_ATTR,vt)),t.ADD_URI_SAFE_ATTR&&Kt(lt,t.ADD_URI_SAFE_ATTR,vt),t.FORBID_CONTENTS&&(ot===at&&(ot=te(ot)),Kt(ot,t.FORBID_CONTENTS,vt)),et&&(z["#text"]=!0),Y&&Kt(z,["html","head","body"]),z.table&&(Kt(z,["tbody"]),delete F.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw Zt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw Zt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=t.TRUSTED_TYPES_POLICY,D=v.createHTML("")}else void 0===v&&(v=be(h,i)),null!==v&&"string"==typeof D&&(D=v.createHTML(""));Bt&&Bt(t),Dt=t}},wt=Kt({},["mi","mo","mn","ms","mtext"]),Tt=Kt({},["foreignobject","desc","title","annotation-xml"]),St=Kt({},["title","style","font","a","script"]),Nt=Kt({},ne);Kt(Nt,oe),Kt(Nt,ae);const At=Kt({},re);Kt(At,se);const It=function(e){Ut(c.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},Et=function(t,e){try{Ut(c.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){Ut(c.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!H[t])if(Q||X)try{It(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},Mt=function(t){let e,i;V?t="<remove></remove>"+t:(n=Yt(t,/^[\r\n\t ]+/),i=n&&n[0]),"application/xhtml+xml"===bt&&pt===ft&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var n=v?v.createHTML(t):t;if(pt===ft)try{e=(new p).parseFromString(n,bt)}catch(t){}if(!e||!e.documentElement){e=x.createDocument(pt,"template",null);try{e.documentElement.innerHTML=ht?D:n}catch(t){}}const o=e.body||e.documentElement;return t&&i&&o.insertBefore(a.createTextNode(i),o.childNodes[0]||null),pt===ft?w.call(e,Y?"html":"body")[0]:Y?e.documentElement:o},_t=function(t){return C.call(t.ownerDocument||t,t,o.SHOW_ELEMENT|o.SHOW_COMMENT|o.SHOW_TEXT,null,!1)},Ot=function(t){return"object"==typeof u?t instanceof u:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},Lt=function(t,e,i){S[t]&&jt(S[t],t=>{t.call(c,e,i,Dt)})},zt=function(e){var t;if(Lt("beforeSanitizeElements",e,null),(t=e)instanceof f&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof s)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes))return It(e),!0;var i=vt(e.nodeName);if(Lt("uponSanitizeElement",e,{tagName:i,allowedTags:z}),e.hasChildNodes()&&!Ot(e.firstElementChild)&&(!Ot(e.content)||!Ot(e.content.firstElementChild))&&Xt(/<[/\w]/g,e.innerHTML)&&Xt(/<[/\w]/g,e.textContent))return It(e),!0;if(z[i]&&!F[i])return e instanceof r&&!function(t){let e=y(t);e&&e.tagName||(e={namespaceURI:pt,tagName:"template"});var i=Jt(t.tagName),n=Jt(e.tagName);return mt[t.namespaceURI]&&(t.namespaceURI===ut?e.namespaceURI===ft?"svg"===i:e.namespaceURI===dt?"svg"===i&&("annotation-xml"===n||wt[n]):Boolean(Nt[i]):t.namespaceURI===dt?e.namespaceURI===ft?"math"===i:e.namespaceURI===ut?"math"===i&&Tt[n]:Boolean(At[i]):t.namespaceURI===ft?(e.namespaceURI!==ut||Tt[n])&&(e.namespaceURI!==dt||wt[n])&&!At[i]&&(St[i]||!Nt[i]):"application/xhtml+xml"===bt&&mt[t.namespaceURI])}(e)||("noscript"===i||"noembed"===i)&&Xt(/<\/no(script|embed)/i,e.innerHTML)?(It(e),!0):(G&&3===e.nodeType&&(t=e.textContent,t=qt(t,N," "),t=qt(t,A," "),t=qt(t,I," "),e.textContent!==t&&(Ut(c.removed,{element:e.cloneNode()}),e.textContent=t)),Lt("afterSanitizeElements",e,null),!1);if(!F[i]&&Ht(i)){if(W.tagNameCheck instanceof RegExp&&Xt(W.tagNameCheck,i))return!1;if(W.tagNameCheck instanceof Function&&W.tagNameCheck(i))return!1}if(et&&!ot[i]){const o=y(e)||e.parentNode;var n=b(e)||e.childNodes;if(n&&o)for(let t=n.length-1;0<=t;--t)o.insertBefore(m(n[t],!0),g(e))}return It(e),!0},Rt=function(t,e,i){if(K&&("id"===e||"name"===e)&&(i in a||i in xt))return!1;if((!$||B[e]||!Xt(E,e))&&(!j||!Xt(M,e)))if(!H[e]||B[e]){if(!(Ht(t)&&(W.tagNameCheck instanceof RegExp&&Xt(W.tagNameCheck,t)||W.tagNameCheck instanceof Function&&W.tagNameCheck(t))&&(W.attributeNameCheck instanceof RegExp&&Xt(W.attributeNameCheck,e)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(e))||"is"===e&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&Xt(W.tagNameCheck,i)||W.tagNameCheck instanceof Function&&W.tagNameCheck(i))))return!1}else if(!lt[e]&&!Xt(L,qt(i,O,""))&&("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==Vt(i,"data:")||!rt[t])&&(!U||Xt(_,qt(i,O,"")))&&i)return!1;return!0},Ht=function(t){return 0<t.indexOf("-")},Pt=function(t){var e;let i,n;Lt("beforeSanitizeAttributes",t,null);var{attributes:o}=t;if(o){const l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H};for(n=o.length;n--;){var{name:a,namespaceURI:r}=s=o[n];if(i="value"===a?s.value:Qt(s.value),e=vt(a),l.attrName=e,l.attrValue=i,l.keepAttr=!0,l.forceKeepAttr=void 0,Lt("uponSanitizeAttribute",t,l),i=l.attrValue,!l.forceKeepAttr&&(Et(a,t),l.keepAttr))if(J||!Xt(/\/>/i,i)){G&&(i=qt(i,N," "),i=qt(i,A," "),i=qt(i,I," "));var s=vt(t.nodeName);if(Rt(s,e,i)){if(!tt||"id"!==e&&"name"!==e||(Et(a,t),i="user-content-"+i),v&&"object"==typeof h&&"function"==typeof h.getAttributeType&&!r)switch(h.getAttributeType(s,e)){case"TrustedHTML":i=v.createHTML(i);break;case"TrustedScriptURL":i=v.createScriptURL(i)}try{r?t.setAttributeNS(r,a,i):t.setAttribute(a,i),$t(c.removed)}catch(t){}}}else Et(a,t)}Lt("afterSanitizeAttributes",t,null)}},Wt=function t(e){var i;const n=_t(e);for(Lt("beforeSanitizeShadowDOM",e,null);i=n.nextNode();)Lt("uponSanitizeShadowNode",i,null),zt(i)||(i.content instanceof d&&t(i.content),Pt(i));Lt("afterSanitizeShadowDOM",e,null)};return c.sanitize=function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};let n,o;if(ht=!t,"string"!=typeof(t=ht?"\x3c!--\x3e":t)&&!Ot(t)){if("function"!=typeof t.toString)throw Zt("toString is not a function");if("string"!=typeof(t=t.toString()))throw Zt("dirty is not a string, aborting")}if(!c.isSupported)return t;if(q||kt(i),c.removed=[],"string"==typeof t&&(it=!1),it){if(t.nodeName){var a=vt(t.nodeName);if(!z[a]||F[a])throw Zt("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof u)n=Mt("\x3c!----\x3e"),1===(a=n.ownerDocument.importNode(t,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?n=a:n.appendChild(a);else{if(!Q&&!G&&!Y&&-1===t.indexOf("<"))return v&&Z?v.createHTML(t):t;if(n=Mt(t),!n)return Q?null:Z?D:""}n&&V&&It(n.firstChild);const r=_t(it?t:n);for(;e=r.nextNode();)zt(e)||(e.content instanceof d&&Wt(e.content),Pt(e));if(it)return t;if(Q){if(X)for(o=k.call(n.ownerDocument);n.firstChild;)o.appendChild(n.firstChild);else o=n;return(H.shadowroot||H.shadowrootmod)&&(o=T.call(l,o,!0)),o}let s=Y?n.outerHTML:n.innerHTML;return Y&&z["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&Xt(he,n.ownerDocument.doctype.name)&&(s="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+s),G&&(s=qt(s,N," "),s=qt(s,A," "),s=qt(s,I," ")),v&&Z?v.createHTML(s):s},c.setConfig=function(t){kt(t),q=!0},c.clearConfig=function(){Dt=null,q=!1},c.isValidAttribute=function(t,e,i){return Dt||kt({}),t=vt(t),e=vt(e),Rt(t,e,i)},c.addHook=function(t,e){"function"==typeof e&&(S[t]=S[t]||[],Ut(S[t],e))},c.removeHook=function(t){if(S[t])return $t(S[t])},c.removeHooks=function(t){S[t]&&(S[t]=[])},c.removeAllHooks=function(){S={}},c}()});const apexBIDashBoard=function(Rt,Ht,o,n,B){"use strict";const Pt={featureDetails:{name:"Material-BI-Dashboard",scriptVersion:"23.07.18",utilVersion:"22.11.28",url:"https://github.com/RonnyWeiss",url2:"https://linktr.ee/ronny.weiss",license:"MIT License"},isDefinedAndNotNull:function(t){return null!=t&&""!==t},debounce:function(e,i=50){let n;return(...t)=>{clearTimeout(n),n=setTimeout(function(){e.apply(this,t)},i)}},groupObjectArray:function(t,n){return t&&Array.isArray(t)?t.reduce(function(t,e){var i=e[n];return i&&(t[i="​"+i]=t[i]||[]).push(e),t},{}):[]},link:function(t,e="_parent"){null!=t&&""!==t&&window.open(t,e)},tooltip:{show:function(t,e,i){try{if(0===Ht("#dynToolTip").length){const n=Ht("<div></div>").attr("id","dynToolTip").css("color","#111").css("max-width","400px").css("position","absolute").css("top","0px").css("left","0px").css("z-index","2000").css("background-color","rgba(240, 240, 240, 1)").css("padding","10px").css("display","block").css("top","0").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto");e&&n.css("background-color",e),i&&n.css("max-width",i),Ht("body").append(n)}else Ht("#dynToolTip").css("visibility","visible");Ht("#dynToolTip").html(t),Ht("#dynToolTip").find("*").css("max-width","100%").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto").css("white-space","normal"),Ht("#dynToolTip").find("img").css("object-fit","contain").css("object-position","50% 0%")}catch(t){Rt.debug.error({module:"utils.js",msg:"Error while try to show tooltip",err:t})}},setPosition:function(t){Ht("#dynToolTip").position({my:"left+6 top+6",of:t,collision:"flipfit"})},hide:function(){Ht("#dynToolTip").css("visibility","hidden")},remove:function(){Ht("#dynToolTip").remove()}},escapeHTML:function(t){if(null===t)return null;if(void 0!==t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(t){}return Rt.util.escapeHTML(String(t))}},loader:{start:function(t,e){e&&Ht(t).css("min-height","100px"),Rt.util.showSpinner(Ht(t))},stop:function(t,e){e&&Ht(t).css("min-height",""),Ht(t+" > .u-Processing").remove(),Ht(t+" > .ct-loader").remove()}},splitString2Array:function(i){if(null!=i&&""!==i&&0<i.length){if(Rt&&Rt.server&&Rt.server.chunk)return Rt.server.chunk(i);{let t,e=[];if(8e3<i.length){for(e=[],t=0;t<i.length;)e.push(i.substr(t,8e3)),t+=8e3;return e}return e.push(i),e}}return[]},jsonSaveExtend:function(e,i){let n={},t={};if("string"==typeof i)try{t=JSON.parse(i)}catch(t){Rt.debug.error({module:"util.js",msg:"Error while try to parse targetConfig. Please check your Config JSON. Standard Config will be used.",err:t,targetConfig:i})}else t=Ht.extend(!0,{},i);try{n=Ht.extend(!0,{},e,t)}catch(t){n=Ht.extend(!0,{},e),Rt.debug.error({module:"util.js",msg:"Error while try to merge 2 JSONs into standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used.",err:t,finalConfig:n})}return n},printDOMMessage:{show:function(t,e,i,n){const o=Ht("<div>");if(150<=Ht(t).height()){const r=Ht("<div></div>");var a=Ht("<span></span>").addClass("fa").addClass(i||"fa-info-circle-o").addClass("fa-2x").css("height","32px").css("width","32px").css("margin-bottom","16px").css("color",n||"#D0D0D0");r.append(a);a=Ht("<span></span>").text(e).css("display","block").css("color","#707070").css("text-overflow","ellipsis").css("overflow","hidden").css("white-space","nowrap").css("font-size","12px");o.css("margin","12px").css("text-align","center").css("padding","10px 0").addClass("dominfomessagediv").append(r).append(a)}else{n=Ht("<span></span>").addClass("fa").addClass(i||"fa-info-circle-o").css("font-size","22px").css("line-height","26px").css("margin-right","5px").css("color",n||"#D0D0D0"),e=Ht("<span></span>").text(e).css("color","#707070").css("text-overflow","ellipsis").css("overflow","hidden").css("white-space","nowrap").css("font-size","12px").css("line-height","20px");o.css("margin","10px").css("text-align","center").addClass("dominfomessagediv").append(n).append(e)}Ht(t).append(o)},hide:function(t){Ht(t).children(".dominfomessagediv").remove()}},noDataMessage:{show:function(t,e){Pt.printDOMMessage.show(t,e,"fa-search")},hide:function(t){Pt.printDOMMessage.hide(t)}},errorMessage:{show:function(t,e){Pt.printDOMMessage.show(t,e,"fa-exclamation-triangle","#FFCB3D")},hide:function(t){Pt.printDOMMessage.hide(t)}},cutString:function(e,t){try{return!(t<0)&&e.length>t?e.substring(0,t-3)+"...":e}catch(t){return e}},isBetween:function(t,e,i){i=i||0;return e-i<=t&&t<=e+i}};function V(t){const e=new Date(t);if(Rt.date&&"function"==typeof Rt.date.format)return Rt.date.format(e);t=Rt.locale&&Rt.locale.getLanguage?Rt.locale.getLanguage():void 0;return e.toLocaleDateString(t)}function Wt(t,e,i){return i?void 0!==t&&null!=t?1===t||"true"===t:e:Pt.isDefinedAndNotNull(t)?t:e}function tt(t,e,i,n,o){const a=t.append("defs"),r=a.append("filter").attr("id",e);r.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",o).attr("result","blur"),r.append("feOffset").attr("in","blur").attr("dx",n).attr("dy",i).attr("result","offsetBlur"),r.append("feFlood").attr("in","offsetBlur").attr("flood-color","#000").attr("flood-opacity","0.26").attr("result","offsetColor"),r.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("operator","in").attr("result","offsetBlur");const s=r.append("feMerge");s.append("feMergeNode").attr("in","offsetBlur"),s.append("feMergeNode").attr("in","SourceGraphic")}function Ft(t,e,i,n){return!1!==n?Pt.escapeHTML(t):!0!==i&&-1<Ht.inArray("sanitizer",e.features)&&!0!==i?o.sanitize(t,e.purifyOptions):t}return{initialize:function(u,f,b,l,c,d,p,h,m,g,y,Lt,v,X,D,x,C,k){Rt.debug.info({fct:`${Pt.featureDetails.name} - initialize`,arguments:{pRegionID:u,pRegionIDRefresh:f,pAjaxID:b,pNoDataMsg:l,pErrMsg:c,pDefaultConfigJSON:d,pLoadingMethod:p,pFeatures:h,pChartConfigJSON:m,pItems2Submit:g,pItems2SubmitImg:y,pRequireHTMLEscape:Lt,pPurifyOptions:v,pMapURL:X,pMapOptions:D,pTableConfigJSON:x,pClockOptions:C,pCalendarOptions:k},featureDetails:Pt.featureDetails});const o="#"+u,zt=Ht(o),w="#"+f,T=10,a=u+"-sizer";let i,Z={},K={},S=0,N=0;const A={initMasonry:function(){i&&i.destroy();var t="."+u,e={itemSelector:"."+u+"-item",columnWidth:"."+a,horizontalOrder:!1,initLayout:!0,percentPosition:!0,transitionDuration:0,gutter:0};i=new n(t,e)},resizeMasonry:function(){i&&(i.layout(),Ht(document).scrollTop(S))}};if(u&&0<zt.length){zt.addClass(u),Pt.loader.start(w);var I={footprint:!0,isSortable:!1,colSpan:12,height:400,refresh:0,backColor:"transparent",color:"inherit",boxShadow:"0px 0px 6px 0.32px rgba(0, 0, 0, 0.26)",optionsLink:{backColor:"transparent",color:"inherit",icon:"fa-link"},optionsLinkTop:{backColor:"transparent",color:"inherit",icon:"fa-link"},title:{backColor:"transparent",color:"inherit",icon:null}},E={header:{background:"white",textAlign:"left",color:"inherit",border:"1px solid rgba(240, 240, 240, 1)"},cells:{background:"transparent",textAlign:"left",color:"inherit",border:"1px solid rgba(240, 240, 240, 1)"},evenRow:{background:"white",textAlign:"left",color:"inherit",borderBottom:"1px solid rgba(240, 240, 240, 1)"},oddRow:{background:"rgb(240,240,240)",textAlign:"left",color:"inherit",borderBottom:"1px solid rgba(240, 240, 240, 1)"}},M={tour:{enabled:!0,direction:"right",speed:2,start:-30,shadowEffect:!0},circles:{color:"rgb(97, 159, 209)",radius:5,opacity:.8,opacityHover:.65,shadows:!1},map:{stroke:"#303030",strokeWidth:"0.5px",color:"#eee",centerLongitude:0,centerLatitude:0,initialZoom:1,zoomEnabled:!0,shadows:!0}},_={axisLabelPosition:"inner3",background:null,chartTitle:null,gauge:{min:0,max:null,type:"single",width:null,arcMinWidth:null,fullCircle:!1,title:null},grid:{x:!0,y:!0},legend:{position:"right",show:!0},line:{step:"step"},padding:{bottom:null,left:null,right:null,top:null},rotateAxis:!1,showDataLabels:!1,showDataPoints:!0,showAbsoluteValues:!1,threshold:.05,tooltip:{grouped:!0,show:!0},transitionDuration:200,x:{axisHeight:null,label:"x Axis",timeFormat:"%Y-%m-%dT%H:%M:%S",type:"category",tick:{cutAfter:30,maxNumber:25,multiline:!1,rotation:60,autoRotate:!0,timeFormat:"%y-%m-%d %H:%M",fit:!0}},y:{label:"y Axis 1",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},y2:{label:"y Axis 2",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},zoom:{enabled:!0,type:"scroll",rescale:!1}},O={ALLOWED_ATTR:["accesskey","align","alt","always","autocomplete","autoplay","border","cellpadding","cellspacing","charset","class","colspan","dir","height","href","id","lang","name","rel","required","rowspan","src","style","summary","tabindex","target","title","type","value","width"],ALLOWED_TAGS:["a","address","b","blockquote","br","caption","code","dd","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","label","li","nl","ol","p","pre","s","span","strike","strong","sub","sup","table","tbody","td","th","thead","tr","u","ul"]},L={shadows:!1,label:{labelColor:"#303030",labelColor2:"#303030"},hour:{labelColor:"#303030",tickColor:"#999"},second:{label:!1,labelColor:"#707070",tickColor:"#ccc"},hands:{color:"#303030",coverFillColor:"white",coverStrokeColor:"#999",coverSize:2},circle:{color:"#ccc",width:5,fillColor:"#eeeeee"}},z={eventLimitPerDay:2,viewType:"dayGridMonth",displayTime:!0,hours12:!1,timeGridStartTime:"06:00:00",stickyHeaderDates:"auto"};let t;Pt.isDefinedAndNotNull(h)&&(t=h.split(":"));let e={},i={},n={},o={},a={},r={},s={};e=Pt.jsonSaveExtend(I,d),e.features=[],t&&0<t.length&&(e.features=t),-1<Ht.inArray("charts",e.features)?(i=Pt.jsonSaveExtend(_,m),e.d3JSchart=i):e.d3JSchart=null,-1<Ht.inArray("table",e.features)?(n=Pt.jsonSaveExtend(E,x),e.table=n):e.table=null,-1<Ht.inArray("sanitizer",e.features)?(o=Pt.jsonSaveExtend(O,v),e.purifyOptions=o):e.purifyOptions=null,-1<Ht.inArray("map",e.features)?(a=Pt.jsonSaveExtend(M,D),e.mapOptions=a):e.mapOptions=null,-1<Ht.inArray("clock",e.features)?(r=Pt.jsonSaveExtend(L,C),e.clockOptions=r):e.clockOptions=null,-1<Ht.inArray("calendar",e.features)?(s=Pt.jsonSaveExtend(z,k),e.calendarOptions=s):e.calendarOptions=null,e.noDataMessage=l,e.errorMessage=c,e.items2Submit=g,e.items2SubmitImg=y,Rt.debug.info({fct:`${Pt.featureDetails.name} - initialize`,finalConfigJSON:e,featureDetails:Pt.featureDetails}),Ht(document).on("scroll touchmove",function(){S=Ht(document).scrollTop()}),R(0,e);try{f?Ht(w).bind("apexrefresh",function(){Rt.debug.info({fct:`${Pt.featureDetails.name} - initialize`,msg:"Refresh event was fired",featureDetails:Pt.featureDetails}),R(0,e,!0)}):Rt.debug.error({fct:`${Pt.featureDetails.name} - initialize`,msg:"Can't bind refresh event because Refresh Region ID is missing",featureDetails:Pt.featureDetails})}catch(t){Rt.debug.error({fct:`${Pt.featureDetails.name} - initialize`,msg:"Can't bind refresh event on",err:t,featureDetails:Pt.featureDetails})}if(0<e.refresh){let t=setInterval(function(){0===Ht(zt).length?clearInterval(t):(Rt.debug.info({fct:`${Pt.featureDetails.name} - initialize`,msg:"Refresh by time was fired",featureDetails:Pt.featureDetails}),R(0,e,!0))},1e3*e.refresh)}}else Rt.debug.error({fct:`${Pt.featureDetails.name} - initialize`,msg:"Can't find pRegionID: "+u,featureDetails:Pt.featureDetails});function R(t,e,i){i&&(Pt.loader.start(w),N+=1);var n=e.items2Submit;Rt.server.plugin(b,{pageItems:n,x01:"items"},{success:function(t){!function(e,n){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawGridItems`,ajaxResponse:e,featureDetails:Pt.featureDetails}),zt.empty();const t=Ht("<div></div>").addClass("bida-container-sizer").addClass(a).attr("id",a);zt.append(t);const i=new ResizeObserver(Pt.debounce(function(){!document.hidden&&t.is(":visible")&&zt.trigger("resize")}));zt.on("resize",function(){A.resizeMasonry()}),i.observe(t[0]),K.outerItemIntervals&&0<K.outerItemIntervals.length&&Ht.each(K.outerItemIntervals,function(t,e){clearInterval(e)});K.outerItemIntervals=[],K.innerItemsIntervals&&Ht.each(K.innerItemsIntervals,function(t,e){clearInterval(e)});K.innerItemsIntervals={},K.d3Timer&&0<K.d3Timer.length&&Ht.each(K.d3Timer,function(t,e){e.stop()});if(K.d3Timer=[],e.items&&0<e.items.length){zt.removeClass("bida-container-nodat"),Ht.each(e.items,function(t,e){let i=n.colSpan;e.colSpan&&(i=e.colSpan),function(t,e,i,n,o){const a=Pt.jsonSaveExtend(null,n),r=u+"--"+t,s="#"+r,l=(n.height||o.height)-T,c=Ht("<div></div>");c.attr("id",r),c.attr("item-id",n.itemID),c.addClass("bida-container-item"),c.addClass(u+"-item"),c.addClass("bida-container-item--width"+e),c.css("min-height",l),c.css("background",n.backColor||o.backColor),c.css("color",n.color||o.color),c.css("box-shadow",n.boxShadow||o.boxShadow),Pt.isDefinedAndNotNull(n.itemID)&&(c.attr("item-id",n.itemID),c.addClass(f+"--"+n.itemID));i.append(c),H(t,l,s,a,o);i=Wt(n.isAsync,!1,!0);if("A"===p&&i&&(Ht(c).on("itemrefresh",function(){n.itemData=null,H(t,l,s,n,o,!0)}),0<n.refresh)){const d=setInterval(function(){0===Ht(s).length?clearInterval(d):(n.itemData=null,H(t,l,s,n,o,!0))},1e3*n.refresh);K.outerItemIntervals.push(d)}}(t,i,zt,e,n)}),n.footprint&&function(t){const e=Ht("<div></div>");e.css("position","absolute"),e.css("margin","-5px"),e.css("bottom","0px"),e.css("right","10px"),e.css("font-size","9px"),e.css("color","rgb(0,0,0,0.3)"),e.css("line-height","9px");const i=Ht("<i></i>");i.addClass("fa"),i.addClass("fa-heart"),i.css("font-size","9px"),i.css("color","inherit"),i.css("opacity","0.3"),i.css("line-height","10px");const n=Ht("<a></a>");n.attr("href","https://linktr.ee/ronny.weiss"),n.attr("target","_blank"),n.css("color","inherit"),n.append(i);const o=Ht("<i></i>");o.addClass("fa"),o.addClass("fa-apex"),o.css("font-size","9px"),o.css("color","inherit"),o.css("opacity","0.3"),o.css("line-height","10px");const a=Ht("<a></a>");a.attr("href","https://apex.oracle.com"),a.attr("target","_blank"),a.css("color","inherit"),a.append(o),e.append("Build with "),e.append(n),e.append(" for "),e.append(a),Ht(t).append(e)}(zt),A.initMasonry();let i;const o={delay:50,zIndex:10,items:".bida-container-item",grid:[10,10],tolerance:"pointer",start:function(t,e){i||(i=Ht(e.item).clone(),Ht("body").append(i)),Ht(e.item).hide(),i.fadeIn(),i.css("opacity","0.5"),i.css("filter","grayscale(100%)")},sort:function(t,e){i.css("left",e.offset.left),i.css("top",e.offset.top)},change:function(t,e){zt.find(".ui-sortable-placeholder").each(function(t,e){Ht(e).css("visibility","visible")}),Ht(e.item).css("left",e.position.left),Ht(e.item).css("top",e.position.top),A.initMasonry()},stop:function(t,e){i.remove(),i="",Ht(e.item).show(),A.initMasonry()},update:function(){const i=[];zt.find(".bida-container-item").each(function(t,e){e=Ht(e).attr("item-id");i.push(e)}),Rt.debug.info({fct:`${Pt.featureDetails.name} - drawGridItems`,sortInfo:i,featureDetails:Pt.featureDetails}),zt.trigger("sortorder",i.join(":"))}};let t;n.isSortable&&(t=zt.sortable(o)),Ht(w).on("sortableOn",function(){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawGridItems`,msg:"sortable on by trigger",featureDetails:Pt.featureDetails}),t||zt.sortable(o),zt.sortable("enable")}),Ht(w).on("sortableOff",function(){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawGridItems`,msg:"sortable off by trigger",featureDetails:Pt.featureDetails}),zt.sortable("disable")})}else zt.addClass("bida-container-nodat"),Pt.noDataMessage.show(zt,n.noDataMessage);Pt.loader.stop(w),zt.trigger("rendered"),Rt.debug.info({fct:`${Pt.featureDetails.name} - drawGridItems`,msg:"Material BI Dashboard rendering finished",featureDetails:Pt.featureDetails})}(t,e),i&&zt.trigger("refreshed")},error:function(t){t=t,Ht(o).empty(),Ht(o).addClass("bida-container-nodat"),Pt.errorMessage.show(o,e.errorMessage),Pt.loader.stop(w),t.responseText&&Rt.debug.error({fct:`${Pt.featureDetails.name} - getData`,msg:t.responseText,featureDetails:Pt.featureDetails}),i&&zt.trigger("refreshed")},dataType:"json"})}function H(n,t,o,a,r,e){const s=Ht(o);let l=t;function c(){Pt.loader.stop(o),setTimeout(function(){Pt.loader.stop(o)},100)}t=Wt(a.isAsync,!1,!0);if(e||"A"===p&&t)if(Pt.isDefinedAndNotNull(a.itemID)){t=r.items2Submit;setTimeout(function(){Pt.loader.start(o)},100),Rt.server.plugin(b,{pageItems:t,x01:"itemData",x02:a.itemID,x04:N},{success:function(t,e,i){Rt.debug.info({fct:`${Pt.featureDetails.name} - prepareItemContent`,asyncAjaxReference:N,pData:t,featureDetails:Pt.featureDetails}),parseInt(i.getResponseHeader("ajax-reference"),10)===N?function(t){t=Pt.jsonSaveExtend(a,t);s.empty(),Pt.isDefinedAndNotNull(t.itemID)&&s.attr("item-id",t.itemID),l=(t.height||r.height)-T,s.css("min-height",l),W(n,o,l,t,r),c(),A.resizeMasonry()}(t):Rt.debug.info({fct:`${Pt.featureDetails.name} - prepareItemContent`,msg:"Expired Async AJAX Call returned.",pData:t,featureDetails:Pt.featureDetails})},error:function(t){t=t,s.empty(),t.status&&404===t.status?Pt.noDataMessage.show(o,r.noDataMessage):(Pt.errorMessage.show(o,r.errorMessage),Rt.debug.error({msg:"Error occured in PL/SQL Block for async Loading of Data",data:t,featureDetails:Pt.featureDetails})),c(),A.resizeMasonry()},dataType:"json"})}else s.empty(),Pt.errorMessage.show(o,r.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - prepareItemContent`,msg:"itemID missing in JSON for async load!",featureDetails:Pt.featureDetails});else W(n,o,l,a,r),A.resizeMasonry()}function P(t,e,i,n,o){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawSubText`,pPosition:t,pParent:e,pText:i,pDefaultConfig:n,pIsSafeItem:o,featureDetails:Pt.featureDetails});var a="bida-item-subtext-"+t,r=Ht(e).find("."+a);let s=Ht("<div></div>");r[0]&&(s=r),s.addClass(a);const l=Ht("<span></span>");l.addClass("bida-item-subtext-text"),l.addClass("bida-item-subtext-text-"+t),l.addClass("truncate-text");o=Ft(i,n,o,Lt);l.html(o),s.html(l),s.attr("title",l.text()),Ht(e).append(s)}function W(i,n,o,a,r){const t=Ht(n),e="fa-";let s;if(s=a.itemConfig||{},Pt.isDefinedAndNotNull(a.optionsLink)){const d=Ht("<a></a>");d.addClass("bida-item-options-link"),d.attr("href",a.optionsLink),d.css("background-color",a.optionsLinkBackColor||r.optionsLink.backColor);const u=a.optionsLinkIcon||r.optionsLink.icon,f=Ht("<i></i>");Pt.isDefinedAndNotNull(u)&&u.substr(0,e.length)===e?(f.addClass("fa"),f.addClass(u),f.css("color",a.optionsLinkColor||r.optionsLink.color)):f.css("background-image","url("+u+")"),f.addClass("bida-item-options-link-icon"),d.append(f),t.append(d)}if(Pt.isDefinedAndNotNull(a.optionsLinkTop)){const p=Ht("<a></a>");p.addClass("bida-item-options-link-top"),p.attr("href",a.optionsLinkTop),p.css("background-color",a.optionsLinkTopBackColor||r.optionsLinkTop.backColor);const h=a.optionsLinkTopIcon||r.optionsLinkTop.icon,m=Ht("<i></i>");Pt.isDefinedAndNotNull(h)&&h.substr(0,e.length)===e?(m.addClass("fa"),m.addClass(h),m.css("color",a.optionsLinkTopColor||r.optionsLinkTop.color)):m.css("background-image","url("+h+")"),m.addClass("bida-item-options-link-icon"),p.append(m),t.append(p)}var l=Wt(a.isMarked,!1,!0);if(t.removeClass("bida-container-item-marked"),l&&t.addClass("bida-container-item-marked"),Pt.isDefinedAndNotNull(a.itemType)){let t=!1;Pt.isDefinedAndNotNull(a.oversize)&&(t=Wt(a.oversize,!1,!0));let e=!1;Pt.isDefinedAndNotNull(a.noSanitize)&&(e=Wt(a.noSanitize,!1,!0));var c;if(Pt.isDefinedAndNotNull(a.title)&&function(t,e,i,n,o,a,r,s){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawItemTitle`,pText:e,pBackColor:i,pColor:n,pParent:t,pIcon:o,pIconColor:a,pDefaultConfig:r,pIsSafeItem:s,featureDetails:Pt.featureDetails});var l="bida-item-title",c=Ht(t).find("."+l);let d=Ht("<div></div>");c[0]&&(d=c),d.addClass(l),d.css("background",i||r.title.backColor),d.css("color",n||r.title.color);const u=Ht("<span></span>");u.addClass("bida-item-title-text"),u.addClass("truncate-text"),s=Ft(e,r,s,Lt),u.html(s),u.attr("title",u.text()),d.html(u);const f=o||r.title.icon,p=a||r.title.iconColor;if(Pt.isDefinedAndNotNull(f)){const h=Ht("<i></i>");"fa-"===f.substr(0,"fa-".length)?(h.addClass("fa"),h.addClass(f),h.css("color",p)):h.css("background-image","url("+f+")"),h.addClass("bida-item-title-icon"),u.prepend(h)}Ht(t).prepend(d)}(n,a.title,a.titleBackColor,a.titleColor,a.titleIcon,a.titleIconColor,r,e),Pt.isDefinedAndNotNull(a.subText1)&&P(1,n,a.subText1,r,e),Pt.isDefinedAndNotNull(a.subText2)&&P(2,n,a.subText2,r,e),c=function(t,e){let i=e;return Ht(t).children(".bida-item-title").each(function(){i=Math.floor(i-Ht(this).height())-1}),Ht(t).children(".bida-item-subtext-1").each(function(){i=Math.floor(i-Ht(this).height())-1}),Ht(t).children(".bida-item-subtext-2").each(function(){i=Math.floor(i-Ht(this).height())-1}),i}(n,o),Pt.isDefinedAndNotNull(a.itemData)||"calendar"===a.itemType||"note"===a.itemType||"clock"===a.itemType)switch(Rt.debug.info({fct:`${Pt.featureDetails.name} - drawItemRegionContent`,msg:"Render Item "+a.itemType+"("+a.title+")",featureDetails:Pt.featureDetails}),a.itemType){case"chart":-1<Ht.inArray("charts",r.features)?a.itemData?function(b,y,v,t,D,x){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawChart`,pItemSel:b,pItemHeight:y,pConfigData:v,pValuesData:t,pDefaultConfig:D,pIsSafeItem:x,featureDetails:Pt.featureDetails});const r=d3,C=["pie","donut","gauge"],k=Pt.groupObjectArray(t,"seriesID");let w=!1,T=!1,S=!1;function e(t,a){try{return t.sort(function(t,e){const i=r.timeParse(a),n=i(t.x),o=i(e.x);return new Date(n).getTime()-new Date(o).getTime()})}catch(t){Rt.debug.error({fct:`${Pt.featureDetails.name} - drawChart`,msg:"Error while try sort JSON Array by Time Value",err:t,featureDetails:Pt.featureDetails})}}try{var N=Wt(v.chartTitle,D.d3JSchart.chartTitle||"").toString(),i=Wt(v.background,D.d3JSchart.background);let n=null,r=!1;Pt.isDefinedAndNotNull(i)&&(n={color:i});var A=Wt(v.lineStep,D.d3JSchart.line.step),I=Wt(v.gaugeMin,D.d3JSchart.gauge.min),E=Wt(v.gaugeMax,D.d3JSchart.gauge.max),M=Wt(v.gaugeType,D.d3JSchart.gauge.type),_=Wt(v.gaugeWidth,D.d3JSchart.gauge.width),O=Wt(v.gaugeArcMinWidth,D.d3JSchart.gauge.arcMinWidth),L=Wt(v.gaugeFullCircle,D.d3JSchart.gauge.fullCircle,!0),z=Wt(v.gaugeTitle,D.d3JSchart.gauge.title||"").toString(),R=Wt(v.gridX,D.d3JSchart.grid.x,!0),H=Wt(v.gridY,D.d3JSchart.grid.y,!0),P=Wt(v.xAxisHeight,D.d3JSchart.x.axisHeight),W=Wt(v.legendShow,D.d3JSchart.legend.show,!0),F=Wt(v.legendPosition,D.d3JSchart.legend.position);const rt=Pt.jsonSaveExtend(null,D.d3JSchart.padding);Pt.isDefinedAndNotNull(v.paddingBottom)&&(rt.bottom=v.paddingBottom),Pt.isDefinedAndNotNull(v.paddingLeft)&&(rt.left=v.paddingLeft),Pt.isDefinedAndNotNull(v.paddingRight)&&(rt.right=v.paddingRight),Pt.isDefinedAndNotNull(v.paddingTop)&&(rt.top=v.paddingTop);var B,j=Wt(v.rotateAxis,D.d3JSchart.rotateAxis,!0),$=Wt(v.axisLabelPosition,D.d3JSchart.axisLabelPosition);let o=null,a=null;switch($){case"inner1":o="inner-left",a="inner-bottom";break;case"inner2":o="inner-center",a="inner-middle";break;case"inner3":o="inner-right",a="inner-top";break;case"outer1":o="outer-left",a="outer-bottom";break;case"outer2":o="outer-center",a="outer-middle";break;case"outer3":o="outer-right",a="outer-top"}j&&(B=o,o=a,a=B);var U=Wt(v.tooltipShow,D.d3JSchart.tooltip.show,!0),J=Wt(v.tooltipGrouped,D.d3JSchart.tooltip.grouped,!0),G=Wt(v.transitionDuration||D.d3JSchart.transitionDuration),Y=Wt(v.xShow,D.d3JSchart.x.show,!0),q=Wt(v.xLabel,D.d3JSchart.x.label||"").toString();let s=Wt(v.xType,D.d3JSchart.x.type),l=null,c=null;const st=Wt(v.xTickCutAfter,D.d3JSchart.x.tick.cutAfter),lt=Wt(v.xTickMaxNumber,D.d3JSchart.x.tick.maxNumber),ct=Wt(v.xTickRotation,D.d3JSchart.x.tick.rotation),dt=Wt(v.xTickMultiline,D.d3JSchart.x.tick.multiline,!0),ut=Wt(v.xTickFit,D.d3JSchart.x.tick.fit,!0),ft=Wt(v.xTickAutoRotate,D.d3JSchart.x.tick.autoRotate,!0);let d=null;"category"!==s&&"timeseries"!==s||(c="x"),"timeseries"===s&&(l=Wt(v.xTimeFormat,D.d3JSchart.x.timeFormat),d=Wt(v.xTickTimeFormat,D.d3JSchart.x.tick.timeFormat),e(t,l)),"category"===s&&(d=function(t,e){return Pt.cutString(e,st)});var V=Wt(v.yLabel,D.d3JSchart.y.label||"").toString(),Q=Wt(v.yLog,D.d3JSchart.y.log,!0);let u=null;Q&&(u="log");const pt=v.yMin||D.d3JSchart.y.min,ht=v.yMax||D.d3JSchart.y.max,mt=v.yTickMaxNumber||D.d3JSchart.y.tick.maxNumber,gt=v.yUnit||D.d3JSchart.y.unit;var X=Wt(v.y2Label,D.d3JSchart.y2.label||"").toString(),Z=Wt(v.y2Log,D.d3JSchart.y2.log,!0);let f=null,p=!1;Z&&(f="log");const bt=Wt(v.y2Min,D.d3JSchart.y2.min),yt=Wt(v.y2Max,D.d3JSchart.y2.max),vt=Wt(v.y2TickMaxNumber,D.d3JSchart.y2.tick.maxNumber),Dt=Wt(v.y2Unit,D.d3JSchart.y2.unit);var K=Wt(v.zoomType,D.d3JSchart.zoom.type);let h=!1,m=Wt(v.zoomEnabled,D.d3JSchart.zoom.enabled,!0);var tt=Wt(v.threshold,D.d3JSchart.threshold);!m||"scroll"===K?h=!1:"subchart"===K?(h=!0,m=!1):"drag"===K&&(m=!0,h=!1);var et,it=Wt(v.zoomRescale,D.d3JSchart.zoom.rescale,!0);const xt=[],Ct=[],kt=[],wt={},Tt={},St={},Nt={},At={},It=Pt.groupObjectArray(t,"x");let g=0;if(k){"category"!==s&&"timeseries"!==s||(Ct.push("x"),et=Object.keys(It),Ht.each(et,function(t,e){Ct.push(Wt(e.replace("​",""),null))})),xt.push(Ct),Ht.each(k,function(t,e){let i;if(g+=1,e[0]&&e[0].seriesID){i=e[0];const o=escape(i.seriesID);var n;wt[o]=i.color,Tt[o]=i.type,0<=C.indexOf(i.type)&&(m=!1),"gauge"===i.type&&(w=!0),"pie"===i.type&&(T=!0),"donut"===i.type&&(S=!0),Pt.isDefinedAndNotNull(i.tooltip)&&(r=!0),St[o]=i.yAxis||"y",Pt.isDefinedAndNotNull(i.groupID)&&(n=escape(i.groupID.toString()),At[n]||(At[n]=[]),At[n].push(o)),"y2"===i.yAxis&&(p=!0),Nt[o]=Wt(i.label,o);const a=[];a.push(o),"category"===s||"timeseries"===s?Ht.each(It,function(t,e){let i=null,n=null;Ht.each(e,function(t,e){escape(e.seriesID)===o&&(i=e.y,e.z&&(n=e.z))}),null!==n?a.push({y:i,z:n}):a.push(i)}):Ht.each(e,function(t,e){var i=Wt(e.y,null);e.z?(e=e.z,a.push({y:i,z:e})):a.push(i)}),xt.push(a)}else Pt.errorMessage.show(b,D.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - drawChart`,msg:"No seriesID found in seriesID Cursor",featureDetails:Pt.featureDetails})}),Ht.each(At,function(t,e){kt.push(e)});let t=Wt(v.showDataLabels,D.d3JSchart.showDataLabels,!0);T||S?t={colors:"white"}:w&&(t={colors:"single"===M&&1<g?"white":"inherit"});var nt=Wt(v.showDataPoints,D.d3JSchart.showDataPoints,!0),ot=Wt(v.showAbsoluteValues,D.d3JSchart.showAbsoluteValues);let e;ot&&(e=function(t){return t+gt});let i;r&&(i=function(t){const r=Ht("<div></div>");return r.addClass("bb-tooltip"),r.addClass("bida-chart-tooltip-custome"),Ht.each(t,function(t,e){var i="​"+unescape(e.id),n=k[i],i=e.index;if(n&&n[i]&&Pt.isDefinedAndNotNull(n[i].tooltip)&&Pt.isDefinedAndNotNull(e.value)){const o=Ht("<div>"),a=Ft(n[i].tooltip,D,x,Lt);o.append(a),r.append(o)}}),r[0].outerHTML});try{const Et=b+"bbc",Mt=Et.replace("#",""),_t=Ht("<div></div>");_t.attr("id",Mt),Ht(b).append(_t);var at={bindto:Et,background:n,title:{text:N},size:{height:y},data:{x:c,xFormat:l,columns:xt,types:Tt,groups:kt,colors:wt,labels:t,axes:St,names:Nt,onclick:function(t){!function(t){var e="​"+unescape(t.id);let i=t.index;k[e]&&(1===k[e].length&&(i=0),k[e][i]&&k[e][i].link&&Pt.link(k[e][i].link,k[e][i].linkTarget))}(t)}},pie:{label:{format:e,threshold:tt}},donut:{label:{format:e,threshold:tt}},line:{step:{type:A}},gauge:{label:{format:e,threshold:tt},fullCircle:L,min:I,max:E,type:M,width:_,title:z,arc:{minWidth:O}},radar:{direction:{clockwise:!0}},subchart:{show:h},zoom:{type:K,enabled:m,rescale:it},transition:{duration:G},legend:{show:W,position:F},tooltip:{show:U,grouped:J,contents:i},grid:{x:{show:R},y:{show:H}},point:{show:nt},axis:{rotated:j,x:{show:Y,label:{text:q,position:o},type:s,tick:{culling:{max:lt},autorotate:ft,rotate:ct,multiline:dt,format:d,fit:ut},height:P},y:{label:{text:V,position:a},type:u,max:ht,min:pt,tick:{culling:{max:mt},format:function(t){return t+gt}}},y2:{show:p,label:{text:X,position:a},type:f,max:yt,min:bt,tick:{culling:{max:vt},format:function(t){return t+Dt}}}},padding:rt};Rt.debug.info({fct:`${Pt.featureDetails.name} - drawChart`,finalChartData:at,featureDetails:Pt.featureDetails});const Ot=bb.generate(at);m&&Ht(Et).contextmenu(function(t){t.preventDefault(),Ot.unzoom()}),zt.on("resize",function(){Ot.resize({height:y})})}catch(t){Ht(b).empty(),Pt.errorMessage.show(b,D.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - drawChart`,msg:"Error while try to render chart",err:t,featureDetails:Pt.featureDetails})}}else Pt.noDataMessage.show(b,D.noDataMessage)}catch(t){Ht(b).empty(),Pt.errorMessage.show(b,D.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - drawChart`,msg:"Error while prepare data for chart",err:t,featureDetails:Pt.featureDetails})}}(n,c,s,a.itemData,r,e):(Pt.errorMessage.show(n,r.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - drawItemRegionContent`,msg:"itemData is missing in JSON",featureDetails:Pt.featureDetails})):(Pt.errorMessage.show(n,r.errorMessage),Rt.debug.info({fct:`${Pt.featureDetails.name} - drawItemRegionContent`,msg:"Feature - Charts is not activated.",featureDetails:Pt.featureDetails}));break;case"calendarheatmap":-1<Ht.inArray("calendarheatmap",r.features)?a.itemData?function(t,o,e,i,l,c){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawCalendarHeatmap`,pItemSel:t,pItemHeight:o,pConfigData:e,pValuesData:i,featureDetails:Pt.featureDetails});let n="sunday",a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];"function"==typeof Rt.locale.getSettings&&Rt.locale.getSettings().calendar&&Rt.locale.getSettings().calendar.startOfWeek&&(r=Rt.locale.getAbbrevMonthNames(),a=Rt.locale.getAbbrevDayNames(),n=Rt.locale.getSettings().calendar.startOfWeek);const d=d3,u=new Map,f=Ht(t),s=f.attr("id")+"-cheatmap",p="#"+s,h=new Date,m="#efefef",g=h.getMonth(),b=new Date(h.getFullYear()-1,g+1,1),y=new Date(h.getFullYear(),g+1,1),v=r.slice(g+1),D=r.slice(0,g+1),x=v.concat(D);let C=!1,k=d.timeSunday;"monday"===n&&(C=!0,k=d.timeMonday);i.forEach(t=>{t.date&&u.set(t.date.substr(0,10),t)});const w=Ht("<div>");w.attr("id",s),w.css("height",o),f.append(w);const T=function(){w.empty();const t=f.width(),r=t/53-40/53,s=o/7-20/7;let e=4;t<=640?e=2:t<=450&&(e=1);const i=d.select(p).selectAll("svg").data(d.range(h.getFullYear(),h.getFullYear()+1)).enter().append("svg").attr("viewBox",`0 0 ${t} ${o}`).attr("width","100%").attr("height","100%").attr("class","bida-calendar-heatmap-calendar").append("g").attr("transform",`translate(${(t-53*r)/2+10}, 15)`);i.append("g").attr("fill",m).attr("stroke","transparent").attr("stroke-width","0.1px").selectAll("rect").data(d.timeDays(b,y)).enter().append("rect").attr("rx",3).attr("ry",3).attr("class","bida-calendar-heatmap-day").attr("width",r-e).attr("height",s-e).attr("transform",`translate(${e/3}, ${e/3})`).attr("x",function(t){return k.count(b,t)*r+e/4}).attr("y",function(t){return C?(t.getDay()+6)%7*s+e/4:t.getDay()*s}).datum(d.timeFormat("%Y-%m-%d")).attr("fill",function(t){t=u.get(t);if(t)return t.color||m});var n=w.find(".bida-calendar-heatmap-day");Ht.each(n,function(){const t=Ht(this)[0];t.hasAttribute("fill")&&d.select(t).on("mouseover",function(t,e){e=u.get(e);if(e){const i=Ht("<div>"),n=Ht("<div>"),o=Ht("<div>");i.addClass("bida-calendar-heatmap-tt");const a=Ht("<b>");a.text(`${V(e.date)}: `);const r=Ht("<span>");r.text(e.value),n.append(a),n.append(r),i.append(n),Pt.isDefinedAndNotNull(e.tooltip)&&(e=Ft(e.tooltip,l,c,Lt),o.html(e),i.append(o)),Pt.tooltip.show(i[0].outerHTML)}}).on("mouseout",function(){Pt.tooltip.hide()}).on("mousemove",function(t){Pt.tooltip.setPosition(t)}).on("click",function(t,e){e=u.get(e);e&&Pt.isDefinedAndNotNull(e.link)&&Pt.link(e.link,e.linkTarget)})}),i.append("g").attr("fill","none").attr("stroke","#aaa").attr("stroke-width","1px").selectAll("path").data(d.timeMonths(b,y)).enter().append("path").attr("class","bida-calendar-heatmap-month").attr("d",function(t){const e=new Date(t.getFullYear(),t.getMonth()+1,0),i=C?(t.getDay()+6)%7:t.getDay(),n=k.count(b,t),o=C?(e.getDay()+6)%7:e.getDay(),a=k.count(b,e);return`M${(n+1)*r}, ${i*s}H${n*r}V${7*s}H${a*r}V${(o+1)*s}H${(a+1)*r}V0H${(n+1)*r}Z`});n=d.scaleBand().domain(x).range([0,t-40]),n=d.axisTop(n).tickSize(0);i.append("g").call(n).selectAll("path").attr("stroke","transparent");n=d.scaleBand().domain(a).range([0,o-20]),n=d.axisLeft(n).tickSize(0);i.append("g").call(n).selectAll("path").attr("stroke","transparent")};T(),zt.on("resize",function(){T()})}(n,c,s,a.itemData,r,e):(Pt.errorMessage.show(n,r.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - drawItemRegionContent`,msg:"itemData is missing in JSON",featureDetails:Pt.featureDetails})):(Pt.errorMessage.show(n,r.errorMessage),Rt.debug.info({fct:`${Pt.featureDetails.name} - drawItemRegionContent`,msg:"Feature - Calendar Heatmap is not activated.",featureDetails:Pt.featureDetails}));break;case"html":!function(o,t,a,r,s,e,i){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawHTML`,pItemSel:o,pItemHeight:t,pItemData:a,pDefaultConfig:s,pOversize:e,pIsSafeItem:i,featureDetails:Pt.featureDetails});const l=Ht("<div></div>");function c(t){var e=Ft(t,s,i,Lt);Rt.debug.info({fct:`${Pt.featureDetails.name} - drawHTML`,submodule:"renderHTML",pContent:t,contentAfterEscapeOrSanitize:e,featureDetails:Pt.featureDetails}),l.html(e),-1<Ht.inArray("inlineimagesdownload",s.features)&&(e=l.find('img[alt*="aih#"]'),Ht.each(e,function(t,e){let i=e.title;var n;i=i||e.alt.split("aih##")[1],i&&(Rt.debug.info({fct:`${Pt.featureDetails.name} - drawHTML`,pItemID:r,pk:i,featureDetails:Pt.featureDetails}),n=s.items2SubmitImg,n=Rt.server.pluginUrl(b,{x01:"imageDownload",x02:r,x03:i,pageItems:n}),e.src=n,Ht(e).addClass("bida-item-urte-img"))})),l.find("*").css("max-width","100%").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto").css("white-space","normal"),l.find("img").css("object-fit","contain").css("object-position","50% 0%")}if(l.addClass("bida-item-html"),a&&"object"==typeof a&&1<a.length){let i=0,n;const d=function(){if(i>a.length-1?i=0:i<0&&(i=a.length-1),a[i]){c(a[i].html);const t=a[i].duration;if(t&&0<t){const e=function(){n=setTimeout(function(){i+=1,Ht(l).fadeOut("slow",function(){d(),Ht(l).fadeIn("slow")})},1e3*t)};Ht(o).hover(function(){clearTimeout(n)}),Ht(o).mouseleave(function(){e()}),e()}}},u=Ht("<div></div>");u.addClass("bida-item-html-slide-lc"),u.on("click",function(){--i,clearTimeout(n),Ht(l).fadeOut("fast",function(){d(),Ht(l).fadeIn("fast")})});const f=Ht("<span></span>");f.addClass("fa fa-chevron-left fa-lg"),f.addClass("bida-item-html-slide-lc-s"),u.append(f),Ht(o).append(u);const p=Ht("<div></div>");p.addClass("bida-item-html-slide-rc"),p.on("click",function(){i+=1,clearTimeout(n),Ht(l).fadeOut("fast",function(){d(),Ht(l).fadeIn("fast")})});const h=Ht("<span></span>");h.addClass("fa fa-chevron-right fa-lg"),h.addClass("bida-item-html-slide-rc-s"),p.append(h),Ht(o).append(p),d()}else a&&"object"==typeof a&&1===a.length?Pt.isDefinedAndNotNull(a[0].html)&&""!==a[0].html?c(a[0].html):Pt.noDataMessage.show(l,s.noDataMessage):Pt.isDefinedAndNotNull(a)&&""!==a?c(a):Pt.noDataMessage.show(l,s.noDataMessage);Ht(o).append(l),!0!==e&&(l.css("height",t),F(l))}(n,c,a.itemData,a.itemID,r,t,e);break;case"card":!function(t,e,i,n,o,a,r){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawCard`,pIndex:t,pItemHeight:e,pItemSel:i,pItemData:n,pDefaultConfig:o,pOversize:a,pIsSafeItem:r,featureDetails:Pt.featureDetails});const s=Ht("<div></div>");s.addClass("bida-item-card");const l=Ht("<div></div>");if(l.addClass("card-content"),Pt.isDefinedAndNotNull(n.icon)||Pt.isDefinedAndNotNull(n.iconText)){const p=Ht("<div></div>");p.addClass("card-content-icon-div");const h=Ht("<span></span>");if(Pt.isDefinedAndNotNull(n.icon)&&"fa-"===n.icon.substr(0,"fa-".length)){h.addClass("fa "+n.icon);var c="hsl("+23*t%350+", 79%, 45%)";h.css("background",n.iconBackColor||c)}else{if(Pt.isDefinedAndNotNull(n.iconText)){c=Ft(n.iconText,o,r,Lt);const m=Ht("<span></span>");m.addClass("card-content-icon-text"),m.html(c),h.append(m)}Pt.isDefinedAndNotNull(n.icon)&&h.css("background-image","url("+n.icon+")"),h.css("background-color",n.iconBackColor)}h.addClass("card-content-icon"),h.css("color",n.iconColor||"white"),p.append(h),l.append(p)}const d=Ht("<div></div>");d.addClass("card-title-div"),Pt.isDefinedAndNotNull(n.icon)&&d.css("width","calc(100% - 55px)");let u;Pt.isDefinedAndNotNull(n.value)&&(u=Ht("<p></p>"),u.addClass("card-title"),u.addClass("truncate-text"),f=Ft(n.value,o,r,Lt),u.html(f),d.append(u));if(Pt.isDefinedAndNotNull(n.valueSmall)){Pt.isDefinedAndNotNull(n.value)&&u.css("line-height","30px");const g=Ht("<p></p>");g.addClass("card-sub-title");var f=Ft(n.valueSmall,o,r,Lt);g.html(f),d.append(g)}if(l.append(d),s.append(l),Pt.isDefinedAndNotNull(n.footer)){const b=Ht("<div></div>");b.addClass("bida-card-footer");const y=Ht("<div></div>");y.addClass("stats");r=Ft(n.footer,o,r,Lt);y.html(r),b.append(y),s.append(b)}if(Pt.isDefinedAndNotNull(n.link)){const v=Ht("<a></a>");v.addClass("bida-a"),v.attr("href",n.link),Pt.isDefinedAndNotNull(n.linkTarget)&&v.attr("target",n.linkTarget),v.append(s),Ht(i).append(v),!0!==a&&(v.css("height",e),F(v))}else Ht(i).append(s),!0!==a&&(s.css("height",e),F(s))}(i,c,n,a.itemData,r,t,e);break;case"badge":!function(t,i,e,n,o,a){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawBadges`,pIndex:t,pItemHeight:i,pItemSel:e,pItemData:n,pDefaultConfig:o,pIsSafeItem:a,featureDetails:Pt.featureDetails});t="hsl("+23*t%350+", 79%, 45%)";let r,s,l,c=0,d=.98,u=.28,f=!1,p=.15,h=u-p,m=.28;const g=Ht("<div></div>");g.addClass("bida-item-badge"),Pt.isDefinedAndNotNull(n.title)&&(c+=1);Pt.isDefinedAndNotNull(n.icon)&&(c+=1);Pt.isDefinedAndNotNull(n.value)&&(c+=1);0<c&&(d/=c,h/=c);if(Pt.isDefinedAndNotNull(n.title)){const v=Ht("<div></div>");v.addClass("bida-item-badge-text"),s=Ht("<span></span>"),s.css("color",n.titleColor||t);var b=Ft(n.title,o,a,Lt);s.html(b),v.append(s),g.append(v)}else m+=p/2,u+=p/3;if(Pt.isDefinedAndNotNull(n.icon)){const D=Ht("<div></div>");D.addClass("bida-item-badge-icon"),r=Ht("<span></span>"),Pt.isDefinedAndNotNull(n.icon)&&"fa-"===n.icon.substr(0,"fa-".length)?(r.addClass("fa "+n.icon),r.css("color",n.iconColor||t)):(Pt.isDefinedAndNotNull(n.iconText)&&(b=Ft(n.iconText,o,a,Lt),r.html(b)),Pt.isDefinedAndNotNull(n.icon)&&(f=!0,r.css("background-image","url("+n.icon+")"),r.addClass("bida-item-badge-icon-image"))),D.append(r),g.append(D)}else p+=m/3,u+=m/3;if(Pt.isDefinedAndNotNull(n.value)){const x=Ht("<div></div>");x.addClass("bida-item-badge-text-value"),l=Ht("<span></span>"),l.css("color",n.valueColor||t);a=Ft(n.value,o,a,Lt);l.html(a),x.append(l),g.append(x)}else p+=u/3,m+=u/2;Pt.isDefinedAndNotNull(n.link)&&(g.css("cursor","pointer"),g.on("click",function(){Pt.link(n.link,n.linkTarget)}));function y(){var t=i,e=Math.min(t,g.width());s&&(s.css("font-size",e*p+"px"),s.css("line-height",t*(d-h)+"px")),r&&(r.css("font-size",e*m+"px"),r.css("line-height",t*d+"px"),f&&(r.css("height",t*d+"px"),r.css("width",t*d+"px"))),l&&(l.css("font-size",e*u+"px"),l.css("line-height",t*d+"px"))}Ht(e).append(g),y(),zt.on("resize",function(){y()})}(i,c,n,a.itemData,r,e);break;case"list":!function(t,e,i,m,n,g){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawList`,pItemSel:t,pItemHeight:e,pItemData:i,pDefaultConfig:m,pOversize:n,pIsSafeItem:g,featureDetails:Pt.featureDetails});const o=Ht("<div></div>");o.addClass("bida-item-list-div");const l=Ht("<ul></ul>");function c(p,h){Ht.each(h,function(t,e){const i=Ht("<li></li>");i.addClass("bida-item-list-item");const n=Ht("<div></div>");if(n.addClass("list-item-content"),t<h.length-1&&n.css("border-bottom","1px solid #eeeeee"),Pt.isDefinedAndNotNull(e.icon)||Pt.isDefinedAndNotNull(e.iconText)){const r=Ht("<div></div>");r.addClass("listItem-content-icon-div");const s=Ht("<span></span>");if(e.icon&&"fa-"===e.icon.substr(0,"fa-".length))s.addClass("fa "+e.icon),s.css("background",e.iconBackColor||"hsl("+23*t%350+", 79%, 45%)");else{if(Pt.isDefinedAndNotNull(e.iconText)){const l=Ft(e.iconText,m,g,Lt),c=Ht("<span></span>");c.addClass("list-item-content-icon-text"),c.html(l),s.append(c)}Pt.isDefinedAndNotNull(e.icon)&&s.css("background-image","url("+e.icon+")"),s.css("background-color",e.iconBackColor)}s.addClass("list-item-content-icon"),s.css("color",e.iconColor||"white"),r.append(s),n.append(r)}const o=Ht("<div></div>");if(o.addClass("list-item-content-text"),Pt.isDefinedAndNotNull(e.icon)&&o.css("width","calc(100% - 55px)"),Pt.isDefinedAndNotNull(e.title)){const d=Ht("<span></span>");d.addClass("list-item-title"),d.addClass("truncate-text");var a=Ft(e.title,m,g,Lt);d.html(a),o.append(d)}if(Pt.isDefinedAndNotNull(e.text)){const u=Ht("<span></span>");u.addClass("list-item-text");a=Ft(e.text,m,g,Lt);u.html(a),o.append(u)}if(n.append(o),i.append(n),Pt.isDefinedAndNotNull(e.link)){const f=Ht("<a></a>");f.addClass("bida-a"),f.attr("href",e.link),f.append(i),Pt.isDefinedAndNotNull(e.linkTarget)&&f.attr("target",e.linkTarget),p.append(f)}else p.append(i)})}l.addClass("bida-item-list");const a=[];Ht.each(i,function(t,e){Pt.isDefinedAndNotNull(e.group)||a.push(e)});i=Pt.groupObjectArray(i,"group");Rt.debug.info({fct:`${Pt.featureDetails.name} - drawList`,noGroupsArr:a,groupsArr:i,featureDetails:Pt.featureDetails}),c(l,a),Ht.each(i,function(t,e){const i=Ht("<li></li>");i.addClass("bida-item-list-item-group");let n="#f1f1f1";e[0].groupBackColor&&(n=e[0].groupBackColor);let o="inherit";e[0].groupColor&&(o=e[0].groupColor);const a=Ht("<div></div>");a.addClass("list-group-content"),a.css("border-left","3px solid "+n);const r=Ht("<span></span>");r.addClass("list-group-content-title");t=Ft(t,m,g,Lt);r.css("background",n),r.css("color",o),r.html(t),a.append(r),i.append(a);const s=Ht("<ul></ul>");s.addClass("bida-item-list-grouped"),c(s,e),a.append(s),l.append(i)}),o.append(l),Ht(t).append(o),!0!==n&&(o.css("height",e),F(o))}(n,c,a.itemData,r,t,e);break;case"table":-1<Ht.inArray("table",r.features)?function(t,e,i,o,n,a){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawTable`,pItemSel:t,pItemHeight:e,pItemData:i,pDefaultConfig:o,pOversize:n,pIsSafeItem:a,featureDetails:Pt.featureDetails});const r=Ht("<div></div>");r.addClass("bida-item-table-div");const s=Ht("<table></table>");s.addClass("bida-item-table"),Pt.isDefinedAndNotNull(i.header)&&0<i.header.length&&Ht.each(i.header,function(t,e){if(Pt.isDefinedAndNotNull(e.text)){const i=Ht("<th></th>");i.addClass("bida-item-table-header"),i.css("background-color",e.background||o.table.header.background),i.css("text-align",e.textAlign||o.table.header.textAlign),i.css("color",e.color||o.table.header.color),i.css("border",e.border||o.table.header.border);e=Ft(e.text,o,a,Lt);i.html(e),s.append(i)}});Pt.isDefinedAndNotNull(i.data)&&0<i.data.length&&Ht.each(i.data,function(t,e){const n=Ht("<tr></tr>");n.addClass("bida-item-table-row"),t%2==0?(n.addClass("bida-item-table-row-even"),n.css("background",o.table.evenRow.background),n.css("text-align",o.table.evenRow.textAlign),n.css("color",o.table.evenRow.color),n.css("border-bottom",o.table.evenRow.borderBottom)):(n.addClass("bida-item-table-row-odd"),n.css("background",o.table.oddRow.background),n.css("text-align",o.table.oddRow.textAlign),n.css("color",o.table.oddRow.color),n.css("border-bottom",o.table.oddRow.borderBottom)),Ht.each(e,function(t,e){if(Pt.isDefinedAndNotNull(e.text)){const i=Ht("<td></td>");i.addClass("bida-item-table-cell"),i.css("background",e.background||o.table.cells.background),i.css("text-align",e.textAlign||o.table.cells.textAlign),i.css("color",e.color||o.table.cells.color),i.css("border",e.border||o.table.cells.border);e=Ft(e.text,o,a,Lt);i.html(e),n.append(i)}}),s.append(n)});r.append(s),Ht(t).append(r),!0!==n&&(r.css("height",e),F(r))}(n,c,a.itemData,r,t,e):(Pt.errorMessage.show(n,r.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - drawItemRegionContent`,msg:"Feature - Tables is not activaed.",featureDetails:Pt.featureDetails}));break;case"map":-1<Ht.inArray("map",r.features)?function(x,C,k,w,T,S){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawD3Map`,pItemSel:x,pItemHeight:C,pItemData:k,pItemConfig:w,pDefaultConfig:T,pIsSafeItem:S,featureDetails:Pt.featureDetails});try{const N=d3,i=Ht(x),A=Wt(w.tourEnabled,T.mapOptions.tour.enabled,!0),I=Wt(w.tourSpeed,T.mapOptions.tour.speed)/2e3,E=Wt(w.tourStart,T.mapOptions.tour.start),M=Wt(w.circlesShadows,T.mapOptions.circles.shadows,!0),_=Wt(w.circlesRadius,T.mapOptions.circles.radius),O=Wt(w.circlesColor,T.mapOptions.circles.color),L=Wt(w.circlesOpacity,T.mapOptions.circles.opacity),z=Wt(w.circlesOpacityHover,T.mapOptions.circles.opacityHover),n=Wt(w.mapCenterLongitude,T.mapOptions.map.centerLongitude),o=Wt(w.mapCenterLatitude,T.mapOptions.map.centerLatitude),a=Wt(w.mapInitialZoom,T.mapOptions.map.initialZoom),R=Wt(w.mapZoomEnabled,T.mapOptions.map.zoomEnabled,!0),H=Wt(w.mapColor,T.mapOptions.map.color),P=Wt(w.mapStroke,T.mapOptions.map.stroke),W=Wt(w.mapStrokeWidth,T.mapOptions.map.strokeWidth),F=Wt(w.mapShadows,T.mapOptions.map.shadows,!0),r=Ht(x).attr("id")+"-shadow",B=Ht(x).attr("id")+"-ocean",j=Ht(x).attr("id")+"-highlight",$=Ht(x).attr("id")+"-shading",U="url(#"+B+")",J="url(#"+j+")",G="url(#"+$+")";let l,c,d,u,f,p,h,m,g,b=Wt(w.tourShadowEffect,T.mapOptions.tour.shadowEffect,!0);A||(b=!1);const Y=function(){return i.width()},q=function(){return[Y()/2,C/2]},V=N.select(x).append("svg").attr("class","bida-map-svg").attr("width",Y()).attr("height",C);(F||M)&&(tt(V,r,2,2,1),u="url(#"+r+")");let y,v=N.now(),D=0;g=(A?N.geoOrthographic().scale(C/2.5+20):N.geoNaturalEarth1().center([n,o]).scale(C/2.5*a)).translate(q());const Q=N.geoPath().projection(g),s=function(t){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawD3Map`,geoJSONData:t,featureDetails:Pt.featureDetails});const e=V.append("g");if(b){const i=V.append("defs").append("radialGradient").attr("id",B).attr("cx","75%").attr("cy","25%");i.append("stop").attr("offset","5%").attr("stop-color","#fff"),i.append("stop").attr("offset","100%").attr("stop-color","rgb(240,240,240)");const o=V.append("defs").append("radialGradient").attr("id",j).attr("cx","75%").attr("cy","25%");o.append("stop").attr("offset","5%").attr("stop-color","rgb(250,250,250)").attr("stop-opacity","0.3"),o.append("stop").attr("offset","100%").attr("stop-color","rgb(230,230,230)").attr("stop-opacity","0.15");const a=V.append("defs").append("radialGradient").attr("id",$).attr("cx","55%").attr("cy","45%");a.append("stop").attr("offset","30%").attr("stop-color","#fff").attr("stop-opacity","0"),a.append("stop").attr("offset","100%").attr("stop-color","rgb(220,220,220)").attr("stop-opacity","0.3"),l=e.append("circle").attr("cx",Y()/2).attr("cy",C/2).attr("r",g.scale()).style("fill",U)}function n(){h.attr("d",Q(t)),b&&(l.attr("cx",Y()/2).attr("cy",C/2).attr("r",g.scale()),c.attr("cx",Y()/2).attr("cy",C/2).attr("r",g.scale()),d.attr("cx",Y()/2).attr("cy",C/2).attr("r",g.scale())),m.attr("transform",function(t){return"translate("+g([t.longitude,t.latitude])+")"}).attr("r",function(t){if(A&&1.57<N.geoDistance([t.longitude,t.latitude],g.invert(q())))return 0;return Wt(t.radius,_)})}if(F&&(f=u),h=e.append("path").attr("d",Q(t)).attr("class","bida-map-path").style("filter",f).style("stroke",P).style("stroke-width",W).style("fill",H),b&&(c=e.append("circle").attr("cx",Y()/2).attr("cy",C/2).attr("r",g.scale()).style("fill",J),d=e.append("circle").attr("cx",Y()/2).attr("cy",C/2).attr("r",g.scale()).style("fill",G)),M&&(p=u),m=e.selectAll(".bida-map-circle").data(k).enter().append("circle").filter(function(t){return Pt.isDefinedAndNotNull(t.radius)?0<t.radius:0<_}).attr("class","bida-map-circle").style("filter",p).attr("fill",function(t){return t.color||O}).style("opacity",L).on("mouseover",function(t,e){Pt.isDefinedAndNotNull(e.link)&&Ht(this).css("cursor","pointer"),Pt.isDefinedAndNotNull(e.tooltip)&&(e=Ft(e.tooltip,T,S,Lt),Pt.tooltip.show(e)),Ht(this).css("opacity",z)}).on("mousemove",function(t,e){Pt.isDefinedAndNotNull(e.tooltip)&&Pt.tooltip.setPosition(t)}).on("mouseout",function(){Pt.tooltip.hide()}).on("click",function(t,e){Pt.isDefinedAndNotNull(e.link)&&Pt.link(e.link,e.linkTarget)}).attr("transform",function(t){return"translate("+g([t.longitude,t.latitude])+")"}).attr("r",function(t){return Wt(t.radius,_)}),A){let t=0,e=-1,i;"left"===(w.tourDirection||T.mapOptions.tour.direction)&&(e=1);const r=function(){t+=1,t%60==0&&(0===Ht(x).length&&y.stop(),t=0),t%3==0&&(i=N.now()-v,g.rotate([(I*i+E)*e,-10,0]),n())};y=N.timer(r),K.d3Timer.push(y),V.on("mouseover",function(){D=N.now()-v,y.stop()}),V.on("mouseout",function(){v=N.now()-D,y.restart(r)}),document.addEventListener("visibilitychange",function(){document.hidden?y.stop():y.restart(r)})}else if(R){const s=N.zoom().scaleExtent([1,8]).on("zoom",function(t){e.attr("transform",t.transform)});V.call(s),V.on("contextmenu",function(t){t.preventDefault(),V.call(s.transform,N.zoomIdentity.scale(1))})}zt.on("resize",function(){V.attr("width",Y()),V.attr("height",C),g.translate(q()),n()})};var t,e;A?Z.tour?s(Z.tour):(t=X+"world-tour.json",Ht.getJSON(t,function(t){Z.tour=t,s(Z.tour)})):Z.zoom?s(Z.zoom):(e=X+"world-zoom.json",Ht.getJSON(e,function(t){Z.zoom=t,s(Z.zoom)}))}catch(t){Ht(x).empty(),Pt.errorMessage.show(x,T.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - drawD3Map`,msg:"Error while try to render clock",err:t,featureDetails:Pt.featureDetails})}}(n,c,a.itemData,s,r,e):(Pt.errorMessage.show(n,r.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - drawItemRegionContent`,msg:"Feature - Maps is not activaed.",featureDetails:Pt.featureDetails}));break;case"clock":-1<Ht.inArray("clock",r.features)?function(L,t,z,R,H){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawClock`,pItemSel:L,pItemHeight:t,pItemData:z,pItemConfig:R,pDefaultConfig:H,featureDetails:Pt.featureDetails});try{const P=d3,i=Ht(L),W=Ht(L).attr("id")+"-clock",F=Ht(L).attr("id")+"-shadow",B="#"+W,j=Ht(L).attr("id")+"-clockhands",$=.0174532925,U=Wt(R.secondLabel,H.clockOptions.second.label,!0),J=Wt(R.circleWidth,H.clockOptions.circle.width);let a=new Date,r,s=0,l=Wt(R.shadows,H.clockOptions.shadows,!0),c,d,u,f,p,h,m,g,b,y,v,D,x,C,k,w,T,S,N,A,I,E,M,_,O;J<=0&&(l=!1);const G=function(){return i.width()},Y=function(){return Math.floor(t/2)-2};if(Pt.isDefinedAndNotNull(z)&&Pt.isDefinedAndNotNull(z.startDate))try{var e=Date.parse(z.startDate);s=e-a}catch(t){Rt.debug.error({fct:`${Pt.featureDetails.name} - drawClock`,msg:"Error while try to parse clock date: itemData has to be an iso date. The local time will be used.",err:t,featureDetails:Pt.featureDetails})}const q=function(t){let e="";var i;return Pt.isDefinedAndNotNull(t)&&(i=Rt.locale&&Rt.locale.getLanguage?Rt.locale.getLanguage():void 0,e=t.replace("#date#",V(a)),e=e.replace("#time#",a.toLocaleTimeString(i)),e=Pt.cutString(e,15)),e},n=function(){var t,e=U?1.05:1.2;M=Math.min(G()/2,Y()*e-J/3),A=P.scaleLinear().range([0,330]).domain([0,11]),I=P.scaleLinear().range([0,354]).domain([0,59]),E=P.scaleLinear().range([0,354]).domain([0,59]),c=.35*M,d=.55*M,u=.7*M,f=.7*M,p=.6*M,h=.1*M,m=.51*M,O=.75*M,k=.835*M+J/3,b=Math.max(Math.floor(.12*M),12),y=Math.max(Math.floor(.1*M),9),g=b/2.15,w=y/2.15,x=Math.floor(.13*M),D=.3*M,v=-.3*M+x,C=.03*M*Wt(R.handsCoverSize,H.clockOptions.hands.coverSize),_=[{type:"hour",value:0,length:-c,scale:A},{type:"minute",value:0,length:-d,scale:I},{type:"second",value:0,length:-u,scale:E,balance:30}];const i=function(){a=new Date,a.setMilliseconds(a.getMilliseconds()+s),_[0].value=a.getHours()%12+a.getMinutes()/60,_[1].value=a.getMinutes(),_[2].value=a.getSeconds()};i(),T=T||P.select(L).append("svg").attr("id",W).attr("class","bida-clock-svg"),T.attr("width",G()).attr("height",2*Y()),S||(S=T.append("g").attr("transform","translate("+G()/2+","+Y()+")"),l&&(tt(T,F,2,2,1),r="url(#"+F+")"),S.append("g").append("circle").attr("class","bida-clock-circle").style("filter",r).style("stroke",Wt(R.circleColor,H.clockOptions.circle.color)).style("stroke-width",J+"px").style("fill",Wt(R.circleFillColor,H.clockOptions.circle.fillColor)),S.selectAll(".bida-clock-second-tick").data(P.range(0,60)).enter().append("line").attr("class","bida-clock-second-tick").attr("x1",0).attr("x2",0),S.selectAll(".bida-clock-hour-tick").data(P.range(0,12)).enter().append("line").attr("class","bida-clock-hour-tick").attr("x1",0).attr("x2",0),S.selectAll(".bida-clock-hour-label").data(P.range(3,13,3)).enter().append("text").attr("class","bida-clock-hour-label").attr("text-anchor","middle"),S.append("text").attr("x",0).attr("class","bida-clock-label").attr("text-anchor","middle"),S.append("text").attr("x",0).attr("class","bida-clock-label2").attr("text-anchor","middle"),U&&S.selectAll(".bida-clock-second-label").data(P.range(5,61,5)).enter().append("text").attr("class","bida-clock-second-label").attr("text-anchor","middle")),S.attr("transform","translate("+G()/2+","+Y()+")"),S.selectAll(".bida-clock-circle").attr("x",0).attr("y",0).attr("r",O),S.selectAll(".bida-clock-second-tick").attr("y1",f).attr("y2",f-10).attr("transform",function(t){return"rotate("+E(t)+")"}).style("stroke",Wt(R.secondTickColor,H.clockOptions.second.tickColor)),S.selectAll(".bida-clock-hour-tick").attr("y1",p).attr("y2",p+h).attr("transform",function(t){return"rotate("+A(t)+")"}).style("stroke",Wt(R.hourTickColor,H.clockOptions.hour.tickColor)),S.selectAll(".bida-clock-hour-label").attr("x",function(t){return m*Math.sin(A(t)*$)}).attr("y",function(t){return-m*Math.cos(A(t)*$)+g}).text(function(t){return t}).style("font-size",b+"px").style("fill",Wt(R.hourLabelColor,H.clockOptions.hour.labelColor)),Pt.isDefinedAndNotNull(U)&&S.selectAll(".bida-clock-second-label").attr("x",function(t){return k*Math.sin(E(t)*$)}).attr("y",function(t){return-k*Math.cos(E(t)*$)+w}).text(function(t){return t}).style("font-size",y+"px").style("fill",Wt(R.secondLabelColor,H.clockOptions.second.labelColor)),Pt.isDefinedAndNotNull(z)&&Pt.isDefinedAndNotNull(z.label)&&(t=q(z.label),S.selectAll(".bida-clock-label").text(t).attr("y",v).style("font-size",x+"px").style("fill",Wt(R.labelColor,H.clockOptions.label.labelColor))),Pt.isDefinedAndNotNull(z)&&Pt.isDefinedAndNotNull(z.label2)&&(t=q(z.label2),S.selectAll(".bida-clock-label2").text(t).attr("y",D).style("font-size",x+"px").style("fill",Wt(R.labelColor2,H.clockOptions.label.labelColor2))),N||(N=S.append("g").attr("id",j),S.append("g").append("circle").attr("class","bida-clock-hands-cover"),N.selectAll("line").data(_).enter().append("line")),S.selectAll(".bida-clock-hands-cover").attr("x",0).attr("y",0).attr("r",C).style("fill",Wt(R.handCoverFillColor,H.clockOptions.hands.coverFillColor)).style("stroke",Wt(R.handCoverStrokeColor,H.clockOptions.hands.coverStrokeColor)),N.selectAll("line").data(_).attr("class",function(t){return"bida-clock-"+t.type+"-hand"}).attr("x1",0).attr("y1",function(t){return t.balance||0}).attr("x2",0).attr("y2",function(t){return t.length}).attr("transform",function(t){return"rotate("+t.scale(t.value)+")"}).style("stroke",Wt(R.handColor,H.clockOptions.hands.color));const n=function(){K.innerItemsIntervals&&K.innerItemsIntervals[B]&&clearInterval(K.innerItemsIntervals[B])},o=function(){K.innerItemsIntervals[B]=setInterval(function(){var t;0===Ht(B).length?clearInterval(K.innerItemsIntervals[B]):(i(),N&&N.selectAll("line").data(_).attr("transform",function(t){return"rotate("+t.scale(t.value)+")"}),S&&(Pt.isDefinedAndNotNull(z)&&Pt.isDefinedAndNotNull(z.label)&&(t=q(z.label),S.selectAll(".bida-clock-label").text(t)),Pt.isDefinedAndNotNull(z)&&Pt.isDefinedAndNotNull(z.label2)&&(t=q(z.label2),S.selectAll(".bida-clock-label2").text(t))))},1e3)};n(),o(),document.addEventListener("visibilitychange",function(){(document.hidden?n:o)()})};n(),zt.on("resize",function(){n()})}catch(t){Ht(L).empty(),Pt.errorMessage.show(L,H.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - drawClock`,msg:"Error while try to render clock",err:t,featureDetails:Pt.featureDetails})}}(n,c,a.itemData,s,r):(Pt.errorMessage.show(n,r.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - drawItemRegionContent`,msg:"Feature - Analogue Clocks is not activaed.",featureDetails:Pt.featureDetails}));break;case"calendar":-1<Ht.inArray("calendar",r.features)?function(t,e,i,n,l,o,c){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawCalendar`,pItemSel:t,pItemHeight:e,pItemData:i,pItemConfig:n,pDefaultConfig:l,pOversize:o,pIsSafeItem:c,featureDetails:Pt.featureDetails});const a=Ht(t),r=a.attr("id")+"-calendar",s=Ht("<div></div>");s.addClass("bida-calendar"),s.attr("id",r),a.append(s);var d=Wt(n.eventLimitPerDay,l.calendarOptions.eventLimitPerDay),u=Wt(n.displayTime,l.calendarOptions.displayTime,!0),f=Wt(n.hours12,l.calendarOptions.hours12,!0),t=Wt(n.timeGridStartTime,l.calendarOptions.timeGridStartTime);let p=Wt(n.viewType,l.calendarOptions.viewType),h=Rt.locale&&Rt.locale.getLanguage?Rt.locale.getLanguage():void 0,m=Wt(n.stickyHeaderDates,l.calendarOptions.stickyHeaderDates);"true"===m&&(m=!0);"false"===m&&(m=!1);f||"en"!==h||(h="en-bz");const g={month:"2-digit",year:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:f,locale:h};["dayGridMonth","dayGridWeek","timeGridWeek","listWeek","listMonth","listDay"].indexOf(p)<0&&(p="dayGridMonth");const b=FullCalendar,y=document.getElementById(r),v=new b.Calendar(y,{height:e,events:i,displayEventTime:u,initialView:p,eventDisplay:"block",stickyHeaderDates:m,eventMouseEnter:function(t){t.event&&t.event._def&&((n=t.event._def).extendedProps&&n.extendedProps.link&&Ht(t.el).css("cursor","pointer"));const e=Ht("<div></div>");e.addClass("bida-calendar-event-tt");const i=Ht("<b></b>");i.addClass("bida-calendar-event-tt-title");var n=Ft(t.event.title,l,c,Lt);Pt.isDefinedAndNotNull(n)&&(i.append(n),e.append(i),e.append("<br>"));const o=Ht("<div></div>");o.addClass("bida-calendar-event-tt-subtitle");const a=Ht("<span></span>");a.addClass("fa fa-clock-o"),a.addClass("bida-calendar-event-tt-icon"),o.append(a);const r=Ht("<span></span>");if(r.addClass("bida-calendar-event-tt-date"),r.append(" "),r.append(b.formatDate(t.event.start,g)),Pt.isDefinedAndNotNull(t.event.end)&&(r.append(" - "),r.append(b.formatDate(t.event.end,g))),o.append(r),e.append(o),Pt.isDefinedAndNotNull(t.event.extendedProps.details)){n=Ft(t.event.extendedProps.details,l,c,Lt);if(Pt.isDefinedAndNotNull(n)){const s=Ht("<div></div>");s.addClass("bida-calendar-event-tt-content"),s.append(n),e.append(s)}}Pt.tooltip.show(e),Pt.tooltip.setPosition(t.jsEvent)},eventMouseLeave:function(){Pt.tooltip.hide()},eventClick:function(t){t.jsEvent.preventDefault(),t.event&&t.event._def&&((t=t.event._def).extendedProps&&t.extendedProps.link?Pt.link(t.extendedProps.link,t.extendedProps.linkTarget):t.extendedProps?Pt.link(t.url,t.extendedProps.linkTarget):Pt.link(t.url)),Pt.tooltip.hide()},dayMaxEventRows:d,eventContent:function(t){return{html:Ft(t.event.title,l,c,Lt)}},allDaySlot:!1,nowIndicator:!0,views:{dayGrid:{}},eventTimeFormat:{hour:g.hour,minute:g.minute,hour12:g.hour12},scrollTime:t,slotLabelFormat:{hour:g.hour,minute:g.minute,hour12:g.hour12}});v.setOption("locale",h),v.changeView(p),v.render(),!0!==o&&(s.css("height",e),s.addClass("bida-item-div-overflow"),F(s));zt.on("resize",function(){v.render()})}(n,c,a.itemData,s,r,t,e):(Pt.errorMessage.show(n,r.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - drawItemRegionContent`,msg:"Feature - Calendar is not activaed.",featureDetails:Pt.featureDetails}));break;case"note":-1<Ht.inArray("note",r.features)?function(o,a,t,e,i,r,n,s){Rt.debug.info({fct:`${Pt.featureDetails.name} - drawNoteEditor`,pItemID:o,pItemSel:a,pItemHeight:t,pItemData:e,pItemConfig:i,pDefaultConfig:r,pOversize:n,pIsSafeItem:s,featureDetails:Pt.featureDetails});const l=Ht(a),c=l.attr("id")+"-note",d=Ht("<div></div>");d.addClass("bida-note"),d.attr("id",c),d.css("height",t),l.append(d);const u=c+"-save";function f(){Ht("#"+u).parent().addClass("pell-button-disabled")}const p=[];p.push(`<select class="pell-button-c-select" onchange="$('#${c}').trigger('colorchange', this.value );">`),["#000","#f77272","#f7f772","#8af772","#72aef7","#c672f7"].forEach(function(t){p.push(`<option value="${t}" style="color:${t};">&#9632;</option>`)}),p.push("</select>"),B.init({element:document.getElementById(c),onChange:function(){Ht("#"+u).parent().removeClass("pell-button-disabled")},defaultParagraphSeparator:"p",styleWithCSS:!1,classes:{actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},actions:[{name:"Save",icon:'<i id="'+u+'" class="fa fa-save-as pell-button-c"></i>',title:"Save",result:function(){const t=d.find(".pell-content");Pt.loader.start(a),f();const e=t.html();var i=Pt.splitString2Array(e),n=r.items2Submit;Rt.server.plugin(b,{pageItems:n,x01:"noteUpload",x02:o,f01:i},{dataType:"text",success:function(){Pt.loader.stop(a),zt.trigger("shortnotesaved",{itemID:o,itemSel:a,clob:e}),Rt.debug.info({fct:`${Pt.featureDetails.name} - drawNoteEditor`,msg:"Upload successful.",featureDetails:Pt.featureDetails})},error:function(t,e,i){Pt.loader.stop(a),Rt.message.clearErrors(),Rt.message.showErrors([{type:"error",location:["page"],message:r.errorMessage,unsafe:!1}]),Rt.debug.info({fct:`${Pt.featureDetails.name} - drawNoteEditor`,msg:"Error while try to upload NoteEditor Content",jqXHR:t,textStatus:e,errorThrown:i,featureDetails:Pt.featureDetails})}})}},{name:"Undo",icon:'<i class="fa fa-undo pell-button-c"></i>',title:"Undo",result:function(){B.exec("undo",!0)}},{name:"Redo",icon:'<i class="fa fa-repeat pell-button-c"></i>',title:"Redo",result:function(){B.exec("redo",!0)}},{name:"bold",icon:'<i class="fa fa-bold pell-button-c"></i>',title:"Bold"},{name:"italic",icon:'<i class="fa fa-italic pell-button-c"></i>',title:"Italic"},{name:"underline",icon:'<i class="fa fa-underline pell-button-c"></i>',title:"Underline"},{name:"strikethrough",icon:'<i class="fa fa-strikethrough pell-button-c"></i>',title:"Strikethrough"},{name:"heading1",icon:'<i class="fa fa-header pell-button-c"><sub>1</sub></i>',title:"Heading 1"},{name:"heading2",icon:'<i class="fa fa-header pell-button-c"><sub>2</sub></i>',title:"Heading 2"},{name:"paragraph",icon:'<i class="fa fa-paragraph pell-button-c"></i>'},{name:"olist",icon:'<i class="fa fa-list-ol pell-button-c"></i>',title:"Ordered List"},{name:"ulist",icon:'<i class="fa fa-list-ul pell-button-c"></i>',title:"Unordered List"},{name:"checkbox",icon:'<i class="fa fa-check-square-o pell-button-c"></i>',title:"checkbox",result:function(){B.exec("insertHTML",`<div><i class="fa fa-square-o" onmousedown="$(this).toggleClass(['fa-check-square-o', 'fa-square-o']);"> </i></div>`)}},{name:"resetformat",icon:'<i class="fa fa-eraser pell-button-c"></i>',title:"Remove Format",result:function(){B.exec("removeFormat",!0)}},{name:"highlight",icon:p.join(""),title:"Highlight",result:function(){}}]}),d.on("colorchange",function(t,e){"#000"===e?B.exec("hiliteColor","#fff"):B.exec("hiliteColor",e)});let h;h=e&&"object"==typeof e?e.text:e;h=Ft(h,r,s,Lt);const m=d.find(".pell-content"),g=function(){var t=d.find(".pell-actionbar").height();m.css("height",d.height()-t)};m.html(h),g(),f(),d.find(".pell-button").removeAttr("title"),zt.on("resize",function(){g()})}(a.itemID,n,c,a.itemData,s,r,t,e):(Pt.errorMessage.show(n,r.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - drawItemRegionContent`,msg:"Feature - Editor is not activaed.",featureDetails:Pt.featureDetails}));break;default:Pt.errorMessage.show(n,r.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - drawItemRegionContent`,msg:"itemType not found (html, card, list, map, table, clock, calendar, calendarheatmap)",featureDetails:Pt.featureDetails})}else Pt.noDataMessage.show(n,r.noDataMessage);if(Pt.isDefinedAndNotNull(a.subText2)){const g=Ht(n).find(".bida-item-subtext-2");g.appendTo(n),g.addClass("bida-item-subtext-2-fin")}}else Pt.errorMessage.show(n,r.errorMessage),Rt.debug.error({fct:`${Pt.featureDetails.name} - drawItemRegionContent`,msg:"itemType is missing in JSON",featureDetails:Pt.featureDetails})}function F(t){const e=Ht(t);e.addClass("bida-item-div-overflow"),e.on("scroll",function(){e.scrollTop()+e.innerHeight()>=e[0].scrollHeight?e.addClass("bida-item-div-overflow-hidden"):e.removeClass("bida-item-div-overflow-hidden")});var i=e.innerHeight(),t=e[0].scrollHeight;Rt.debug.info({fct:`${Pt.featureDetails.name} - overFlowStyling`,innerHeight:i,scrollHeight:t,featureDetails:Pt.featureDetails}),t<=i&&0!==t&&e.addClass("bida-item-div-overflow-hidden")}}}};